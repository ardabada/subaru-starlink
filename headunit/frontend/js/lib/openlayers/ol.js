'use strict'; function _createForOfIteratorHelper(o, allowArrayLike) {
  var it=typeof Symbol!=='undefined'&&o[Symbol.iterator]||o['@@iterator']; if (!it) {
    if (Array.isArray(o)||(it=_unsupportedIterableToArray(o))||allowArrayLike&&o&&typeof o.length==='number') {
      if (it)o=it; var i=0; var F=function F() {}; return {s: F, n: function n() {
        if (i>=o.length) return {done: true}; return {done: false, value: o[i++]};
      }, e: function e(_e444) {
        throw _e444;
      }, f: F};
    } throw new TypeError('Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.');
  } var normalCompletion=true; var didErr=false; var err; return {s: function s() {
    it=it.call(o);
  }, n: function n() {
    var step=it.next(); normalCompletion=step.done; return step;
  }, e: function e(_e445) {
    didErr=true; err=_e445;
  }, f: function f() {
    try {
      if (!normalCompletion&&it['return']!=null)it['return']();
    } finally {
      if (didErr) throw err;
    }
  }};
} function _regeneratorRuntime() {
  'use strict'; /* ! regenerator-runtime -- Copyright (c) 2014-present, Facebook, Inc. -- license (MIT): https://github.com/facebook/regenerator/blob/main/LICENSE */_regeneratorRuntime=function _regeneratorRuntime() {
    return exports;
  }; var exports={}; var Op=Object.prototype; var hasOwn=Op.hasOwnProperty; var defineProperty=Object.defineProperty||function(obj, key, desc) {
    obj[key]=desc.value;
  }; var $Symbol='function'==typeof Symbol?Symbol:{}; var iteratorSymbol=$Symbol.iterator||'@@iterator'; var asyncIteratorSymbol=$Symbol.asyncIterator||'@@asyncIterator'; var toStringTagSymbol=$Symbol.toStringTag||'@@toStringTag'; function define(obj, key, value) {
    return Object.defineProperty(obj, key, {value: value, enumerable: !0, configurable: !0, writable: !0}), obj[key];
  } try {
    define({}, '');
  } catch (err) {
    define=function define(obj, key, value) {
      return obj[key]=value;
    };
  } function wrap(innerFn, outerFn, self, tryLocsList) {
    var protoGenerator=outerFn&&outerFn.prototype instanceof Generator?outerFn:Generator; var generator=Object.create(protoGenerator.prototype); var context=new Context(tryLocsList||[]); return defineProperty(generator, '_invoke', {value: makeInvokeMethod(innerFn, self, context)}), generator;
  } function tryCatch(fn, obj, arg) {
    try {
      return {type: 'normal', arg: fn.call(obj, arg)};
    } catch (err) {
      return {type: 'throw', arg: err};
    }
  }exports.wrap=wrap; var ContinueSentinel={}; function Generator() {} function GeneratorFunction() {} function GeneratorFunctionPrototype() {} var IteratorPrototype={}; define(IteratorPrototype, iteratorSymbol, function() {
    return this;
  }); var getProto=Object.getPrototypeOf; var NativeIteratorPrototype=getProto&&getProto(getProto(values([]))); NativeIteratorPrototype&&NativeIteratorPrototype!==Op&&hasOwn.call(NativeIteratorPrototype, iteratorSymbol)&&(IteratorPrototype=NativeIteratorPrototype); var Gp=GeneratorFunctionPrototype.prototype=Generator.prototype=Object.create(IteratorPrototype); function defineIteratorMethods(prototype) {
    ['next', 'throw', 'return'].forEach(function(method) {
      define(prototype, method, function(arg) {
        return this._invoke(method, arg);
      });
    });
  } function AsyncIterator(generator, PromiseImpl) {
    function invoke(method, arg, resolve, reject) {
      var record=tryCatch(generator[method], generator, arg); if ('throw'!==record.type) {
        var result=record.arg; var value=result.value; return value&&'object'==_typeof(value)&&hasOwn.call(value, '__await')?PromiseImpl.resolve(value.__await).then(function(value) {
          invoke('next', value, resolve, reject);
        }, function(err) {
          invoke('throw', err, resolve, reject);
        }):PromiseImpl.resolve(value).then(function(unwrapped) {
          result.value=unwrapped, resolve(result);
        }, function(error) {
          return invoke('throw', error, resolve, reject);
        });
      }reject(record.arg);
    } var previousPromise; defineProperty(this, '_invoke', {value: function value(method, arg) {
      function callInvokeWithMethodAndArg() {
        return new PromiseImpl(function(resolve, reject) {
          invoke(method, arg, resolve, reject);
        });
      } return previousPromise=previousPromise?previousPromise.then(callInvokeWithMethodAndArg, callInvokeWithMethodAndArg):callInvokeWithMethodAndArg();
    }});
  } function makeInvokeMethod(innerFn, self, context) {
    var state='suspendedStart'; return function(method, arg) {
      if ('executing'===state) throw new Error('Generator is already running'); if ('completed'===state) {
        if ('throw'===method) throw arg; return doneResult();
      } for (context.method=method, context.arg=arg; ;) {
        var delegate=context.delegate; if (delegate) {
          var delegateResult=maybeInvokeDelegate(delegate, context); if (delegateResult) {
            if (delegateResult===ContinueSentinel) continue; return delegateResult;
          }
        } if ('next'===context.method)context.sent=context._sent=context.arg; else if ('throw'===context.method) {
          if ('suspendedStart'===state) throw state='completed', context.arg; context.dispatchException(context.arg);
        } else 'return'===context.method&&context.abrupt('return', context.arg); state='executing'; var record=tryCatch(innerFn, self, context); if ('normal'===record.type) {
          if (state=context.done?'completed':'suspendedYield', record.arg===ContinueSentinel) continue; return {value: record.arg, done: context.done};
        }'throw'===record.type&&(state='completed', context.method='throw', context.arg=record.arg);
      }
    };
  } function maybeInvokeDelegate(delegate, context) {
    var methodName=context.method; var method=delegate.iterator[methodName]; if (undefined===method) return context.delegate=null, 'throw'===methodName&&delegate.iterator['return']&&(context.method='return', context.arg=undefined, maybeInvokeDelegate(delegate, context), 'throw'===context.method)||'return'!==methodName&&(context.method='throw', context.arg=new TypeError('The iterator does not provide a \''+methodName+'\' method')), ContinueSentinel; var record=tryCatch(method, delegate.iterator, context.arg); if ('throw'===record.type) return context.method='throw', context.arg=record.arg, context.delegate=null, ContinueSentinel; var info=record.arg; return info?info.done?(context[delegate.resultName]=info.value, context.next=delegate.nextLoc, 'return'!==context.method&&(context.method='next', context.arg=undefined), context.delegate=null, ContinueSentinel):info:(context.method='throw', context.arg=new TypeError('iterator result is not an object'), context.delegate=null, ContinueSentinel);
  } function pushTryEntry(locs) {
    var entry={tryLoc: locs[0]}; 1 in locs&&(entry.catchLoc=locs[1]), 2 in locs&&(entry.finallyLoc=locs[2], entry.afterLoc=locs[3]), this.tryEntries.push(entry);
  } function resetTryEntry(entry) {
    var record=entry.completion||{}; record.type='normal', delete record.arg, entry.completion=record;
  } function Context(tryLocsList) {
    this.tryEntries=[{tryLoc: 'root'}], tryLocsList.forEach(pushTryEntry, this), this.reset(!0);
  } function values(iterable) {
    if (iterable) {
      var iteratorMethod=iterable[iteratorSymbol]; if (iteratorMethod) return iteratorMethod.call(iterable); if ('function'==typeof iterable.next) return iterable; if (!isNaN(iterable.length)) {
        var i=-1; var next=function next() {
          for (;++i<iterable.length;) if (hasOwn.call(iterable, i)) return next.value=iterable[i], next.done=!1, next; return next.value=undefined, next.done=!0, next;
        }; return next.next=next;
      }
    } return {next: doneResult};
  } function doneResult() {
    return {value: undefined, done: !0};
  } return GeneratorFunction.prototype=GeneratorFunctionPrototype, defineProperty(Gp, 'constructor', {value: GeneratorFunctionPrototype, configurable: !0}), defineProperty(GeneratorFunctionPrototype, 'constructor', {value: GeneratorFunction, configurable: !0}), GeneratorFunction.displayName=define(GeneratorFunctionPrototype, toStringTagSymbol, 'GeneratorFunction'), exports.isGeneratorFunction=function(genFun) {
    var ctor='function'==typeof genFun&&genFun.constructor; return !!ctor&&(ctor===GeneratorFunction||'GeneratorFunction'===(ctor.displayName||ctor.name));
  }, exports.mark=function(genFun) {
    return Object.setPrototypeOf?Object.setPrototypeOf(genFun, GeneratorFunctionPrototype):(genFun.__proto__=GeneratorFunctionPrototype, define(genFun, toStringTagSymbol, 'GeneratorFunction')), genFun.prototype=Object.create(Gp), genFun;
  }, exports.awrap=function(arg) {
    return {__await: arg};
  }, defineIteratorMethods(AsyncIterator.prototype), define(AsyncIterator.prototype, asyncIteratorSymbol, function() {
    return this;
  }), exports.AsyncIterator=AsyncIterator, exports.async=function(innerFn, outerFn, self, tryLocsList, PromiseImpl) {
    void 0===PromiseImpl&&(PromiseImpl=Promise); var iter=new AsyncIterator(wrap(innerFn, outerFn, self, tryLocsList), PromiseImpl); return exports.isGeneratorFunction(outerFn)?iter:iter.next().then(function(result) {
      return result.done?result.value:iter.next();
    });
  }, defineIteratorMethods(Gp), define(Gp, toStringTagSymbol, 'Generator'), define(Gp, iteratorSymbol, function() {
    return this;
  }), define(Gp, 'toString', function() {
    return '[object Generator]';
  }), exports.keys=function(val) {
    var object=Object(val); var keys=[]; for (var key in object)keys.push(key); return keys.reverse(), function next() {
      for (;keys.length;) {
        var key=keys.pop(); if (key in object) return next.value=key, next.done=!1, next;
      } return next.done=!0, next;
    };
  }, exports.values=values, Context.prototype={'constructor': Context, 'reset': function reset(skipTempReset) {
    if (this.prev=0, this.next=0, this.sent=this._sent=undefined, this.done=!1, this.delegate=null, this.method='next', this.arg=undefined, this.tryEntries.forEach(resetTryEntry), !skipTempReset) for (var name in this)'t'===name.charAt(0)&&hasOwn.call(this, name)&&!isNaN(+name.slice(1))&&(this[name]=undefined);
  }, 'stop': function stop() {
    this.done=!0; var rootRecord=this.tryEntries[0].completion; if ('throw'===rootRecord.type) throw rootRecord.arg; return this.rval;
  }, 'dispatchException': function dispatchException(exception) {
    if (this.done) throw exception; var context=this; function handle(loc, caught) {
      return record.type='throw', record.arg=exception, context.next=loc, caught&&(context.method='next', context.arg=undefined), !!caught;
    } for (var i=this.tryEntries.length-1; i>=0; --i) {
      var entry=this.tryEntries[i]; var record=entry.completion; if ('root'===entry.tryLoc) return handle('end'); if (entry.tryLoc<=this.prev) {
        var hasCatch=hasOwn.call(entry, 'catchLoc'); var hasFinally=hasOwn.call(entry, 'finallyLoc'); if (hasCatch&&hasFinally) {
          if (this.prev<entry.catchLoc) return handle(entry.catchLoc, !0); if (this.prev<entry.finallyLoc) return handle(entry.finallyLoc);
        } else if (hasCatch) {
          if (this.prev<entry.catchLoc) return handle(entry.catchLoc, !0);
        } else {
          if (!hasFinally) throw new Error('try statement without catch or finally'); if (this.prev<entry.finallyLoc) return handle(entry.finallyLoc);
        }
      }
    }
  }, 'abrupt': function abrupt(type, arg) {
    for (var i=this.tryEntries.length-1; i>=0; --i) {
      var entry=this.tryEntries[i]; if (entry.tryLoc<=this.prev&&hasOwn.call(entry, 'finallyLoc')&&this.prev<entry.finallyLoc) {
        var finallyEntry=entry; break;
      }
    }finallyEntry&&('break'===type||'continue'===type)&&finallyEntry.tryLoc<=arg&&arg<=finallyEntry.finallyLoc&&(finallyEntry=null); var record=finallyEntry?finallyEntry.completion:{}; return record.type=type, record.arg=arg, finallyEntry?(this.method='next', this.next=finallyEntry.finallyLoc, ContinueSentinel):this.complete(record);
  }, 'complete': function complete(record, afterLoc) {
    if ('throw'===record.type) throw record.arg; return 'break'===record.type||'continue'===record.type?this.next=record.arg:'return'===record.type?(this.rval=this.arg=record.arg, this.method='return', this.next='end'):'normal'===record.type&&afterLoc&&(this.next=afterLoc), ContinueSentinel;
  }, 'finish': function finish(finallyLoc) {
    for (var i=this.tryEntries.length-1; i>=0; --i) {
      var entry=this.tryEntries[i]; if (entry.finallyLoc===finallyLoc) return this.complete(entry.completion, entry.afterLoc), resetTryEntry(entry), ContinueSentinel;
    }
  }, 'catch': function _catch(tryLoc) {
    for (var i=this.tryEntries.length-1; i>=0; --i) {
      var entry=this.tryEntries[i]; if (entry.tryLoc===tryLoc) {
        var record=entry.completion; if ('throw'===record.type) {
          var thrown=record.arg; resetTryEntry(entry);
        } return thrown;
      }
    } throw new Error('illegal catch attempt');
  }, 'delegateYield': function delegateYield(iterable, resultName, nextLoc) {
    return this.delegate={iterator: values(iterable), resultName: resultName, nextLoc: nextLoc}, 'next'===this.method&&(this.arg=undefined), ContinueSentinel;
  }}, exports;
} function asyncGeneratorStep(gen, resolve, reject, _next, _throw, key, arg) {
  try {
    var info=gen[key](arg); var value=info.value;
  } catch (error) {
    reject(error); return;
  } if (info.done) {
    resolve(value);
  } else {
    Promise.resolve(value).then(_next, _throw);
  }
} function _asyncToGenerator(fn) {
  return function() {
    var self=this; var args=arguments; return new Promise(function(resolve, reject) {
      var gen=fn.apply(self, args); function _next(value) {
        asyncGeneratorStep(gen, resolve, reject, _next, _throw, 'next', value);
      } function _throw(err) {
        asyncGeneratorStep(gen, resolve, reject, _next, _throw, 'throw', err);
      }_next(undefined);
    });
  };
} function ownKeys(object, enumerableOnly) {
  var keys=Object.keys(object); if (Object.getOwnPropertySymbols) {
    var symbols=Object.getOwnPropertySymbols(object); enumerableOnly&&(symbols=symbols.filter(function(sym) {
      return Object.getOwnPropertyDescriptor(object, sym).enumerable;
    })), keys.push.apply(keys, symbols);
  } return keys;
} function _objectSpread(target) {
  for (var i=1; i<arguments.length; i++) {
    var source=null!=arguments[i]?arguments[i]:{}; i%2?ownKeys(Object(source), !0).forEach(function(key) {
      _defineProperty(target, key, source[key]);
    }):Object.getOwnPropertyDescriptors?Object.defineProperties(target, Object.getOwnPropertyDescriptors(source)):ownKeys(Object(source)).forEach(function(key) {
      Object.defineProperty(target, key, Object.getOwnPropertyDescriptor(source, key));
    });
  } return target;
} function _defineProperty(obj, key, value) {
  key=_toPropertyKey(key); if (key in obj) {
    Object.defineProperty(obj, key, {value: value, enumerable: true, configurable: true, writable: true});
  } else {
    obj[key]=value;
  } return obj;
} function _toConsumableArray(arr) {
  return _arrayWithoutHoles(arr)||_iterableToArray(arr)||_unsupportedIterableToArray(arr)||_nonIterableSpread();
} function _nonIterableSpread() {
  throw new TypeError('Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.');
} function _iterableToArray(iter) {
  if (typeof Symbol!=='undefined'&&iter[Symbol.iterator]!=null||iter['@@iterator']!=null) return Array.from(iter);
} function _arrayWithoutHoles(arr) {
  if (Array.isArray(arr)) return _arrayLikeToArray(arr);
} function _typeof(obj) {
  '@babel/helpers - typeof'; return _typeof='function'==typeof Symbol&&'symbol'==typeof Symbol.iterator?function(obj) {
    return typeof obj;
  }:function(obj) {
    return obj&&'function'==typeof Symbol&&obj.constructor===Symbol&&obj!==Symbol.prototype?'symbol':typeof obj;
  }, _typeof(obj);
} function _get() {
  if (typeof Reflect!=='undefined'&&Reflect.get) {
    _get=Reflect.get.bind();
  } else {
    _get=function _get(target, property, receiver) {
      var base=_superPropBase(target, property); if (!base) return; var desc=Object.getOwnPropertyDescriptor(base, property); if (desc.get) {
        return desc.get.call(arguments.length<3?target:receiver);
      } return desc.value;
    };
  } return _get.apply(this, arguments);
} function _superPropBase(object, property) {
  while (!Object.prototype.hasOwnProperty.call(object, property)) {
    object=_getPrototypeOf(object); if (object===null) break;
  } return object;
} function _slicedToArray(arr, i) {
  return _arrayWithHoles(arr)||_iterableToArrayLimit(arr, i)||_unsupportedIterableToArray(arr, i)||_nonIterableRest();
} function _nonIterableRest() {
  throw new TypeError('Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.');
} function _unsupportedIterableToArray(o, minLen) {
  if (!o) return; if (typeof o==='string') return _arrayLikeToArray(o, minLen); var n=Object.prototype.toString.call(o).slice(8, -1); if (n==='Object'&&o.constructor)n=o.constructor.name; if (n==='Map'||n==='Set') return Array.from(o); if (n==='Arguments'||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)) return _arrayLikeToArray(o, minLen);
} function _arrayLikeToArray(arr, len) {
  if (len==null||len>arr.length)len=arr.length; for (var i=0, arr2=new Array(len); i<len; i++)arr2[i]=arr[i]; return arr2;
} function _iterableToArrayLimit(arr, i) {
  var _i=null==arr?null:'undefined'!=typeof Symbol&&arr[Symbol.iterator]||arr['@@iterator']; if (null!=_i) {
    var _s; var _e; var _x; var _r; var _arr=[]; var _n=!0; var _d=!1; try {
      if (_x=(_i=_i.call(arr)).next, 0===i) {
        if (Object(_i)!==_i) return; _n=!1;
      } else for (;!(_n=(_s=_x.call(_i)).done)&&(_arr.push(_s.value), _arr.length!==i); _n=!0);
    } catch (err) {
      _d=!0, _e=err;
    } finally {
      try {
        if (!_n&&null!=_i['return']&&(_r=_i['return'](), Object(_r)!==_r)) return;
      } finally {
        if (_d) throw _e;
      }
    } return _arr;
  }
} function _arrayWithHoles(arr) {
  if (Array.isArray(arr)) return arr;
} function _defineProperties(target, props) {
  for (var i=0; i<props.length; i++) {
    var descriptor=props[i]; descriptor.enumerable=descriptor.enumerable||false; descriptor.configurable=true; if ('value'in descriptor)descriptor.writable=true; Object.defineProperty(target, _toPropertyKey(descriptor.key), descriptor);
  }
} function _createClass(Constructor, protoProps, staticProps) {
  if (protoProps)_defineProperties(Constructor.prototype, protoProps); if (staticProps)_defineProperties(Constructor, staticProps); Object.defineProperty(Constructor, 'prototype', {writable: false}); return Constructor;
} function _toPropertyKey(arg) {
  var key=_toPrimitive(arg, 'string'); return _typeof(key)==='symbol'?key:String(key);
} function _toPrimitive(input, hint) {
  if (_typeof(input)!=='object'||input===null) return input; var prim=input[Symbol.toPrimitive]; if (prim!==undefined) {
    var res=prim.call(input, hint||'default'); if (_typeof(res)!=='object') return res; throw new TypeError('@@toPrimitive must return a primitive value.');
  } return (hint==='string'?String:Number)(input);
} function _classCallCheck(instance, Constructor) {
  if (!(instance instanceof Constructor)) {
    throw new TypeError('Cannot call a class as a function');
  }
} function _inherits(subClass, superClass) {
  if (typeof superClass!=='function'&&superClass!==null) {
    throw new TypeError('Super expression must either be null or a function');
  }subClass.prototype=Object.create(superClass&&superClass.prototype, {constructor: {value: subClass, writable: true, configurable: true}}); Object.defineProperty(subClass, 'prototype', {writable: false}); if (superClass)_setPrototypeOf(subClass, superClass);
} function _createSuper(Derived) {
  var hasNativeReflectConstruct=_isNativeReflectConstruct(); return function _createSuperInternal() {
    var Super=_getPrototypeOf(Derived); var result; if (hasNativeReflectConstruct) {
      var NewTarget=_getPrototypeOf(this).constructor; result=Reflect.construct(Super, arguments, NewTarget);
    } else {
      result=Super.apply(this, arguments);
    } return _possibleConstructorReturn(this, result);
  };
} function _possibleConstructorReturn(self, call) {
  if (call&&(_typeof(call)==='object'||typeof call==='function')) {
    return call;
  } else if (call!==void 0) {
    throw new TypeError('Derived constructors may only return object or undefined');
  } return _assertThisInitialized(self);
} function _assertThisInitialized(self) {
  if (self===void 0) {
    throw new ReferenceError('this hasn\'t been initialised - super() hasn\'t been called');
  } return self;
} function _wrapNativeSuper(Class) {
  var _cache=typeof Map==='function'?new Map():undefined; _wrapNativeSuper=function _wrapNativeSuper(Class) {
    if (Class===null||!_isNativeFunction(Class)) return Class; if (typeof Class!=='function') {
      throw new TypeError('Super expression must either be null or a function');
    } if (typeof _cache!=='undefined') {
      if (_cache.has(Class)) return _cache.get(Class); _cache.set(Class, Wrapper);
    } function Wrapper() {
      return _construct(Class, arguments, _getPrototypeOf(this).constructor);
    }Wrapper.prototype=Object.create(Class.prototype, {constructor: {value: Wrapper, enumerable: false, writable: true, configurable: true}}); return _setPrototypeOf(Wrapper, Class);
  }; return _wrapNativeSuper(Class);
} function _construct(Parent, args, Class) {
  if (_isNativeReflectConstruct()) {
    _construct=Reflect.construct.bind();
  } else {
    _construct=function _construct(Parent, args, Class) {
      var a=[null]; a.push.apply(a, args); var Constructor=Function.bind.apply(Parent, a); var instance=new Constructor(); if (Class)_setPrototypeOf(instance, Class.prototype); return instance;
    };
  } return _construct.apply(null, arguments);
} function _isNativeReflectConstruct() {
  if (typeof Reflect==='undefined'||!Reflect.construct) return false; if (Reflect.construct.sham) return false; if (typeof Proxy==='function') return true; try {
    Boolean.prototype.valueOf.call(Reflect.construct(Boolean, [], function() {})); return true;
  } catch (e) {
    return false;
  }
} function _isNativeFunction(fn) {
  return Function.toString.call(fn).indexOf('[native code]')!==-1;
} function _setPrototypeOf(o, p) {
  _setPrototypeOf=Object.setPrototypeOf?Object.setPrototypeOf.bind():function _setPrototypeOf(o, p) {
    o.__proto__=p; return o;
  }; return _setPrototypeOf(o, p);
} function _getPrototypeOf(o) {
  _getPrototypeOf=Object.setPrototypeOf?Object.getPrototypeOf.bind():function _getPrototypeOf(o) {
    return o.__proto__||Object.getPrototypeOf(o);
  }; return _getPrototypeOf(o);
} var ol=function() {
  'use strict'; var t={1: 'The view center is not defined', 2: 'The view resolution is not defined', 3: 'The view rotation is not defined', 4: '`image` and `src` cannot be provided at the same time', 5: '`imgSize` must be set when `image` is provided', 7: '`format` must be set when `url` is set', 8: 'Unknown `serverType` configured', 9: '`url` must be configured or set using `#setUrl()`', 10: 'The default `geometryFunction` can only handle `Point` geometries', 11: '`options.featureTypes` must be an Array', 12: '`options.geometryName` must also be provided when `options.bbox` is set', 13: 'Invalid corner', 14: 'Invalid color', 15: 'Tried to get a value for a key that does not exist in the cache', 16: 'Tried to set a value for a key that is used already', 17: '`resolutions` must be sorted in descending order', 18: 'Either `origin` or `origins` must be configured, never both', 19: 'Number of `tileSizes` and `resolutions` must be equal', 20: 'Number of `origins` and `resolutions` must be equal', 22: 'Either `tileSize` or `tileSizes` must be configured, never both', 24: 'Invalid extent or geometry provided as `geometry`', 25: 'Cannot fit empty extent provided as `geometry`', 26: 'Features must have an id set', 27: 'Features must have an id set', 28: '`renderMode` must be `"hybrid"` or `"vector"`', 30: 'The passed `feature` was already added to the source', 31: 'Tried to enqueue an `element` that was already added to the queue', 32: 'Transformation matrix cannot be inverted', 33: 'Invalid units', 34: 'Invalid geometry layout', 36: 'Unknown SRS type', 37: 'Unknown geometry type found', 38: '`styleMapValue` has an unknown type', 39: 'Unknown geometry type', 40: 'Expected `feature` to have a geometry', 41: 'Expected an `ol/style/Style` or an array of `ol/style/Style.js`', 42: 'Question unknown, the answer is 42', 43: 'Expected `layers` to be an array or a `Collection`', 47: 'Expected `controls` to be an array or an `ol/Collection`', 48: 'Expected `interactions` to be an array or an `ol/Collection`', 49: 'Expected `overlays` to be an array or an `ol/Collection`', 50: '`options.featureTypes` should be an Array', 51: 'Either `url` or `tileJSON` options must be provided', 52: 'Unknown `serverType` configured', 53: 'Unknown `tierSizeCalculation` configured', 55: 'The {-y} placeholder requires a tile grid with extent', 56: 'mapBrowserEvent must originate from a pointer event', 57: 'At least 2 conditions are required', 59: 'Invalid command found in the PBF', 60: 'Missing or invalid `size`', 61: 'Cannot determine IIIF Image API version from provided image information JSON', 62: 'A `WebGLArrayBuffer` must either be of type `ELEMENT_ARRAY_BUFFER` or `ARRAY_BUFFER`', 64: 'Layer opacity must be a number', 66: '`forEachFeatureAtCoordinate` cannot be used on a WebGL layer if the hit detection logic has not been enabled. This is done by providing adequate shaders using the `hitVertexShader` and `hitFragmentShader` properties of `WebGLPointsLayerRenderer`', 67: 'A layer can only be added to the map once. Use either `layer.setMap()` or `map.addLayer()`, not both', 68: 'A VectorTile source can only be rendered if it has a projection compatible with the view projection', 69: '`width` or `height` cannot be provided together with `scale`'}; var e=/* #__PURE__*/function(_Error) {
    _inherits(e, _Error); var _super=_createSuper(e); function e(_e2) {
      var _this; _classCallCheck(this, e); var i=t[_e2]; _this=_super.call(this, i), _this.code=_e2, _this.name='AssertionError', _this.message=i; return _this;
    } return _createClass(e);
  }(/* #__PURE__*/_wrapNativeSuper(Error)); var i=e; function n(t) {
    t.stopPropagation();
  } var r=/* #__PURE__*/function() {
    function r(t) {
      _classCallCheck(this, r); this.propagationStopped, this.defaultPrevented, this.type=t, this.target=null;
    }_createClass(r, [{key: 'preventDefault', value: function preventDefault() {
      this.defaultPrevented=!0;
    }}, {key: 'stopPropagation', value: function stopPropagation() {
      this.propagationStopped=!0;
    }}]); return r;
  }(); var s='propertychange'; var o=/* #__PURE__*/function() {
    function o() {
      _classCallCheck(this, o); this.disposed=!1;
    }_createClass(o, [{key: 'dispose', value: function dispose() {
      this.disposed||(this.disposed=!0, this.disposeInternal());
    }}, {key: 'disposeInternal', value: function disposeInternal() {}}]); return o;
  }(); function a(t, e, i) {
    var n; var r; i=i||l; var s=0; var o=t.length; var a=!1; for (;s<o;)n=s+(o-s>>1), r=+i(t[n], e), r<0?s=n+1:(o=n, a=!r); return a?s:~s;
  } function l(t, e) {
    return t>e?1:t<e?-1:0;
  } function h(t, e, i) {
    var n=t.length; if (t[0]<=e) return 0; if (e<=t[n-1]) return n-1; var r; if (i>0) {
      for (r=1; r<n; ++r) if (t[r]<e) return r-1;
    } else if (i<0) {
      for (r=1; r<n; ++r) if (t[r]<=e) return r;
    } else {
      for (r=1; r<n; ++r) {
        if (t[r]==e) return r; if (t[r]<e) return 'function'==typeof i?i(e, t[r-1], t[r])>0?r-1:r:t[r-1]-e<e-t[r]?r-1:r;
      }
    } return n-1;
  } function c(t, e, i) {
    for (;e<i;) {
      var _n2=t[e]; t[e]=t[i], t[i]=_n2, ++e, --i;
    }
  } function u(t, e) {
    var i=Array.isArray(e)?e:[e]; var n=i.length; for (var _e3=0; _e3<n; _e3++)t[t.length]=i[_e3];
  } function d(t, e) {
    var i=t.length; if (i!==e.length) return !1; for (var _n3=0; _n3<i; _n3++) if (t[_n3]!==e[_n3]) return !1; return !0;
  } function g(t, e, i) {
    var n=e||l; return t.every(function(e, r) {
      if (0===r) return !0; var s=n(t[r-1], e); return !(s>0||i&&0===s);
    });
  } function f() {
    return !0;
  } function p() {
    return !1;
  } function m() {} function _(t) {
    var e; var i; var n; var r=!1; return function() {
      var s=Array.prototype.slice.call(arguments); return r&&this===n&&d(s, i)||(r=!0, n=this, i=s, e=t.apply(this, arguments)), e;
    };
  } function y(t) {
    return function() {
      var e; try {
        e=t();
      } catch (t) {
        return Promise.reject(t);
      } return e instanceof Promise?e:Promise.resolve(e);
    }();
  } function x(t) {
    for (var _e4 in t) delete t[_e4];
  } function v(t) {
    var e; for (e in t) return !1; return !e;
  } var S=/* #__PURE__*/function(_o2) {
    _inherits(S, _o2); var _super2=_createSuper(S); function S(t) {
      var _this2; _classCallCheck(this, S); _this2=_super2.call(this), _this2.eventTarget_=t, _this2.pendingRemovals_=null, _this2.dispatching_=null, _this2.listeners_=null; return _this2;
    }_createClass(S, [{key: 'addEventListener', value: function addEventListener(t, e) {
      if (!t||!e) return; var i=this.listeners_||(this.listeners_={}); var n=i[t]||(i[t]=[]); n.includes(e)||n.push(e);
    }}, {key: 'dispatchEvent', value: function dispatchEvent(t) {
      var e='string'==typeof t; var i=e?t:t.type; var n=this.listeners_&&this.listeners_[i]; if (!n) return; var s=e?new r(t):t; s.target||(s.target=this.eventTarget_||this); var o=this.dispatching_||(this.dispatching_={}); var a=this.pendingRemovals_||(this.pendingRemovals_={}); var l; i in o||(o[i]=0, a[i]=0), ++o[i]; for (var _t2=0, _e5=n.length; _t2<_e5; ++_t2) {
        if (l='handleEvent'in n[_t2]?n[_t2].handleEvent(s):n[_t2].call(this, s), !1===l||s.propagationStopped) {
          l=!1; break;
        }
      } if (0==--o[i]) {
        var _t3=a[i]; for (delete a[i]; _t3--;) this.removeEventListener(i, m); delete o[i];
      } return l;
    }}, {key: 'disposeInternal', value: function disposeInternal() {
      this.listeners_&&x(this.listeners_);
    }}, {key: 'getListeners', value: function getListeners(t) {
      return this.listeners_&&this.listeners_[t]||void 0;
    }}, {key: 'hasListener', value: function hasListener(t) {
      return !!this.listeners_&&(t?t in this.listeners_:Object.keys(this.listeners_).length>0);
    }}, {key: 'removeEventListener', value: function removeEventListener(t, e) {
      var i=this.listeners_&&this.listeners_[t]; if (i) {
        var _n4=i.indexOf(e); -1!==_n4&&(this.pendingRemovals_&&t in this.pendingRemovals_?(i[_n4]=m, ++this.pendingRemovals_[t]):(i.splice(_n4, 1), 0===i.length&&delete this.listeners_[t]));
      }
    }}]); return S;
  }(o); var w='change'; var T='error'; var E='contextmenu'; var C='click'; var R='dblclick'; var b='dragenter'; var P='dragover'; var I='drop'; var L='keydown'; var F='keypress'; var M='load'; var A='touchmove'; var O='wheel'; function N(t, e, _i2, n, r) {
    if (n&&n!==t&&(_i2=_i2.bind(n)), r) {
      var _n5=_i2; _i2=function i() {
        t.removeEventListener(e, _i2), _n5.apply(this, arguments);
      };
    } var s={target: t, type: e, listener: _i2}; return t.addEventListener(e, _i2), s;
  } function D(t, e, i, n) {
    return N(t, e, i, n, !0);
  } function G(t) {
    t&&t.target&&(t.target.removeEventListener(t.type, t.listener), x(t));
  } var k=/* #__PURE__*/function(_S2) {
    _inherits(k, _S2); var _super3=_createSuper(k); function k() {
      var _this3; _classCallCheck(this, k); _this3=_super3.call(this), _this3.on=_this3.onInternal, _this3.once=_this3.onceInternal, _this3.un=_this3.unInternal, _this3.revision_=0; return _this3;
    }_createClass(k, [{key: 'changed', value: function changed() {
      ++this.revision_, this.dispatchEvent(w);
    }}, {key: 'getRevision', value: function getRevision() {
      return this.revision_;
    }}, {key: 'onInternal', value: function onInternal(t, e) {
      if (Array.isArray(t)) {
        var _i3=t.length; var _n6=new Array(_i3); for (var _r2=0; _r2<_i3; ++_r2)_n6[_r2]=N(this, t[_r2], e); return _n6;
      } return N(this, t, e);
    }}, {key: 'onceInternal', value: function onceInternal(t, e) {
      var i; if (Array.isArray(t)) {
        var _n7=t.length; i=new Array(_n7); for (var _r3=0; _r3<_n7; ++_r3)i[_r3]=D(this, t[_r3], e);
      } else i=D(this, t, e); return e.ol_key=i, i;
    }}, {key: 'unInternal', value: function unInternal(t, e) {
      var i=e.ol_key; if (i)j(i); else if (Array.isArray(t)) for (var _i4=0, _n8=t.length; _i4<_n8; ++_i4) this.removeEventListener(t[_i4], e); else this.removeEventListener(t, e);
    }}]); return k;
  }(S); function j(t) {
    if (Array.isArray(t)) for (var _e6=0, _i5=t.length; _e6<_i5; ++_e6)G(t[_e6]); else G(t);
  }k.prototype.on, k.prototype.once, k.prototype.un; var B=k; function z() {
    throw new Error('Unimplemented abstract method.');
  } var U=0; function X(t) {
    return t.ol_uid||(t.ol_uid=String(++U));
  } var V=/* #__PURE__*/function(_r4) {
    _inherits(V, _r4); var _super4=_createSuper(V); function V(t, e, i) {
      var _this4; _classCallCheck(this, V); _this4=_super4.call(this, t), _this4.key=e, _this4.oldValue=i; return _this4;
    } return _createClass(V);
  }(r); var W=/* #__PURE__*/function(_B) {
    _inherits(W, _B); var _super5=_createSuper(W); function W(t) {
      var _this5; _classCallCheck(this, W); _this5=_super5.call(this), _this5.on, _this5.once, _this5.un, X(_assertThisInitialized(_this5)), _this5.values_=null, void 0!==t&&_this5.setProperties(t); return _this5;
    }_createClass(W, [{key: 'get', value: function get(t) {
      var e; return this.values_&&this.values_.hasOwnProperty(t)&&(e=this.values_[t]), e;
    }}, {key: 'getKeys', value: function getKeys() {
      return this.values_&&Object.keys(this.values_)||[];
    }}, {key: 'getProperties', value: function getProperties() {
      return this.values_&&Object.assign({}, this.values_)||{};
    }}, {key: 'hasProperties', value: function hasProperties() {
      return !!this.values_;
    }}, {key: 'notify', value: function notify(t, e) {
      var i; i='change:'.concat(t), this.hasListener(i)&&this.dispatchEvent(new V(i, t, e)), i=s, this.hasListener(i)&&this.dispatchEvent(new V(i, t, e));
    }}, {key: 'addChangeListener', value: function addChangeListener(t, e) {
      this.addEventListener('change:'.concat(t), e);
    }}, {key: 'removeChangeListener', value: function removeChangeListener(t, e) {
      this.removeEventListener('change:'.concat(t), e);
    }}, {key: 'set', value: function set(t, e, i) {
      var n=this.values_||(this.values_={}); if (i)n[t]=e; else {
        var _i6=n[t]; n[t]=e, _i6!==e&&this.notify(t, _i6);
      }
    }}, {key: 'setProperties', value: function setProperties(t, e) {
      for (var _i7 in t) this.set(_i7, t[_i7], e);
    }}, {key: 'applyProperties', value: function applyProperties(t) {
      t.values_&&Object.assign(this.values_||(this.values_={}), t.values_);
    }}, {key: 'unset', value: function unset(t, e) {
      if (this.values_&&t in this.values_) {
        var _i8=this.values_[t]; delete this.values_[t], v(this.values_)&&(this.values_=null), e||this.notify(t, _i8);
      }
    }}]); return W;
  }(B); var Z='add'; var Y='remove'; var K='length'; var q=/* #__PURE__*/function(_r5) {
    _inherits(q, _r5); var _super6=_createSuper(q); function q(t, e, i) {
      var _this6; _classCallCheck(this, q); _this6=_super6.call(this, t), _this6.element=e, _this6.index=i; return _this6;
    } return _createClass(q);
  }(r); var H=/* #__PURE__*/function(_W) {
    _inherits(H, _W); var _super7=_createSuper(H); function H(t, e) {
      var _this7; _classCallCheck(this, H); if (_this7=_super7.call(this), _this7.on, _this7.once, _this7.un, e=e||{}, _this7.unique_=!!e.unique, _this7.array_=t||[], _this7.unique_) for (var _t4=0, _e7=_this7.array_.length; _t4<_e7; ++_t4)_this7.assertUnique_(_this7.array_[_t4], _t4); _this7.updateLength_(); return _possibleConstructorReturn(_this7);
    }_createClass(H, [{key: 'clear', value: function clear() {
      for (;this.getLength()>0;) this.pop();
    }}, {key: 'extend', value: function extend(t) {
      for (var _e8=0, _i9=t.length; _e8<_i9; ++_e8) this.push(t[_e8]); return this;
    }}, {key: 'forEach', value: function forEach(t) {
      var e=this.array_; for (var _i10=0, _n9=e.length; _i10<_n9; ++_i10)t(e[_i10], _i10, e);
    }}, {key: 'getArray', value: function getArray() {
      return this.array_;
    }}, {key: 'item', value: function item(t) {
      return this.array_[t];
    }}, {key: 'getLength', value: function getLength() {
      return this.get(K);
    }}, {key: 'insertAt', value: function insertAt(t, e) {
      if (t<0||t>this.getLength()) throw new Error('Index out of bounds: '+t); this.unique_&&this.assertUnique_(e), this.array_.splice(t, 0, e), this.updateLength_(), this.dispatchEvent(new q(Z, e, t));
    }}, {key: 'pop', value: function pop() {
      return this.removeAt(this.getLength()-1);
    }}, {key: 'push', value: function push(t) {
      this.unique_&&this.assertUnique_(t); var e=this.getLength(); return this.insertAt(e, t), this.getLength();
    }}, {key: 'remove', value: function remove(t) {
      var e=this.array_; for (var _i11=0, _n10=e.length; _i11<_n10; ++_i11) if (e[_i11]===t) return this.removeAt(_i11);
    }}, {key: 'removeAt', value: function removeAt(t) {
      if (t<0||t>=this.getLength()) return; var e=this.array_[t]; return this.array_.splice(t, 1), this.updateLength_(), this.dispatchEvent(new q(Y, e, t)), e;
    }}, {key: 'setAt', value: function setAt(t, e) {
      if (t>=this.getLength()) return void this.insertAt(t, e); if (t<0) throw new Error('Index out of bounds: '+t); this.unique_&&this.assertUnique_(e, t); var i=this.array_[t]; this.array_[t]=e, this.dispatchEvent(new q(Y, i, t)), this.dispatchEvent(new q(Z, e, t));
    }}, {key: 'updateLength_', value: function updateLength_() {
      this.set(K, this.array_.length);
    }}, {key: 'assertUnique_', value: function assertUnique_(t, e) {
      for (var _n11=0, _r6=this.array_.length; _n11<_r6; ++_n11) if (this.array_[_n11]===t&&_n11!==e) throw new i(58);
    }}]); return H;
  }(W); var $=0; var J=1; var Q=2; var tt=3; var et=4; function it(t) {
    return Math.pow(t, 3);
  } function nt(t) {
    return 1-it(1-t);
  } function rt(t) {
    return 3*t*t-2*t*t*t;
  } function st(t) {
    return t;
  } var ot=/* #__PURE__*/function(_S3) {
    _inherits(ot, _S3); var _super8=_createSuper(ot); function ot(t, e, i) {
      var _this8; _classCallCheck(this, ot); _this8=_super8.call(this), i=i||{}, _this8.tileCoord=t, _this8.state=e, _this8.interimTile=null, _this8.key='', _this8.transition_=void 0===i.transition?250:i.transition, _this8.transitionStarts_={}, _this8.interpolate=!!i.interpolate; return _this8;
    }_createClass(ot, [{key: 'changed', value: function changed() {
      this.dispatchEvent(w);
    }}, {key: 'release', value: function release() {
      this.state===tt&&this.setState(et);
    }}, {key: 'getKey', value: function getKey() {
      return this.key+'/'+this.tileCoord;
    }}, {key: 'getInterimTile', value: function getInterimTile() {
      if (!this.interimTile) return this; var t=this.interimTile; do {
        if (t.getState()==Q) return this.transition_=0, t; t=t.interimTile;
      } while (t); return this;
    }}, {key: 'refreshInterimChain', value: function refreshInterimChain() {
      if (!this.interimTile) return; var t=this.interimTile; var e=this; do {
        if (t.getState()==Q) {
          t.interimTile=null; break;
        }t.getState()==J?e=t:t.getState()==$?e.interimTile=t.interimTile:e=t, t=e.interimTile;
      } while (t);
    }}, {key: 'getTileCoord', value: function getTileCoord() {
      return this.tileCoord;
    }}, {key: 'getState', value: function getState() {
      return this.state;
    }}, {key: 'setState', value: function setState(t) {
      if (this.state!==tt&&this.state>t) throw new Error('Tile load sequence violation'); this.state=t, this.changed();
    }}, {key: 'load', value: function load() {
      z();
    }}, {key: 'getAlpha', value: function getAlpha(t, e) {
      if (!this.transition_) return 1; var i=this.transitionStarts_[t]; if (i) {
        if (-1===i) return 1;
      } else i=e, this.transitionStarts_[t]=i; var n=e-i+1e3/60; return n>=this.transition_?1:it(n/this.transition_);
    }}, {key: 'inTransition', value: function inTransition(t) {
      return !!this.transition_&&-1!==this.transitionStarts_[t];
    }}, {key: 'endTransition', value: function endTransition(t) {
      this.transition_&&(this.transitionStarts_[t]=-1);
    }}]); return ot;
  }(S); var at='undefined'!=typeof navigator&&void 0!==navigator.userAgent?navigator.userAgent.toLowerCase():''; var lt=at.includes('firefox'); var ht=at.includes('safari')&&!at.includes('chrom'); var ct=ht&&(at.includes('version/15.4')||/cpu (os|iphone os) 15_4 like mac os x/.test(at)); var ut=at.includes('webkit')&&!at.includes('edge'); var dt=at.includes('macintosh'); var gt='undefined'!=typeof devicePixelRatio?devicePixelRatio:1; var ft='undefined'!=typeof WorkerGlobalScope&&'undefined'!=typeof OffscreenCanvas&&self instanceof WorkerGlobalScope; var pt='undefined'!=typeof Image&&Image.prototype.decode; var mt=function() {
    var t=!1; try {
      var _e9=Object.defineProperty({}, 'passive', {get: function get() {
        t=!0;
      }}); window.addEventListener('_', null, _e9), window.removeEventListener('_', null, _e9);
    } catch (t) {} return t;
  }(); function _t(t, e, i, n) {
    var r; return r=i&&i.length?i.shift():ft?new OffscreenCanvas(t||300, e||300):document.createElement('canvas'), t&&(r.width=t), e&&(r.height=e), r.getContext('2d', n);
  } function yt(t) {
    var e=t.canvas; e.width=1, e.height=1, t.clearRect(0, 0, 1, 1);
  } function xt(t) {
    var e=t.offsetWidth; var i=getComputedStyle(t); return e+=parseInt(i.marginLeft, 10)+parseInt(i.marginRight, 10), e;
  } function vt(t) {
    var e=t.offsetHeight; var i=getComputedStyle(t); return e+=parseInt(i.marginTop, 10)+parseInt(i.marginBottom, 10), e;
  } function St(t, e) {
    var i=e.parentNode; i&&i.replaceChild(t, e);
  } function wt(t) {
    return t&&t.parentNode?t.parentNode.removeChild(t):null;
  } function Tt(t) {
    for (;t.lastChild;)t.removeChild(t.lastChild);
  } function Et(t, e) {
    var i=t.childNodes; for (var _n12=0; ;++_n12) {
      var _r7=i[_n12]; var _s2=e[_n12]; if (!_r7&&!_s2) break; _r7!==_s2&&(_r7?_s2?t.insertBefore(_s2, _r7):(t.removeChild(_r7), --_n12):t.appendChild(_s2));
    }
  } function Ct(t) {
    return t instanceof Image||t instanceof HTMLCanvasElement||t instanceof HTMLVideoElement?t:null;
  } function Rt(t) {
    return t instanceof Uint8Array||t instanceof Uint8ClampedArray||t instanceof Float32Array||t instanceof DataView?t:null;
  } var bt=null; function Pt(t) {
    bt||(bt=_t(t.width, t.height, void 0, {willReadFrequently: !0})); var e=bt.canvas; var i=t.width; e.width!==i&&(e.width=i); var n=t.height; return e.height!==n&&(e.height=n), bt.drawImage(t, i, n), bt.getImageData(0, 0, i, n).data;
  } var It=[256, 256]; var Lt=/* #__PURE__*/function(_ot) {
    _inherits(Lt, _ot); var _super9=_createSuper(Lt); function Lt(t) {
      var _this9; _classCallCheck(this, Lt); var e=$; _this9=_super9.call(this, t.tileCoord, e, {transition: t.transition, interpolate: t.interpolate}), _this9.loader_=t.loader, _this9.data_=null, _this9.error_=null, _this9.size_=t.size||null; return _this9;
    }_createClass(Lt, [{key: 'getSize', value: function getSize() {
      if (this.size_) return this.size_; var t=Ct(this.data_); return t?[t.width, t.height]:It;
    }}, {key: 'getData', value: function getData() {
      return this.data_;
    }}, {key: 'getError', value: function getError() {
      return this.error_;
    }}, {key: 'load', value: function load() {
      if (this.state!==$&&this.state!==tt) return; this.state=J, this.changed(); var t=this; this.loader_().then(function(e) {
        t.data_=e, t.state=Q, t.changed();
      })['catch'](function(e) {
        t.error_=e, t.state=tt, t.changed();
      });
    }}]); return Lt;
  }(ot); function Ft(t, e) {
    if (!t) throw new i(e);
  } var Mt=/* #__PURE__*/function(_W2) {
    _inherits(Mt, _W2); var _super10=_createSuper(Mt); function Mt(t) {
      var _this10; _classCallCheck(this, Mt); if (_this10=_super10.call(this), _this10.on, _this10.once, _this10.un, _this10.id_=void 0, _this10.geometryName_='geometry', _this10.style_=null, _this10.styleFunction_=void 0, _this10.geometryChangeKey_=null, _this10.addChangeListener(_this10.geometryName_, _this10.handleGeometryChanged_), t) {
        if ('function'==typeof t.getSimplifiedGeometry) {
          var _e10=t; _this10.setGeometry(_e10);
        } else {
          var _e11=t; _this10.setProperties(_e11);
        }
      } return _possibleConstructorReturn(_this10);
    }_createClass(Mt, [{key: 'clone', value: function clone() {
      var t=new Mt(this.hasProperties()?this.getProperties():null); t.setGeometryName(this.getGeometryName()); var e=this.getGeometry(); e&&t.setGeometry(e.clone()); var i=this.getStyle(); return i&&t.setStyle(i), t;
    }}, {key: 'getGeometry', value: function getGeometry() {
      return this.get(this.geometryName_);
    }}, {key: 'getId', value: function getId() {
      return this.id_;
    }}, {key: 'getGeometryName', value: function getGeometryName() {
      return this.geometryName_;
    }}, {key: 'getStyle', value: function getStyle() {
      return this.style_;
    }}, {key: 'getStyleFunction', value: function getStyleFunction() {
      return this.styleFunction_;
    }}, {key: 'handleGeometryChange_', value: function handleGeometryChange_() {
      this.changed();
    }}, {key: 'handleGeometryChanged_', value: function handleGeometryChanged_() {
      this.geometryChangeKey_&&(G(this.geometryChangeKey_), this.geometryChangeKey_=null); var t=this.getGeometry(); t&&(this.geometryChangeKey_=N(t, w, this.handleGeometryChange_, this)), this.changed();
    }}, {key: 'setGeometry', value: function setGeometry(t) {
      this.set(this.geometryName_, t);
    }}, {key: 'setStyle', value: function setStyle(t) {
      this.style_=t, this.styleFunction_=t?At(t):void 0, this.changed();
    }}, {key: 'setId', value: function setId(t) {
      this.id_=t, this.changed();
    }}, {key: 'setGeometryName', value: function setGeometryName(t) {
      this.removeChangeListener(this.geometryName_, this.handleGeometryChanged_), this.geometryName_=t, this.addChangeListener(this.geometryName_, this.handleGeometryChanged_), this.handleGeometryChanged_();
    }}]); return Mt;
  }(W); function At(t) {
    if ('function'==typeof t) return t; var e; if (Array.isArray(t))e=t; else {
      Ft('function'==typeof t.getZIndex, 41); e=[t];
    } return function() {
      return e;
    };
  } var Ot=Mt; var Nt=new Array(6); function Dt() {
    return [1, 0, 0, 1, 0, 0];
  } function Gt(t) {
    return jt(t, 1, 0, 0, 1, 0, 0);
  } function kt(t, e) {
    var i=t[0]; var n=t[1]; var r=t[2]; var s=t[3]; var o=t[4]; var a=t[5]; var l=e[0]; var h=e[1]; var c=e[2]; var u=e[3]; var d=e[4]; var g=e[5]; return t[0]=i*l+r*h, t[1]=n*l+s*h, t[2]=i*c+r*u, t[3]=n*c+s*u, t[4]=i*d+r*g+o, t[5]=n*d+s*g+a, t;
  } function jt(t, e, i, n, r, s, o) {
    return t[0]=e, t[1]=i, t[2]=n, t[3]=r, t[4]=s, t[5]=o, t;
  } function Bt(t, e) {
    return t[0]=e[0], t[1]=e[1], t[2]=e[2], t[3]=e[3], t[4]=e[4], t[5]=e[5], t;
  } function zt(t, e) {
    var i=e[0]; var n=e[1]; return e[0]=t[0]*i+t[2]*n+t[4], e[1]=t[1]*i+t[3]*n+t[5], e;
  } function Ut(t, e) {
    var i=Math.cos(e); var n=Math.sin(e); return kt(t, jt(Nt, i, n, -n, i, 0, 0));
  } function Xt(t, e, i) {
    return kt(t, jt(Nt, e, 0, 0, i, 0, 0));
  } function Vt(t, e, i) {
    return jt(t, e, 0, 0, i, 0, 0);
  } function Wt(t, e, i) {
    return kt(t, jt(Nt, 1, 0, 0, 1, e, i));
  } function Zt(t, e, i, n, r, s, o, a) {
    var l=Math.sin(s); var h=Math.cos(s); return t[0]=n*h, t[1]=r*l, t[2]=-n*l, t[3]=r*h, t[4]=o*n*h-a*n*l+e, t[5]=o*r*l+a*r*h+i, t;
  } function Yt(t, e) {
    var i=Kt(e); Ft(0!==i, 32); var n=e[0]; var r=e[1]; var s=e[2]; var o=e[3]; var a=e[4]; var l=e[5]; return t[0]=o/i, t[1]=-r/i, t[2]=-s/i, t[3]=n/i, t[4]=(s*l-o*a)/i, t[5]=-(n*l-r*a)/i, t;
  } function Kt(t) {
    return t[0]*t[3]-t[1]*t[2];
  } var qt; function Ht(t) {
    var e='matrix('+t.join(', ')+')'; if (ft) return e; var i=qt||(qt=document.createElement('div')); return i.style.transform=e, i.style.transform;
  } var $t=0; var Jt=1; var Qt=2; var te=4; var ee=8; var ie=16; function ne(t) {
    var e=ue(); for (var _i12=0, _n13=t.length; _i12<_n13; ++_i12)xe(e, t[_i12]); return e;
  } function re(t, e, i) {
    return i?(i[0]=t[0]-e, i[1]=t[1]-e, i[2]=t[2]+e, i[3]=t[3]+e, i):[t[0]-e, t[1]-e, t[2]+e, t[3]+e];
  } function se(t, e) {
    return e?(e[0]=t[0], e[1]=t[1], e[2]=t[2], e[3]=t[3], e):t.slice();
  } function oe(t, e, i) {
    var n; var r; return n=e<t[0]?t[0]-e:t[2]<e?e-t[2]:0, r=i<t[1]?t[1]-i:t[3]<i?i-t[3]:0, n*n+r*r;
  } function ae(t, e) {
    return he(t, e[0], e[1]);
  } function le(t, e) {
    return t[0]<=e[0]&&e[2]<=t[2]&&t[1]<=e[1]&&e[3]<=t[3];
  } function he(t, e, i) {
    return t[0]<=e&&e<=t[2]&&t[1]<=i&&i<=t[3];
  } function ce(t, e) {
    var i=t[0]; var n=t[1]; var r=t[2]; var s=t[3]; var o=e[0]; var a=e[1]; var l=$t; return o<i?l|=ie:o>r&&(l|=te), a<n?l|=ee:a>s&&(l|=Qt), l===$t&&(l=Jt), l;
  } function ue() {
    return [1/0, 1/0, -1/0, -1/0];
  } function de(t, e, i, n, r) {
    return r?(r[0]=t, r[1]=e, r[2]=i, r[3]=n, r):[t, e, i, n];
  } function ge(t) {
    return de(1/0, 1/0, -1/0, -1/0, t);
  } function fe(t, e) {
    var i=t[0]; var n=t[1]; return de(i, n, i, n, e);
  } function pe(t, e, i, n, r) {
    return Se(ge(r), t, e, i, n);
  } function me(t, e) {
    return t[0]==e[0]&&t[2]==e[2]&&t[1]==e[1]&&t[3]==e[3];
  } function _e(t, e, i) {
    return Math.abs(t[0]-e[0])<i&&Math.abs(t[2]-e[2])<i&&Math.abs(t[1]-e[1])<i&&Math.abs(t[3]-e[3])<i;
  } function ye(t, e) {
    return e[0]<t[0]&&(t[0]=e[0]), e[2]>t[2]&&(t[2]=e[2]), e[1]<t[1]&&(t[1]=e[1]), e[3]>t[3]&&(t[3]=e[3]), t;
  } function xe(t, e) {
    e[0]<t[0]&&(t[0]=e[0]), e[0]>t[2]&&(t[2]=e[0]), e[1]<t[1]&&(t[1]=e[1]), e[1]>t[3]&&(t[3]=e[1]);
  } function ve(t, e) {
    for (var _i13=0, _n14=e.length; _i13<_n14; ++_i13)xe(t, e[_i13]); return t;
  } function Se(t, e, i, n, r) {
    for (;i<n; i+=r)Te(t, e[i], e[i+1]); return t;
  } function we(t, e) {
    for (var _i14=0, _n15=e.length; _i14<_n15; ++_i14)ve(t, e[_i14]); return t;
  } function Te(t, e, i) {
    t[0]=Math.min(t[0], e), t[1]=Math.min(t[1], i), t[2]=Math.max(t[2], e), t[3]=Math.max(t[3], i);
  } function Ee(t, e) {
    var i; return i=e(Re(t)), i||(i=e(be(t)), i||(i=e(Ne(t)), i||(i=e(Oe(t)), i||!1)));
  } function Ce(t) {
    var e=0; return ke(t)||(e=De(t)*Me(t)), e;
  } function Re(t) {
    return [t[0], t[1]];
  } function be(t) {
    return [t[2], t[1]];
  } function Pe(t) {
    return [(t[0]+t[2])/2, (t[1]+t[3])/2];
  } function Ie(t, e) {
    var i; return 'bottom-left'===e?i=Re(t):'bottom-right'===e?i=be(t):'top-left'===e?i=Oe(t):'top-right'===e?i=Ne(t):Ft(!1, 13), i;
  } function Le(t, e, i, n, r) {
    var _Fe=Fe(t, e, i, n); var _Fe2=_slicedToArray(_Fe, 8); var s=_Fe2[0]; var o=_Fe2[1]; var a=_Fe2[2]; var l=_Fe2[3]; var h=_Fe2[4]; var c=_Fe2[5]; var u=_Fe2[6]; var d=_Fe2[7]; return de(Math.min(s, a, h, u), Math.min(o, l, c, d), Math.max(s, a, h, u), Math.max(o, l, c, d), r);
  } function Fe(t, e, i, n) {
    var r=e*n[0]/2; var s=e*n[1]/2; var o=Math.cos(i); var a=Math.sin(i); var l=r*o; var h=r*a; var c=s*o; var u=s*a; var d=t[0]; var g=t[1]; return [d-l+u, g-h-c, d-l-u, g-h+c, d+l-u, g+h+c, d+l+u, g+h-c, d-l+u, g-h-c];
  } function Me(t) {
    return t[3]-t[1];
  } function Ae(t, e, i) {
    var n=i||[1/0, 1/0, -1/0, -1/0]; return Ge(t, e)?(t[0]>e[0]?n[0]=t[0]:n[0]=e[0], t[1]>e[1]?n[1]=t[1]:n[1]=e[1], t[2]<e[2]?n[2]=t[2]:n[2]=e[2], t[3]<e[3]?n[3]=t[3]:n[3]=e[3]):ge(n), n;
  } function Oe(t) {
    return [t[0], t[3]];
  } function Ne(t) {
    return [t[2], t[3]];
  } function De(t) {
    return t[2]-t[0];
  } function Ge(t, e) {
    return t[0]<=e[2]&&t[2]>=e[0]&&t[1]<=e[3]&&t[3]>=e[1];
  } function ke(t) {
    return t[2]<t[0]||t[3]<t[1];
  } function je(t, e) {
    return e?(e[0]=t[0], e[1]=t[1], e[2]=t[2], e[3]=t[3], e):t;
  } function Be(t, e) {
    var i=(t[2]-t[0])/2*(e-1); var n=(t[3]-t[1])/2*(e-1); t[0]-=i, t[2]+=i, t[1]-=n, t[3]+=n;
  } function ze(t, e, i) {
    var n=!1; var r=ce(t, e); var s=ce(t, i); if (r===Jt||s===Jt)n=!0; else {
      var _o3=t[0]; var _a2=t[1]; var _l2=t[2]; var _h2=t[3]; var _c2=e[0]; var _u2=e[1]; var _d2=i[0]; var _g2=i[1]; var _f2=(_g2-_u2)/(_d2-_c2); var _p2; var _m2; s&Qt&&!(r&Qt)&&(_p2=_d2-(_g2-_h2)/_f2, n=_p2>=_o3&&_p2<=_l2), n||!(s&te)||r&te||(_m2=_g2-(_d2-_l2)*_f2, n=_m2>=_a2&&_m2<=_h2), n||!(s&ee)||r&ee||(_p2=_d2-(_g2-_a2)/_f2, n=_p2>=_o3&&_p2<=_l2), n||!(s&ie)||r&ie||(_m2=_g2-(_d2-_o3)*_f2, n=_m2>=_a2&&_m2<=_h2);
    } return n;
  } function Ue(t, e, i, n) {
    var r=[]; if (n>1) {
      var _e12=t[2]-t[0]; var _i15=t[3]-t[1]; for (var _s3=0; _s3<n; ++_s3)r.push(t[0]+_e12*_s3/n, t[1], t[2], t[1]+_i15*_s3/n, t[2]-_e12*_s3/n, t[3], t[0], t[3]-_i15*_s3/n);
    } else r=[t[0], t[1], t[2], t[1], t[2], t[3], t[0], t[3]]; e(r, r, 2); var s=[]; var o=[]; for (var _t5=0, _e13=r.length; _t5<_e13; _t5+=2)s.push(r[_t5]), o.push(r[_t5+1]); return function(t, e, i) {
      return de(Math.min.apply(null, t), Math.min.apply(null, e), Math.max.apply(null, t), Math.max.apply(null, e), i);
    }(s, o, i);
  } function Xe(t, e) {
    var i=e.getExtent(); var n=Pe(t); if (e.canWrapX()&&(n[0]<i[0]||n[0]>=i[2])) {
      var _e14=De(i); var _r8=Math.floor((n[0]-i[0])/_e14)*_e14; t[0]-=_r8, t[2]-=_r8;
    } return t;
  } function Ve(t, e) {
    if (e.canWrapX()) {
      var _i16=e.getExtent(); if (!isFinite(t[0])||!isFinite(t[2])) return [[_i16[0], t[1], _i16[2], t[3]]]; Xe(t, e); var _n16=De(_i16); if (De(t)>_n16) return [[_i16[0], t[1], _i16[2], t[3]]]; if (t[0]<_i16[0]) return [[t[0]+_n16, t[1], _i16[2], t[3]], [_i16[0], t[1], t[2], t[3]]]; if (t[2]>_i16[2]) return [[t[0], t[1], _i16[2], t[3]], [_i16[0], t[1], t[2]-_n16, t[3]]];
    } return [t];
  } var We={9001: 'm', 9002: 'ft', 9003: 'us-ft', 9101: 'radians', 9102: 'degrees'}; function Ze(t) {
    return We[t];
  } var Ye={'radians': 6370997/(2*Math.PI), 'degrees': 2*Math.PI*6370997/360, 'ft': .3048, 'm': 1, 'us-ft': 1200/3937}; var Ke=/* #__PURE__*/function() {
    function Ke(t) {
      _classCallCheck(this, Ke); this.code_=t.code, this.units_=t.units, this.extent_=void 0!==t.extent?t.extent:null, this.worldExtent_=void 0!==t.worldExtent?t.worldExtent:null, this.axisOrientation_=void 0!==t.axisOrientation?t.axisOrientation:'enu', this.global_=void 0!==t.global&&t.global, this.canWrapX_=!(!this.global_||!this.extent_), this.getPointResolutionFunc_=t.getPointResolution, this.defaultTileGrid_=null, this.metersPerUnit_=t.metersPerUnit;
    }_createClass(Ke, [{key: 'canWrapX', value: function canWrapX() {
      return this.canWrapX_;
    }}, {key: 'getCode', value: function getCode() {
      return this.code_;
    }}, {key: 'getExtent', value: function getExtent() {
      return this.extent_;
    }}, {key: 'getUnits', value: function getUnits() {
      return this.units_;
    }}, {key: 'getMetersPerUnit', value: function getMetersPerUnit() {
      return this.metersPerUnit_||Ye[this.units_];
    }}, {key: 'getWorldExtent', value: function getWorldExtent() {
      return this.worldExtent_;
    }}, {key: 'getAxisOrientation', value: function getAxisOrientation() {
      return this.axisOrientation_;
    }}, {key: 'isGlobal', value: function isGlobal() {
      return this.global_;
    }}, {key: 'setGlobal', value: function setGlobal(t) {
      this.global_=t, this.canWrapX_=!(!t||!this.extent_);
    }}, {key: 'getDefaultTileGrid', value: function getDefaultTileGrid() {
      return this.defaultTileGrid_;
    }}, {key: 'setDefaultTileGrid', value: function setDefaultTileGrid(t) {
      this.defaultTileGrid_=t;
    }}, {key: 'setExtent', value: function setExtent(t) {
      this.extent_=t, this.canWrapX_=!(!this.global_||!t);
    }}, {key: 'setWorldExtent', value: function setWorldExtent(t) {
      this.worldExtent_=t;
    }}, {key: 'setGetPointResolution', value: function setGetPointResolution(t) {
      this.getPointResolutionFunc_=t;
    }}, {key: 'getPointResolutionFunc', value: function getPointResolutionFunc() {
      return this.getPointResolutionFunc_;
    }}]); return Ke;
  }(); var qe=6378137; var He=Math.PI*qe; var $e=[-He, -He, He, He]; var Je=[-180, -85, 180, 85]; var Qe=qe*Math.log(Math.tan(Math.PI/2)); var ti=/* #__PURE__*/function(_Ke) {
    _inherits(ti, _Ke); var _super11=_createSuper(ti); function ti(t) {
      _classCallCheck(this, ti); return _super11.call(this, {code: t, units: 'm', extent: $e, global: !0, worldExtent: Je, getPointResolution: function getPointResolution(t, e) {
        return t/Math.cosh(e[1]/qe);
      }});
    } return _createClass(ti);
  }(Ke); var ei=[new ti('EPSG:3857'), new ti('EPSG:102100'), new ti('EPSG:102113'), new ti('EPSG:900913'), new ti('http://www.opengis.net/def/crs/EPSG/0/3857'), new ti('http://www.opengis.net/gml/srs/epsg.xml#3857')]; function ii(t, e, i) {
    var n=t.length; i=i>1?i:2, void 0===e&&(e=i>2?t.slice():new Array(n)); for (var _r9=0; _r9<n; _r9+=i) {
      e[_r9]=He*t[_r9]/180; var _i17=qe*Math.log(Math.tan(Math.PI*(+t[_r9+1]+90)/360)); _i17>Qe?_i17=Qe:_i17<-Qe&&(_i17=-Qe), e[_r9+1]=_i17;
    } return e;
  } function ni(t, e, i) {
    var n=t.length; i=i>1?i:2, void 0===e&&(e=i>2?t.slice():new Array(n)); for (var _r10=0; _r10<n; _r10+=i)e[_r10]=180*t[_r10]/He, e[_r10+1]=360*Math.atan(Math.exp(t[_r10+1]/qe))/Math.PI-90; return e;
  } var ri=6378137; var si=[-180, -90, 180, 90]; var oi=Math.PI*ri/180; var ai=/* #__PURE__*/function(_Ke2) {
    _inherits(ai, _Ke2); var _super12=_createSuper(ai); function ai(t, e) {
      _classCallCheck(this, ai); return _super12.call(this, {code: t, units: 'degrees', extent: si, axisOrientation: e, global: !0, metersPerUnit: oi, worldExtent: si});
    } return _createClass(ai);
  }(Ke); var li=[new ai('CRS:84'), new ai('EPSG:4326', 'neu'), new ai('urn:ogc:def:crs:OGC:1.3:CRS84'), new ai('urn:ogc:def:crs:OGC:2:84'), new ai('http://www.opengis.net/def/crs/OGC/1.3/CRS84'), new ai('http://www.opengis.net/gml/srs/epsg.xml#4326', 'neu'), new ai('http://www.opengis.net/def/crs/EPSG/0/4326', 'neu')]; var hi={}; function ci() {
    hi={};
  } function ui(t) {
    return hi[t]||hi[t.replace(/urn:(x-)?ogc:def:crs:EPSG:(.*:)?(\w+)$/, 'EPSG:$3')]||null;
  } function di(t, e) {
    hi[t]=e;
  } var gi={}; function fi() {
    gi={};
  } function pi(t, e, i) {
    var n=t.getCode(); var r=e.getCode(); n in gi||(gi[n]={}), gi[n][r]=i;
  } function mi(t, e) {
    var i; return t in gi&&e in gi[t]&&(i=gi[t][e]), i;
  } function _i(t, e, i) {
    return Math.min(Math.max(t, e), i);
  } function yi(t, e, i, n, r, s) {
    var o=r-i; var a=s-n; if (0!==o||0!==a) {
      var _l3=((t-i)*o+(e-n)*a)/(o*o+a*a); _l3>1?(i=r, n=s):_l3>0&&(i+=o*_l3, n+=a*_l3);
    } return xi(t, e, i, n);
  } function xi(t, e, i, n) {
    var r=i-t; var s=n-e; return r*r+s*s;
  } function vi(t) {
    var e=t.length; for (var _i18=0; _i18<e; _i18++) {
      var _n17=_i18; var _r11=Math.abs(t[_i18][_i18]); for (var _s4=_i18+1; _s4<e; _s4++) {
        var _e15=Math.abs(t[_s4][_i18]); _e15>_r11&&(_r11=_e15, _n17=_s4);
      } if (0===_r11) return null; var _s5=t[_n17]; t[_n17]=t[_i18], t[_i18]=_s5; for (var _n18=_i18+1; _n18<e; _n18++) {
        var _r12=-t[_n18][_i18]/t[_i18][_i18]; for (var _s6=_i18; _s6<e+1; _s6++)_i18==_s6?t[_n18][_s6]=0:t[_n18][_s6]+=_r12*t[_i18][_s6];
      }
    } var i=new Array(e); for (var _n19=e-1; _n19>=0; _n19--) {
      i[_n19]=t[_n19][e]/t[_n19][_n19]; for (var _r13=_n19-1; _r13>=0; _r13--)t[_r13][e]-=t[_r13][_n19]*i[_n19];
    } return i;
  } function Si(t) {
    return 180*t/Math.PI;
  } function wi(t) {
    return t*Math.PI/180;
  } function Ti(t, e) {
    var i=t%e; return i*e<0?i+e:i;
  } function Ei(t, e, i) {
    return t+i*(e-t);
  } function Ci(t, e) {
    var i=Math.pow(10, e); return Math.round(t*i)/i;
  } function Ri(t, e) {
    return Math.round(Ci(t, e));
  } function bi(t, e) {
    return Math.floor(Ci(t, e));
  } function Pi(t, e) {
    return Math.ceil(Ci(t, e));
  } function Ii(t, e, i) {
    var n=void 0!==i?t.toFixed(i):''+t; var r=n.indexOf('.'); return r=-1===r?n.length:r, r>e?n:new Array(1+e-r).join('0')+n;
  } function Li(t, e) {
    var i=(''+t).split('.'); var n=(''+e).split('.'); for (var _t6=0; _t6<Math.max(i.length, n.length); _t6++) {
      var _e16=parseInt(i[_t6]||'0', 10); var _r14=parseInt(n[_t6]||'0', 10); if (_e16>_r14) return 1; if (_r14>_e16) return -1;
    } return 0;
  } function Fi(t, e) {
    return t[0]+=+e[0], t[1]+=+e[1], t;
  } function Mi(t, e) {
    var i=e.getRadius(); var n=e.getCenter(); var r=n[0]; var s=n[1]; var o=t[0]-r; var a=t[1]-s; 0===o&&0===a&&(o=1); var l=Math.sqrt(o*o+a*a); return [r+i*o/l, s+i*a/l];
  } function Ai(t, e) {
    var i=t[0]; var n=t[1]; var r=e[0]; var s=e[1]; var o=r[0]; var a=r[1]; var l=s[0]; var h=s[1]; var c=l-o; var u=h-a; var d=0===c&&0===u?0:(c*(i-o)+u*(n-a))/(c*c+u*u||0); var g; var f; return d<=0?(g=o, f=a):d>=1?(g=l, f=h):(g=o+d*c, f=a+d*u), [g, f];
  } function Oi(t, e, i) {
    var n=Ti(e+180, 360)-180; var r=Math.abs(3600*n); var s=i||0; var o=Math.floor(r/3600); var a=Math.floor((r-3600*o)/60); var l=Ci(r-3600*o-60*a, s); l>=60&&(l=0, a+=1), a>=60&&(a=0, o+=1); var h=o+''; return 0===a&&0===l||(h+=' '+Ii(a, 2)+''), 0!==l&&(h+=' '+Ii(l, 2, s)+''), 0!==n&&(h+=' '+t.charAt(n<0?1:0)), h;
  } function Ni(t, e, i) {
    return t?e.replace('{x}', t[0].toFixed(i)).replace('{y}', t[1].toFixed(i)):'';
  } function Di(t, e) {
    var i=!0; for (var _n20=t.length-1; _n20>=0; --_n20) {
      if (t[_n20]!=e[_n20]) {
        i=!1; break;
      }
    } return i;
  } function Gi(t, e) {
    var i=Math.cos(e); var n=Math.sin(e); var r=t[0]*i-t[1]*n; var s=t[1]*i+t[0]*n; return t[0]=r, t[1]=s, t;
  } function ki(t, e) {
    return t[0]*=e, t[1]*=e, t;
  } function ji(t, e) {
    var i=t[0]-e[0]; var n=t[1]-e[1]; return i*i+n*n;
  } function Bi(t, e) {
    return Math.sqrt(ji(t, e));
  } function zi(t, e) {
    return ji(t, Ai(t, e));
  } function Ui(t, e) {
    return Ni(t, '{x}, {y}', e);
  } function Xi(t, e) {
    if (e.canWrapX()) {
      var _i19=De(e.getExtent()); var _n21=Vi(t, e, _i19); _n21&&(t[0]-=_n21*_i19);
    } return t;
  } function Vi(t, e, i) {
    var n=e.getExtent(); var r=0; return e.canWrapX()&&(t[0]<n[0]||t[0]>n[2])&&(i=i||De(n), r=Math.floor((t[0]-n[0])/i)), r;
  } var Wi=6371008.8; function Zi(t, e, i) {
    i=i||Wi; var n=wi(t[1]); var r=wi(e[1]); var s=(r-n)/2; var o=wi(e[0]-t[0])/2; var a=Math.sin(s)*Math.sin(s)+Math.sin(o)*Math.sin(o)*Math.cos(n)*Math.cos(r); return 2*i*Math.atan2(Math.sqrt(a), Math.sqrt(1-a));
  } function Yi(t, e) {
    var i=0; for (var _n22=0, _r15=t.length; _n22<_r15-1; ++_n22)i+=Zi(t[_n22], t[_n22+1], e); return i;
  } function Ki(t, e) {
    var i=0; var n=t.length; var r=t[n-1][0]; var s=t[n-1][1]; for (var _e17=0; _e17<n; _e17++) {
      var _n23=t[_e17][0]; var _o4=t[_e17][1]; i+=wi(_n23-r)*(2+Math.sin(wi(s))+Math.sin(wi(_o4))), r=_n23, s=_o4;
    } return i*e*e/2;
  } function qi(t, e, i, n) {
    n=n||Wi; var r=wi(t[1]); var s=wi(t[0]); var o=e/n; var a=Math.asin(Math.sin(r)*Math.cos(o)+Math.cos(r)*Math.sin(o)*Math.cos(i)); return [Si(s+Math.atan2(Math.sin(i)*Math.sin(o)*Math.cos(r), Math.cos(o)-Math.sin(r)*Math.sin(a))), Si(a)];
  } var Hi={info: 1, warn: 2, error: 3, none: 4}; var $i=Hi.info; function Ji() {
    var _console; $i>Hi.warn||(_console=console).warn.apply(_console, arguments);
  } function Qi() {
    var _console2; $i>Hi.error||(_console2=console).error.apply(_console2, arguments);
  } var tn=!0; function en(t) {
    tn=!(void 0===t||t);
  } function nn(t, e) {
    if (void 0!==e) for (var _i20=0, _n24=t.length; _i20<_n24; ++_i20)e[_i20]=t[_i20]; else e=t.slice(); return e;
  } function rn(t, e) {
    if (void 0!==e&&t!==e) {
      for (var _i21=0, _n25=t.length; _i21<_n25; ++_i21)e[_i21]=t[_i21]; t=e;
    } return t;
  } function sn(t) {
    di(t.getCode(), t), pi(t, t, nn);
  } function on(t) {
    t.forEach(sn);
  } function an(t) {
    return 'string'==typeof t?ui(t):t||null;
  } function ln(t, e, i, n) {
    var r; var s=(t=an(t)).getPointResolutionFunc(); if (s) {
      if (r=s(e, i), n&&n!==t.getUnits()) {
        var _e18=t.getMetersPerUnit(); _e18&&(r=r*_e18/Ye[n]);
      }
    } else {
      var _s7=t.getUnits(); if ('degrees'==_s7&&!n||'degrees'==n)r=e; else {
        var _o5=pn(t, an('EPSG:4326')); if (_o5===rn&&'degrees'!==_s7)r=e*t.getMetersPerUnit(); else {
          var _t7=[i[0]-e/2, i[1], i[0]+e/2, i[1], i[0], i[1]-e/2, i[0], i[1]+e/2]; _t7=_o5(_t7, _t7, 2); r=(Zi(_t7.slice(0, 2), _t7.slice(2, 4))+Zi(_t7.slice(4, 6), _t7.slice(6, 8)))/2;
        } var _a3=n?Ye[n]:t.getMetersPerUnit(); void 0!==_a3&&(r/=_a3);
      }
    } return r;
  } function hn(t) {
    on(t), t.forEach(function(e) {
      t.forEach(function(t) {
        e!==t&&pi(e, t, nn);
      });
    });
  } function cn(t, e, i, n) {
    t.forEach(function(t) {
      e.forEach(function(e) {
        pi(t, e, i), pi(e, t, n);
      });
    });
  } function un(t, e) {
    return t?'string'==typeof t?an(t):t:an(e);
  } function dn(t) {
    return function(e, i, n) {
      var r=e.length; n=void 0!==n?n:2, i=void 0!==i?i:new Array(r); for (var _s8=0; _s8<r; _s8+=n) {
        var _r16=t(e.slice(_s8, _s8+n)); var _o6=_r16.length; for (var _t8=0, _a4=n; _t8<_a4; ++_t8)i[_s8+_t8]=_t8>=_o6?e[_s8+_t8]:_r16[_t8];
      } return i;
    };
  } function gn(t, e, i, n) {
    var r=an(t); var s=an(e); pi(r, s, dn(i)), pi(s, r, dn(n));
  } function fn(t, e) {
    if (t===e) return !0; var i=t.getUnits()===e.getUnits(); if (t.getCode()===e.getCode()) return i; return pn(t, e)===nn&&i;
  } function pn(t, e) {
    var i=mi(t.getCode(), e.getCode()); return i||(i=rn), i;
  } function mn(t, e) {
    return pn(an(t), an(e));
  } function _n(t, e, i) {
    return mn(e, i)(t, void 0, t.length);
  } function yn(t, e, i, n) {
    return Ue(t, mn(e, i), void 0, n);
  } var xn=null; function vn(t) {
    xn=an(t);
  } function Sn() {
    return xn;
  } function wn(t, e) {
    return xn?_n(t, e, xn):t;
  } function Tn(t, e) {
    return xn?_n(t, xn, e):(tn&&!Di(t, [0, 0])&&t[0]>=-180&&t[0]<=180&&t[1]>=-90&&t[1]<=90&&(tn=!1, Ji('Call useGeographic() from ol/proj once to work with [longitude, latitude] coordinates.')), t);
  } function En(t, e) {
    return xn?yn(t, e, xn):t;
  } function Cn(t, e) {
    return xn?yn(t, xn, e):t;
  } function Rn(t, e) {
    if (!xn) return t; var i=an(e).getUnits(); var n=xn.getUnits(); return i&&n?t*Ye[i]/Ye[n]:t;
  } function bn(t, e) {
    if (!xn) return t; var i=an(e).getUnits(); var n=xn.getUnits(); return i&&n?t*Ye[n]/Ye[i]:t;
  } function Pn(t, e, i) {
    return function(n) {
      var r; var s; if (t.canWrapX()) {
        var _e19=t.getExtent(); var _o7=De(_e19); s=Vi(n=n.slice(0), t, _o7), s&&(n[0]=n[0]-s*_o7), n[0]=_i(n[0], _e19[0], _e19[2]), n[1]=_i(n[1], _e19[1], _e19[3]), r=i(n);
      } else r=i(n); return s&&e.canWrapX()&&(r[0]+=s*De(e.getExtent())), r;
    };
  } function In() {
    hn(ei), hn(li), cn(li, ei, ii, ni);
  } function Ln(t, e, i, n, r, s) {
    s=s||[]; var o=0; for (var _a5=e; _a5<i; _a5+=n) {
      var _e20=t[_a5]; var _i22=t[_a5+1]; s[o++]=r[0]*_e20+r[2]*_i22+r[4], s[o++]=r[1]*_e20+r[3]*_i22+r[5];
    } return s&&s.length!=o&&(s.length=o), s;
  } function Fn(t, e, i, n, r, s, o) {
    o=o||[]; var a=Math.cos(r); var l=Math.sin(r); var h=s[0]; var c=s[1]; var u=0; for (var _r17=e; _r17<i; _r17+=n) {
      var _e21=t[_r17]-h; var _i23=t[_r17+1]-c; o[u++]=h+_e21*a-_i23*l, o[u++]=c+_e21*l+_i23*a; for (var _e22=_r17+2; _e22<_r17+n; ++_e22)o[u++]=t[_e22];
    } return o&&o.length!=u&&(o.length=u), o;
  } function Mn(t, e, i, n, r, s, o, a) {
    a=a||[]; var l=o[0]; var h=o[1]; var c=0; for (var _o8=e; _o8<i; _o8+=n) {
      var _e23=t[_o8]-l; var _i24=t[_o8+1]-h; a[c++]=l+r*_e23, a[c++]=h+s*_i24; for (var _e24=_o8+2; _e24<_o8+n; ++_e24)a[c++]=t[_e24];
    } return a&&a.length!=c&&(a.length=c), a;
  } function An(t, e, i, n, r, s, o) {
    o=o||[]; var a=0; for (var _l4=e; _l4<i; _l4+=n) {
      o[a++]=t[_l4]+r, o[a++]=t[_l4+1]+s; for (var _e25=_l4+2; _e25<_l4+n; ++_e25)o[a++]=t[_e25];
    } return o&&o.length!=a&&(o.length=a), o;
  }In(); var On=[1, 0, 0, 1, 0, 0]; var Nn=/* #__PURE__*/function(_W3) {
    _inherits(Nn, _W3); var _super13=_createSuper(Nn); function Nn() {
      var _this11; _classCallCheck(this, Nn); _this11=_super13.call(this), _this11.extent_=[1/0, 1/0, -1/0, -1/0], _this11.extentRevision_=-1, _this11.simplifiedGeometryMaxMinSquaredTolerance=0, _this11.simplifiedGeometryRevision=0, _this11.simplifyTransformedInternal=_(function(t, e, i) {
        if (!i) return this.getSimplifiedGeometry(e); var n=this.clone(); return n.applyTransform(i), n.getSimplifiedGeometry(e);
      }); return _this11;
    }_createClass(Nn, [{key: 'simplifyTransformed', value: function simplifyTransformed(t, e) {
      return this.simplifyTransformedInternal(this.getRevision(), t, e);
    }}, {key: 'clone', value: function clone() {
      return z();
    }}, {key: 'closestPointXY', value: function closestPointXY(t, e, i, n) {
      return z();
    }}, {key: 'containsXY', value: function containsXY(t, e) {
      var i=this.getClosestPoint([t, e]); return i[0]===t&&i[1]===e;
    }}, {key: 'getClosestPoint', value: function getClosestPoint(t, e) {
      return e=e||[NaN, NaN], this.closestPointXY(t[0], t[1], e, 1/0), e;
    }}, {key: 'intersectsCoordinate', value: function intersectsCoordinate(t) {
      return this.containsXY(t[0], t[1]);
    }}, {key: 'computeExtent', value: function computeExtent(t) {
      return z();
    }}, {key: 'getExtent', value: function getExtent(t) {
      if (this.extentRevision_!=this.getRevision()) {
        var _t9=this.computeExtent(this.extent_); (isNaN(_t9[0])||isNaN(_t9[1]))&&ge(_t9), this.extentRevision_=this.getRevision();
      } return je(this.extent_, t);
    }}, {key: 'rotate', value: function rotate(t, e) {
      z();
    }}, {key: 'scale', value: function scale(t, e, i) {
      z();
    }}, {key: 'simplify', value: function simplify(t) {
      return this.getSimplifiedGeometry(t*t);
    }}, {key: 'getSimplifiedGeometry', value: function getSimplifiedGeometry(t) {
      return z();
    }}, {key: 'getType', value: function getType() {
      return z();
    }}, {key: 'applyTransform', value: function applyTransform(t) {
      z();
    }}, {key: 'intersectsExtent', value: function intersectsExtent(t) {
      return z();
    }}, {key: 'translate', value: function translate(t, e) {
      z();
    }}, {key: 'transform', value: function transform(t, e) {
      var i=an(t); var n='tile-pixels'==i.getUnits()?function(t, n, r) {
        var s=i.getExtent(); var o=i.getWorldExtent(); var a=Me(o)/Me(s); return Zt(On, o[0], o[3], a, -a, 0, 0, 0), Ln(t, 0, t.length, r, On, n), mn(i, e)(t, n, r);
      }:mn(i, e); return this.applyTransform(n), this;
    }}]); return Nn;
  }(W); function Dn(t) {
    var e; return 'XY'==t?e=2:'XYZ'==t||'XYM'==t?e=3:'XYZM'==t&&(e=4), e;
  } function Gn(t, e, i) {
    var n=t.getFlatCoordinates(); if (!n) return null; var r=t.getStride(); return Ln(n, 0, n.length, r, e, i);
  } var kn=/* #__PURE__*/function(_Nn) {
    _inherits(kn, _Nn); var _super14=_createSuper(kn); function kn() {
      var _this12; _classCallCheck(this, kn); _this12=_super14.call(this), _this12.layout='XY', _this12.stride=2, _this12.flatCoordinates=null; return _this12;
    }_createClass(kn, [{key: 'computeExtent', value: function computeExtent(t) {
      return pe(this.flatCoordinates, 0, this.flatCoordinates.length, this.stride, t);
    }}, {key: 'getCoordinates', value: function getCoordinates() {
      return z();
    }}, {key: 'getFirstCoordinate', value: function getFirstCoordinate() {
      return this.flatCoordinates.slice(0, this.stride);
    }}, {key: 'getFlatCoordinates', value: function getFlatCoordinates() {
      return this.flatCoordinates;
    }}, {key: 'getLastCoordinate', value: function getLastCoordinate() {
      return this.flatCoordinates.slice(this.flatCoordinates.length-this.stride);
    }}, {key: 'getLayout', value: function getLayout() {
      return this.layout;
    }}, {key: 'getSimplifiedGeometry', value: function getSimplifiedGeometry(t) {
      if (this.simplifiedGeometryRevision!==this.getRevision()&&(this.simplifiedGeometryMaxMinSquaredTolerance=0, this.simplifiedGeometryRevision=this.getRevision()), t<0||0!==this.simplifiedGeometryMaxMinSquaredTolerance&&t<=this.simplifiedGeometryMaxMinSquaredTolerance) return this; var e=this.getSimplifiedGeometryInternal(t); return e.getFlatCoordinates().length<this.flatCoordinates.length?e:(this.simplifiedGeometryMaxMinSquaredTolerance=t, this);
    }}, {key: 'getSimplifiedGeometryInternal', value: function getSimplifiedGeometryInternal(t) {
      return this;
    }}, {key: 'getStride', value: function getStride() {
      return this.stride;
    }}, {key: 'setFlatCoordinates', value: function setFlatCoordinates(t, e) {
      this.stride=Dn(t), this.layout=t, this.flatCoordinates=e;
    }}, {key: 'setCoordinates', value: function setCoordinates(t, e) {
      z();
    }}, {key: 'setLayout', value: function setLayout(t, e, i) {
      var n; if (t)n=Dn(t); else {
        for (var _t10=0; _t10<i; ++_t10) {
          if (0===e.length) return this.layout='XY', void(this.stride=2); e=e[0];
        }n=e.length, t=function(t) {
          var e; 2==t?e='XY':3==t?e='XYZ':4==t&&(e='XYZM'); return e;
        }(n);
      } this.layout=t, this.stride=n;
    }}, {key: 'applyTransform', value: function applyTransform(t) {
      this.flatCoordinates&&(t(this.flatCoordinates, this.flatCoordinates, this.stride), this.changed());
    }}, {key: 'rotate', value: function rotate(t, e) {
      var i=this.getFlatCoordinates(); if (i) {
        var _n26=this.getStride(); Fn(i, 0, i.length, _n26, t, e, i), this.changed();
      }
    }}, {key: 'scale', value: function scale(t, e, i) {
      void 0===e&&(e=t), i||(i=Pe(this.getExtent())); var n=this.getFlatCoordinates(); if (n) {
        var _r18=this.getStride(); Mn(n, 0, n.length, _r18, t, e, i, n), this.changed();
      }
    }}, {key: 'translate', value: function translate(t, e) {
      var i=this.getFlatCoordinates(); if (i) {
        var _n27=this.getStride(); An(i, 0, i.length, _n27, t, e, i), this.changed();
      }
    }}]); return kn;
  }(Nn); function jn(t, e, i, n, r, s, o) {
    var a=t[e]; var l=t[e+1]; var h=t[i]-a; var c=t[i+1]-l; var u; if (0===h&&0===c)u=e; else {
      var _d3=((r-a)*h+(s-l)*c)/(h*h+c*c); if (_d3>1)u=i; else {
        if (_d3>0) {
          for (var _r19=0; _r19<n; ++_r19)o[_r19]=Ei(t[e+_r19], t[i+_r19], _d3); return void(o.length=n);
        }u=e;
      }
    } for (var _e26=0; _e26<n; ++_e26)o[_e26]=t[u+_e26]; o.length=n;
  } function Bn(t, e, i, n, r) {
    var s=t[e]; var o=t[e+1]; for (e+=n; e<i; e+=n) {
      var _i25=t[e]; var _n28=t[e+1]; var _a6=xi(s, o, _i25, _n28); _a6>r&&(r=_a6), s=_i25, o=_n28;
    } return r;
  } function zn(t, e, i, n, r) {
    for (var _s9=0, _o9=i.length; _s9<_o9; ++_s9) {
      var _o10=i[_s9]; r=Bn(t, e, _o10, n, r), e=_o10;
    } return r;
  } function Un(t, e, i, n, r) {
    for (var _s10=0, _o11=i.length; _s10<_o11; ++_s10) {
      var _o12=i[_s10]; r=zn(t, e, _o12, n, r), e=_o12[_o12.length-1];
    } return r;
  } function Xn(t, e, i, n, r, s, o, a, l, h, c) {
    if (e==i) return h; var u; var d; if (0===r) {
      if (d=xi(o, a, t[e], t[e+1]), d<h) {
        for (u=0; u<n; ++u)l[u]=t[e+u]; return l.length=n, d;
      } return h;
    }c=c||[NaN, NaN]; var g=e+n; for (;g<i;) {
      if (jn(t, g-n, g, n, o, a, c), d=xi(o, a, c[0], c[1]), d<h) {
        for (h=d, u=0; u<n; ++u)l[u]=c[u]; l.length=n, g+=n;
      } else g+=n*Math.max((Math.sqrt(d)-Math.sqrt(h))/r|0, 1);
    } if (s&&(jn(t, i-n, e, n, o, a, c), d=xi(o, a, c[0], c[1]), d<h)) {
      for (h=d, u=0; u<n; ++u)l[u]=c[u]; l.length=n;
    } return h;
  } function Vn(t, e, i, n, r, s, o, a, l, h, c) {
    c=c||[NaN, NaN]; for (var _u3=0, _d4=i.length; _u3<_d4; ++_u3) {
      var _d5=i[_u3]; h=Xn(t, e, _d5, n, r, s, o, a, l, h, c), e=_d5;
    } return h;
  } function Wn(t, e, i, n, r, s, o, a, l, h, c) {
    c=c||[NaN, NaN]; for (var _u4=0, _d6=i.length; _u4<_d6; ++_u4) {
      var _d7=i[_u4]; h=Vn(t, e, _d7, n, r, s, o, a, l, h, c), e=_d7[_d7.length-1];
    } return h;
  } function Zn(t, e, i, n) {
    for (var _n29=0, _r20=i.length; _n29<_r20; ++_n29)t[e++]=i[_n29]; return e;
  } function Yn(t, e, i, n) {
    for (var _r21=0, _s11=i.length; _r21<_s11; ++_r21) {
      var _s12=i[_r21]; for (var _i26=0; _i26<n; ++_i26)t[e++]=_s12[_i26];
    } return e;
  } function Kn(t, e, i, n, r) {
    r=r||[]; var s=0; for (var _o13=0, _a7=i.length; _o13<_a7; ++_o13) {
      var _a8=Yn(t, e, i[_o13], n); r[s++]=_a8, e=_a8;
    } return r.length=s, r;
  } function qn(t, e, i, n, r) {
    r=r||[]; var s=0; for (var _o14=0, _a9=i.length; _o14<_a9; ++_o14) {
      var _a10=Kn(t, e, i[_o14], n, r[s]); 0===_a10.length&&(_a10[0]=e), r[s++]=_a10, e=_a10[_a10.length-1];
    } return r.length=s, r;
  } function Hn(t, e, i, n, r, s, o) {
    var a=(i-e)/n; if (a<3) {
      for (;e<i; e+=n)s[o++]=t[e], s[o++]=t[e+1]; return o;
    } var l=new Array(a); l[0]=1, l[a-1]=1; var h=[e, i-n]; var c=0; for (;h.length>0;) {
      var _i27=h.pop(); var _s13=h.pop(); var _o15=0; var _a11=t[_s13]; var _u5=t[_s13+1]; var _d8=t[_i27]; var _g3=t[_i27+1]; for (var _e27=_s13+n; _e27<_i27; _e27+=n) {
        var _i28=yi(t[_e27], t[_e27+1], _a11, _u5, _d8, _g3); _i28>_o15&&(c=_e27, _o15=_i28);
      }_o15>r&&(l[(c-e)/n]=1, _s13+n<c&&h.push(_s13, c), c+n<_i27&&h.push(c, _i27));
    } for (var _i29=0; _i29<a; ++_i29)l[_i29]&&(s[o++]=t[e+_i29*n], s[o++]=t[e+_i29*n+1]); return o;
  } function $n(t, e, i, n, r, s, o, a) {
    for (var _l5=0, _h3=i.length; _l5<_h3; ++_l5) {
      var _h4=i[_l5]; o=Hn(t, e, _h4, n, r, s, o), a.push(o), e=_h4;
    } return o;
  } function Jn(t, e, i, n, r, s, o) {
    if (i<=e+n) {
      for (;e<i; e+=n)s[o++]=t[e], s[o++]=t[e+1]; return o;
    } var a=t[e]; var l=t[e+1]; s[o++]=a, s[o++]=l; var h=a; var c=l; for (e+=n; e<i; e+=n)h=t[e], c=t[e+1], xi(a, l, h, c)>r&&(s[o++]=h, s[o++]=c, a=h, l=c); return h==a&&c==l||(s[o++]=h, s[o++]=c), o;
  } function Qn(t, e) {
    return e*Math.round(t/e);
  } function tr(t, e, i, n, r, s, o) {
    if (e==i) return o; var a; var l; var h=Qn(t[e], r); var c=Qn(t[e+1], r); e+=n, s[o++]=h, s[o++]=c; do {
      if (a=Qn(t[e], r), l=Qn(t[e+1], r), (e+=n)==i) return s[o++]=a, s[o++]=l, o;
    } while (a==h&&l==c); for (;e<i;) {
      var _i30=Qn(t[e], r); var _u6=Qn(t[e+1], r); if (e+=n, _i30==a&&_u6==l) continue; var _d9=a-h; var _g4=l-c; var _f3=_i30-h; var _p3=_u6-c; _d9*_p3==_g4*_f3&&(_d9<0&&_f3<_d9||_d9==_f3||_d9>0&&_f3>_d9)&&(_g4<0&&_p3<_g4||_g4==_p3||_g4>0&&_p3>_g4)?(a=_i30, l=_u6):(s[o++]=a, s[o++]=l, h=a, c=l, a=_i30, l=_u6);
    } return s[o++]=a, s[o++]=l, o;
  } function er(t, e, i, n, r, s, o, a) {
    for (var _l6=0, _h5=i.length; _l6<_h5; ++_l6) {
      var _h6=i[_l6]; o=tr(t, e, _h6, n, r, s, o), a.push(o), e=_h6;
    } return o;
  } function ir(t, e, i, n, r, s, o, a) {
    for (var _l7=0, _h7=i.length; _l7<_h7; ++_l7) {
      var _h8=i[_l7]; var _c3=[]; o=er(t, e, _h8, n, r, s, o, _c3), a.push(_c3), e=_h8[_h8.length-1];
    } return o;
  } function nr(t, e, i, n, r) {
    r=void 0!==r?r:[]; var s=0; for (var _o16=e; _o16<i; _o16+=n)r[s++]=t.slice(_o16, _o16+n); return r.length=s, r;
  } function rr(t, e, i, n, r) {
    r=void 0!==r?r:[]; var s=0; for (var _o17=0, _a12=i.length; _o17<_a12; ++_o17) {
      var _a13=i[_o17]; r[s++]=nr(t, e, _a13, n, r[s]), e=_a13;
    } return r.length=s, r;
  } function sr(t, e, i, n, r) {
    r=void 0!==r?r:[]; var s=0; for (var _o18=0, _a14=i.length; _o18<_a14; ++_o18) {
      var _a15=i[_o18]; r[s++]=1===_a15.length&&_a15[0]===e?[]:rr(t, e, _a15, n, r[s]), e=_a15[_a15.length-1];
    } return r.length=s, r;
  } function or(t, e, i, n) {
    var r=0; var s=t[i-n]; var o=t[i-n+1]; for (;e<i; e+=n) {
      var _i31=t[e]; var _n30=t[e+1]; r+=o*_i31-s*_n30, s=_i31, o=_n30;
    } return r/2;
  } function ar(t, e, i, n) {
    var r=0; for (var _s14=0, _o19=i.length; _s14<_o19; ++_s14) {
      var _o20=i[_s14]; r+=or(t, e, _o20, n), e=_o20;
    } return r;
  } function lr(t, e, i, n) {
    var r=0; for (var _s15=0, _o21=i.length; _s15<_o21; ++_s15) {
      var _o22=i[_s15]; r+=ar(t, e, _o22, n), e=_o22[_o22.length-1];
    } return r;
  } var hr=/* #__PURE__*/function(_kn) {
    _inherits(hr, _kn); var _super15=_createSuper(hr); function hr(t, e) {
      var _this13; _classCallCheck(this, hr); _this13=_super15.call(this), _this13.maxDelta_=-1, _this13.maxDeltaRevision_=-1, void 0===e||Array.isArray(t[0])?_this13.setCoordinates(t, e):_this13.setFlatCoordinates(e, t); return _this13;
    }_createClass(hr, [{key: 'clone', value: function clone() {
      return new hr(this.flatCoordinates.slice(), this.layout);
    }}, {key: 'closestPointXY', value: function closestPointXY(t, e, i, n) {
      return n<oe(this.getExtent(), t, e)?n:(this.maxDeltaRevision_!=this.getRevision()&&(this.maxDelta_=Math.sqrt(Bn(this.flatCoordinates, 0, this.flatCoordinates.length, this.stride, 0)), this.maxDeltaRevision_=this.getRevision()), Xn(this.flatCoordinates, 0, this.flatCoordinates.length, this.stride, this.maxDelta_, !0, t, e, i, n));
    }}, {key: 'getArea', value: function getArea() {
      return or(this.flatCoordinates, 0, this.flatCoordinates.length, this.stride);
    }}, {key: 'getCoordinates', value: function getCoordinates() {
      return nr(this.flatCoordinates, 0, this.flatCoordinates.length, this.stride);
    }}, {key: 'getSimplifiedGeometryInternal', value: function getSimplifiedGeometryInternal(t) {
      var e=[]; return e.length=Hn(this.flatCoordinates, 0, this.flatCoordinates.length, this.stride, t, e, 0), new hr(e, 'XY');
    }}, {key: 'getType', value: function getType() {
      return 'LinearRing';
    }}, {key: 'intersectsExtent', value: function intersectsExtent(t) {
      return !1;
    }}, {key: 'setCoordinates', value: function setCoordinates(t, e) {
      this.setLayout(e, t, 1), this.flatCoordinates||(this.flatCoordinates=[]), this.flatCoordinates.length=Yn(this.flatCoordinates, 0, t, this.stride), this.changed();
    }}]); return hr;
  }(kn); var cr=hr; var ur=/* #__PURE__*/function(_kn2) {
    _inherits(ur, _kn2); var _super16=_createSuper(ur); function ur(t, e) {
      var _this14; _classCallCheck(this, ur); _this14=_super16.call(this), _this14.setCoordinates(t, e); return _this14;
    }_createClass(ur, [{key: 'clone', value: function clone() {
      var t=new ur(this.flatCoordinates.slice(), this.layout); return t.applyProperties(this), t;
    }}, {key: 'closestPointXY', value: function closestPointXY(t, e, i, n) {
      var r=this.flatCoordinates; var s=xi(t, e, r[0], r[1]); if (s<n) {
        var _t11=this.stride; for (var _e28=0; _e28<_t11; ++_e28)i[_e28]=r[_e28]; return i.length=_t11, s;
      } return n;
    }}, {key: 'getCoordinates', value: function getCoordinates() {
      return this.flatCoordinates?this.flatCoordinates.slice():[];
    }}, {key: 'computeExtent', value: function computeExtent(t) {
      return fe(this.flatCoordinates, t);
    }}, {key: 'getType', value: function getType() {
      return 'Point';
    }}, {key: 'intersectsExtent', value: function intersectsExtent(t) {
      return he(t, this.flatCoordinates[0], this.flatCoordinates[1]);
    }}, {key: 'setCoordinates', value: function setCoordinates(t, e) {
      this.setLayout(e, t, 0), this.flatCoordinates||(this.flatCoordinates=[]), this.flatCoordinates.length=Zn(this.flatCoordinates, 0, t, this.stride), this.changed();
    }}]); return ur;
  }(kn); var dr=ur; function gr(t, e, i, n, r) {
    return !Ee(r, function(r) {
      return !fr(t, e, i, n, r[0], r[1]);
    });
  } function fr(t, e, i, n, r, s) {
    var o=0; var a=t[i-n]; var l=t[i-n+1]; for (;e<i; e+=n) {
      var _i32=t[e]; var _n31=t[e+1]; l<=s?_n31>s&&(_i32-a)*(s-l)-(r-a)*(_n31-l)>0&&o++:_n31<=s&&(_i32-a)*(s-l)-(r-a)*(_n31-l)<0&&o--, a=_i32, l=_n31;
    } return 0!==o;
  } function pr(t, e, i, n, r, s) {
    if (0===i.length) return !1; if (!fr(t, e, i[0], n, r, s)) return !1; for (var _e29=1, _o23=i.length; _e29<_o23; ++_e29) if (fr(t, i[_e29-1], i[_e29], n, r, s)) return !1; return !0;
  } function mr(t, e, i, n, r, s) {
    if (0===i.length) return !1; for (var _o24=0, _a16=i.length; _o24<_a16; ++_o24) {
      var _a17=i[_o24]; if (pr(t, e, _a17, n, r, s)) return !0; e=_a17[_a17.length-1];
    } return !1;
  } function _r(t, e, i, n, r, s, o) {
    var a; var h; var c; var u; var d; var g; var f; var p=r[s+1]; var m=[]; for (var _r22=0, _s16=i.length; _r22<_s16; ++_r22) {
      var _s17=i[_r22]; for (u=t[_s17-n], g=t[_s17-n+1], a=e; a<_s17; a+=n)d=t[a], f=t[a+1], (p<=g&&f<=p||g<=p&&p<=f)&&(c=(p-g)/(f-g)*(d-u)+u, m.push(c)), u=d, g=f;
    } var _=NaN; var y=-1/0; for (m.sort(l), u=m[0], a=1, h=m.length; a<h; ++a) {
      d=m[a]; var _r23=Math.abs(d-u); _r23>y&&(c=(u+d)/2, pr(t, e, i, n, c, p)&&(_=c, y=_r23)), u=d;
    } return isNaN(_)&&(_=r[s]), o?(o.push(_, p, y), o):[_, p, y];
  } function yr(t, e, i, n, r) {
    var s=[]; for (var _o25=0, _a18=i.length; _o25<_a18; ++_o25) {
      var _a19=i[_o25]; s=_r(t, e, _a19, n, r, 2*_o25, s), e=_a19[_a19.length-1];
    } return s;
  } function xr(t, e, i, n, r) {
    var s; for (e+=n; e<i; e+=n) if (s=r(t.slice(e-n, e), t.slice(e, e+n)), s) return s; return !1;
  } function vr(t, e, i, n, r) {
    var s=Se([1/0, 1/0, -1/0, -1/0], t, e, i, n); return !!Ge(r, s)&&(!!le(r, s)||s[0]>=r[0]&&s[2]<=r[2]||s[1]>=r[1]&&s[3]<=r[3]||xr(t, e, i, n, function(t, e) {
      return ze(r, t, e);
    }));
  } function Sr(t, e, i, n, r) {
    for (var _s18=0, _o26=i.length; _s18<_o26; ++_s18) {
      if (vr(t, e, i[_s18], n, r)) return !0; e=i[_s18];
    } return !1;
  } function wr(t, e, i, n, r) {
    return !!vr(t, e, i, n, r)||!!fr(t, e, i, n, r[0], r[1])||!!fr(t, e, i, n, r[0], r[3])||!!fr(t, e, i, n, r[2], r[1])||!!fr(t, e, i, n, r[2], r[3]);
  } function Tr(t, e, i, n, r) {
    if (!wr(t, e, i[0], n, r)) return !1; if (1===i.length) return !0; for (var _e30=1, _s19=i.length; _e30<_s19; ++_e30) if (gr(t, i[_e30-1], i[_e30], n, r)&&!vr(t, i[_e30-1], i[_e30], n, r)) return !1; return !0;
  } function Er(t, e, i, n, r) {
    for (var _s20=0, _o27=i.length; _s20<_o27; ++_s20) {
      var _o28=i[_s20]; if (Tr(t, e, _o28, n, r)) return !0; e=_o28[_o28.length-1];
    } return !1;
  } function Cr(t, e, i, n) {
    for (;e<i-n;) {
      for (var _r24=0; _r24<n; ++_r24) {
        var _s21=t[e+_r24]; t[e+_r24]=t[i-n+_r24], t[i-n+_r24]=_s21;
      }e+=n, i-=n;
    }
  } function Rr(t, e, i, n) {
    var r=0; var s=t[i-n]; var o=t[i-n+1]; for (;e<i; e+=n) {
      var _i33=t[e]; var _n32=t[e+1]; r+=(_i33-s)*(_n32+o), s=_i33, o=_n32;
    } return 0===r?void 0:r>0;
  } function br(t, e, i, n, r) {
    r=void 0!==r&&r; for (var _s22=0, _o29=i.length; _s22<_o29; ++_s22) {
      var _o30=i[_s22]; var _a20=Rr(t, e, _o30, n); if (0===_s22) {
        if (r&&_a20||!r&&!_a20) return !1;
      } else if (r&&!_a20||!r&&_a20) return !1; e=_o30;
    } return !0;
  } function Pr(t, e, i, n, r) {
    for (var _s23=0, _o31=i.length; _s23<_o31; ++_s23) {
      var _o32=i[_s23]; if (!br(t, e, _o32, n, r)) return !1; _o32.length&&(e=_o32[_o32.length-1]);
    } return !0;
  } function Ir(t, e, i, n, r) {
    r=void 0!==r&&r; for (var _s24=0, _o33=i.length; _s24<_o33; ++_s24) {
      var _o34=i[_s24]; var _a21=Rr(t, e, _o34, n); (0===_s24?r&&_a21||!r&&!_a21:r&&!_a21||!r&&_a21)&&Cr(t, e, _o34, n), e=_o34;
    } return e;
  } function Lr(t, e, i, n, r) {
    for (var _s25=0, _o35=i.length; _s25<_o35; ++_s25)e=Ir(t, e, i[_s25], n, r); return e;
  } function Fr(t, e) {
    var i=[]; var n=0; var r=0; for (var _s26=0, _o36=e.length; _s26<_o36; ++_s26) {
      var _o37=e[_s26]; if (Rr(t, n, _o37, 2)) {
        if (0===i.length) continue; i[i.length-1].push(e[r]);
      } else i.push(e.slice(r, _s26+1)); r=_s26+1, n=_o37;
    } return i;
  } var Mr=/* #__PURE__*/function(_kn3) {
    _inherits(Mr, _kn3); var _super17=_createSuper(Mr); function Mr(t, e, i) {
      var _this15; _classCallCheck(this, Mr); _this15=_super17.call(this), _this15.ends_=[], _this15.flatInteriorPointRevision_=-1, _this15.flatInteriorPoint_=null, _this15.maxDelta_=-1, _this15.maxDeltaRevision_=-1, _this15.orientedRevision_=-1, _this15.orientedFlatCoordinates_=null, void 0!==e&&i?(_this15.setFlatCoordinates(e, t), _this15.ends_=i):_this15.setCoordinates(t, e); return _this15;
    }_createClass(Mr, [{key: 'appendLinearRing', value: function appendLinearRing(t) {
this.flatCoordinates?u(this.flatCoordinates, t.getFlatCoordinates()):this.flatCoordinates=t.getFlatCoordinates().slice(), this.ends_.push(this.flatCoordinates.length), this.changed();
    }}, {key: 'clone', value: function clone() {
      var t=new Mr(this.flatCoordinates.slice(), this.layout, this.ends_.slice()); return t.applyProperties(this), t;
    }}, {key: 'closestPointXY', value: function closestPointXY(t, e, i, n) {
      return n<oe(this.getExtent(), t, e)?n:(this.maxDeltaRevision_!=this.getRevision()&&(this.maxDelta_=Math.sqrt(zn(this.flatCoordinates, 0, this.ends_, this.stride, 0)), this.maxDeltaRevision_=this.getRevision()), Vn(this.flatCoordinates, 0, this.ends_, this.stride, this.maxDelta_, !0, t, e, i, n));
    }}, {key: 'containsXY', value: function containsXY(t, e) {
      return pr(this.getOrientedFlatCoordinates(), 0, this.ends_, this.stride, t, e);
    }}, {key: 'getArea', value: function getArea() {
      return ar(this.getOrientedFlatCoordinates(), 0, this.ends_, this.stride);
    }}, {key: 'getCoordinates', value: function getCoordinates(t) {
      var e; return void 0!==t?(e=this.getOrientedFlatCoordinates().slice(), Ir(e, 0, this.ends_, this.stride, t)):e=this.flatCoordinates, rr(e, 0, this.ends_, this.stride);
    }}, {key: 'getEnds', value: function getEnds() {
      return this.ends_;
    }}, {key: 'getFlatInteriorPoint', value: function getFlatInteriorPoint() {
      if (this.flatInteriorPointRevision_!=this.getRevision()) {
        var _t12=Pe(this.getExtent()); this.flatInteriorPoint_=_r(this.getOrientedFlatCoordinates(), 0, this.ends_, this.stride, _t12, 0), this.flatInteriorPointRevision_=this.getRevision();
      } return this.flatInteriorPoint_;
    }}, {key: 'getInteriorPoint', value: function getInteriorPoint() {
      return new dr(this.getFlatInteriorPoint(), 'XYM');
    }}, {key: 'getLinearRingCount', value: function getLinearRingCount() {
      return this.ends_.length;
    }}, {key: 'getLinearRing', value: function getLinearRing(t) {
      return t<0||this.ends_.length<=t?null:new cr(this.flatCoordinates.slice(0===t?0:this.ends_[t-1], this.ends_[t]), this.layout);
    }}, {key: 'getLinearRings', value: function getLinearRings() {
      var t=this.layout; var e=this.flatCoordinates; var i=this.ends_; var n=[]; var r=0; for (var _s27=0, _o38=i.length; _s27<_o38; ++_s27) {
        var _o39=i[_s27]; var _a22=new cr(e.slice(r, _o39), t); n.push(_a22), r=_o39;
      } return n;
    }}, {key: 'getOrientedFlatCoordinates', value: function getOrientedFlatCoordinates() {
      if (this.orientedRevision_!=this.getRevision()) {
        var _t13=this.flatCoordinates; br(_t13, 0, this.ends_, this.stride)?this.orientedFlatCoordinates_=_t13:(this.orientedFlatCoordinates_=_t13.slice(), this.orientedFlatCoordinates_.length=Ir(this.orientedFlatCoordinates_, 0, this.ends_, this.stride)), this.orientedRevision_=this.getRevision();
      } return this.orientedFlatCoordinates_;
    }}, {key: 'getSimplifiedGeometryInternal', value: function getSimplifiedGeometryInternal(t) {
      var e=[]; var i=[]; return e.length=er(this.flatCoordinates, 0, this.ends_, this.stride, Math.sqrt(t), e, 0, i), new Mr(e, 'XY', i);
    }}, {key: 'getType', value: function getType() {
      return 'Polygon';
    }}, {key: 'intersectsExtent', value: function intersectsExtent(t) {
      return Tr(this.getOrientedFlatCoordinates(), 0, this.ends_, this.stride, t);
    }}, {key: 'setCoordinates', value: function setCoordinates(t, e) {
      this.setLayout(e, t, 2), this.flatCoordinates||(this.flatCoordinates=[]); var i=Kn(this.flatCoordinates, 0, t, this.stride, this.ends_); this.flatCoordinates.length=0===i.length?0:i[i.length-1], this.changed();
    }}]); return Mr;
  }(kn); var Ar=Mr; function Or(t, e, i, n) {
    i=i||32; var r=[]; for (var _s28=0; _s28<i; ++_s28)u(r, qi(t, e, 2*Math.PI*_s28/i, n)); return r.push(r[0], r[1]), new Mr(r, 'XY', [r.length]);
  } function Nr(t) {
    var e=t[0]; var i=t[1]; var n=t[2]; var r=t[3]; var s=[e, i, e, r, n, r, n, i, e, i]; return new Mr(s, 'XY', [s.length]);
  } function Dr(t, e, i) {
    e=e||32; var n=t.getStride(); var r=t.getLayout(); var s=t.getCenter(); var o=n*(e+1); var a=new Array(o); for (var _t14=0; _t14<o; _t14+=n) {
      a[_t14]=0, a[_t14+1]=0; for (var _e31=2; _e31<n; _e31++)a[_t14+_e31]=s[_e31];
    } var l=[a.length]; var h=new Mr(a, r, l); return Gr(h, s, t.getRadius(), i), h;
  } function Gr(t, e, i, n) {
    var r=t.getFlatCoordinates(); var s=t.getStride(); var o=r.length/s-1; var a=n||0; for (var _t15=0; _t15<=o; ++_t15) {
      var _n33=_t15*s; var _l8=a+2*Ti(_t15, o)*Math.PI/o; r[_n33]=e[0]+i*Math.cos(_l8), r[_n33+1]=e[1]+i*Math.sin(_l8);
    }t.changed();
  } var kr='accuracy'; var jr='accuracyGeometry'; var Br='altitude'; var zr='altitudeAccuracy'; var Ur='heading'; var Xr='position'; var Vr='projection'; var Wr='speed'; var Zr='tracking'; var Yr='trackingOptions'; var Kr='error'; var qr=/* #__PURE__*/function(_r25) {
    _inherits(qr, _r25); var _super18=_createSuper(qr); function qr(t) {
      var _this16; _classCallCheck(this, qr); _this16=_super18.call(this, Kr), _this16.code=t.code, _this16.message=t.message; return _this16;
    } return _createClass(qr);
  }(r); var Hr=/* #__PURE__*/function(_W4) {
    _inherits(Hr, _W4); var _super19=_createSuper(Hr); function Hr(t) {
      var _this17; _classCallCheck(this, Hr); _this17=_super19.call(this), _this17.on, _this17.once, _this17.un, t=t||{}, _this17.position_=null, _this17.transform_=rn, _this17.watchId_=void 0, _this17.addChangeListener(Vr, _this17.handleProjectionChanged_), _this17.addChangeListener(Zr, _this17.handleTrackingChanged_), void 0!==t.projection&&_this17.setProjection(t.projection), void 0!==t.trackingOptions&&_this17.setTrackingOptions(t.trackingOptions), _this17.setTracking(void 0!==t.tracking&&t.tracking); return _this17;
    }_createClass(Hr, [{key: 'disposeInternal', value: function disposeInternal() {
      this.setTracking(!1), _get(_getPrototypeOf(Hr.prototype), 'disposeInternal', this).call(this);
    }}, {key: 'handleProjectionChanged_', value: function handleProjectionChanged_() {
      var t=this.getProjection(); t&&(this.transform_=pn(an('EPSG:4326'), t), this.position_&&this.set(Xr, this.transform_(this.position_)));
    }}, {key: 'handleTrackingChanged_', value: function handleTrackingChanged_() {
      if ('geolocation'in navigator) {
        var _t16=this.getTracking(); _t16&&void 0===this.watchId_?this.watchId_=navigator.geolocation.watchPosition(this.positionChange_.bind(this), this.positionError_.bind(this), this.getTrackingOptions()):_t16||void 0===this.watchId_||(navigator.geolocation.clearWatch(this.watchId_), this.watchId_=void 0);
      }
    }}, {key: 'positionChange_', value: function positionChange_(t) {
      var e=t.coords; this.set(kr, e.accuracy), this.set(Br, null===e.altitude?void 0:e.altitude), this.set(zr, null===e.altitudeAccuracy?void 0:e.altitudeAccuracy), this.set(Ur, null===e.heading?void 0:wi(e.heading)), this.position_?(this.position_[0]=e.longitude, this.position_[1]=e.latitude):this.position_=[e.longitude, e.latitude]; var i=this.transform_(this.position_); this.set(Xr, i.slice()), this.set(Wr, null===e.speed?void 0:e.speed); var n=Or(this.position_, e.accuracy); n.applyTransform(this.transform_), this.set(jr, n), this.changed();
    }}, {key: 'positionError_', value: function positionError_(t) {
      this.dispatchEvent(new qr(t));
    }}, {key: 'getAccuracy', value: function getAccuracy() {
      return this.get(kr);
    }}, {key: 'getAccuracyGeometry', value: function getAccuracyGeometry() {
      return this.get(jr)||null;
    }}, {key: 'getAltitude', value: function getAltitude() {
      return this.get(Br);
    }}, {key: 'getAltitudeAccuracy', value: function getAltitudeAccuracy() {
      return this.get(zr);
    }}, {key: 'getHeading', value: function getHeading() {
      return this.get(Ur);
    }}, {key: 'getPosition', value: function getPosition() {
      return this.get(Xr);
    }}, {key: 'getProjection', value: function getProjection() {
      return this.get(Vr);
    }}, {key: 'getSpeed', value: function getSpeed() {
      return this.get(Wr);
    }}, {key: 'getTracking', value: function getTracking() {
      return this.get(Zr);
    }}, {key: 'getTrackingOptions', value: function getTrackingOptions() {
      return this.get(Yr);
    }}, {key: 'setProjection', value: function setProjection(t) {
      this.set(Vr, an(t));
    }}, {key: 'setTracking', value: function setTracking(t) {
      this.set(Zr, t);
    }}, {key: 'setTrackingOptions', value: function setTrackingOptions(t) {
      this.set(Yr, t);
    }}]); return Hr;
  }(W); var $r=/* #__PURE__*/function(_S4) {
    _inherits($r, _S4); var _super20=_createSuper($r); function $r(t, e, i, n) {
      var _this18; _classCallCheck(this, $r); _this18=_super20.call(this), _this18.extent=t, _this18.pixelRatio_=i, _this18.resolution=e, _this18.state=n; return _this18;
    }_createClass($r, [{key: 'changed', value: function changed() {
      this.dispatchEvent(w);
    }}, {key: 'getExtent', value: function getExtent() {
      return this.extent;
    }}, {key: 'getImage', value: function getImage() {
      return z();
    }}, {key: 'getPixelRatio', value: function getPixelRatio() {
      return this.pixelRatio_;
    }}, {key: 'getResolution', value: function getResolution() {
      return this.resolution;
    }}, {key: 'getState', value: function getState() {
      return this.state;
    }}, {key: 'load', value: function load() {
      z();
    }}]); return $r;
  }(S); var Jr=0; var Qr=1; var ts=2; var es=3; var is=4; function ns(t, e, i) {
    var n=t; var r=!0; var s=!1; var o=!1; var a=[D(n, M, function() {
      o=!0, s||e();
    })]; return n.src&&pt?(s=!0, n.decode().then(function() {
      r&&e();
    })['catch'](function(t) {
      r&&(o?e():i());
    })):a.push(D(n, T, i)), function() {
      r=!1, a.forEach(G);
    };
  } var rs=/* #__PURE__*/function(_$r) {
    _inherits(rs, _$r); var _super21=_createSuper(rs); function rs(t, e, i, n, r, s) {
      var _this19; _classCallCheck(this, rs); _this19=_super21.call(this, t, e, i, Jr), _this19.src_=n, _this19.image_=new Image(), null!==r&&(_this19.image_.crossOrigin=r), _this19.unlisten_=null, _this19.state=Jr, _this19.imageLoadFunction_=s; return _this19;
    }_createClass(rs, [{key: 'getImage', value: function getImage() {
      return this.image_;
    }}, {key: 'handleImageError_', value: function handleImageError_() {
      this.state=es, this.unlistenImage_(), this.changed();
    }}, {key: 'handleImageLoad_', value: function handleImageLoad_() {
      void 0===this.resolution&&(this.resolution=Me(this.extent)/this.image_.height), this.state=ts, this.unlistenImage_(), this.changed();
    }}, {key: 'load', value: function load() {
      this.state!=Jr&&this.state!=es||(this.state=Qr, this.changed(), this.imageLoadFunction_(this, this.src_), this.unlisten_=ns(this.image_, this.handleImageLoad_.bind(this), this.handleImageError_.bind(this)));
    }}, {key: 'setImage', value: function setImage(t) {
      this.image_=t, this.resolution=Me(this.extent)/this.image_.height;
    }}, {key: 'unlistenImage_', value: function unlistenImage_() {
      this.unlisten_&&(this.unlisten_(), this.unlisten_=null);
    }}]); return rs;
  }($r); var ss=/* #__PURE__*/function(_$r2) {
    _inherits(ss, _$r2); var _super22=_createSuper(ss); function ss(t, e, i, n, r) {
      var _this20; _classCallCheck(this, ss); _this20=_super22.call(this, t, e, i, void 0!==r?Jr:ts), _this20.loader_=void 0!==r?r:null, _this20.canvas_=n, _this20.error_=null; return _this20;
    }_createClass(ss, [{key: 'getError', value: function getError() {
      return this.error_;
    }}, {key: 'handleLoad_', value: function handleLoad_(t) {
t?(this.error_=t, this.state=es):this.state=ts, this.changed();
    }}, {key: 'load', value: function load() {
      this.state==Jr&&(this.state=Qr, this.changed(), this.loader_(this.handleLoad_.bind(this)));
    }}, {key: 'getImage', value: function getImage() {
      return this.canvas_;
    }}]); return ss;
  }($r); var os=/* #__PURE__*/function(_ot2) {
    _inherits(os, _ot2); var _super23=_createSuper(os); function os(t, e, i, n, r, s) {
      var _this21; _classCallCheck(this, os); _this21=_super23.call(this, t, e, s), _this21.crossOrigin_=n, _this21.src_=i, _this21.key=i, _this21.image_=new Image(), null!==n&&(_this21.image_.crossOrigin=n), _this21.unlisten_=null, _this21.tileLoadFunction_=r; return _this21;
    }_createClass(os, [{key: 'getImage', value: function getImage() {
      return this.image_;
    }}, {key: 'setImage', value: function setImage(t) {
      this.image_=t, this.state=Q, this.unlistenImage_(), this.changed();
    }}, {key: 'handleImageError_', value: function handleImageError_() {
      this.state=tt, this.unlistenImage_(), this.image_=function() {
        var t=_t(1, 1); return t.fillStyle='rgba(0,0,0,0)', t.fillRect(0, 0, 1, 1), t.canvas;
      }(), this.changed();
    }}, {key: 'handleImageLoad_', value: function handleImageLoad_() {
      var t=this.image_; t.naturalWidth&&t.naturalHeight?this.state=Q:this.state=et, this.unlistenImage_(), this.changed();
    }}, {key: 'load', value: function load() {
      this.state==tt&&(this.state=$, this.image_=new Image(), null!==this.crossOrigin_&&(this.image_.crossOrigin=this.crossOrigin_)), this.state==$&&(this.state=J, this.changed(), this.tileLoadFunction_(this, this.src_), this.unlisten_=ns(this.image_, this.handleImageLoad_.bind(this), this.handleImageError_.bind(this)));
    }}, {key: 'unlistenImage_', value: function unlistenImage_() {
      this.unlisten_&&(this.unlisten_(), this.unlisten_=null);
    }}]); return os;
  }(ot); var as=/* #__PURE__*/function() {
    function as(t, e, i) {
      _classCallCheck(this, as); this.decay_=t, this.minVelocity_=e, this.delay_=i, this.points_=[], this.angle_=0, this.initialVelocity_=0;
    }_createClass(as, [{key: 'begin', value: function begin() {
      this.points_.length=0, this.angle_=0, this.initialVelocity_=0;
    }}, {key: 'update', value: function update(t, e) {
      this.points_.push(t, e, Date.now());
    }}, {key: 'end', value: function end() {
      if (this.points_.length<6) return !1; var t=Date.now()-this.delay_; var e=this.points_.length-3; if (this.points_[e+2]<t) return !1; var i=e-3; for (;i>0&&this.points_[i+2]>t;)i-=3; var n=this.points_[e+2]-this.points_[i+2]; if (n<1e3/60) return !1; var r=this.points_[e]-this.points_[i]; var s=this.points_[e+1]-this.points_[i+1]; return this.angle_=Math.atan2(s, r), this.initialVelocity_=Math.sqrt(r*r+s*s)/n, this.initialVelocity_>this.minVelocity_;
    }}, {key: 'getDistance', value: function getDistance() {
      return (this.minVelocity_-this.initialVelocity_)/this.decay_;
    }}, {key: 'getAngle', value: function getAngle() {
      return this.angle_;
    }}]); return as;
  }(); var ls=/^#([a-f0-9]{3}|[a-f0-9]{4}(?:[a-f0-9]{2}){0,2})$/i; var hs=/^([a-z]*)$|^hsla?\(.*\)$/i; function cs(t) {
    return 'string'==typeof t?t:ps(t);
  } function us(t) {
    var e=document.createElement('div'); if (e.style.color=t, ''!==e.style.color) {
      document.body.appendChild(e); var _t17=getComputedStyle(e).color; return document.body.removeChild(e), _t17;
    } return '';
  } var ds=function() {
    var t={}; var e=0; return function(i) {
      var n; if (t.hasOwnProperty(i))n=t[i]; else {
        if (e>=1024) {
          var _i34=0; for (var _n34 in t)0==(3&_i34++)&&(delete t[_n34], --e);
        }n=function(t) {
          var e; var i; var n; var r; var s; hs.exec(t)&&(t=us(t)); if (ls.exec(t)) {
            var _o40=t.length-1; var _a23; _a23=_o40<=4?1:2; var _l9=4===_o40||8===_o40; e=parseInt(t.substr(1+0*_a23, _a23), 16), i=parseInt(t.substr(1+1*_a23, _a23), 16), n=parseInt(t.substr(1+2*_a23, _a23), 16), r=_l9?parseInt(t.substr(1+3*_a23, _a23), 16):255, 1==_a23&&(e=(e<<4)+e, i=(i<<4)+i, n=(n<<4)+n, _l9&&(r=(r<<4)+r)), s=[e, i, n, r/255];
          } else t.startsWith('rgba(')?(s=t.slice(5, -1).split(',').map(Number), fs(s)):t.startsWith('rgb(')?(s=t.slice(4, -1).split(',').map(Number), s.push(1), fs(s)):Ft(!1, 14); return s;
        }(i), t[i]=n, ++e;
      } return n;
    };
  }(); function gs(t) {
    return Array.isArray(t)?t:ds(t);
  } function fs(t) {
    return t[0]=_i(t[0]+.5|0, 0, 255), t[1]=_i(t[1]+.5|0, 0, 255), t[2]=_i(t[2]+.5|0, 0, 255), t[3]=_i(t[3], 0, 1), t;
  } function ps(t) {
    var e=t[0]; e!=(0|e)&&(e=e+.5|0); var i=t[1]; i!=(0|i)&&(i=i+.5|0); var n=t[2]; n!=(0|n)&&(n=n+.5|0); return 'rgba('+e+','+i+','+n+','+(void 0===t[3]?1:Math.round(100*t[3])/100)+')';
  } function ms(t) {
    return hs.test(t)&&(t=us(t)), ls.test(t)||t.startsWith('rgba(')||t.startsWith('rgb(');
  } var _s=/* #__PURE__*/function() {
    function _s() {
      _classCallCheck(this, _s); this.cache_={}, this.cacheSize_=0, this.maxCacheSize_=32;
    }_createClass(_s, [{key: 'clear', value: function clear() {
      this.cache_={}, this.cacheSize_=0;
    }}, {key: 'canExpireCache', value: function canExpireCache() {
      return this.cacheSize_>this.maxCacheSize_;
    }}, {key: 'expire', value: function expire() {
      if (this.canExpireCache()) {
        var _t18=0; for (var _e32 in this.cache_) {
          var _i35=this.cache_[_e32]; 0!=(3&_t18++)||_i35.hasListener()||(delete this.cache_[_e32], --this.cacheSize_);
        }
      }
    }}, {key: 'get', value: function get(t, e, i) {
      var n=ys(t, e, i); return n in this.cache_?this.cache_[n]:null;
    }}, {key: 'set', value: function set(t, e, i, n) {
      var r=ys(t, e, i); this.cache_[r]=n, ++this.cacheSize_;
    }}, {key: 'setSize', value: function setSize(t) {
      this.maxCacheSize_=t, this.expire();
    }}]); return _s;
  }(); function ys(t, e, i) {
    return e+':'+t+':'+(i?cs(i):'null');
  } var xs=_s; var vs=new _s(); var Ss='opacity'; var ws='visible'; var Ts='extent'; var Es='zIndex'; var Cs='maxResolution'; var Rs='minResolution'; var bs='maxZoom'; var Ps='minZoom'; var Is='source'; var Ls='map'; var Fs=/* #__PURE__*/function(_W5) {
    _inherits(Fs, _W5); var _super24=_createSuper(Fs); function Fs(t) {
      var _this22; _classCallCheck(this, Fs); _this22=_super24.call(this), _this22.on, _this22.once, _this22.un, _this22.background_=t.background; var e=Object.assign({}, t); 'object'==_typeof(t.properties)&&(delete e.properties, Object.assign(e, t.properties)), e[Ss]=void 0!==t.opacity?t.opacity:1, Ft('number'==typeof e[Ss], 64), e[ws]=void 0===t.visible||t.visible, e[Es]=t.zIndex, e[Cs]=void 0!==t.maxResolution?t.maxResolution:1/0, e[Rs]=void 0!==t.minResolution?t.minResolution:0, e[Ps]=void 0!==t.minZoom?t.minZoom:-1/0, e[bs]=void 0!==t.maxZoom?t.maxZoom:1/0, _this22.className_=void 0!==e.className?e.className:'ol-layer', delete e.className, _this22.setProperties(e), _this22.state_=null; return _this22;
    }_createClass(Fs, [{key: 'getBackground', value: function getBackground() {
      return this.background_;
    }}, {key: 'getClassName', value: function getClassName() {
      return this.className_;
    }}, {key: 'getLayerState', value: function getLayerState(t) {
      var e=this.state_||{layer: this, managed: void 0===t||t}; var i=this.getZIndex(); return e.opacity=_i(Math.round(100*this.getOpacity())/100, 0, 1), e.visible=this.getVisible(), e.extent=this.getExtent(), e.zIndex=void 0!==i||e.managed?i:1/0, e.maxResolution=this.getMaxResolution(), e.minResolution=Math.max(this.getMinResolution(), 0), e.minZoom=this.getMinZoom(), e.maxZoom=this.getMaxZoom(), this.state_=e, e;
    }}, {key: 'getLayersArray', value: function getLayersArray(t) {
      return z();
    }}, {key: 'getLayerStatesArray', value: function getLayerStatesArray(t) {
      return z();
    }}, {key: 'getExtent', value: function getExtent() {
      return this.get(Ts);
    }}, {key: 'getMaxResolution', value: function getMaxResolution() {
      return this.get(Cs);
    }}, {key: 'getMinResolution', value: function getMinResolution() {
      return this.get(Rs);
    }}, {key: 'getMinZoom', value: function getMinZoom() {
      return this.get(Ps);
    }}, {key: 'getMaxZoom', value: function getMaxZoom() {
      return this.get(bs);
    }}, {key: 'getOpacity', value: function getOpacity() {
      return this.get(Ss);
    }}, {key: 'getSourceState', value: function getSourceState() {
      return z();
    }}, {key: 'getVisible', value: function getVisible() {
      return this.get(ws);
    }}, {key: 'getZIndex', value: function getZIndex() {
      return this.get(Es);
    }}, {key: 'setBackground', value: function setBackground(t) {
      this.background_=t, this.changed();
    }}, {key: 'setExtent', value: function setExtent(t) {
      this.set(Ts, t);
    }}, {key: 'setMaxResolution', value: function setMaxResolution(t) {
      this.set(Cs, t);
    }}, {key: 'setMinResolution', value: function setMinResolution(t) {
      this.set(Rs, t);
    }}, {key: 'setMaxZoom', value: function setMaxZoom(t) {
      this.set(bs, t);
    }}, {key: 'setMinZoom', value: function setMinZoom(t) {
      this.set(Ps, t);
    }}, {key: 'setOpacity', value: function setOpacity(t) {
      Ft('number'==typeof t, 64), this.set(Ss, t);
    }}, {key: 'setVisible', value: function setVisible(t) {
      this.set(ws, t);
    }}, {key: 'setZIndex', value: function setZIndex(t) {
      this.set(Es, t);
    }}, {key: 'disposeInternal', value: function disposeInternal() {
      this.state_&&(this.state_.layer=null, this.state_=null), _get(_getPrototypeOf(Fs.prototype), 'disposeInternal', this).call(this);
    }}]); return Fs;
  }(W); var Ms='prerender'; var As='postrender'; var Os='precompose'; var Ns='postcompose'; var Ds='rendercomplete'; function Gs(t, e) {
    if (!t.visible) return !1; var i=e.resolution; if (i<t.minResolution||i>=t.maxResolution) return !1; var n=e.zoom; return n>t.minZoom&&n<=t.maxZoom;
  } var ks=/* #__PURE__*/function(_Fs) {
    _inherits(ks, _Fs); var _super25=_createSuper(ks); function ks(t) {
      var _this23; _classCallCheck(this, ks); var e=Object.assign({}, t); delete e.source, _this23=_super25.call(this, e), _this23.on, _this23.once, _this23.un, _this23.mapPrecomposeKey_=null, _this23.mapRenderKey_=null, _this23.sourceChangeKey_=null, _this23.renderer_=null, _this23.sourceReady_=!1, _this23.rendered=!1, t.render&&(_this23.render=t.render), t.map&&_this23.setMap(t.map), _this23.addChangeListener(Is, _this23.handleSourcePropertyChange_); var i=t.source?t.source:null; _this23.setSource(i); return _this23;
    }_createClass(ks, [{key: 'getLayersArray', value: function getLayersArray(t) {
      return (t=t||[]).push(this), t;
    }}, {key: 'getLayerStatesArray', value: function getLayerStatesArray(t) {
      return (t=t||[]).push(this.getLayerState()), t;
    }}, {key: 'getSource', value: function getSource() {
      return this.get(Is)||null;
    }}, {key: 'getRenderSource', value: function getRenderSource() {
      return this.getSource();
    }}, {key: 'getSourceState', value: function getSourceState() {
      var t=this.getSource(); return t?t.getState():'undefined';
    }}, {key: 'handleSourceChange_', value: function handleSourceChange_() {
      this.changed(), this.sourceReady_||'ready'!==this.getSource().getState()||(this.sourceReady_=!0, this.dispatchEvent('sourceready'));
    }}, {key: 'handleSourcePropertyChange_', value: function handleSourcePropertyChange_() {
      var _this24=this; this.sourceChangeKey_&&(G(this.sourceChangeKey_), this.sourceChangeKey_=null), this.sourceReady_=!1; var t=this.getSource(); t&&(this.sourceChangeKey_=N(t, w, this.handleSourceChange_, this), 'ready'===t.getState()&&(this.sourceReady_=!0, setTimeout(function() {
        _this24.dispatchEvent('sourceready');
      }, 0))), this.changed();
    }}, {key: 'getFeatures', value: function getFeatures(t) {
      return this.renderer_?this.renderer_.getFeatures(t):Promise.resolve([]);
    }}, {key: 'getData', value: function getData(t) {
      return this.renderer_&&this.rendered?this.renderer_.getData(t):null;
    }}, {key: 'render', value: function render(t, e) {
      var i=this.getRenderer(); if (i.prepareFrame(t)) return this.rendered=!0, i.renderFrame(t, e);
    }}, {key: 'unrender', value: function unrender() {
      this.rendered=!1;
    }}, {key: 'setMapInternal', value: function setMapInternal(t) {
      t||this.unrender(), this.set(Ls, t);
    }}, {key: 'getMapInternal', value: function getMapInternal() {
      return this.get(Ls);
    }}, {key: 'setMap', value: function setMap(t) {
      this.mapPrecomposeKey_&&(G(this.mapPrecomposeKey_), this.mapPrecomposeKey_=null), t||this.changed(), this.mapRenderKey_&&(G(this.mapRenderKey_), this.mapRenderKey_=null), t&&(this.mapPrecomposeKey_=N(t, Os, function(t) {
        var e=t.frameState.layerStatesArray; var i=this.getLayerState(!1); Ft(!e.some(function(t) {
          return t.layer===i.layer;
        }), 67), e.push(i);
      }, this), this.mapRenderKey_=N(this, w, t.render, t), this.changed());
    }}, {key: 'setSource', value: function setSource(t) {
      this.set(Is, t);
    }}, {key: 'getRenderer', value: function getRenderer() {
      return this.renderer_||(this.renderer_=this.createRenderer()), this.renderer_;
    }}, {key: 'hasRenderer', value: function hasRenderer() {
      return !!this.renderer_;
    }}, {key: 'createRenderer', value: function createRenderer() {
      return null;
    }}, {key: 'disposeInternal', value: function disposeInternal() {
      this.renderer_&&(this.renderer_.dispose(), delete this.renderer_), this.setSource(null), _get(_getPrototypeOf(ks.prototype), 'disposeInternal', this).call(this);
    }}]); return ks;
  }(Fs); function js(t, e) {
    vs.expire();
  } var Bs=/* #__PURE__*/function(_o41) {
    _inherits(Bs, _o41); var _super26=_createSuper(Bs); function Bs(t) {
      var _this25; _classCallCheck(this, Bs); _this25=_super26.call(this), _this25.map_=t; return _this25;
    }_createClass(Bs, [{key: 'dispatchRenderEvent', value: function dispatchRenderEvent(t, e) {
      z();
    }}, {key: 'calculateMatrices2D', value: function calculateMatrices2D(t) {
      var e=t.viewState; var i=t.coordinateToPixelTransform; var n=t.pixelToCoordinateTransform; Zt(i, t.size[0]/2, t.size[1]/2, 1/e.resolution, -1/e.resolution, -e.rotation, -e.center[0], -e.center[1]), Yt(n, i);
    }}, {key: 'forEachFeatureAtCoordinate', value: function forEachFeatureAtCoordinate(t, e, i, n, r, s, o, a) {
      var l; var h=e.viewState; function c(t, e, i, n) {
        return r.call(s, e, t?i:null, n);
      } var u=h.projection; var d=Xi(t.slice(), u); var g=[[0, 0]]; if (u.canWrapX()&&n) {
        var _t19=De(u.getExtent()); g.push([-_t19, 0], [_t19, 0]);
      } var f=e.layerStatesArray; var p=f.length; var m=[]; var _=[]; for (var _n35=0; _n35<g.length; _n35++) {
        for (var _r26=p-1; _r26>=0; --_r26) {
          var _s29=f[_r26]; var _u7=_s29.layer; if (_u7.hasRenderer()&&Gs(_s29, h)&&o.call(a, _u7)) {
            var _r27=_u7.getRenderer(); var _o42=_u7.getSource(); if (_r27&&_o42) {
              var _a24=_o42.getWrapX()?d:t; var _h9=c.bind(null, _s29.managed); _[0]=_a24[0]+g[_n35][0], _[1]=_a24[1]+g[_n35][1], l=_r27.forEachFeatureAtCoordinate(_, e, i, _h9, m);
            } if (l) return l;
          }
        }
      } if (0===m.length) return; var y=1/m.length; return m.forEach(function(t, e) {
        return t.distanceSq+=e*y;
      }), m.sort(function(t, e) {
        return t.distanceSq-e.distanceSq;
      }), m.some(function(t) {
        return l=t.callback(t.feature, t.layer, t.geometry);
      }), l;
    }}, {key: 'hasFeatureAtCoordinate', value: function hasFeatureAtCoordinate(t, e, i, n, r, s) {
      return void 0!==this.forEachFeatureAtCoordinate(t, e, i, n, f, this, r, s);
    }}, {key: 'getMap', value: function getMap() {
      return this.map_;
    }}, {key: 'renderFrame', value: function renderFrame(t) {
      z();
    }}, {key: 'scheduleExpireIconCache', value: function scheduleExpireIconCache(t) {
      vs.canExpireCache()&&t.postRenderFunctions.push(js);
    }}]); return Bs;
  }(o); var zs=/* #__PURE__*/function(_r28) {
    _inherits(zs, _r28); var _super27=_createSuper(zs); function zs(t, e, i, n) {
      var _this26; _classCallCheck(this, zs); _this26=_super27.call(this, t), _this26.inversePixelTransform=e, _this26.frameState=i, _this26.context=n; return _this26;
    } return _createClass(zs);
  }(r); var Us='ol-hidden'; var Xs='ol-selectable'; var Vs='ol-unselectable'; var Ws='ol-unsupported'; var Zs='ol-control'; var Ys='ol-collapsed'; var Ks=new RegExp(['^\\s*(?=(?:(?:[-a-z]+\\s*){0,2}(italic|oblique))?)', '(?=(?:(?:[-a-z]+\\s*){0,2}(small-caps))?)', '(?=(?:(?:[-a-z]+\\s*){0,2}(bold(?:er)?|lighter|[1-9]00 ))?)', '(?:(?:normal|\\1|\\2|\\3)\\s*){0,3}((?:xx?-)?', '(?:small|large)|medium|smaller|larger|[\\.\\d]+(?:\\%|in|[cem]m|ex|p[ctx]))', '(?:\\s*\\/\\s*(normal|[\\.\\d]+(?:\\%|in|[cem]m|ex|p[ctx])?))', '?\\s*([-,\\"\\\'\\sa-z]+?)\\s*$'].join(''), 'i'); var qs=['style', 'variant', 'weight', 'size', 'lineHeight', 'family']; var Hs=function Hs(t) {
    var e=t.match(Ks); if (!e) return null; var i={lineHeight: 'normal', size: '1.2em', style: 'normal', weight: 'normal', variant: 'normal'}; for (var _t20=0, _n36=qs.length; _t20<_n36; ++_t20) {
      var _n37=e[_t20+1]; void 0!==_n37&&(i[qs[_t20]]=_n37);
    } return i.families=i.family.split(/,\s?/), i;
  }; var $s='10px sans-serif'; var Js='#000'; var Qs='round'; var to=[]; var eo='round'; var io=10; var no='#000'; var ro='center'; var so='middle'; var oo=[0, 0, 0, 0]; var ao=new W(); var lo; var ho=null; var co={}; var uo=function() {
    var t='32px '; var e=['monospace', 'serif']; var i=e.length; var n='wmytzilWMYTZIL@#/&?$%10'; var r; var s; function o(r, o, a) {
      var l=!0; for (var _h10=0; _h10<i; ++_h10) {
        var _i36=e[_h10]; if (s=po(r+' '+o+' '+t+_i36, n), a!=_i36) {
          var _e33=po(r+' '+o+' '+t+a+','+_i36, n); l=l&&_e33!=s;
        }
      } return !!l;
    } function a() {
      var t=!0; var e=ao.getKeys(); for (var _i37=0, _n38=e.length; _i37<_n38; ++_i37) {
        var _n39=e[_i37]; ao.get(_n39)<100&&(o.apply(this, _n39.split('\n'))?(x(co), ho=null, lo=void 0, ao.set(_n39, 100)):(ao.set(_n39, ao.get(_n39)+1, !0), t=!1));
      }t&&(clearInterval(r), r=void 0);
    } return function(t) {
      var e=Hs(t); if (!e) return; var i=e.families; for (var _t21=0, _n40=i.length; _t21<_n40; ++_t21) {
        var _n41=i[_t21]; var _s30=e.style+'\n'+e.weight+'\n'+_n41; void 0===ao.get(_s30)&&(ao.set(_s30, 100, !0), o(e.style, e.weight, _n41)||(ao.set(_s30, 0, !0), void 0===r&&(r=setInterval(a, 32))));
      }
    };
  }(); var go=function() {
    var t; return function(e) {
      var i=co[e]; if (null==i) {
        if (ft) {
          var _t22=Hs(e); var _n42=fo(e, 'g'); i=(isNaN(Number(_t22.lineHeight))?1.2:Number(_t22.lineHeight))*(_n42.actualBoundingBoxAscent+_n42.actualBoundingBoxDescent);
        } else t||(t=document.createElement('div'), t.innerHTML='M', t.style.minHeight='0', t.style.maxHeight='none', t.style.height='auto', t.style.padding='0', t.style.border='none', t.style.position='absolute', t.style.display='block', t.style.left='-99999px'), t.style.font=e, document.body.appendChild(t), i=t.offsetHeight, document.body.removeChild(t); co[e]=i;
      } return i;
    };
  }(); function fo(t, e) {
    return ho||(ho=_t(1, 1)), t!=lo&&(ho.font=t, lo=ho.font), ho.measureText(e);
  } function po(t, e) {
    return fo(t, e).width;
  } function mo(t, e, i) {
    if (e in i) return i[e]; var n=e.split('\n').reduce(function(e, i) {
      return Math.max(e, po(t, i));
    }, 0); return i[e]=n, n;
  } function _o(t, e) {
    var i=[]; var n=[]; var r=[]; var s=0; var o=0; var a=0; var l=0; for (var _h11=0, _c4=e.length; _h11<=_c4; _h11+=2) {
      var _u8=e[_h11]; if ('\n'===_u8||_h11===_c4) {
        s=Math.max(s, o), r.push(o), o=0, a+=l; continue;
      } var _d10=e[_h11+1]||t.font; var _g5=po(_d10, _u8); i.push(_g5), o+=_g5; var _f4=go(_d10); n.push(_f4), l=Math.max(l, _f4);
    } return {width: s, height: a, widths: i, heights: n, lineWidths: r};
  } function yo(t, e, i, n, r, s, o, a, l, h, c) {
    t.save(), 1!==i&&(t.globalAlpha*=i), e&&t.setTransform.apply(t, e), n.contextInstructions?(t.translate(l, h), t.scale(c[0], c[1]), function(t, e) {
      var i=t.contextInstructions; for (var _t23=0, _n43=i.length; _t23<_n43; _t23+=2)Array.isArray(i[_t23+1])?e[i[_t23]].apply(e, i[_t23+1]):e[i[_t23]]=i[_t23+1];
    }(n, t)):c[0]<0||c[1]<0?(t.translate(l, h), t.scale(c[0], c[1]), t.drawImage(n, r, s, o, a, 0, 0, o, a)):t.drawImage(n, r, s, o, a, l, h, o*c[0], a*c[1]), t.restore();
  } var xo=/* #__PURE__*/function(_Bs) {
    _inherits(xo, _Bs); var _super28=_createSuper(xo); function xo(t) {
      var _this27; _classCallCheck(this, xo); _this27=_super28.call(this, t), _this27.fontChangeListenerKey_=N(ao, s, t.redrawText.bind(t)), _this27.element_=document.createElement('div'); var e=_this27.element_.style; e.position='absolute', e.width='100%', e.height='100%', e.zIndex='0', _this27.element_.className='ol-unselectable ol-layers'; var i=t.getViewport(); i.insertBefore(_this27.element_, i.firstChild||null), _this27.children_=[], _this27.renderedVisible_=!0; return _this27;
    }_createClass(xo, [{key: 'dispatchRenderEvent', value: function dispatchRenderEvent(t, e) {
      var i=this.getMap(); if (i.hasListener(t)) {
        var _n44=new zs(t, void 0, e); i.dispatchEvent(_n44);
      }
    }}, {key: 'disposeInternal', value: function disposeInternal() {
      G(this.fontChangeListenerKey_), this.element_.parentNode.removeChild(this.element_), _get(_getPrototypeOf(xo.prototype), 'disposeInternal', this).call(this);
    }}, {key: 'renderFrame', value: function renderFrame(t) {
      if (!t) return void(this.renderedVisible_&&(this.element_.style.display='none', this.renderedVisible_=!1)); this.calculateMatrices2D(t), this.dispatchRenderEvent(Os, t); var e=t.layerStatesArray.sort(function(t, e) {
        return t.zIndex-e.zIndex;
      }); var i=t.viewState; this.children_.length=0; var n=[]; var r=null; for (var _s31=0, _o43=e.length; _s31<_o43; ++_s31) {
        var _o44=e[_s31]; t.layerIndex=_s31; var _a25=_o44.layer; var _l10=_a25.getSourceState(); if (!Gs(_o44, i)||'ready'!=_l10&&'undefined'!=_l10) {
          _a25.unrender(); continue;
        } var _h12=_a25.render(t, r); _h12&&(_h12!==r&&(this.children_.push(_h12), r=_h12), 'getDeclutter'in _a25&&n.push(_a25));
      } for (var _e34=n.length-1; _e34>=0; --_e34)n[_e34].renderDeclutter(t); Et(this.element_, this.children_), this.dispatchRenderEvent(Ns, t), this.renderedVisible_||(this.element_.style.display='', this.renderedVisible_=!0), this.scheduleExpireIconCache(t);
    }}]); return xo;
  }(Bs); var vo=/* #__PURE__*/function(_r29) {
    _inherits(vo, _r29); var _super29=_createSuper(vo); function vo(t, e) {
      var _this28; _classCallCheck(this, vo); _this28=_super29.call(this, t), _this28.layer=e; return _this28;
    } return _createClass(vo);
  }(r); var So='layers'; var wo=/* #__PURE__*/function(_Fs2) {
    _inherits(wo, _Fs2); var _super30=_createSuper(wo); function wo(t) {
      var _this29; _classCallCheck(this, wo); t=t||{}; var e=Object.assign({}, t); delete e.layers; var i=t.layers; _this29=_super30.call(this, e), _this29.on, _this29.once, _this29.un, _this29.layersListenerKeys_=[], _this29.listenerKeys_={}, _this29.addChangeListener(So, _this29.handleLayersChanged_), i?Array.isArray(i)?i=new H(i.slice(), {unique: !0}):Ft('function'==typeof i.getArray, 43):i=new H(void 0, {unique: !0}), _this29.setLayers(i); return _this29;
    }_createClass(wo, [{key: 'handleLayerChange_', value: function handleLayerChange_() {
      this.changed();
    }}, {key: 'handleLayersChanged_', value: function handleLayersChanged_() {
      this.layersListenerKeys_.forEach(G), this.layersListenerKeys_.length=0; var t=this.getLayers(); this.layersListenerKeys_.push(N(t, Z, this.handleLayersAdd_, this), N(t, Y, this.handleLayersRemove_, this)); for (var _t24 in this.listenerKeys_) this.listenerKeys_[_t24].forEach(G); x(this.listenerKeys_); var e=t.getArray(); for (var _t25=0, _i38=e.length; _t25<_i38; _t25++) {
        var _i39=e[_t25]; this.registerLayerListeners_(_i39), this.dispatchEvent(new vo('addlayer', _i39));
      } this.changed();
    }}, {key: 'registerLayerListeners_', value: function registerLayerListeners_(t) {
      var e=[N(t, s, this.handleLayerChange_, this), N(t, w, this.handleLayerChange_, this)]; t instanceof wo&&e.push(N(t, 'addlayer', this.handleLayerGroupAdd_, this), N(t, 'removelayer', this.handleLayerGroupRemove_, this)), this.listenerKeys_[X(t)]=e;
    }}, {key: 'handleLayerGroupAdd_', value: function handleLayerGroupAdd_(t) {
      this.dispatchEvent(new vo('addlayer', t.layer));
    }}, {key: 'handleLayerGroupRemove_', value: function handleLayerGroupRemove_(t) {
      this.dispatchEvent(new vo('removelayer', t.layer));
    }}, {key: 'handleLayersAdd_', value: function handleLayersAdd_(t) {
      var e=t.element; this.registerLayerListeners_(e), this.dispatchEvent(new vo('addlayer', e)), this.changed();
    }}, {key: 'handleLayersRemove_', value: function handleLayersRemove_(t) {
      var e=t.element; var i=X(e); this.listenerKeys_[i].forEach(G), delete this.listenerKeys_[i], this.dispatchEvent(new vo('removelayer', e)), this.changed();
    }}, {key: 'getLayers', value: function getLayers() {
      return this.get(So);
    }}, {key: 'setLayers', value: function setLayers(t) {
      var e=this.getLayers(); if (e) {
        var _t26=e.getArray(); for (var _e35=0, _i40=_t26.length; _e35<_i40; ++_e35) this.dispatchEvent(new vo('removelayer', _t26[_e35]));
      } this.set(So, t);
    }}, {key: 'getLayersArray', value: function getLayersArray(t) {
      return t=void 0!==t?t:[], this.getLayers().forEach(function(e) {
        e.getLayersArray(t);
      }), t;
    }}, {key: 'getLayerStatesArray', value: function getLayerStatesArray(t) {
      var e=void 0!==t?t:[]; var i=e.length; this.getLayers().forEach(function(t) {
        t.getLayerStatesArray(e);
      }); var n=this.getLayerState(); var r=n.zIndex; t||void 0!==n.zIndex||(r=0); for (var _t27=i, _s32=e.length; _t27<_s32; _t27++) {
        var _i41=e[_t27]; _i41.opacity*=n.opacity, _i41.visible=_i41.visible&&n.visible, _i41.maxResolution=Math.min(_i41.maxResolution, n.maxResolution), _i41.minResolution=Math.max(_i41.minResolution, n.minResolution), _i41.minZoom=Math.max(_i41.minZoom, n.minZoom), _i41.maxZoom=Math.min(_i41.maxZoom, n.maxZoom), void 0!==n.extent&&(void 0!==_i41.extent?_i41.extent=Ae(_i41.extent, n.extent):_i41.extent=n.extent), void 0===_i41.zIndex&&(_i41.zIndex=r);
      } return e;
    }}, {key: 'getSourceState', value: function getSourceState() {
      return 'ready';
    }}]); return wo;
  }(Fs); var To=wo; var Eo=/* #__PURE__*/function(_r30) {
    _inherits(Eo, _r30); var _super31=_createSuper(Eo); function Eo(t, e, i) {
      var _this30; _classCallCheck(this, Eo); _this30=_super31.call(this, t), _this30.map=e, _this30.frameState=void 0!==i?i:null; return _this30;
    } return _createClass(Eo);
  }(r); var Co=/* #__PURE__*/function(_Eo) {
    _inherits(Co, _Eo); var _super32=_createSuper(Co); function Co(t, e, i, n, r, s) {
      var _this31; _classCallCheck(this, Co); _this31=_super32.call(this, t, e, r), _this31.originalEvent=i, _this31.pixel_=null, _this31.coordinate_=null, _this31.dragging=void 0!==n&&n, _this31.activePointers=s; return _this31;
    }_createClass(Co, [{key: 'pixel', get: function get() {
      return this.pixel_||(this.pixel_=this.map.getEventPixel(this.originalEvent)), this.pixel_;
    }, set: function set(t) {
      this.pixel_=t;
    }}, {key: 'coordinate', get: function get() {
      return this.coordinate_||(this.coordinate_=this.map.getCoordinateFromPixel(this.pixel)), this.coordinate_;
    }, set: function set(t) {
      this.coordinate_=t;
    }}, {key: 'preventDefault', value: function preventDefault() {
      _get(_getPrototypeOf(Co.prototype), 'preventDefault', this).call(this), 'preventDefault'in this.originalEvent&&this.originalEvent.preventDefault();
    }}, {key: 'stopPropagation', value: function stopPropagation() {
      _get(_getPrototypeOf(Co.prototype), 'stopPropagation', this).call(this), 'stopPropagation'in this.originalEvent&&this.originalEvent.stopPropagation();
    }}]); return Co;
  }(Eo); var Ro={SINGLECLICK: 'singleclick', CLICK: C, DBLCLICK: R, POINTERDRAG: 'pointerdrag', POINTERMOVE: 'pointermove', POINTERDOWN: 'pointerdown', POINTERUP: 'pointerup', POINTEROVER: 'pointerover', POINTEROUT: 'pointerout', POINTERENTER: 'pointerenter', POINTERLEAVE: 'pointerleave', POINTERCANCEL: 'pointercancel'}; var bo='pointermove'; var Po='pointerdown'; var Io='pointerup'; var Lo='pointerout'; var Fo=/* #__PURE__*/function(_S5) {
    _inherits(Fo, _S5); var _super33=_createSuper(Fo); function Fo(t, e) {
      var _this32; _classCallCheck(this, Fo); _this32=_super33.call(this, t), _this32.map_=t, _this32.clickTimeoutId_, _this32.emulateClicks_=!1, _this32.dragging_=!1, _this32.dragListenerKeys_=[], _this32.moveTolerance_=void 0===e?1:e, _this32.down_=null; var i=_this32.map_.getViewport(); _this32.activePointers_=[], _this32.trackedTouches_={}, _this32.element_=i, _this32.pointerdownListenerKey_=N(i, Po, _this32.handlePointerDown_, _assertThisInitialized(_this32)), _this32.originalPointerMoveEvent_, _this32.relayedListenerKey_=N(i, bo, _this32.relayMoveEvent_, _assertThisInitialized(_this32)), _this32.boundHandleTouchMove_=_this32.handleTouchMove_.bind(_assertThisInitialized(_this32)), _this32.element_.addEventListener(A, _this32.boundHandleTouchMove_, !!mt&&{passive: !1}); return _this32;
    }_createClass(Fo, [{key: 'emulateClick_', value: function emulateClick_(t) {
      var _this33=this; var e=new Co(Ro.CLICK, this.map_, t); this.dispatchEvent(e), void 0!==this.clickTimeoutId_?(clearTimeout(this.clickTimeoutId_), this.clickTimeoutId_=void 0, e=new Co(Ro.DBLCLICK, this.map_, t), this.dispatchEvent(e)):this.clickTimeoutId_=setTimeout(function() {
        _this33.clickTimeoutId_=void 0; var e=new Co(Ro.SINGLECLICK, _this33.map_, t); _this33.dispatchEvent(e);
      }, 250);
    }}, {key: 'updateActivePointers_', value: function updateActivePointers_(t) {
      var e=t; var i=e.pointerId; if (e.type==Ro.POINTERUP||e.type==Ro.POINTERCANCEL) {
        delete this.trackedTouches_[i]; for (var _t28 in this.trackedTouches_) {
          if (this.trackedTouches_[_t28].target!==e.target) {
            delete this.trackedTouches_[_t28]; break;
          }
        }
      } else e.type!=Ro.POINTERDOWN&&e.type!=Ro.POINTERMOVE||(this.trackedTouches_[i]=e); this.activePointers_=Object.values(this.trackedTouches_);
    }}, {key: 'handlePointerUp_', value: function handlePointerUp_(t) {
      this.updateActivePointers_(t); var e=new Co(Ro.POINTERUP, this.map_, t, void 0, void 0, this.activePointers_); this.dispatchEvent(e), this.emulateClicks_&&!e.defaultPrevented&&!this.dragging_&&this.isMouseActionButton_(t)&&this.emulateClick_(this.down_), 0===this.activePointers_.length&&(this.dragListenerKeys_.forEach(G), this.dragListenerKeys_.length=0, this.dragging_=!1, this.down_=null);
    }}, {key: 'isMouseActionButton_', value: function isMouseActionButton_(t) {
      return 0===t.button;
    }}, {key: 'handlePointerDown_', value: function handlePointerDown_(t) {
      this.emulateClicks_=0===this.activePointers_.length, this.updateActivePointers_(t); var e=new Co(Ro.POINTERDOWN, this.map_, t, void 0, void 0, this.activePointers_); this.dispatchEvent(e), this.down_={}; for (var _e36 in t) {
        var _i42=t[_e36]; this.down_[_e36]='function'==typeof _i42?m:_i42;
      } if (0===this.dragListenerKeys_.length) {
        var _t29=this.map_.getOwnerDocument(); this.dragListenerKeys_.push(N(_t29, Ro.POINTERMOVE, this.handlePointerMove_, this), N(_t29, Ro.POINTERUP, this.handlePointerUp_, this), N(this.element_, Ro.POINTERCANCEL, this.handlePointerUp_, this)), this.element_.getRootNode&&this.element_.getRootNode()!==_t29&&this.dragListenerKeys_.push(N(this.element_.getRootNode(), Ro.POINTERUP, this.handlePointerUp_, this));
      }
    }}, {key: 'handlePointerMove_', value: function handlePointerMove_(t) {
      if (this.isMoving_(t)) {
        this.updateActivePointers_(t), this.dragging_=!0; var _e37=new Co(Ro.POINTERDRAG, this.map_, t, this.dragging_, void 0, this.activePointers_); this.dispatchEvent(_e37);
      }
    }}, {key: 'relayMoveEvent_', value: function relayMoveEvent_(t) {
      this.originalPointerMoveEvent_=t; var e=!(!this.down_||!this.isMoving_(t)); this.dispatchEvent(new Co(Ro.POINTERMOVE, this.map_, t, e));
    }}, {key: 'handleTouchMove_', value: function handleTouchMove_(t) {
      var e=this.originalPointerMoveEvent_; e&&!e.defaultPrevented||'boolean'==typeof t.cancelable&&!0!==t.cancelable||t.preventDefault();
    }}, {key: 'isMoving_', value: function isMoving_(t) {
      return this.dragging_||Math.abs(t.clientX-this.down_.clientX)>this.moveTolerance_||Math.abs(t.clientY-this.down_.clientY)>this.moveTolerance_;
    }}, {key: 'disposeInternal', value: function disposeInternal() {
      this.relayedListenerKey_&&(G(this.relayedListenerKey_), this.relayedListenerKey_=null), this.element_.removeEventListener(A, this.boundHandleTouchMove_), this.pointerdownListenerKey_&&(G(this.pointerdownListenerKey_), this.pointerdownListenerKey_=null), this.dragListenerKeys_.forEach(G), this.dragListenerKeys_.length=0, this.element_=null, _get(_getPrototypeOf(Fo.prototype), 'disposeInternal', this).call(this);
    }}]); return Fo;
  }(S); var Mo='postrender'; var Ao='movestart'; var Oo='moveend'; var No='loadstart'; var Do='loadend'; var Go='layergroup'; var ko='size'; var jo='target'; var Bo='view'; var zo=1/0; var Uo=/* #__PURE__*/function() {
    function Uo(t, e) {
      _classCallCheck(this, Uo); this.priorityFunction_=t, this.keyFunction_=e, this.elements_=[], this.priorities_=[], this.queuedElements_={};
    }_createClass(Uo, [{key: 'clear', value: function clear() {
      this.elements_.length=0, this.priorities_.length=0, x(this.queuedElements_);
    }}, {key: 'dequeue', value: function dequeue() {
      var t=this.elements_; var e=this.priorities_; var i=t[0]; 1==t.length?(t.length=0, e.length=0):(t[0]=t.pop(), e[0]=e.pop(), this.siftUp_(0)); var n=this.keyFunction_(i); return delete this.queuedElements_[n], i;
    }}, {key: 'enqueue', value: function enqueue(t) {
      Ft(!(this.keyFunction_(t)in this.queuedElements_), 31); var e=this.priorityFunction_(t); return e!=zo&&(this.elements_.push(t), this.priorities_.push(e), this.queuedElements_[this.keyFunction_(t)]=!0, this.siftDown_(0, this.elements_.length-1), !0);
    }}, {key: 'getCount', value: function getCount() {
      return this.elements_.length;
    }}, {key: 'getLeftChildIndex_', value: function getLeftChildIndex_(t) {
      return 2*t+1;
    }}, {key: 'getRightChildIndex_', value: function getRightChildIndex_(t) {
      return 2*t+2;
    }}, {key: 'getParentIndex_', value: function getParentIndex_(t) {
      return t-1>>1;
    }}, {key: 'heapify_', value: function heapify_() {
      var t; for (t=(this.elements_.length>>1)-1; t>=0; t--) this.siftUp_(t);
    }}, {key: 'isEmpty', value: function isEmpty() {
      return 0===this.elements_.length;
    }}, {key: 'isKeyQueued', value: function isKeyQueued(t) {
      return t in this.queuedElements_;
    }}, {key: 'isQueued', value: function isQueued(t) {
      return this.isKeyQueued(this.keyFunction_(t));
    }}, {key: 'siftUp_', value: function siftUp_(t) {
      var e=this.elements_; var i=this.priorities_; var n=e.length; var r=e[t]; var s=i[t]; var o=t; for (;t<n>>1;) {
        var _r31=this.getLeftChildIndex_(t); var _s33=this.getRightChildIndex_(t); var _o45=_s33<n&&i[_s33]<i[_r31]?_s33:_r31; e[t]=e[_o45], i[t]=i[_o45], t=_o45;
      }e[t]=r, i[t]=s, this.siftDown_(o, t);
    }}, {key: 'siftDown_', value: function siftDown_(t, e) {
      var i=this.elements_; var n=this.priorities_; var r=i[e]; var s=n[e]; for (;e>t;) {
        var _t30=this.getParentIndex_(e); if (!(n[_t30]>s)) break; i[e]=i[_t30], n[e]=n[_t30], e=_t30;
      }i[e]=r, n[e]=s;
    }}, {key: 'reprioritize', value: function reprioritize() {
      var t=this.priorityFunction_; var e=this.elements_; var i=this.priorities_; var n=0; var r=e.length; var s; var o; var a; for (o=0; o<r; ++o)s=e[o], a=t(s), a==zo?delete this.queuedElements_[this.keyFunction_(s)]:(i[n]=a, e[n++]=s); e.length=n, i.length=n, this.heapify_();
    }}]); return Uo;
  }(); var Xo=/* #__PURE__*/function(_Uo) {
    _inherits(Xo, _Uo); var _super34=_createSuper(Xo); function Xo(t, e) {
      var _this34; _classCallCheck(this, Xo); _this34=_super34.call(this, function(e) {
        return t.apply(null, e);
      }, function(t) {
        return t[0].getKey();
      }), _this34.boundHandleTileChange_=_this34.handleTileChange.bind(_assertThisInitialized(_this34)), _this34.tileChangeCallback_=e, _this34.tilesLoading_=0, _this34.tilesLoadingKeys_={}; return _this34;
    }_createClass(Xo, [{key: 'enqueue', value: function enqueue(t) {
      var e=_get(_getPrototypeOf(Xo.prototype), 'enqueue', this).call(this, t); if (e) {
        t[0].addEventListener(w, this.boundHandleTileChange_);
      } return e;
    }}, {key: 'getTilesLoading', value: function getTilesLoading() {
      return this.tilesLoading_;
    }}, {key: 'handleTileChange', value: function handleTileChange(t) {
      var e=t.target; var i=e.getState(); if (i===Q||i===tt||i===et) {
        i!==tt&&e.removeEventListener(w, this.boundHandleTileChange_); var _t31=e.getKey(); _t31 in this.tilesLoadingKeys_&&(delete this.tilesLoadingKeys_[_t31], --this.tilesLoading_), this.tileChangeCallback_();
      }
    }}, {key: 'loadMoreTiles', value: function loadMoreTiles(t, e) {
      var i; var n; var r; var s=0; for (;this.tilesLoading_<t&&s<e&&this.getCount()>0;)n=this.dequeue()[0], r=n.getKey(), i=n.getState(), i!==$||r in this.tilesLoadingKeys_||(this.tilesLoadingKeys_[r]=!0, ++this.tilesLoading_, ++s, n.load());
    }}]); return Xo;
  }(Uo); function Vo(t, e, i, n, r) {
    if (!t||!(i in t.wantedTiles)) return zo; if (!t.wantedTiles[i][e.getKey()]) return zo; var s=t.viewState.center; var o=n[0]-s[0]; var a=n[1]-s[1]; return 65536*Math.log(r)+Math.sqrt(o*o+a*a)/r;
  } var Wo=0; var Zo=1; var Yo={CENTER: 'center', RESOLUTION: 'resolution', ROTATION: 'rotation'}; var Ko=256; function qo(t, e, i) {
    return function(n, r, s, o, a) {
      if (!n) return; if (!r&&!e) return n; var l=e?0:s[0]*r; var h=e?0:s[1]*r; var c=a?a[0]:0; var u=a?a[1]:0; var d=t[0]+l/2+c; var g=t[2]-l/2+c; var f=t[1]+h/2+u; var p=t[3]-h/2+u; d>g&&(d=(g+d)/2, g=d), f>p&&(f=(p+f)/2, p=f); var m=_i(n[0], d, g); var _=_i(n[1], f, p); if (o&&i&&r) {
        var _t32=30*r; m+=-_t32*Math.log(1+Math.max(0, d-n[0])/_t32)+_t32*Math.log(1+Math.max(0, n[0]-g)/_t32), _+=-_t32*Math.log(1+Math.max(0, f-n[1])/_t32)+_t32*Math.log(1+Math.max(0, n[1]-p)/_t32);
      } return [m, _];
    };
  } function Ho(t) {
    return t;
  } function $o(t, e, i, n) {
    var r=De(e)/i[0]; var s=Me(e)/i[1]; return n?Math.min(t, Math.max(r, s)):Math.min(t, Math.min(r, s));
  } function Jo(t, e, i) {
    var n=Math.min(t, e); return n*=Math.log(1+50*Math.max(0, t/e-1))/50+1, i&&(n=Math.max(n, i), n/=Math.log(1+50*Math.max(0, i/t-1))/50+1), _i(n, i/2, 2*e);
  } function Qo(t, e, i, n) {
    return e=void 0===e||e, function(r, s, o, a) {
      if (void 0!==r) {
        var _l11=t[0]; var _c5=t[t.length-1]; var _u9=i?$o(_l11, i, o, n):_l11; if (a) return e?Jo(r, _u9, _c5):_i(r, _c5, _u9); var _d11=Math.min(_u9, r); var _g6=Math.floor(h(t, _d11, s)); return t[_g6]>_u9&&_g6<t.length-1?t[_g6+1]:t[_g6];
      }
    };
  } function ta(t, e, i, n, r, s) {
    return n=void 0===n||n, i=void 0!==i?i:0, function(o, a, l, h) {
      if (void 0!==o) {
        var _c6=r?$o(e, r, l, s):e; if (h) return n?Jo(o, _c6, i):_i(o, i, _c6); var _u10=1e-9; var _d12=Math.ceil(Math.log(e/_c6)/Math.log(t)-_u10); var _g7=-a*(.5-_u10)+.5; var _f5=Math.min(_c6, o); var _p4=Math.floor(Math.log(e/_f5)/Math.log(t)+_g7); var _m3=Math.max(_d12, _p4); return _i(e/Math.pow(t, _m3), i, _c6);
      }
    };
  } function ea(t, e, i, n, r) {
    return i=void 0===i||i, function(s, o, a, l) {
      if (void 0!==s) {
        var _o46=n?$o(t, n, a, r):t; return i&&l?Jo(s, _o46, e):_i(s, e, _o46);
      }
    };
  } function ia(t) {
    if (void 0!==t) return 0;
  } function na(t) {
    if (void 0!==t) return t;
  } function ra(t) {
    var e=2*Math.PI/t; return function(t, i) {
      return i?t:void 0!==t?t=Math.floor(t/e+.5)*e:void 0;
    };
  } function sa(t) {
    return t=t||wi(5), function(e, i) {
      return i?e:void 0!==e?Math.abs(e)<=t?0:e:void 0;
    };
  } function oa(t, e) {
    setTimeout(function() {
      t(e);
    }, 0);
  } function aa(t) {
    if (void 0!==t.extent) {
      var _e38=void 0===t.smoothExtentConstraint||t.smoothExtentConstraint; return qo(t.extent, t.constrainOnlyCenter, _e38);
    } var e=un(t.projection, 'EPSG:3857'); if (!0!==t.multiWorld&&e.isGlobal()) {
      var _t33=e.getExtent().slice(); return _t33[0]=-1/0, _t33[2]=1/0, qo(_t33, !1, !1);
    } return Ho;
  } function la(t) {
    var e; var i; var n; var r=void 0!==t.minZoom?t.minZoom:0; var s=void 0!==t.maxZoom?t.maxZoom:28; var o=void 0!==t.zoomFactor?t.zoomFactor:2; var a=void 0!==t.multiWorld&&t.multiWorld; var l=void 0===t.smoothResolutionConstraint||t.smoothResolutionConstraint; var h=void 0!==t.showFullExtent&&t.showFullExtent; var c=un(t.projection, 'EPSG:3857'); var u=c.getExtent(); var d=t.constrainOnlyCenter; var g=t.extent; if (a||g||!c.isGlobal()||(d=!1, g=u), void 0!==t.resolutions) {
      var _o47=t.resolutions; i=_o47[r], n=void 0!==_o47[s]?_o47[s]:_o47[_o47.length-1], e=t.constrainResolution?Qo(_o47, l, !d&&g, h):ea(i, n, l, !d&&g, h);
    } else {
      var _a26=(u?Math.max(De(u), Me(u)):360*Ye.degrees/c.getMetersPerUnit())/Ko/Math.pow(2, 0); var _f6=_a26/Math.pow(2, 28); i=t.maxResolution, void 0!==i?r=0:i=_a26/Math.pow(o, r), n=t.minResolution, void 0===n&&(n=void 0!==t.maxZoom?void 0!==t.maxResolution?i/Math.pow(o, s):_a26/Math.pow(o, s):_f6), s=r+Math.floor(Math.log(i/n)/Math.log(o)), n=i/Math.pow(o, s-r), e=t.constrainResolution?ta(o, i, n, l, !d&&g, h):ea(i, n, l, !d&&g, h);
    } return {constraint: e, maxResolution: i, minResolution: n, minZoom: r, zoomFactor: o};
  } function ha(t) {
    if (void 0===t.enableRotation||t.enableRotation) {
      var _e39=t.constrainRotation; return void 0===_e39||!0===_e39?sa():!1===_e39?na:'number'==typeof _e39?ra(_e39):na;
    } return ia;
  } function ca(t) {
    return !(t.sourceCenter&&t.targetCenter&&!Di(t.sourceCenter, t.targetCenter))&&t.sourceResolution===t.targetResolution&&t.sourceRotation===t.targetRotation;
  } function ua(t, e, i, n, r) {
    var s=Math.cos(-r); var o=Math.sin(-r); var a=t[0]*s-t[1]*o; var l=t[1]*s+t[0]*o; a+=(e[0]/2-i[0])*n, l+=(i[1]-e[1]/2)*n, o=-o; return [a*s-l*o, l*s+a*o];
  } var da=/* #__PURE__*/function(_W6) {
    _inherits(da, _W6); var _super35=_createSuper(da); function da(t) {
      var _this35; _classCallCheck(this, da); _this35=_super35.call(this), _this35.on, _this35.once, _this35.un, t=Object.assign({}, t), _this35.hints_=[0, 0], _this35.animations_=[], _this35.updateAnimationKey_, _this35.projection_=un(t.projection, 'EPSG:3857'), _this35.viewportSize_=[100, 100], _this35.targetCenter_=null, _this35.targetResolution_, _this35.targetRotation_, _this35.nextCenter_=null, _this35.nextResolution_, _this35.nextRotation_, _this35.cancelAnchor_=void 0, t.projection&&en(), t.center&&(t.center=Tn(t.center, _this35.projection_)), t.extent&&(t.extent=Cn(t.extent, _this35.projection_)), _this35.applyOptions_(t); return _this35;
    }_createClass(da, [{key: 'applyOptions_', value: function applyOptions_(t) {
      var e=Object.assign({}, t); for (var _t34 in Yo) delete e[_t34]; this.setProperties(e, !0); var i=la(t); this.maxResolution_=i.maxResolution, this.minResolution_=i.minResolution, this.zoomFactor_=i.zoomFactor, this.resolutions_=t.resolutions, this.padding_=t.padding, this.minZoom_=i.minZoom; var n=aa(t); var r=i.constraint; var s=ha(t); this.constraints_={center: n, resolution: r, rotation: s}, this.setRotation(void 0!==t.rotation?t.rotation:0), this.setCenterInternal(void 0!==t.center?t.center:null), void 0!==t.resolution?this.setResolution(t.resolution):void 0!==t.zoom&&this.setZoom(t.zoom);
    }}, {key: 'padding', get: function get() {
      return this.padding_;
    }, set: function set(t) {
      var e=this.padding_; this.padding_=t; var i=this.getCenter(); if (i) {
        var _n45=t||[0, 0, 0, 0]; e=e||[0, 0, 0, 0]; var _r32=this.getResolution(); var _s34=_r32/2*(_n45[3]-e[3]+e[1]-_n45[1]); var _o48=_r32/2*(_n45[0]-e[0]+e[2]-_n45[2]); this.setCenterInternal([i[0]+_s34, i[1]-_o48]);
      }
    }}, {key: 'getUpdatedOptions_', value: function getUpdatedOptions_(t) {
      var e=this.getProperties(); return void 0!==e.resolution?e.resolution=this.getResolution():e.zoom=this.getZoom(), e.center=this.getCenterInternal(), e.rotation=this.getRotation(), Object.assign({}, e, t);
    }}, {key: 'animate', value: function animate(t) {
      this.isDef()&&!this.getAnimating()&&this.resolveConstraints(0); var e=new Array(arguments.length); for (var _t35=0; _t35<e.length; ++_t35) {
        var _i43=arguments[_t35]; _i43.center&&(_i43=Object.assign({}, _i43), _i43.center=Tn(_i43.center, this.getProjection())), _i43.anchor&&(_i43=Object.assign({}, _i43), _i43.anchor=Tn(_i43.anchor, this.getProjection())), e[_t35]=_i43;
      } this.animateInternal.apply(this, e);
    }}, {key: 'animateInternal', value: function animateInternal(t) {
      var e; var i=arguments.length; i>1&&'function'==typeof arguments[i-1]&&(e=arguments[i-1], --i); var n=0; for (;n<i&&!this.isDef(); ++n) {
        var _t36=arguments[n]; _t36.center&&this.setCenterInternal(_t36.center), void 0!==_t36.zoom?this.setZoom(_t36.zoom):_t36.resolution&&this.setResolution(_t36.resolution), void 0!==_t36.rotation&&this.setRotation(_t36.rotation);
      } if (n===i) return void(e&&oa(e, !0)); var r=Date.now(); var s=this.targetCenter_.slice(); var o=this.targetResolution_; var a=this.targetRotation_; var l=[]; for (;n<i; ++n) {
        var _t37=arguments[n]; var _i44={start: r, complete: !1, anchor: _t37.anchor, duration: void 0!==_t37.duration?_t37.duration:1e3, easing: _t37.easing||rt, callback: e}; if (_t37.center&&(_i44.sourceCenter=s, _i44.targetCenter=_t37.center.slice(), s=_i44.targetCenter), void 0!==_t37.zoom?(_i44.sourceResolution=o, _i44.targetResolution=this.getResolutionForZoom(_t37.zoom), o=_i44.targetResolution):_t37.resolution&&(_i44.sourceResolution=o, _i44.targetResolution=_t37.resolution, o=_i44.targetResolution), void 0!==_t37.rotation) {
          _i44.sourceRotation=a; var _e40=Ti(_t37.rotation-a+Math.PI, 2*Math.PI)-Math.PI; _i44.targetRotation=a+_e40, a=_i44.targetRotation;
        }ca(_i44)?_i44.complete=!0:r+=_i44.duration, l.push(_i44);
      } this.animations_.push(l), this.setHint(Wo, 1), this.updateAnimations_();
    }}, {key: 'getAnimating', value: function getAnimating() {
      return this.hints_[Wo]>0;
    }}, {key: 'getInteracting', value: function getInteracting() {
      return this.hints_[Zo]>0;
    }}, {key: 'cancelAnimations', value: function cancelAnimations() {
      var t; this.setHint(Wo, -this.hints_[Wo]); for (var _e41=0, _i45=this.animations_.length; _e41<_i45; ++_e41) {
        var _i46=this.animations_[_e41]; if (_i46[0].callback&&oa(_i46[0].callback, !1), !t) {
          for (var _e42=0, _n46=_i46.length; _e42<_n46; ++_e42) {
            var _n47=_i46[_e42]; if (!_n47.complete) {
              t=_n47.anchor; break;
            }
          }
        }
      } this.animations_.length=0, this.cancelAnchor_=t, this.nextCenter_=null, this.nextResolution_=NaN, this.nextRotation_=NaN;
    }}, {key: 'updateAnimations_', value: function updateAnimations_() {
      if (void 0!==this.updateAnimationKey_&&(cancelAnimationFrame(this.updateAnimationKey_), this.updateAnimationKey_=void 0), !this.getAnimating()) return; var t=Date.now(); var e=!1; for (var _i47=this.animations_.length-1; _i47>=0; --_i47) {
        var _n48=this.animations_[_i47]; var _r33=!0; for (var _i48=0, _s35=_n48.length; _i48<_s35; ++_i48) {
          var _s36=_n48[_i48]; if (_s36.complete) continue; var _o49=t-_s36.start; var _a27=_s36.duration>0?_o49/_s36.duration:1; _a27>=1?(_s36.complete=!0, _a27=1):_r33=!1; var _l12=_s36.easing(_a27); if (_s36.sourceCenter) {
            var _t38=_s36.sourceCenter[0]; var _e43=_s36.sourceCenter[1]; var _i49=_s36.targetCenter[0]; var _n49=_s36.targetCenter[1]; this.nextCenter_=_s36.targetCenter; var _r34=_t38+_l12*(_i49-_t38); var _o50=_e43+_l12*(_n49-_e43); this.targetCenter_=[_r34, _o50];
          } if (_s36.sourceResolution&&_s36.targetResolution) {
            var _t39=1===_l12?_s36.targetResolution:_s36.sourceResolution+_l12*(_s36.targetResolution-_s36.sourceResolution); if (_s36.anchor) {
              var _e44=this.getViewportSize_(this.getRotation()); var _i50=this.constraints_.resolution(_t39, 0, _e44, !0); this.targetCenter_=this.calculateCenterZoom(_i50, _s36.anchor);
            } this.nextResolution_=_s36.targetResolution, this.targetResolution_=_t39, this.applyTargetState_(!0);
          } if (void 0!==_s36.sourceRotation&&void 0!==_s36.targetRotation) {
            var _t40=1===_l12?Ti(_s36.targetRotation+Math.PI, 2*Math.PI)-Math.PI:_s36.sourceRotation+_l12*(_s36.targetRotation-_s36.sourceRotation); if (_s36.anchor) {
              var _e45=this.constraints_.rotation(_t40, !0); this.targetCenter_=this.calculateCenterRotate(_e45, _s36.anchor);
            } this.nextRotation_=_s36.targetRotation, this.targetRotation_=_t40;
          } if (this.applyTargetState_(!0), e=!0, !_s36.complete) break;
        } if (_r33) {
          this.animations_[_i47]=null, this.setHint(Wo, -1), this.nextCenter_=null, this.nextResolution_=NaN, this.nextRotation_=NaN; var _t41=_n48[0].callback; _t41&&oa(_t41, !0);
        }
      } this.animations_=this.animations_.filter(Boolean), e&&void 0===this.updateAnimationKey_&&(this.updateAnimationKey_=requestAnimationFrame(this.updateAnimations_.bind(this)));
    }}, {key: 'calculateCenterRotate', value: function calculateCenterRotate(t, e) {
      var i; var n=this.getCenterInternal(); return void 0!==n&&(i=[n[0]-e[0], n[1]-e[1]], Gi(i, t-this.getRotation()), Fi(i, e)), i;
    }}, {key: 'calculateCenterZoom', value: function calculateCenterZoom(t, e) {
      var i; var n=this.getCenterInternal(); var r=this.getResolution(); if (void 0!==n&&void 0!==r) {
        i=[e[0]-t*(e[0]-n[0])/r, e[1]-t*(e[1]-n[1])/r];
      } return i;
    }}, {key: 'getViewportSize_', value: function getViewportSize_(t) {
      var e=this.viewportSize_; if (t) {
        var _i51=e[0]; var _n50=e[1]; return [Math.abs(_i51*Math.cos(t))+Math.abs(_n50*Math.sin(t)), Math.abs(_i51*Math.sin(t))+Math.abs(_n50*Math.cos(t))];
      } return e;
    }}, {key: 'setViewportSize', value: function setViewportSize(t) {
      this.viewportSize_=Array.isArray(t)?t.slice():[100, 100], this.getAnimating()||this.resolveConstraints(0);
    }}, {key: 'getCenter', value: function getCenter() {
      var t=this.getCenterInternal(); return t?wn(t, this.getProjection()):t;
    }}, {key: 'getCenterInternal', value: function getCenterInternal() {
      return this.get(Yo.CENTER);
    }}, {key: 'getConstraints', value: function getConstraints() {
      return this.constraints_;
    }}, {key: 'getConstrainResolution', value: function getConstrainResolution() {
      return this.get('constrainResolution');
    }}, {key: 'getHints', value: function getHints(t) {
      return void 0!==t?(t[0]=this.hints_[0], t[1]=this.hints_[1], t):this.hints_.slice();
    }}, {key: 'calculateExtent', value: function calculateExtent(t) {
      return En(this.calculateExtentInternal(t), this.getProjection());
    }}, {key: 'calculateExtentInternal', value: function calculateExtentInternal(t) {
      t=t||this.getViewportSizeMinusPadding_(); var e=this.getCenterInternal(); Ft(e, 1); var i=this.getResolution(); Ft(void 0!==i, 2); var n=this.getRotation(); return Ft(void 0!==n, 3), Le(e, i, n, t);
    }}, {key: 'getMaxResolution', value: function getMaxResolution() {
      return this.maxResolution_;
    }}, {key: 'getMinResolution', value: function getMinResolution() {
      return this.minResolution_;
    }}, {key: 'getMaxZoom', value: function getMaxZoom() {
      return this.getZoomForResolution(this.minResolution_);
    }}, {key: 'setMaxZoom', value: function setMaxZoom(t) {
      this.applyOptions_(this.getUpdatedOptions_({maxZoom: t}));
    }}, {key: 'getMinZoom', value: function getMinZoom() {
      return this.getZoomForResolution(this.maxResolution_);
    }}, {key: 'setMinZoom', value: function setMinZoom(t) {
      this.applyOptions_(this.getUpdatedOptions_({minZoom: t}));
    }}, {key: 'setConstrainResolution', value: function setConstrainResolution(t) {
      this.applyOptions_(this.getUpdatedOptions_({constrainResolution: t}));
    }}, {key: 'getProjection', value: function getProjection() {
      return this.projection_;
    }}, {key: 'getResolution', value: function getResolution() {
      return this.get(Yo.RESOLUTION);
    }}, {key: 'getResolutions', value: function getResolutions() {
      return this.resolutions_;
    }}, {key: 'getResolutionForExtent', value: function getResolutionForExtent(t, e) {
      return this.getResolutionForExtentInternal(Cn(t, this.getProjection()), e);
    }}, {key: 'getResolutionForExtentInternal', value: function getResolutionForExtentInternal(t, e) {
      e=e||this.getViewportSizeMinusPadding_(); var i=De(t)/e[0]; var n=Me(t)/e[1]; return Math.max(i, n);
    }}, {key: 'getResolutionForValueFunction', value: function getResolutionForValueFunction(t) {
      t=t||2; var e=this.getConstrainedResolution(this.maxResolution_); var i=this.minResolution_; var n=Math.log(e/i)/Math.log(t); return function(i) {
        return e/Math.pow(t, i*n);
      };
    }}, {key: 'getRotation', value: function getRotation() {
      return this.get(Yo.ROTATION);
    }}, {key: 'getValueForResolutionFunction', value: function getValueForResolutionFunction(t) {
      var e=Math.log(t||2); var i=this.getConstrainedResolution(this.maxResolution_); var n=this.minResolution_; var r=Math.log(i/n)/e; return function(t) {
        return Math.log(i/t)/e/r;
      };
    }}, {key: 'getViewportSizeMinusPadding_', value: function getViewportSizeMinusPadding_(t) {
      var e=this.getViewportSize_(t); var i=this.padding_; return i&&(e=[e[0]-i[1]-i[3], e[1]-i[0]-i[2]]), e;
    }}, {key: 'getState', value: function getState() {
      var t=this.getProjection(); var e=this.getResolution(); var i=this.getRotation(); var n=this.getCenterInternal(); var r=this.padding_; if (r) {
        var _t42=this.getViewportSizeMinusPadding_(); n=ua(n, this.getViewportSize_(), [_t42[0]/2+r[3], _t42[1]/2+r[0]], e, i);
      } return {center: n.slice(0), projection: void 0!==t?t:null, resolution: e, nextCenter: this.nextCenter_, nextResolution: this.nextResolution_, nextRotation: this.nextRotation_, rotation: i, zoom: this.getZoom()};
    }}, {key: 'getZoom', value: function getZoom() {
      var t; var e=this.getResolution(); return void 0!==e&&(t=this.getZoomForResolution(e)), t;
    }}, {key: 'getZoomForResolution', value: function getZoomForResolution(t) {
      var e; var i; var n=this.minZoom_||0; if (this.resolutions_) {
        var _r35=h(this.resolutions_, t, 1); n=_r35, e=this.resolutions_[_r35], i=_r35==this.resolutions_.length-1?2:e/this.resolutions_[_r35+1];
      } else e=this.maxResolution_, i=this.zoomFactor_; return n+Math.log(e/t)/Math.log(i);
    }}, {key: 'getResolutionForZoom', value: function getResolutionForZoom(t) {
      if (this.resolutions_) {
        if (this.resolutions_.length<=1) return 0; var _e46=_i(Math.floor(t), 0, this.resolutions_.length-2); var _i52=this.resolutions_[_e46]/this.resolutions_[_e46+1]; return this.resolutions_[_e46]/Math.pow(_i52, _i(t-_e46, 0, 1));
      } return this.maxResolution_/Math.pow(this.zoomFactor_, t-this.minZoom_);
    }}, {key: 'fit', value: function fit(t, e) {
      var i; if (Ft(Array.isArray(t)||'function'==typeof t.getSimplifiedGeometry, 24), Array.isArray(t)) {
        Ft(!ke(t), 25); i=Nr(Cn(t, this.getProjection()));
      } else if ('Circle'===t.getType()) {
        var _e47=Cn(t.getExtent(), this.getProjection()); i=Nr(_e47), i.rotate(this.getRotation(), Pe(_e47));
      } else {
        var _e48=Sn(); i=_e48?t.clone().transform(_e48, this.getProjection()):t;
      } this.fitInternal(i, e);
    }}, {key: 'rotatedExtentForGeometry', value: function rotatedExtentForGeometry(t) {
      var e=this.getRotation(); var i=Math.cos(e); var n=Math.sin(-e); var r=t.getFlatCoordinates(); var s=t.getStride(); var o=1/0; var a=1/0; var l=-1/0; var h=-1/0; for (var _t43=0, _e49=r.length; _t43<_e49; _t43+=s) {
        var _e50=r[_t43]*i-r[_t43+1]*n; var _s37=r[_t43]*n+r[_t43+1]*i; o=Math.min(o, _e50), a=Math.min(a, _s37), l=Math.max(l, _e50), h=Math.max(h, _s37);
      } return [o, a, l, h];
    }}, {key: 'fitInternal', value: function fitInternal(t, e) {
      var i=(e=e||{}).size; i||(i=this.getViewportSizeMinusPadding_()); var n=void 0!==e.padding?e.padding:[0, 0, 0, 0]; var r=void 0!==e.nearest&&e.nearest; var s; s=void 0!==e.minResolution?e.minResolution:void 0!==e.maxZoom?this.getResolutionForZoom(e.maxZoom):0; var o=this.rotatedExtentForGeometry(t); var a=this.getResolutionForExtentInternal(o, [i[0]-n[1]-n[3], i[1]-n[0]-n[2]]); a=isNaN(a)?s:Math.max(a, s), a=this.getConstrainedResolution(a, r?0:1); var l=this.getRotation(); var h=Math.sin(l); var c=Math.cos(l); var u=Pe(o); u[0]+=(n[1]-n[3])/2*a, u[1]+=(n[0]-n[2])/2*a; var d=u[0]*c-u[1]*h; var g=u[1]*c+u[0]*h; var f=this.getConstrainedCenter([d, g], a); var p=e.callback?e.callback:m; void 0!==e.duration?this.animateInternal({resolution: a, center: f, duration: e.duration, easing: e.easing}, p):(this.targetResolution_=a, this.targetCenter_=f, this.applyTargetState_(!1, !0), oa(p, !0));
    }}, {key: 'centerOn', value: function centerOn(t, e, i) {
      this.centerOnInternal(Tn(t, this.getProjection()), e, i);
    }}, {key: 'centerOnInternal', value: function centerOnInternal(t, e, i) {
      this.setCenterInternal(ua(t, e, i, this.getResolution(), this.getRotation()));
    }}, {key: 'calculateCenterShift', value: function calculateCenterShift(t, e, i, n) {
      var r; var s=this.padding_; if (s&&t) {
        var _o51=this.getViewportSizeMinusPadding_(-i); var _a28=ua(t, n, [_o51[0]/2+s[3], _o51[1]/2+s[0]], e, i); r=[t[0]-_a28[0], t[1]-_a28[1]];
      } return r;
    }}, {key: 'isDef', value: function isDef() {
      return !!this.getCenterInternal()&&void 0!==this.getResolution();
    }}, {key: 'adjustCenter', value: function adjustCenter(t) {
      var e=wn(this.targetCenter_, this.getProjection()); this.setCenter([e[0]+t[0], e[1]+t[1]]);
    }}, {key: 'adjustCenterInternal', value: function adjustCenterInternal(t) {
      var e=this.targetCenter_; this.setCenterInternal([e[0]+t[0], e[1]+t[1]]);
    }}, {key: 'adjustResolution', value: function adjustResolution(t, e) {
      e=e&&Tn(e, this.getProjection()), this.adjustResolutionInternal(t, e);
    }}, {key: 'adjustResolutionInternal', value: function adjustResolutionInternal(t, e) {
      var i=this.getAnimating()||this.getInteracting(); var n=this.getViewportSize_(this.getRotation()); var r=this.constraints_.resolution(this.targetResolution_*t, 0, n, i); e&&(this.targetCenter_=this.calculateCenterZoom(r, e)), this.targetResolution_*=t, this.applyTargetState_();
    }}, {key: 'adjustZoom', value: function adjustZoom(t, e) {
      this.adjustResolution(Math.pow(this.zoomFactor_, -t), e);
    }}, {key: 'adjustRotation', value: function adjustRotation(t, e) {
      e&&(e=Tn(e, this.getProjection())), this.adjustRotationInternal(t, e);
    }}, {key: 'adjustRotationInternal', value: function adjustRotationInternal(t, e) {
      var i=this.getAnimating()||this.getInteracting(); var n=this.constraints_.rotation(this.targetRotation_+t, i); e&&(this.targetCenter_=this.calculateCenterRotate(n, e)), this.targetRotation_+=t, this.applyTargetState_();
    }}, {key: 'setCenter', value: function setCenter(t) {
      this.setCenterInternal(t?Tn(t, this.getProjection()):t);
    }}, {key: 'setCenterInternal', value: function setCenterInternal(t) {
      this.targetCenter_=t, this.applyTargetState_();
    }}, {key: 'setHint', value: function setHint(t, e) {
      return this.hints_[t]+=e, this.changed(), this.hints_[t];
    }}, {key: 'setResolution', value: function setResolution(t) {
      this.targetResolution_=t, this.applyTargetState_();
    }}, {key: 'setRotation', value: function setRotation(t) {
      this.targetRotation_=t, this.applyTargetState_();
    }}, {key: 'setZoom', value: function setZoom(t) {
      this.setResolution(this.getResolutionForZoom(t));
    }}, {key: 'applyTargetState_', value: function applyTargetState_(t, e) {
      var i=this.getAnimating()||this.getInteracting()||e; var n=this.constraints_.rotation(this.targetRotation_, i); var r=this.getViewportSize_(n); var s=this.constraints_.resolution(this.targetResolution_, 0, r, i); var o=this.constraints_.center(this.targetCenter_, s, r, i, this.calculateCenterShift(this.targetCenter_, s, n, r)); this.get(Yo.ROTATION)!==n&&this.set(Yo.ROTATION, n), this.get(Yo.RESOLUTION)!==s&&(this.set(Yo.RESOLUTION, s), this.set('zoom', this.getZoom(), !0)), o&&this.get(Yo.CENTER)&&Di(this.get(Yo.CENTER), o)||this.set(Yo.CENTER, o), this.getAnimating()&&!t&&this.cancelAnimations(), this.cancelAnchor_=void 0;
    }}, {key: 'resolveConstraints', value: function resolveConstraints(t, e, i) {
      t=void 0!==t?t:200; var n=e||0; var r=this.constraints_.rotation(this.targetRotation_); var s=this.getViewportSize_(r); var o=this.constraints_.resolution(this.targetResolution_, n, s); var a=this.constraints_.center(this.targetCenter_, o, s, !1, this.calculateCenterShift(this.targetCenter_, o, r, s)); if (0===t&&!this.cancelAnchor_) return this.targetResolution_=o, this.targetRotation_=r, this.targetCenter_=a, void this.applyTargetState_(); i=i||(0===t?this.cancelAnchor_:void 0), this.cancelAnchor_=void 0, this.getResolution()===o&&this.getRotation()===r&&this.getCenterInternal()&&Di(this.getCenterInternal(), a)||(this.getAnimating()&&this.cancelAnimations(), this.animateInternal({rotation: r, center: a, resolution: o, duration: t, easing: nt, anchor: i}));
    }}, {key: 'beginInteraction', value: function beginInteraction() {
      this.resolveConstraints(0), this.setHint(Zo, 1);
    }}, {key: 'endInteraction', value: function endInteraction(t, e, i) {
      i=i&&Tn(i, this.getProjection()), this.endInteractionInternal(t, e, i);
    }}, {key: 'endInteractionInternal', value: function endInteractionInternal(t, e, i) {
      this.setHint(Zo, -1), this.resolveConstraints(t, e, i);
    }}, {key: 'getConstrainedCenter', value: function getConstrainedCenter(t, e) {
      var i=this.getViewportSize_(this.getRotation()); return this.constraints_.center(t, e||this.getResolution(), i);
    }}, {key: 'getConstrainedZoom', value: function getConstrainedZoom(t, e) {
      var i=this.getResolutionForZoom(t); return this.getZoomForResolution(this.getConstrainedResolution(i, e));
    }}, {key: 'getConstrainedResolution', value: function getConstrainedResolution(t, e) {
      e=e||0; var i=this.getViewportSize_(this.getRotation()); return this.constraints_.resolution(t, e, i);
    }}]); return da;
  }(W); var ga=/* #__PURE__*/function(_W7) {
    _inherits(ga, _W7); var _super36=_createSuper(ga); function ga(t) {
      var _this36; _classCallCheck(this, ga); _this36=_super36.call(this); var e=t.element; !e||t.target||e.style.pointerEvents||(e.style.pointerEvents='auto'), _this36.element=e||null, _this36.target_=null, _this36.map_=null, _this36.listenerKeys=[], t.render&&(_this36.render=t.render), t.target&&_this36.setTarget(t.target); return _this36;
    }_createClass(ga, [{key: 'disposeInternal', value: function disposeInternal() {
      wt(this.element), _get(_getPrototypeOf(ga.prototype), 'disposeInternal', this).call(this);
    }}, {key: 'getMap', value: function getMap() {
      return this.map_;
    }}, {key: 'setMap', value: function setMap(t) {
      this.map_&&wt(this.element); for (var _t44=0, _e51=this.listenerKeys.length; _t44<_e51; ++_t44)G(this.listenerKeys[_t44]); if (this.listenerKeys.length=0, this.map_=t, t) {
        (this.target_?this.target_:t.getOverlayContainerStopEvent()).appendChild(this.element), this.render!==m&&this.listenerKeys.push(N(t, Mo, this.render, this)), t.render();
      }
    }}, {key: 'render', value: function render(t) {}}, {key: 'setTarget', value: function setTarget(t) {
      this.target_='string'==typeof t?document.getElementById(t):t;
    }}]); return ga;
  }(W); var fa=/* #__PURE__*/function(_ga) {
    _inherits(fa, _ga); var _super37=_createSuper(fa); function fa(t) {
      var _this37; _classCallCheck(this, fa); t=t||{}, _this37=_super37.call(this, {element: document.createElement('div'), render: t.render, target: t.target}), _this37.ulElement_=document.createElement('ul'), _this37.collapsed_=void 0===t.collapsed||t.collapsed, _this37.userCollapsed_=_this37.collapsed_, _this37.overrideCollapsible_=void 0!==t.collapsible, _this37.collapsible_=void 0===t.collapsible||t.collapsible, _this37.collapsible_||(_this37.collapsed_=!1); var e=void 0!==t.className?t.className:'ol-attribution'; var i=void 0!==t.tipLabel?t.tipLabel:'Attributions'; var n=void 0!==t.expandClassName?t.expandClassName:e+'-expand'; var r=void 0!==t.collapseLabel?t.collapseLabel:''; var s=void 0!==t.collapseClassName?t.collapseClassName:e+'-collapse'; 'string'==typeof r?(_this37.collapseLabel_=document.createElement('span'), _this37.collapseLabel_.textContent=r, _this37.collapseLabel_.className=s):_this37.collapseLabel_=r; var o=void 0!==t.label?t.label:'i'; 'string'==typeof o?(_this37.label_=document.createElement('span'), _this37.label_.textContent=o, _this37.label_.className=n):_this37.label_=o; var a=_this37.collapsible_&&!_this37.collapsed_?_this37.collapseLabel_:_this37.label_; _this37.toggleButton_=document.createElement('button'), _this37.toggleButton_.setAttribute('type', 'button'), _this37.toggleButton_.setAttribute('aria-expanded', String(!_this37.collapsed_)), _this37.toggleButton_.title=i, _this37.toggleButton_.appendChild(a), _this37.toggleButton_.addEventListener(C, _this37.handleClick_.bind(_assertThisInitialized(_this37)), !1); var l=e+' '+'ol-unselectable '+Zs+(_this37.collapsed_&&_this37.collapsible_?' ol-collapsed':'')+(_this37.collapsible_?'':' ol-uncollapsible'); var h=_this37.element; h.className=l, h.appendChild(_this37.toggleButton_), h.appendChild(_this37.ulElement_), _this37.renderedAttributions_=[], _this37.renderedVisible_=!0; return _this37;
    }_createClass(fa, [{key: 'collectSourceAttributions_', value: function collectSourceAttributions_(t) {
      var e={}; var i=[]; var n=!0; var r=t.layerStatesArray; for (var _s38=0, _o52=r.length; _s38<_o52; ++_s38) {
        var _o53=r[_s38]; if (!Gs(_o53, t.viewState)) continue; var _a29=_o53.layer.getSource(); if (!_a29) continue; var _l13=_a29.getAttributions(); if (!_l13) continue; var _h13=_l13(t); if (_h13) if (n=n&&!1!==_a29.getAttributionsCollapsible(), Array.isArray(_h13)) for (var _t45=0, _n51=_h13.length; _t45<_n51; ++_t45)_h13[_t45]in e||(i.push(_h13[_t45]), e[_h13[_t45]]=!0); else _h13 in e||(i.push(_h13), e[_h13]=!0);
      } return this.overrideCollapsible_||this.setCollapsible(n), i;
    }}, {key: 'updateElement_', value: function updateElement_(t) {
      if (!t) return void(this.renderedVisible_&&(this.element.style.display='none', this.renderedVisible_=!1)); var e=this.collectSourceAttributions_(t); var i=e.length>0; if (this.renderedVisible_!=i&&(this.element.style.display=i?'':'none', this.renderedVisible_=i), !d(e, this.renderedAttributions_)) {
        Tt(this.ulElement_); for (var _t46=0, _i53=e.length; _t46<_i53; ++_t46) {
          var _i54=document.createElement('li'); _i54.innerHTML=e[_t46], this.ulElement_.appendChild(_i54);
        } this.renderedAttributions_=e;
      }
    }}, {key: 'handleClick_', value: function handleClick_(t) {
      t.preventDefault(), this.handleToggle_(), this.userCollapsed_=this.collapsed_;
    }}, {key: 'handleToggle_', value: function handleToggle_() {
      this.element.classList.toggle(Ys), this.collapsed_?St(this.collapseLabel_, this.label_):St(this.label_, this.collapseLabel_), this.collapsed_=!this.collapsed_, this.toggleButton_.setAttribute('aria-expanded', String(!this.collapsed_));
    }}, {key: 'getCollapsible', value: function getCollapsible() {
      return this.collapsible_;
    }}, {key: 'setCollapsible', value: function setCollapsible(t) {
      this.collapsible_!==t&&(this.collapsible_=t, this.element.classList.toggle('ol-uncollapsible'), this.userCollapsed_&&this.handleToggle_());
    }}, {key: 'setCollapsed', value: function setCollapsed(t) {
      this.userCollapsed_=t, this.collapsible_&&this.collapsed_!==t&&this.handleToggle_();
    }}, {key: 'getCollapsed', value: function getCollapsed() {
      return this.collapsed_;
    }}, {key: 'render', value: function render(t) {
      this.updateElement_(t.frameState);
    }}]); return fa;
  }(ga); var pa=/* #__PURE__*/function(_ga2) {
    _inherits(pa, _ga2); var _super38=_createSuper(pa); function pa(t) {
      var _this38; _classCallCheck(this, pa); t=t||{}, _this38=_super38.call(this, {element: document.createElement('div'), render: t.render, target: t.target}); var e=void 0!==t.className?t.className:'ol-rotate'; var i=void 0!==t.label?t.label:''; var n=void 0!==t.compassClassName?t.compassClassName:'ol-compass'; _this38.label_=null, 'string'==typeof i?(_this38.label_=document.createElement('span'), _this38.label_.className=n, _this38.label_.textContent=i):(_this38.label_=i, _this38.label_.classList.add(n)); var r=t.tipLabel?t.tipLabel:'Reset rotation'; var s=document.createElement('button'); s.className=e+'-reset', s.setAttribute('type', 'button'), s.title=r, s.appendChild(_this38.label_), s.addEventListener(C, _this38.handleClick_.bind(_assertThisInitialized(_this38)), !1); var o=e+' '+'ol-unselectable '+Zs; var a=_this38.element; a.className=o, a.appendChild(s), _this38.callResetNorth_=t.resetNorth?t.resetNorth:void 0, _this38.duration_=void 0!==t.duration?t.duration:250, _this38.autoHide_=void 0===t.autoHide||t.autoHide, _this38.rotation_=void 0, _this38.autoHide_&&_this38.element.classList.add(Us); return _this38;
    }_createClass(pa, [{key: 'handleClick_', value: function handleClick_(t) {
      t.preventDefault(), void 0!==this.callResetNorth_?this.callResetNorth_():this.resetNorth_();
    }}, {key: 'resetNorth_', value: function resetNorth_() {
      var t=this.getMap().getView(); if (!t) return; var e=t.getRotation(); void 0!==e&&(this.duration_>0&&e%(2*Math.PI)!=0?t.animate({rotation: 0, duration: this.duration_, easing: nt}):t.setRotation(0));
    }}, {key: 'render', value: function render(t) {
      var e=t.frameState; if (!e) return; var i=e.viewState.rotation; if (i!=this.rotation_) {
        var _t47='rotate('+i+'rad)'; if (this.autoHide_) {
          var _t48=this.element.classList.contains(Us); _t48||0!==i?_t48&&0!==i&&this.element.classList.remove(Us):this.element.classList.add(Us);
        } this.label_.style.transform=_t47;
      } this.rotation_=i;
    }}]); return pa;
  }(ga); var ma=/* #__PURE__*/function(_ga3) {
    _inherits(ma, _ga3); var _super39=_createSuper(ma); function ma(t) {
      var _this39; _classCallCheck(this, ma); t=t||{}, _this39=_super39.call(this, {element: document.createElement('div'), target: t.target}); var e=void 0!==t.className?t.className:'ol-zoom'; var i=void 0!==t.delta?t.delta:1; var n=void 0!==t.zoomInClassName?t.zoomInClassName:e+'-in'; var r=void 0!==t.zoomOutClassName?t.zoomOutClassName:e+'-out'; var s=void 0!==t.zoomInLabel?t.zoomInLabel:'+'; var o=void 0!==t.zoomOutLabel?t.zoomOutLabel:''; var a=void 0!==t.zoomInTipLabel?t.zoomInTipLabel:'Zoom in'; var l=void 0!==t.zoomOutTipLabel?t.zoomOutTipLabel:'Zoom out'; var h=document.createElement('button'); h.className=n, h.setAttribute('type', 'button'), h.title=a, h.appendChild('string'==typeof s?document.createTextNode(s):s), h.addEventListener(C, _this39.handleClick_.bind(_assertThisInitialized(_this39), i), !1); var c=document.createElement('button'); c.className=r, c.setAttribute('type', 'button'), c.title=l, c.appendChild('string'==typeof o?document.createTextNode(o):o), c.addEventListener(C, _this39.handleClick_.bind(_assertThisInitialized(_this39), -i), !1); var u=e+' '+'ol-unselectable '+Zs; var d=_this39.element; d.className=u, d.appendChild(h), d.appendChild(c), _this39.duration_=void 0!==t.duration?t.duration:250; return _this39;
    }_createClass(ma, [{key: 'handleClick_', value: function handleClick_(t, e) {
      e.preventDefault(), this.zoomByDelta_(t);
    }}, {key: 'zoomByDelta_', value: function zoomByDelta_(t) {
      var e=this.getMap().getView(); if (!e) return; var i=e.getZoom(); if (void 0!==i) {
        var _n52=e.getConstrainedZoom(i+t); this.duration_>0?(e.getAnimating()&&e.cancelAnimations(), e.animate({zoom: _n52, duration: this.duration_, easing: nt})):e.setZoom(_n52);
      }
    }}]); return ma;
  }(ga); function _a(t) {
    t=t||{}; var e=new H(); (void 0===t.zoom||t.zoom)&&e.push(new ma(t.zoomOptions)); (void 0===t.rotate||t.rotate)&&e.push(new pa(t.rotateOptions)); return (void 0===t.attribution||t.attribution)&&e.push(new fa(t.attributionOptions)), e;
  } var ya='active'; function xa(t, e, i) {
    var n=t.getCenterInternal(); if (n) {
      var _r36=[n[0]+e[0], n[1]+e[1]]; t.animateInternal({duration: void 0!==i?i:250, easing: st, center: t.getConstrainedCenter(_r36)});
    }
  } function va(t, e, i, n) {
    var r=t.getZoom(); if (void 0===r) return; var s=t.getConstrainedZoom(r+e); var o=t.getResolutionForZoom(s); t.getAnimating()&&t.cancelAnimations(), t.animate({resolution: o, anchor: i, duration: void 0!==n?n:250, easing: nt});
  } var Sa=/* #__PURE__*/function(_W8) {
    _inherits(Sa, _W8); var _super40=_createSuper(Sa); function Sa(t) {
      var _this40; _classCallCheck(this, Sa); _this40=_super40.call(this), _this40.on, _this40.once, _this40.un, t&&t.handleEvent&&(_this40.handleEvent=t.handleEvent), _this40.map_=null, _this40.setActive(!0); return _this40;
    }_createClass(Sa, [{key: 'getActive', value: function getActive() {
      return this.get(ya);
    }}, {key: 'getMap', value: function getMap() {
      return this.map_;
    }}, {key: 'handleEvent', value: function handleEvent(t) {
      return !0;
    }}, {key: 'setActive', value: function setActive(t) {
      this.set(ya, t);
    }}, {key: 'setMap', value: function setMap(t) {
      this.map_=t;
    }}]); return Sa;
  }(W); var wa=/* #__PURE__*/function(_Sa) {
    _inherits(wa, _Sa); var _super41=_createSuper(wa); function wa(t) {
      var _this41; _classCallCheck(this, wa); _this41=_super41.call(this), t=t||{}, _this41.delta_=t.delta?t.delta:1, _this41.duration_=void 0!==t.duration?t.duration:250; return _this41;
    }_createClass(wa, [{key: 'handleEvent', value: function handleEvent(t) {
      var e=!1; if (t.type==Ro.DBLCLICK) {
        var _i55=t.originalEvent; var _n53=t.map; var _r37=t.coordinate; var _s39=_i55.shiftKey?-this.delta_:this.delta_; va(_n53.getView(), _s39, _r37, this.duration_), _i55.preventDefault(), e=!0;
      } return !e;
    }}]); return wa;
  }(Sa); function Ta(t) {
    var e=t.length; var i=0; var n=0; for (var _r38=0; _r38<e; _r38++)i+=t[_r38].clientX, n+=t[_r38].clientY; return {clientX: i/e, clientY: n/e};
  } var Ea=/* #__PURE__*/function(_Sa2) {
    _inherits(Ea, _Sa2); var _super42=_createSuper(Ea); function Ea(t) {
      var _this42; _classCallCheck(this, Ea); _this42=_super42.call(this, t=t||{}), t.handleDownEvent&&(_this42.handleDownEvent=t.handleDownEvent), t.handleDragEvent&&(_this42.handleDragEvent=t.handleDragEvent), t.handleMoveEvent&&(_this42.handleMoveEvent=t.handleMoveEvent), t.handleUpEvent&&(_this42.handleUpEvent=t.handleUpEvent), t.stopDown&&(_this42.stopDown=t.stopDown), _this42.handlingDownUpSequence=!1, _this42.targetPointers=[]; return _this42;
    }_createClass(Ea, [{key: 'getPointerCount', value: function getPointerCount() {
      return this.targetPointers.length;
    }}, {key: 'handleDownEvent', value: function handleDownEvent(t) {
      return !1;
    }}, {key: 'handleDragEvent', value: function handleDragEvent(t) {}}, {key: 'handleEvent', value: function handleEvent(t) {
      if (!t.originalEvent) return !0; var e=!1; if (this.updateTrackedPointers_(t), this.handlingDownUpSequence) {
        if (t.type==Ro.POINTERDRAG) this.handleDragEvent(t), t.originalEvent.preventDefault(); else if (t.type==Ro.POINTERUP) {
          var _e52=this.handleUpEvent(t); this.handlingDownUpSequence=_e52&&this.targetPointers.length>0;
        }
      } else if (t.type==Ro.POINTERDOWN) {
        var _i56=this.handleDownEvent(t); this.handlingDownUpSequence=_i56, e=this.stopDown(_i56);
      } else t.type==Ro.POINTERMOVE&&this.handleMoveEvent(t); return !e;
    }}, {key: 'handleMoveEvent', value: function handleMoveEvent(t) {}}, {key: 'handleUpEvent', value: function handleUpEvent(t) {
      return !1;
    }}, {key: 'stopDown', value: function stopDown(t) {
      return t;
    }}, {key: 'updateTrackedPointers_', value: function updateTrackedPointers_(t) {
      t.activePointers&&(this.targetPointers=t.activePointers);
    }}]); return Ea;
  }(Sa); function Ca(t) {
    var e=arguments; return function(t) {
      var i=!0; for (var _n54=0, _r39=e.length; _n54<_r39&&(i=i&&e[_n54](t), i); ++_n54);return i;
    };
  } var Ra=function Ra(t) {
    var e=t.originalEvent; return e.altKey&&!(e.metaKey||e.ctrlKey)&&!e.shiftKey;
  }; var ba=function ba(t) {
    var e=t.originalEvent; return e.altKey&&!(e.metaKey||e.ctrlKey)&&e.shiftKey;
  }; var Pa=function Pa(t) {
    var e=t.map.getTargetElement(); var i=t.map.getOwnerDocument().activeElement; return e.contains(i);
  }; var Ia=function Ia(t) {
    return !t.map.getTargetElement().hasAttribute('tabindex')||Pa(t);
  }; var La=f; var Fa=function Fa(t) {
    var e=t.originalEvent; return 0==e.button&&!(ut&&dt&&e.ctrlKey);
  }; var Ma=p; var Aa=function Aa(t) {
    return t.type==Ro.SINGLECLICK;
  }; var Oa=function Oa(t) {
    var e=t.originalEvent; return !e.altKey&&!(e.metaKey||e.ctrlKey)&&!e.shiftKey;
  }; var Na=function Na(t) {
    var e=t.originalEvent; return !e.altKey&&!(e.metaKey||e.ctrlKey)&&e.shiftKey;
  }; var Da=function Da(t) {
    var e=t.originalEvent; var i=e.target.tagName; return 'INPUT'!==i&&'SELECT'!==i&&'TEXTAREA'!==i&&!e.target.isContentEditable;
  }; var Ga=function Ga(t) {
    var e=t.originalEvent; return Ft(void 0!==e, 56), 'mouse'==e.pointerType;
  }; var ka=function ka(t) {
    var e=t.originalEvent; return Ft(void 0!==e, 56), e.isPrimary&&0===e.button;
  }; var ja=/* #__PURE__*/function(_Ea) {
    _inherits(ja, _Ea); var _super43=_createSuper(ja); function ja(t) {
      var _this43; _classCallCheck(this, ja); _this43=_super43.call(this, {stopDown: p}), t=t||{}, _this43.kinetic_=t.kinetic, _this43.lastCentroid=null, _this43.lastPointersCount_, _this43.panning_=!1; var e=t.condition?t.condition:Ca(Oa, ka); _this43.condition_=t.onFocusOnly?Ca(Ia, e):e, _this43.noKinetic_=!1; return _this43;
    }_createClass(ja, [{key: 'handleDragEvent', value: function handleDragEvent(t) {
      var e=t.map; this.panning_||(this.panning_=!0, e.getView().beginInteraction()); var i=this.targetPointers; var n=e.getEventPixel(Ta(i)); if (i.length==this.lastPointersCount_) {
        if (this.kinetic_&&this.kinetic_.update(n[0], n[1]), this.lastCentroid) {
          var _e53=[this.lastCentroid[0]-n[0], n[1]-this.lastCentroid[1]]; var _i57=t.map.getView(); ki(_e53, _i57.getResolution()), Gi(_e53, _i57.getRotation()), _i57.adjustCenterInternal(_e53);
        }
      } else this.kinetic_&&this.kinetic_.begin(); this.lastCentroid=n, this.lastPointersCount_=i.length, t.originalEvent.preventDefault();
    }}, {key: 'handleUpEvent', value: function handleUpEvent(t) {
      var e=t.map; var i=e.getView(); if (0===this.targetPointers.length) {
        if (!this.noKinetic_&&this.kinetic_&&this.kinetic_.end()) {
          var _t49=this.kinetic_.getDistance(); var _n55=this.kinetic_.getAngle(); var _r40=i.getCenterInternal(); var _s40=e.getPixelFromCoordinateInternal(_r40); var _o54=e.getCoordinateFromPixelInternal([_s40[0]-_t49*Math.cos(_n55), _s40[1]-_t49*Math.sin(_n55)]); i.animateInternal({center: i.getConstrainedCenter(_o54), duration: 500, easing: nt});
        } return this.panning_&&(this.panning_=!1, i.endInteraction()), !1;
      } return this.kinetic_&&this.kinetic_.begin(), this.lastCentroid=null, !0;
    }}, {key: 'handleDownEvent', value: function handleDownEvent(t) {
      if (this.targetPointers.length>0&&this.condition_(t)) {
        var _e54=t.map.getView(); return this.lastCentroid=null, _e54.getAnimating()&&_e54.cancelAnimations(), this.kinetic_&&this.kinetic_.begin(), this.noKinetic_=this.targetPointers.length>1, !0;
      } return !1;
    }}]); return ja;
  }(Ea); var Ba=/* #__PURE__*/function(_Ea2) {
    _inherits(Ba, _Ea2); var _super44=_createSuper(Ba); function Ba(t) {
      var _this44; _classCallCheck(this, Ba); t=t||{}, _this44=_super44.call(this, {stopDown: p}), _this44.condition_=t.condition?t.condition:ba, _this44.lastAngle_=void 0, _this44.duration_=void 0!==t.duration?t.duration:250; return _this44;
    }_createClass(Ba, [{key: 'handleDragEvent', value: function handleDragEvent(t) {
      if (!Ga(t)) return; var e=t.map; var i=e.getView(); if (i.getConstraints().rotation===ia) return; var n=e.getSize(); var r=t.pixel; var s=Math.atan2(n[1]/2-r[1], r[0]-n[0]/2); if (void 0!==this.lastAngle_) {
        var _t50=s-this.lastAngle_; i.adjustRotationInternal(-_t50);
      } this.lastAngle_=s;
    }}, {key: 'handleUpEvent', value: function handleUpEvent(t) {
      if (!Ga(t)) return !0; return t.map.getView().endInteraction(this.duration_), !1;
    }}, {key: 'handleDownEvent', value: function handleDownEvent(t) {
      if (!Ga(t)) return !1; if (Fa(t)&&this.condition_(t)) {
        return t.map.getView().beginInteraction(), this.lastAngle_=void 0, !0;
      } return !1;
    }}]); return Ba;
  }(Ea); var za=/* #__PURE__*/function(_o55) {
    _inherits(za, _o55); var _super45=_createSuper(za); function za(t) {
      var _this45; _classCallCheck(this, za); _this45=_super45.call(this), _this45.geometry_=null, _this45.element_=document.createElement('div'), _this45.element_.style.position='absolute', _this45.element_.style.pointerEvents='auto', _this45.element_.className='ol-box '+t, _this45.map_=null, _this45.startPixel_=null, _this45.endPixel_=null; return _this45;
    }_createClass(za, [{key: 'disposeInternal', value: function disposeInternal() {
      this.setMap(null);
    }}, {key: 'render_', value: function render_() {
      var t=this.startPixel_; var e=this.endPixel_; var i='px'; var n=this.element_.style; n.left=Math.min(t[0], e[0])+i, n.top=Math.min(t[1], e[1])+i, n.width=Math.abs(e[0]-t[0])+i, n.height=Math.abs(e[1]-t[1])+i;
    }}, {key: 'setMap', value: function setMap(t) {
      if (this.map_) {
        this.map_.getOverlayContainer().removeChild(this.element_); var _t51=this.element_.style; _t51.left='inherit', _t51.top='inherit', _t51.width='inherit', _t51.height='inherit';
      } this.map_=t, this.map_&&this.map_.getOverlayContainer().appendChild(this.element_);
    }}, {key: 'setPixels', value: function setPixels(t, e) {
      this.startPixel_=t, this.endPixel_=e, this.createOrUpdateGeometry(), this.render_();
    }}, {key: 'createOrUpdateGeometry', value: function createOrUpdateGeometry() {
      var t=this.startPixel_; var e=this.endPixel_; var i=[t, [t[0], e[1]], e, [e[0], t[1]]].map(this.map_.getCoordinateFromPixelInternal, this.map_); i[4]=i[0].slice(), this.geometry_?this.geometry_.setCoordinates([i]):this.geometry_=new Ar([i]);
    }}, {key: 'getGeometry', value: function getGeometry() {
      return this.geometry_;
    }}]); return za;
  }(o); var Ua='boxstart'; var Xa='boxdrag'; var Va='boxend'; var Wa='boxcancel'; var Za=/* #__PURE__*/function(_r41) {
    _inherits(Za, _r41); var _super46=_createSuper(Za); function Za(t, e, i) {
      var _this46; _classCallCheck(this, Za); _this46=_super46.call(this, t), _this46.coordinate=e, _this46.mapBrowserEvent=i; return _this46;
    } return _createClass(Za);
  }(r); var Ya=/* #__PURE__*/function(_Ea3) {
    _inherits(Ya, _Ea3); var _super47=_createSuper(Ya); function Ya(t) {
      var _this47; _classCallCheck(this, Ya); _this47=_super47.call(this), _this47.on, _this47.once, _this47.un, t=t||{}, _this47.box_=new za(t.className||'ol-dragbox'), _this47.minArea_=void 0!==t.minArea?t.minArea:64, t.onBoxEnd&&(_this47.onBoxEnd=t.onBoxEnd), _this47.startPixel_=null, _this47.condition_=t.condition?t.condition:Fa, _this47.boxEndCondition_=t.boxEndCondition?t.boxEndCondition:_this47.defaultBoxEndCondition; return _this47;
    }_createClass(Ya, [{key: 'defaultBoxEndCondition', value: function defaultBoxEndCondition(t, e, i) {
      var n=i[0]-e[0]; var r=i[1]-e[1]; return n*n+r*r>=this.minArea_;
    }}, {key: 'getGeometry', value: function getGeometry() {
      return this.box_.getGeometry();
    }}, {key: 'handleDragEvent', value: function handleDragEvent(t) {
      this.box_.setPixels(this.startPixel_, t.pixel), this.dispatchEvent(new Za(Xa, t.coordinate, t));
    }}, {key: 'handleUpEvent', value: function handleUpEvent(t) {
      this.box_.setMap(null); var e=this.boxEndCondition_(t, this.startPixel_, t.pixel); return e&&this.onBoxEnd(t), this.dispatchEvent(new Za(e?Va:Wa, t.coordinate, t)), !1;
    }}, {key: 'handleDownEvent', value: function handleDownEvent(t) {
      return !!this.condition_(t)&&(this.startPixel_=t.pixel, this.box_.setMap(t.map), this.box_.setPixels(this.startPixel_, this.startPixel_), this.dispatchEvent(new Za(Ua, t.coordinate, t)), !0);
    }}, {key: 'onBoxEnd', value: function onBoxEnd(t) {}}]); return Ya;
  }(Ea); var Ka=/* #__PURE__*/function(_Ya) {
    _inherits(Ka, _Ya); var _super48=_createSuper(Ka); function Ka(t) {
      var _this48; _classCallCheck(this, Ka); _this48=_super48.call(this, {condition: (t=t||{}).condition?t.condition:Na, className: t.className||'ol-dragzoom', minArea: t.minArea}), _this48.duration_=void 0!==t.duration?t.duration:200, _this48.out_=void 0!==t.out&&t.out; return _this48;
    }_createClass(Ka, [{key: 'onBoxEnd', value: function onBoxEnd(t) {
      var e=this.getMap().getView(); var i=this.getGeometry(); if (this.out_) {
        var _t52=e.rotatedExtentForGeometry(i); var _n56=e.getResolutionForExtentInternal(_t52); var _r42=e.getResolution()/_n56; i=i.clone(), i.scale(_r42*_r42);
      }e.fitInternal(i, {duration: this.duration_, easing: nt});
    }}]); return Ka;
  }(Ya); var qa=37; var Ha=38; var $a=39; var Ja=40; var Qa=/* #__PURE__*/function(_Sa3) {
    _inherits(Qa, _Sa3); var _super49=_createSuper(Qa); function Qa(t) {
      var _this49; _classCallCheck(this, Qa); _this49=_super49.call(this), t=t||{}, _this49.defaultCondition_=function(t) {
        return Oa(t)&&Da(t);
      }, _this49.condition_=void 0!==t.condition?t.condition:_this49.defaultCondition_, _this49.duration_=void 0!==t.duration?t.duration:100, _this49.pixelDelta_=void 0!==t.pixelDelta?t.pixelDelta:128; return _this49;
    }_createClass(Qa, [{key: 'handleEvent', value: function handleEvent(t) {
      var e=!1; if (t.type==L) {
        var _i58=t.originalEvent; var _n57=_i58.keyCode; if (this.condition_(t)&&(_n57==Ja||_n57==qa||_n57==$a||_n57==Ha)) {
          var _r43=t.map.getView(); var _s41=_r43.getResolution()*this.pixelDelta_; var _o56=0; var _a30=0; _n57==Ja?_a30=-_s41:_n57==qa?_o56=-_s41:_n57==$a?_o56=_s41:_a30=_s41; var _l14=[_o56, _a30]; Gi(_l14, _r43.getRotation()), xa(_r43, _l14, this.duration_), _i58.preventDefault(), e=!0;
        }
      } return !e;
    }}]); return Qa;
  }(Sa); var tl=/* #__PURE__*/function(_Sa4) {
    _inherits(tl, _Sa4); var _super50=_createSuper(tl); function tl(t) {
      var _this50; _classCallCheck(this, tl); _this50=_super50.call(this), t=t||{}, _this50.condition_=t.condition?t.condition:Da, _this50.delta_=t.delta?t.delta:1, _this50.duration_=void 0!==t.duration?t.duration:100; return _this50;
    }_createClass(tl, [{key: 'handleEvent', value: function handleEvent(t) {
      var e=!1; if (t.type==L||t.type==F) {
        var _i59=t.originalEvent; var _n58=_i59.charCode; if (this.condition_(t)&&(_n58=='+'.charCodeAt(0)||_n58=='-'.charCodeAt(0))) {
          var _r44=t.map; var _s42=_n58=='+'.charCodeAt(0)?this.delta_:-this.delta_; va(_r44.getView(), _s42, void 0, this.duration_), _i59.preventDefault(), e=!0;
        }
      } return !e;
    }}]); return tl;
  }(Sa); var el=/* #__PURE__*/function(_Sa5) {
    _inherits(el, _Sa5); var _super51=_createSuper(el); function el(t) {
      var _this51; _classCallCheck(this, el); _this51=_super51.call(this, t=t||{}), _this51.totalDelta_=0, _this51.lastDelta_=0, _this51.maxDelta_=void 0!==t.maxDelta?t.maxDelta:1, _this51.duration_=void 0!==t.duration?t.duration:250, _this51.timeout_=void 0!==t.timeout?t.timeout:80, _this51.useAnchor_=void 0===t.useAnchor||t.useAnchor, _this51.constrainResolution_=void 0!==t.constrainResolution&&t.constrainResolution; var e=t.condition?t.condition:La; _this51.condition_=t.onFocusOnly?Ca(Ia, e):e, _this51.lastAnchor_=null, _this51.startTime_=void 0, _this51.timeoutId_, _this51.mode_=void 0, _this51.trackpadEventGap_=400, _this51.trackpadTimeoutId_, _this51.deltaPerZoom_=300; return _this51;
    }_createClass(el, [{key: 'endInteraction_', value: function endInteraction_() {
      this.trackpadTimeoutId_=void 0; var t=this.getMap(); if (!t) return; t.getView().endInteraction(void 0, this.lastDelta_?this.lastDelta_>0?1:-1:0, this.lastAnchor_);
    }}, {key: 'handleEvent', value: function handleEvent(t) {
      if (!this.condition_(t)) return !0; if (t.type!==O) return !0; var e=t.map; var i=t.originalEvent; var n; if (i.preventDefault(), this.useAnchor_&&(this.lastAnchor_=t.coordinate), t.type==O&&(n=i.deltaY, lt&&i.deltaMode===WheelEvent.DOM_DELTA_PIXEL&&(n/=gt), i.deltaMode===WheelEvent.DOM_DELTA_LINE&&(n*=40)), 0===n) return !1; this.lastDelta_=n; var r=Date.now(); void 0===this.startTime_&&(this.startTime_=r), (!this.mode_||r-this.startTime_>this.trackpadEventGap_)&&(this.mode_=Math.abs(n)<4?'trackpad':'wheel'); var s=e.getView(); if ('trackpad'===this.mode_&&!s.getConstrainResolution()&&!this.constrainResolution_) return this.trackpadTimeoutId_?clearTimeout(this.trackpadTimeoutId_):(s.getAnimating()&&s.cancelAnimations(), s.beginInteraction()), this.trackpadTimeoutId_=setTimeout(this.endInteraction_.bind(this), this.timeout_), s.adjustZoom(-n/this.deltaPerZoom_, this.lastAnchor_), this.startTime_=r, !1; this.totalDelta_+=n; var o=Math.max(this.timeout_-(r-this.startTime_), 0); return clearTimeout(this.timeoutId_), this.timeoutId_=setTimeout(this.handleWheelZoom_.bind(this, e), o), !1;
    }}, {key: 'handleWheelZoom_', value: function handleWheelZoom_(t) {
      var e=t.getView(); e.getAnimating()&&e.cancelAnimations(); var i=-_i(this.totalDelta_, -this.maxDelta_*this.deltaPerZoom_, this.maxDelta_*this.deltaPerZoom_)/this.deltaPerZoom_; (e.getConstrainResolution()||this.constrainResolution_)&&(i=i?i>0?1:-1:0), va(e, i, this.lastAnchor_, this.duration_), this.mode_=void 0, this.totalDelta_=0, this.lastAnchor_=null, this.startTime_=void 0, this.timeoutId_=void 0;
    }}, {key: 'setMouseAnchor', value: function setMouseAnchor(t) {
      this.useAnchor_=t, t||(this.lastAnchor_=null);
    }}]); return el;
  }(Sa); var il=/* #__PURE__*/function(_Ea4) {
    _inherits(il, _Ea4); var _super52=_createSuper(il); function il(t) {
      var _this52; _classCallCheck(this, il); var e=t=t||{}; e.stopDown||(e.stopDown=p), _this52=_super52.call(this, e), _this52.anchor_=null, _this52.lastAngle_=void 0, _this52.rotating_=!1, _this52.rotationDelta_=0, _this52.threshold_=void 0!==t.threshold?t.threshold:.3, _this52.duration_=void 0!==t.duration?t.duration:250; return _this52;
    }_createClass(il, [{key: 'handleDragEvent', value: function handleDragEvent(t) {
      var e=0; var i=this.targetPointers[0]; var n=this.targetPointers[1]; var r=Math.atan2(n.clientY-i.clientY, n.clientX-i.clientX); if (void 0!==this.lastAngle_) {
        var _t53=r-this.lastAngle_; this.rotationDelta_+=_t53, !this.rotating_&&Math.abs(this.rotationDelta_)>this.threshold_&&(this.rotating_=!0), e=_t53;
      } this.lastAngle_=r; var s=t.map; var o=s.getView(); o.getConstraints().rotation!==ia&&(this.anchor_=s.getCoordinateFromPixelInternal(s.getEventPixel(Ta(this.targetPointers))), this.rotating_&&(s.render(), o.adjustRotationInternal(e, this.anchor_)));
    }}, {key: 'handleUpEvent', value: function handleUpEvent(t) {
      if (this.targetPointers.length<2) {
        return t.map.getView().endInteraction(this.duration_), !1;
      } return !0;
    }}, {key: 'handleDownEvent', value: function handleDownEvent(t) {
      if (this.targetPointers.length>=2) {
        var _e55=t.map; return this.anchor_=null, this.lastAngle_=void 0, this.rotating_=!1, this.rotationDelta_=0, this.handlingDownUpSequence||_e55.getView().beginInteraction(), !0;
      } return !1;
    }}]); return il;
  }(Ea); var nl=/* #__PURE__*/function(_Ea5) {
    _inherits(nl, _Ea5); var _super53=_createSuper(nl); function nl(t) {
      var _this53; _classCallCheck(this, nl); var e=t=t||{}; e.stopDown||(e.stopDown=p), _this53=_super53.call(this, e), _this53.anchor_=null, _this53.duration_=void 0!==t.duration?t.duration:400, _this53.lastDistance_=void 0, _this53.lastScaleDelta_=1; return _this53;
    }_createClass(nl, [{key: 'handleDragEvent', value: function handleDragEvent(t) {
      var e=1; var i=this.targetPointers[0]; var n=this.targetPointers[1]; var r=i.clientX-n.clientX; var s=i.clientY-n.clientY; var o=Math.sqrt(r*r+s*s); void 0!==this.lastDistance_&&(e=this.lastDistance_/o), this.lastDistance_=o; var a=t.map; var l=a.getView(); 1!=e&&(this.lastScaleDelta_=e), this.anchor_=a.getCoordinateFromPixelInternal(a.getEventPixel(Ta(this.targetPointers))), a.render(), l.adjustResolutionInternal(e, this.anchor_);
    }}, {key: 'handleUpEvent', value: function handleUpEvent(t) {
      if (this.targetPointers.length<2) {
        var _e56=t.map.getView(); var _i60=this.lastScaleDelta_>1?1:-1; return _e56.endInteraction(this.duration_, _i60), !1;
      } return !0;
    }}, {key: 'handleDownEvent', value: function handleDownEvent(t) {
      if (this.targetPointers.length>=2) {
        var _e57=t.map; return this.anchor_=null, this.lastDistance_=void 0, this.lastScaleDelta_=1, this.handlingDownUpSequence||_e57.getView().beginInteraction(), !0;
      } return !1;
    }}]); return nl;
  }(Ea); function rl(t) {
    t=t||{}; var e=new H(); var i=new as(-.005, .05, 100); (void 0===t.altShiftDragRotate||t.altShiftDragRotate)&&e.push(new Ba()); (void 0===t.doubleClickZoom||t.doubleClickZoom)&&e.push(new wa({delta: t.zoomDelta, duration: t.zoomDuration})); (void 0===t.dragPan||t.dragPan)&&e.push(new ja({onFocusOnly: t.onFocusOnly, kinetic: i})); (void 0===t.pinchRotate||t.pinchRotate)&&e.push(new il()); (void 0===t.pinchZoom||t.pinchZoom)&&e.push(new nl({duration: t.zoomDuration})); (void 0===t.keyboard||t.keyboard)&&(e.push(new Qa()), e.push(new tl({delta: t.zoomDelta, duration: t.zoomDuration}))); (void 0===t.mouseWheelZoom||t.mouseWheelZoom)&&e.push(new el({onFocusOnly: t.onFocusOnly, duration: t.zoomDuration})); return (void 0===t.shiftDragZoom||t.shiftDragZoom)&&e.push(new Ka({duration: t.zoomDuration})), e;
  } function sl(t, e, i) {
    return void 0===i&&(i=[0, 0]), i[0]=t[0]+2*e, i[1]=t[1]+2*e, i;
  } function ol(t) {
    return t[0]>0&&t[1]>0;
  } function al(t, e, i) {
    return void 0===i&&(i=[0, 0]), i[0]=t[0]*e+.5|0, i[1]=t[1]*e+.5|0, i;
  } function ll(t, e) {
    return Array.isArray(t)?t:(void 0===e?e=[t, t]:(e[0]=t, e[1]=t), e);
  } function hl(t) {
t instanceof ks?t.setMapInternal(null):t instanceof To&&t.getLayers().forEach(hl);
  } function cl(t, e) {
    if (t instanceof ks)t.setMapInternal(e); else if (t instanceof To) {
      var _i61=t.getLayers().getArray(); for (var _t54=0, _n59=_i61.length; _t54<_n59; ++_t54)cl(_i61[_t54], e);
    }
  } var ul=/* #__PURE__*/function(_W9) {
    _inherits(ul, _W9); var _super54=_createSuper(ul); function ul(t) {
      var _this54; _classCallCheck(this, ul); _this54=_super54.call(this), t=t||{}, _this54.on, _this54.once, _this54.un; var e=function(t) {
        var e=null; void 0!==t.keyboardEventTarget&&(e='string'==typeof t.keyboardEventTarget?document.getElementById(t.keyboardEventTarget):t.keyboardEventTarget); var i={}; var n=t.layers&&'function'==typeof t.layers.getLayers?t.layers:new To({layers: t.layers}); var r; var s; var o; i[Go]=n, i[jo]=t.target, i[Bo]=t.view instanceof da?t.view:new da(), void 0!==t.controls&&(Array.isArray(t.controls)?r=new H(t.controls.slice()):(Ft('function'==typeof t.controls.getArray, 47), r=t.controls)); void 0!==t.interactions&&(Array.isArray(t.interactions)?s=new H(t.interactions.slice()):(Ft('function'==typeof t.interactions.getArray, 48), s=t.interactions)); void 0!==t.overlays?Array.isArray(t.overlays)?o=new H(t.overlays.slice()):(Ft('function'==typeof t.overlays.getArray, 49), o=t.overlays):o=new H(); return {controls: r, interactions: s, keyboardEventTarget: e, overlays: o, values: i};
      }(t); _this54.renderComplete_, _this54.loaded_=!0, _this54.boundHandleBrowserEvent_=_this54.handleBrowserEvent.bind(_assertThisInitialized(_this54)), _this54.maxTilesLoading_=void 0!==t.maxTilesLoading?t.maxTilesLoading:16, _this54.pixelRatio_=void 0!==t.pixelRatio?t.pixelRatio:gt, _this54.postRenderTimeoutHandle_, _this54.animationDelayKey_, _this54.animationDelay_=_this54.animationDelay_.bind(_assertThisInitialized(_this54)), _this54.coordinateToPixelTransform_=[1, 0, 0, 1, 0, 0], _this54.pixelToCoordinateTransform_=[1, 0, 0, 1, 0, 0], _this54.frameIndex_=0, _this54.frameState_=null, _this54.previousExtent_=null, _this54.viewPropertyListenerKey_=null, _this54.viewChangeListenerKey_=null, _this54.layerGroupPropertyListenerKeys_=null, _this54.viewport_=document.createElement('div'), _this54.viewport_.className='ol-viewport'+('ontouchstart'in window?' ol-touch':''), _this54.viewport_.style.position='relative', _this54.viewport_.style.overflow='hidden', _this54.viewport_.style.width='100%', _this54.viewport_.style.height='100%', _this54.overlayContainer_=document.createElement('div'), _this54.overlayContainer_.style.position='absolute', _this54.overlayContainer_.style.zIndex='0', _this54.overlayContainer_.style.width='100%', _this54.overlayContainer_.style.height='100%', _this54.overlayContainer_.style.pointerEvents='none', _this54.overlayContainer_.className='ol-overlaycontainer', _this54.viewport_.appendChild(_this54.overlayContainer_), _this54.overlayContainerStopEvent_=document.createElement('div'), _this54.overlayContainerStopEvent_.style.position='absolute', _this54.overlayContainerStopEvent_.style.zIndex='0', _this54.overlayContainerStopEvent_.style.width='100%', _this54.overlayContainerStopEvent_.style.height='100%', _this54.overlayContainerStopEvent_.style.pointerEvents='none', _this54.overlayContainerStopEvent_.className='ol-overlaycontainer-stopevent', _this54.viewport_.appendChild(_this54.overlayContainerStopEvent_), _this54.mapBrowserEventHandler_=null, _this54.moveTolerance_=t.moveTolerance, _this54.keyboardEventTarget_=e.keyboardEventTarget, _this54.targetChangeHandlerKeys_=null, _this54.targetElement_=null, _this54.resizeObserver_=new ResizeObserver(function() {
        return _this54.updateSize();
      }), _this54.controls=e.controls||_a(), _this54.interactions=e.interactions||rl({onFocusOnly: !0}), _this54.overlays_=e.overlays, _this54.overlayIdIndex_={}, _this54.renderer_=null, _this54.postRenderFunctions_=[], _this54.tileQueue_=new Xo(_this54.getTilePriority.bind(_assertThisInitialized(_this54)), _this54.handleTileChange_.bind(_assertThisInitialized(_this54))), _this54.addChangeListener(Go, _this54.handleLayerGroupChanged_), _this54.addChangeListener(Bo, _this54.handleViewChanged_), _this54.addChangeListener(ko, _this54.handleSizeChanged_), _this54.addChangeListener(jo, _this54.handleTargetChanged_), _this54.setProperties(e.values); var i=_assertThisInitialized(_this54); !t.view||t.view instanceof da||t.view.then(function(t) {
        i.setView(new da(t));
      }), _this54.controls.addEventListener(Z, function(t) {
        t.element.setMap(_assertThisInitialized(_this54));
      }), _this54.controls.addEventListener(Y, function(t) {
        t.element.setMap(null);
      }), _this54.interactions.addEventListener(Z, function(t) {
        t.element.setMap(_assertThisInitialized(_this54));
      }), _this54.interactions.addEventListener(Y, function(t) {
        t.element.setMap(null);
      }), _this54.overlays_.addEventListener(Z, function(t) {
        _this54.addOverlayInternal_(t.element);
      }), _this54.overlays_.addEventListener(Y, function(t) {
        var e=t.element.getId(); void 0!==e&&delete _this54.overlayIdIndex_[e.toString()], t.element.setMap(null);
      }), _this54.controls.forEach(function(t) {
        t.setMap(_assertThisInitialized(_this54));
      }), _this54.interactions.forEach(function(t) {
        t.setMap(_assertThisInitialized(_this54));
      }), _this54.overlays_.forEach(_this54.addOverlayInternal_.bind(_assertThisInitialized(_this54))); return _this54;
    }_createClass(ul, [{key: 'addControl', value: function addControl(t) {
      this.getControls().push(t);
    }}, {key: 'addInteraction', value: function addInteraction(t) {
      this.getInteractions().push(t);
    }}, {key: 'addLayer', value: function addLayer(t) {
      this.getLayerGroup().getLayers().push(t);
    }}, {key: 'handleLayerAdd_', value: function handleLayerAdd_(t) {
      cl(t.layer, this);
    }}, {key: 'addOverlay', value: function addOverlay(t) {
      this.getOverlays().push(t);
    }}, {key: 'addOverlayInternal_', value: function addOverlayInternal_(t) {
      var e=t.getId(); void 0!==e&&(this.overlayIdIndex_[e.toString()]=t), t.setMap(this);
    }}, {key: 'disposeInternal', value: function disposeInternal() {
      this.controls.clear(), this.interactions.clear(), this.overlays_.clear(), this.resizeObserver_.disconnect(), this.setTarget(null), _get(_getPrototypeOf(ul.prototype), 'disposeInternal', this).call(this);
    }}, {key: 'forEachFeatureAtPixel', value: function forEachFeatureAtPixel(t, e, i) {
      if (!this.frameState_||!this.renderer_) return; var n=this.getCoordinateFromPixelInternal(t); var r=void 0!==(i=void 0!==i?i:{}).hitTolerance?i.hitTolerance:0; var s=void 0!==i.layerFilter?i.layerFilter:f; var o=!1!==i.checkWrapped; return this.renderer_.forEachFeatureAtCoordinate(n, this.frameState_, r, o, e, null, s, null);
    }}, {key: 'getFeaturesAtPixel', value: function getFeaturesAtPixel(t, e) {
      var i=[]; return this.forEachFeatureAtPixel(t, function(t) {
        i.push(t);
      }, e), i;
    }}, {key: 'getAllLayers', value: function getAllLayers() {
      var t=[]; return function e(i) {
        i.forEach(function(i) {
i instanceof To?e(i.getLayers()):t.push(i);
        });
      }(this.getLayers()), t;
    }}, {key: 'hasFeatureAtPixel', value: function hasFeatureAtPixel(t, e) {
      if (!this.frameState_||!this.renderer_) return !1; var i=this.getCoordinateFromPixelInternal(t); var n=void 0!==(e=void 0!==e?e:{}).layerFilter?e.layerFilter:f; var r=void 0!==e.hitTolerance?e.hitTolerance:0; var s=!1!==e.checkWrapped; return this.renderer_.hasFeatureAtCoordinate(i, this.frameState_, r, s, n, null);
    }}, {key: 'getEventCoordinate', value: function getEventCoordinate(t) {
      return this.getCoordinateFromPixel(this.getEventPixel(t));
    }}, {key: 'getEventCoordinateInternal', value: function getEventCoordinateInternal(t) {
      return this.getCoordinateFromPixelInternal(this.getEventPixel(t));
    }}, {key: 'getEventPixel', value: function getEventPixel(t) {
      var e=this.viewport_.getBoundingClientRect(); var i=this.getSize(); var n=e.width/i[0]; var r=e.height/i[1]; var s='changedTouches'in t?t.changedTouches[0]:t; return [(s.clientX-e.left)/n, (s.clientY-e.top)/r];
    }}, {key: 'getTarget', value: function getTarget() {
      return this.get(jo);
    }}, {key: 'getTargetElement', value: function getTargetElement() {
      return this.targetElement_;
    }}, {key: 'getCoordinateFromPixel', value: function getCoordinateFromPixel(t) {
      return wn(this.getCoordinateFromPixelInternal(t), this.getView().getProjection());
    }}, {key: 'getCoordinateFromPixelInternal', value: function getCoordinateFromPixelInternal(t) {
      var e=this.frameState_; return e?zt(e.pixelToCoordinateTransform, t.slice()):null;
    }}, {key: 'getControls', value: function getControls() {
      return this.controls;
    }}, {key: 'getOverlays', value: function getOverlays() {
      return this.overlays_;
    }}, {key: 'getOverlayById', value: function getOverlayById(t) {
      var e=this.overlayIdIndex_[t.toString()]; return void 0!==e?e:null;
    }}, {key: 'getInteractions', value: function getInteractions() {
      return this.interactions;
    }}, {key: 'getLayerGroup', value: function getLayerGroup() {
      return this.get(Go);
    }}, {key: 'setLayers', value: function setLayers(t) {
      var e=this.getLayerGroup(); if (t instanceof H) return void e.setLayers(t); var i=e.getLayers(); i.clear(), i.extend(t);
    }}, {key: 'getLayers', value: function getLayers() {
      return this.getLayerGroup().getLayers();
    }}, {key: 'getLoadingOrNotReady', value: function getLoadingOrNotReady() {
      var t=this.getLayerGroup().getLayerStatesArray(); for (var _e58=0, _i62=t.length; _e58<_i62; ++_e58) {
        var _i63=t[_e58]; if (!_i63.visible) continue; var _n60=_i63.layer.getRenderer(); if (_n60&&!_n60.ready) return !0; var _r45=_i63.layer.getSource(); if (_r45&&_r45.loading) return !0;
      } return !1;
    }}, {key: 'getPixelFromCoordinate', value: function getPixelFromCoordinate(t) {
      var e=Tn(t, this.getView().getProjection()); return this.getPixelFromCoordinateInternal(e);
    }}, {key: 'getPixelFromCoordinateInternal', value: function getPixelFromCoordinateInternal(t) {
      var e=this.frameState_; return e?zt(e.coordinateToPixelTransform, t.slice(0, 2)):null;
    }}, {key: 'getRenderer', value: function getRenderer() {
      return this.renderer_;
    }}, {key: 'getSize', value: function getSize() {
      return this.get(ko);
    }}, {key: 'getView', value: function getView() {
      return this.get(Bo);
    }}, {key: 'getViewport', value: function getViewport() {
      return this.viewport_;
    }}, {key: 'getOverlayContainer', value: function getOverlayContainer() {
      return this.overlayContainer_;
    }}, {key: 'getOverlayContainerStopEvent', value: function getOverlayContainerStopEvent() {
      return this.overlayContainerStopEvent_;
    }}, {key: 'getOwnerDocument', value: function getOwnerDocument() {
      var t=this.getTargetElement(); return t?t.ownerDocument:document;
    }}, {key: 'getTilePriority', value: function getTilePriority(t, e, i, n) {
      return Vo(this.frameState_, t, e, i, n);
    }}, {key: 'handleBrowserEvent', value: function handleBrowserEvent(t, e) {
      e=e||t.type; var i=new Co(e, this, t); this.handleMapBrowserEvent(i);
    }}, {key: 'handleMapBrowserEvent', value: function handleMapBrowserEvent(t) {
      if (!this.frameState_) return; var e=t.originalEvent; var i=e.type; if (i===Po||i===O||i===L) {
        var _t55=this.getOwnerDocument(); var _i64=this.viewport_.getRootNode?this.viewport_.getRootNode():_t55; var _n61=e.target; if (this.overlayContainerStopEvent_.contains(_n61)||!(_i64===_t55?_t55.documentElement:_i64).contains(_n61)) return;
      } if (t.frameState=this.frameState_, !1!==this.dispatchEvent(t)) {
        var _e59=this.getInteractions().getArray().slice(); for (var _i65=_e59.length-1; _i65>=0; _i65--) {
          var _n62=_e59[_i65]; if (_n62.getMap()!==this||!_n62.getActive()||!this.getTargetElement()) continue; if (!_n62.handleEvent(t)||t.propagationStopped) break;
        }
      }
    }}, {key: 'handlePostRender', value: function handlePostRender() {
      var t=this.frameState_; var e=this.tileQueue_; if (!e.isEmpty()) {
        var _i66=this.maxTilesLoading_; var _n63=_i66; if (t) {
          var _e60=t.viewHints; if (_e60[Wo]||_e60[Zo]) {
            var _e61=Date.now()-t.time>8; _i66=_e61?0:8, _n63=_e61?0:2;
          }
        }e.getTilesLoading()<_i66&&(e.reprioritize(), e.loadMoreTiles(_i66, _n63));
      }t&&this.renderer_&&!t.animate&&(!0===this.renderComplete_?(this.hasListener(Ds)&&this.renderer_.dispatchRenderEvent(Ds, t), !1===this.loaded_&&(this.loaded_=!0, this.dispatchEvent(new Eo(Do, this, t)))):!0===this.loaded_&&(this.loaded_=!1, this.dispatchEvent(new Eo(No, this, t)))); var i=this.postRenderFunctions_; for (var _e62=0, _n64=i.length; _e62<_n64; ++_e62)i[_e62](this, t); i.length=0;
    }}, {key: 'handleSizeChanged_', value: function handleSizeChanged_() {
      this.getView()&&!this.getView().getAnimating()&&this.getView().resolveConstraints(0), this.render();
    }}, {key: 'handleTargetChanged_', value: function handleTargetChanged_() {
      if (this.mapBrowserEventHandler_) {
        for (var _t56=0, _e63=this.targetChangeHandlerKeys_.length; _t56<_e63; ++_t56)G(this.targetChangeHandlerKeys_[_t56]); this.targetChangeHandlerKeys_=null, this.viewport_.removeEventListener(E, this.boundHandleBrowserEvent_), this.viewport_.removeEventListener(O, this.boundHandleBrowserEvent_), this.mapBrowserEventHandler_.dispose(), this.mapBrowserEventHandler_=null, wt(this.viewport_);
      } if (this.targetElement_) {
        this.resizeObserver_.unobserve(this.targetElement_); var _t57=this.targetElement_.getRootNode(); _t57 instanceof ShadowRoot&&this.resizeObserver_.unobserve(_t57.host);
      } var t=this.getTarget(); var e='string'==typeof t?document.getElementById(t):t; if (this.targetElement_=e, e) {
        e.appendChild(this.viewport_), this.renderer_||(this.renderer_=new xo(this)), this.mapBrowserEventHandler_=new Fo(this, this.moveTolerance_); for (var _t58 in Ro) this.mapBrowserEventHandler_.addEventListener(Ro[_t58], this.handleMapBrowserEvent.bind(this)); this.viewport_.addEventListener(E, this.boundHandleBrowserEvent_, !1), this.viewport_.addEventListener(O, this.boundHandleBrowserEvent_, !!mt&&{passive: !1}); var _t59=this.keyboardEventTarget_?this.keyboardEventTarget_:e; this.targetChangeHandlerKeys_=[N(_t59, L, this.handleBrowserEvent, this), N(_t59, F, this.handleBrowserEvent, this)]; var _i67=e.getRootNode(); _i67 instanceof ShadowRoot&&this.resizeObserver_.observe(_i67.host), this.resizeObserver_.observe(e);
      } else this.renderer_&&(clearTimeout(this.postRenderTimeoutHandle_), this.postRenderTimeoutHandle_=void 0, this.postRenderFunctions_.length=0, this.renderer_.dispose(), this.renderer_=null), this.animationDelayKey_&&(cancelAnimationFrame(this.animationDelayKey_), this.animationDelayKey_=void 0); this.updateSize();
    }}, {key: 'handleTileChange_', value: function handleTileChange_() {
      this.render();
    }}, {key: 'handleViewPropertyChanged_', value: function handleViewPropertyChanged_() {
      this.render();
    }}, {key: 'handleViewChanged_', value: function handleViewChanged_() {
      this.viewPropertyListenerKey_&&(G(this.viewPropertyListenerKey_), this.viewPropertyListenerKey_=null), this.viewChangeListenerKey_&&(G(this.viewChangeListenerKey_), this.viewChangeListenerKey_=null); var t=this.getView(); t&&(this.updateViewportSize_(), this.viewPropertyListenerKey_=N(t, s, this.handleViewPropertyChanged_, this), this.viewChangeListenerKey_=N(t, w, this.handleViewPropertyChanged_, this), t.resolveConstraints(0)), this.render();
    }}, {key: 'handleLayerGroupChanged_', value: function handleLayerGroupChanged_() {
      this.layerGroupPropertyListenerKeys_&&(this.layerGroupPropertyListenerKeys_.forEach(G), this.layerGroupPropertyListenerKeys_=null); var t=this.getLayerGroup(); t&&(this.handleLayerAdd_(new vo('addlayer', t)), this.layerGroupPropertyListenerKeys_=[N(t, s, this.render, this), N(t, w, this.render, this), N(t, 'addlayer', this.handleLayerAdd_, this), N(t, 'removelayer', this.handleLayerRemove_, this)]), this.render();
    }}, {key: 'isRendered', value: function isRendered() {
      return !!this.frameState_;
    }}, {key: 'animationDelay_', value: function animationDelay_() {
      this.animationDelayKey_=void 0, this.renderFrame_(Date.now());
    }}, {key: 'renderSync', value: function renderSync() {
      this.animationDelayKey_&&cancelAnimationFrame(this.animationDelayKey_), this.animationDelay_();
    }}, {key: 'redrawText', value: function redrawText() {
      var t=this.getLayerGroup().getLayerStatesArray(); for (var _e64=0, _i68=t.length; _e64<_i68; ++_e64) {
        var _i69=t[_e64].layer; _i69.hasRenderer()&&_i69.getRenderer().handleFontsChanged();
      }
    }}, {key: 'render', value: function render() {
      this.renderer_&&void 0===this.animationDelayKey_&&(this.animationDelayKey_=requestAnimationFrame(this.animationDelay_));
    }}, {key: 'removeControl', value: function removeControl(t) {
      return this.getControls().remove(t);
    }}, {key: 'removeInteraction', value: function removeInteraction(t) {
      return this.getInteractions().remove(t);
    }}, {key: 'removeLayer', value: function removeLayer(t) {
      return this.getLayerGroup().getLayers().remove(t);
    }}, {key: 'handleLayerRemove_', value: function handleLayerRemove_(t) {
      hl(t.layer);
    }}, {key: 'removeOverlay', value: function removeOverlay(t) {
      return this.getOverlays().remove(t);
    }}, {key: 'renderFrame_', value: function renderFrame_(t) {
      var _this55=this; var e=this.getSize(); var i=this.getView(); var n=this.frameState_; var r=null; if (void 0!==e&&ol(e)&&i&&i.isDef()) {
        var _n65=i.getHints(this.frameState_?this.frameState_.viewHints:void 0); var _s43=i.getState(); if (r={animate: !1, coordinateToPixelTransform: this.coordinateToPixelTransform_, declutterTree: null, extent: Le(_s43.center, _s43.resolution, _s43.rotation, e), index: this.frameIndex_++, layerIndex: 0, layerStatesArray: this.getLayerGroup().getLayerStatesArray(), pixelRatio: this.pixelRatio_, pixelToCoordinateTransform: this.pixelToCoordinateTransform_, postRenderFunctions: [], size: e, tileQueue: this.tileQueue_, time: t, usedTiles: {}, viewState: _s43, viewHints: _n65, wantedTiles: {}, mapId: X(this), renderTargets: {}}, _s43.nextCenter&&_s43.nextResolution) {
          var _t60=isNaN(_s43.nextRotation)?_s43.rotation:_s43.nextRotation; r.nextExtent=Le(_s43.nextCenter, _s43.nextResolution, _t60, e);
        }
      } if (this.frameState_=r, this.renderer_.renderFrame(r), r) {
        if (r.animate&&this.render(), Array.prototype.push.apply(this.postRenderFunctions_, r.postRenderFunctions), n) {
          (!this.previousExtent_||!ke(this.previousExtent_)&&!me(r.extent, this.previousExtent_))&&(this.dispatchEvent(new Eo(Ao, this, n)), this.previousExtent_=ge(this.previousExtent_));
        } this.previousExtent_&&!r.viewHints[Wo]&&!r.viewHints[Zo]&&!me(r.extent, this.previousExtent_)&&(this.dispatchEvent(new Eo(Oo, this, r)), se(r.extent, this.previousExtent_));
      } this.dispatchEvent(new Eo(Mo, this, r)), this.renderComplete_=this.hasListener(No)||this.hasListener(Do)||this.hasListener(Ds)?!this.tileQueue_.getTilesLoading()&&!this.tileQueue_.getCount()&&!this.getLoadingOrNotReady():void 0, this.postRenderTimeoutHandle_||(this.postRenderTimeoutHandle_=setTimeout(function() {
        _this55.postRenderTimeoutHandle_=void 0, _this55.handlePostRender();
      }, 0));
    }}, {key: 'setLayerGroup', value: function setLayerGroup(t) {
      var e=this.getLayerGroup(); e&&this.handleLayerRemove_(new vo('removelayer', e)), this.set(Go, t);
    }}, {key: 'setSize', value: function setSize(t) {
      this.set(ko, t);
    }}, {key: 'setTarget', value: function setTarget(t) {
      this.set(jo, t);
    }}, {key: 'setView', value: function setView(t) {
      if (!t||t instanceof da) return void this.set(Bo, t); this.set(Bo, new da()); var e=this; t.then(function(t) {
        e.setView(new da(t));
      });
    }}, {key: 'updateSize', value: function updateSize() {
      var t=this.getTargetElement(); var e; if (t) {
        var _i70=getComputedStyle(t); var _n66=t.offsetWidth-parseFloat(_i70.borderLeftWidth)-parseFloat(_i70.paddingLeft)-parseFloat(_i70.paddingRight)-parseFloat(_i70.borderRightWidth); var _r46=t.offsetHeight-parseFloat(_i70.borderTopWidth)-parseFloat(_i70.paddingTop)-parseFloat(_i70.paddingBottom)-parseFloat(_i70.borderBottomWidth); isNaN(_n66)||isNaN(_r46)||(e=[_n66, _r46], !ol(e)&&(t.offsetWidth||t.offsetHeight||t.getClientRects().length)&&Ji('No map visible because the map container\'s width or height are 0.'));
      } var i=this.getSize(); !e||i&&d(e, i)||(this.setSize(e), this.updateViewportSize_());
    }}, {key: 'updateViewportSize_', value: function updateViewportSize_() {
      var t=this.getView(); if (t) {
        var _e65; var _i71=getComputedStyle(this.viewport_); _i71.width&&_i71.height&&(_e65=[parseInt(_i71.width, 10), parseInt(_i71.height, 10)]), t.setViewportSize(_e65);
      }
    }}]); return ul;
  }(W); var dl='element'; var gl='map'; var fl='offset'; var pl='position'; var ml='positioning'; var _l=/* #__PURE__*/function(_W10) {
    _inherits(_l, _W10); var _super55=_createSuper(_l); function _l(t) {
      var _this56; _classCallCheck(this, _l); _this56=_super55.call(this), _this56.on, _this56.once, _this56.un, _this56.options=t, _this56.id=t.id, _this56.insertFirst=void 0===t.insertFirst||t.insertFirst, _this56.stopEvent=void 0===t.stopEvent||t.stopEvent, _this56.element=document.createElement('div'), _this56.element.className=void 0!==t.className?t.className:'ol-overlay-container ol-selectable', _this56.element.style.position='absolute', _this56.element.style.pointerEvents='auto', _this56.autoPan=!0===t.autoPan?{}:t.autoPan||void 0, _this56.rendered={transform_: '', visible: !0}, _this56.mapPostrenderListenerKey=null, _this56.addChangeListener(dl, _this56.handleElementChanged), _this56.addChangeListener(gl, _this56.handleMapChanged), _this56.addChangeListener(fl, _this56.handleOffsetChanged), _this56.addChangeListener(pl, _this56.handlePositionChanged), _this56.addChangeListener(ml, _this56.handlePositioningChanged), void 0!==t.element&&_this56.setElement(t.element), _this56.setOffset(void 0!==t.offset?t.offset:[0, 0]), _this56.setPositioning(t.positioning||'top-left'), void 0!==t.position&&_this56.setPosition(t.position); return _this56;
    }_createClass(_l, [{key: 'getElement', value: function getElement() {
      return this.get(dl);
    }}, {key: 'getId', value: function getId() {
      return this.id;
    }}, {key: 'getMap', value: function getMap() {
      return this.get(gl)||null;
    }}, {key: 'getOffset', value: function getOffset() {
      return this.get(fl);
    }}, {key: 'getPosition', value: function getPosition() {
      return this.get(pl);
    }}, {key: 'getPositioning', value: function getPositioning() {
      return this.get(ml);
    }}, {key: 'handleElementChanged', value: function handleElementChanged() {
      Tt(this.element); var t=this.getElement(); t&&this.element.appendChild(t);
    }}, {key: 'handleMapChanged', value: function handleMapChanged() {
      this.mapPostrenderListenerKey&&(wt(this.element), G(this.mapPostrenderListenerKey), this.mapPostrenderListenerKey=null); var t=this.getMap(); if (t) {
        this.mapPostrenderListenerKey=N(t, Mo, this.render, this), this.updatePixelPosition(); var _e66=this.stopEvent?t.getOverlayContainerStopEvent():t.getOverlayContainer(); this.insertFirst?_e66.insertBefore(this.element, _e66.childNodes[0]||null):_e66.appendChild(this.element), this.performAutoPan();
      }
    }}, {key: 'render', value: function render() {
      this.updatePixelPosition();
    }}, {key: 'handleOffsetChanged', value: function handleOffsetChanged() {
      this.updatePixelPosition();
    }}, {key: 'handlePositionChanged', value: function handlePositionChanged() {
      this.updatePixelPosition(), this.performAutoPan();
    }}, {key: 'handlePositioningChanged', value: function handlePositioningChanged() {
      this.updatePixelPosition();
    }}, {key: 'setElement', value: function setElement(t) {
      this.set(dl, t);
    }}, {key: 'setMap', value: function setMap(t) {
      this.set(gl, t);
    }}, {key: 'setOffset', value: function setOffset(t) {
      this.set(fl, t);
    }}, {key: 'setPosition', value: function setPosition(t) {
      this.set(pl, t);
    }}, {key: 'performAutoPan', value: function performAutoPan() {
      this.autoPan&&this.panIntoView(this.autoPan);
    }}, {key: 'panIntoView', value: function panIntoView(t) {
      var e=this.getMap(); if (!e||!e.getTargetElement()||!this.get(pl)) return; var i=this.getRect(e.getTargetElement(), e.getSize()); var n=this.getElement(); var r=this.getRect(n, [xt(n), vt(n)]); var s=void 0===(t=t||{}).margin?20:t.margin; if (!le(i, r)) {
        var _n67=r[0]-i[0]; var _o57=i[2]-r[2]; var _a31=r[1]-i[1]; var _l15=i[3]-r[3]; var _h14=[0, 0]; if (_n67<0?_h14[0]=_n67-s:_o57<0&&(_h14[0]=Math.abs(_o57)+s), _a31<0?_h14[1]=_a31-s:_l15<0&&(_h14[1]=Math.abs(_l15)+s), 0!==_h14[0]||0!==_h14[1]) {
          var _i72=e.getView().getCenterInternal(); var _n68=e.getPixelFromCoordinateInternal(_i72); if (!_n68) return; var _r47=[_n68[0]+_h14[0], _n68[1]+_h14[1]]; var _s44=t.animation||{}; e.getView().animateInternal({center: e.getCoordinateFromPixelInternal(_r47), duration: _s44.duration, easing: _s44.easing});
        }
      }
    }}, {key: 'getRect', value: function getRect(t, e) {
      var i=t.getBoundingClientRect(); var n=i.left+window.pageXOffset; var r=i.top+window.pageYOffset; return [n, r, n+e[0], r+e[1]];
    }}, {key: 'setPositioning', value: function setPositioning(t) {
      this.set(ml, t);
    }}, {key: 'setVisible', value: function setVisible(t) {
      this.rendered.visible!==t&&(this.element.style.display=t?'':'none', this.rendered.visible=t);
    }}, {key: 'updatePixelPosition', value: function updatePixelPosition() {
      var t=this.getMap(); var e=this.getPosition(); if (!t||!t.isRendered()||!e) return void this.setVisible(!1); var i=t.getPixelFromCoordinate(e); var n=t.getSize(); this.updateRenderedPosition(i, n);
    }}, {key: 'updateRenderedPosition', value: function updateRenderedPosition(t, e) {
      var i=this.element.style; var n=this.getOffset(); var r=this.getPositioning(); this.setVisible(!0); var s='0%'; var o='0%'; 'bottom-right'==r||'center-right'==r||'top-right'==r?s='-100%':'bottom-center'!=r&&'center-center'!=r&&'top-center'!=r||(s='-50%'), 'bottom-left'==r||'bottom-center'==r||'bottom-right'==r?o='-100%':'center-left'!=r&&'center-center'!=r&&'center-right'!=r||(o='-50%'); var a='translate('.concat(s, ', ').concat(o, ') translate(').concat(Math.round(t[0]+n[0])+'px', ', ').concat(Math.round(t[1]+n[1])+'px', ')'); this.rendered.transform_!=a&&(this.rendered.transform_=a, i.transform=a);
    }}, {key: 'getOptions', value: function getOptions() {
      return this.options;
    }}]); return _l;
  }(W); var yl=/* #__PURE__*/function() {
    function yl(t) {
      _classCallCheck(this, yl); this.highWaterMark=void 0!==t?t:2048, this.count_=0, this.entries_={}, this.oldest_=null, this.newest_=null;
    }_createClass(yl, [{key: 'canExpireCache', value: function canExpireCache() {
      return this.highWaterMark>0&&this.getCount()>this.highWaterMark;
    }}, {key: 'expireCache', value: function expireCache(t) {
      for (;this.canExpireCache();) this.pop();
    }}, {key: 'clear', value: function clear() {
      this.count_=0, this.entries_={}, this.oldest_=null, this.newest_=null;
    }}, {key: 'containsKey', value: function containsKey(t) {
      return this.entries_.hasOwnProperty(t);
    }}, {key: 'forEach', value: function forEach(t) {
      var e=this.oldest_; for (;e;)t(e.value_, e.key_, this), e=e.newer;
    }}, {key: 'get', value: function get(t, e) {
      var i=this.entries_[t]; return Ft(void 0!==i, 15), i===this.newest_||(i===this.oldest_?(this.oldest_=this.oldest_.newer, this.oldest_.older=null):(i.newer.older=i.older, i.older.newer=i.newer), i.newer=null, i.older=this.newest_, this.newest_.newer=i, this.newest_=i), i.value_;
    }}, {key: 'remove', value: function remove(t) {
      var e=this.entries_[t]; return Ft(void 0!==e, 15), e===this.newest_?(this.newest_=e.older, this.newest_&&(this.newest_.newer=null)):e===this.oldest_?(this.oldest_=e.newer, this.oldest_&&(this.oldest_.older=null)):(e.newer.older=e.older, e.older.newer=e.newer), delete this.entries_[t], --this.count_, e.value_;
    }}, {key: 'getCount', value: function getCount() {
      return this.count_;
    }}, {key: 'getKeys', value: function getKeys() {
      var t=new Array(this.count_); var e; var i=0; for (e=this.newest_; e; e=e.older)t[i++]=e.key_; return t;
    }}, {key: 'getValues', value: function getValues() {
      var t=new Array(this.count_); var e; var i=0; for (e=this.newest_; e; e=e.older)t[i++]=e.value_; return t;
    }}, {key: 'peekLast', value: function peekLast() {
      return this.oldest_.value_;
    }}, {key: 'peekLastKey', value: function peekLastKey() {
      return this.oldest_.key_;
    }}, {key: 'peekFirstKey', value: function peekFirstKey() {
      return this.newest_.key_;
    }}, {key: 'peek', value: function peek(t) {
      if (this.containsKey(t)) return this.entries_[t].value_;
    }}, {key: 'pop', value: function pop() {
      var t=this.oldest_; return delete this.entries_[t.key_], t.newer&&(t.newer.older=null), this.oldest_=t.newer, this.oldest_||(this.newest_=null), --this.count_, t.value_;
    }}, {key: 'replace', value: function replace(t, e) {
      this.get(t), this.entries_[t].value_=e;
    }}, {key: 'set', value: function set(t, e) {
      Ft(!(t in this.entries_), 16); var i={key_: t, newer: null, older: this.newest_, value_: e}; this.newest_?this.newest_.newer=i:this.oldest_=i, this.newest_=i, this.entries_[t]=i, ++this.count_;
    }}, {key: 'setSize', value: function setSize(t) {
      this.highWaterMark=t;
    }}]); return yl;
  }(); function xl(t, e, i, n) {
    return void 0!==n?(n[0]=t, n[1]=e, n[2]=i, n):[t, e, i];
  } function vl(t, e, i) {
    return t+'/'+e+'/'+i;
  } function Sl(t) {
    return vl(t[0], t[1], t[2]);
  } function wl(t) {
    var _t$substring$split$ma=t.substring(t.lastIndexOf('/')+1, t.length).split(',').map(Number); var _t$substring$split$ma2=_slicedToArray(_t$substring$split$ma, 3); var e=_t$substring$split$ma2[0]; var i=_t$substring$split$ma2[1]; var n=_t$substring$split$ma2[2]; return vl(e, i, n);
  } function Tl(t) {
    return t.split('/').map(Number);
  } function El(t) {
    return (t[1]<<t[0])+t[2];
  } function Cl(t, e) {
    var i=t[0]; var n=t[1]; var r=t[2]; if (e.getMinZoom()>i||i>e.getMaxZoom()) return !1; var s=e.getFullTileRange(i); return !s||s.containsXY(n, r);
  } var Rl=/* #__PURE__*/function(_yl) {
    _inherits(Rl, _yl); var _super56=_createSuper(Rl); function Rl() {
      _classCallCheck(this, Rl); return _super56.apply(this, arguments);
    }_createClass(Rl, [{key: 'clear', value: function clear() {
      for (;this.getCount()>0;) this.pop().release(); _get(_getPrototypeOf(Rl.prototype), 'clear', this).call(this);
    }}, {key: 'expireCache', value: function expireCache(t) {
      for (;this.canExpireCache();) {
        if (this.peekLast().getKey()in t) break; this.pop().release();
      }
    }}, {key: 'pruneExceptNewestZ', value: function pruneExceptNewestZ() {
      var _this57=this; if (0===this.getCount()) return; var t=Tl(this.peekFirstKey())[0]; this.forEach(function(e) {
        e.tileCoord[0]!==t&&(_this57.remove(Sl(e.tileCoord)), e.release());
      });
    }}]); return Rl;
  }(yl); var bl=/* #__PURE__*/function() {
    function bl(t, e, i, n) {
      _classCallCheck(this, bl); this.minX=t, this.maxX=e, this.minY=i, this.maxY=n;
    }_createClass(bl, [{key: 'contains', value: function contains(t) {
      return this.containsXY(t[1], t[2]);
    }}, {key: 'containsTileRange', value: function containsTileRange(t) {
      return this.minX<=t.minX&&t.maxX<=this.maxX&&this.minY<=t.minY&&t.maxY<=this.maxY;
    }}, {key: 'containsXY', value: function containsXY(t, e) {
      return this.minX<=t&&t<=this.maxX&&this.minY<=e&&e<=this.maxY;
    }}, {key: 'equals', value: function equals(t) {
      return this.minX==t.minX&&this.minY==t.minY&&this.maxX==t.maxX&&this.maxY==t.maxY;
    }}, {key: 'extend', value: function extend(t) {
      t.minX<this.minX&&(this.minX=t.minX), t.maxX>this.maxX&&(this.maxX=t.maxX), t.minY<this.minY&&(this.minY=t.minY), t.maxY>this.maxY&&(this.maxY=t.maxY);
    }}, {key: 'getHeight', value: function getHeight() {
      return this.maxY-this.minY+1;
    }}, {key: 'getSize', value: function getSize() {
      return [this.getWidth(), this.getHeight()];
    }}, {key: 'getWidth', value: function getWidth() {
      return this.maxX-this.minX+1;
    }}, {key: 'intersects', value: function intersects(t) {
      return this.minX<=t.maxX&&this.maxX>=t.minX&&this.minY<=t.maxY&&this.maxY>=t.minY;
    }}]); return bl;
  }(); function Pl(t, e, i, n, r) {
    return void 0!==r?(r.minX=t, r.maxX=e, r.minY=i, r.maxY=n, r):new bl(t, e, i, n);
  } var Il=bl; var Ll=[]; var Fl=/* #__PURE__*/function(_ot3) {
    _inherits(Fl, _ot3); var _super57=_createSuper(Fl); function Fl(t, e, i, n) {
      var _this58; _classCallCheck(this, Fl); _this58=_super57.call(this, t, e, {transition: 0}), _this58.context_={}, _this58.executorGroups={}, _this58.declutterExecutorGroups={}, _this58.loadingSourceTiles=0, _this58.hitDetectionImageData={}, _this58.replayState_={}, _this58.sourceTiles=[], _this58.errorTileKeys={}, _this58.wantedResolution, _this58.getSourceTiles=n.bind(void 0, _assertThisInitialized(_this58)), _this58.wrappedTileCoord=i; return _this58;
    }_createClass(Fl, [{key: 'getContext', value: function getContext(t) {
      var e=X(t); return e in this.context_||(this.context_[e]=_t(1, 1, Ll)), this.context_[e];
    }}, {key: 'hasContext', value: function hasContext(t) {
      return X(t)in this.context_;
    }}, {key: 'getImage', value: function getImage(t) {
      return this.hasContext(t)?this.getContext(t).canvas:null;
    }}, {key: 'getReplayState', value: function getReplayState(t) {
      var e=X(t); return e in this.replayState_||(this.replayState_[e]={dirty: !1, renderedRenderOrder: null, renderedResolution: NaN, renderedRevision: -1, renderedTileResolution: NaN, renderedTileRevision: -1, renderedTileZ: -1}), this.replayState_[e];
    }}, {key: 'load', value: function load() {
      this.getSourceTiles();
    }}, {key: 'release', value: function release() {
      for (var _t61 in this.context_) {
        var _e67=this.context_[_t61]; yt(_e67), Ll.push(_e67.canvas), delete this.context_[_t61];
      }_get(_getPrototypeOf(Fl.prototype), 'release', this).call(this);
    }}]); return Fl;
  }(ot); var Ml=/* #__PURE__*/function(_ot4) {
    _inherits(Ml, _ot4); var _super58=_createSuper(Ml); function Ml(t, e, i, n, r, s) {
      var _this59; _classCallCheck(this, Ml); _this59=_super58.call(this, t, e, s), _this59.extent=null, _this59.format_=n, _this59.features_=null, _this59.loader_, _this59.projection=null, _this59.resolution, _this59.tileLoadFunction_=r, _this59.url_=i, _this59.key=i; return _this59;
    }_createClass(Ml, [{key: 'getFormat', value: function getFormat() {
      return this.format_;
    }}, {key: 'getFeatures', value: function getFeatures() {
      return this.features_;
    }}, {key: 'load', value: function load() {
      this.state==$&&(this.setState(J), this.tileLoadFunction_(this, this.url_), this.loader_&&this.loader_(this.extent, this.resolution, this.projection));
    }}, {key: 'onLoad', value: function onLoad(t, e) {
      this.setFeatures(t);
    }}, {key: 'onError', value: function onError() {
      this.setState(tt);
    }}, {key: 'setFeatures', value: function setFeatures(t) {
      this.features_=t, this.setState(Q);
    }}, {key: 'setLoader', value: function setLoader(t) {
      this.loader_=t;
    }}]); return Ml;
  }(ot); function Al(t) {
    return Array.isArray(t)?ps(t):t;
  } var Ol; var Nl=!1; function Dl(t, e, i, n, r, s, o) {
    var a=new XMLHttpRequest(); a.open('GET', 'function'==typeof t?t(i, n, r):t, !0), 'arraybuffer'==e.getType()&&(a.responseType='arraybuffer'), a.withCredentials=Nl, a.onload=function(t) {
      if (!a.status||a.status>=200&&a.status<300) {
        var _t62=e.getType(); var _n69; 'json'==_t62||'text'==_t62?_n69=a.responseText:'xml'==_t62?(_n69=a.responseXML, _n69||(_n69=new DOMParser().parseFromString(a.responseText, 'application/xml'))):'arraybuffer'==_t62&&(_n69=a.response), _n69?s(e.readFeatures(_n69, {extent: i, featureProjection: r}), e.readProjection(_n69)):o();
      } else o();
    }, a.onerror=o, a.send();
  } function Gl(t, e) {
    return function(i, n, r, s, o) {
      var a=this; Dl(t, e, i, n, r, function(t, e) {
        a.addFeatures(t), void 0!==s&&s(t);
      }, o||m);
    };
  } function kl(t, e) {
    return [[-1/0, -1/0, 1/0, 1/0]];
  } function jl(t, e, i, n) {
    var r=document.createElement('script'); var s='olc_'+X(e); function o() {
      delete window[s], r.parentNode.removeChild(r);
    }r.async=!0, r.src=t+(t.includes('?')?'&':'?')+(n||'callback')+'='+s; var a=setTimeout(function() {
      o(), i&&i();
    }, 1e4); window[s]=function(t) {
      clearTimeout(a), o(), e(t);
    }, document.head.appendChild(r);
  } var Bl=/* #__PURE__*/function(_Error2) {
    _inherits(Bl, _Error2); var _super59=_createSuper(Bl); function Bl(t) {
      var _this60; _classCallCheck(this, Bl); _this60=_super59.call(this, 'Unexpected response status: '+t.status), _this60.name='ResponseError', _this60.response=t; return _this60;
    } return _createClass(Bl);
  }(/* #__PURE__*/_wrapNativeSuper(Error)); var zl=/* #__PURE__*/function(_Error3) {
    _inherits(zl, _Error3); var _super60=_createSuper(zl); function zl(t) {
      var _this61; _classCallCheck(this, zl); _this61=_super60.call(this, 'Failed to issue request'), _this61.name='ClientError', _this61.client=t; return _this61;
    } return _createClass(zl);
  }(/* #__PURE__*/_wrapNativeSuper(Error)); function Ul(t) {
    return new Promise(function(e, i) {
      var n=new XMLHttpRequest(); n.addEventListener('load', function(t) {
        var n=t.target; if (!n.status||n.status>=200&&n.status<300) {
          var _t63; try {
            _t63=JSON.parse(n.responseText);
          } catch (t) {
            var _e68='Error parsing response text as JSON: '+t.message; return void i(new Error(_e68));
          }e(_t63);
        } else i(new Bl(n));
      }), n.addEventListener('error', function(t) {
        i(new zl(t.target));
      }), n.open('GET', t), n.setRequestHeader('Accept', 'application/json'), n.send();
    });
  } function Xl(t, e) {
    return e.includes('://')?e:new URL(e, t).href;
  } var Vl=/* #__PURE__*/function() {
    function Vl() {
      _classCallCheck(this, Vl);
    }_createClass(Vl, [{key: 'drawCustom', value: function drawCustom(t, e, i, n) {}}, {key: 'drawGeometry', value: function drawGeometry(t) {}}, {key: 'setStyle', value: function setStyle(t) {}}, {key: 'drawCircle', value: function drawCircle(t, e) {}}, {key: 'drawFeature', value: function drawFeature(t, e) {}}, {key: 'drawGeometryCollection', value: function drawGeometryCollection(t, e) {}}, {key: 'drawLineString', value: function drawLineString(t, e) {}}, {key: 'drawMultiLineString', value: function drawMultiLineString(t, e) {}}, {key: 'drawMultiPoint', value: function drawMultiPoint(t, e) {}}, {key: 'drawMultiPolygon', value: function drawMultiPolygon(t, e) {}}, {key: 'drawPoint', value: function drawPoint(t, e) {}}, {key: 'drawPolygon', value: function drawPolygon(t, e) {}}, {key: 'drawText', value: function drawText(t, e) {}}, {key: 'setFillStrokeStyle', value: function setFillStrokeStyle(t, e) {}}, {key: 'setImageStyle', value: function setImageStyle(t, e) {}}, {key: 'setTextStyle', value: function setTextStyle(t, e) {}}]); return Vl;
  }(); var Wl=/* #__PURE__*/function(_Vl) {
    _inherits(Wl, _Vl); var _super61=_createSuper(Wl); function Wl(t, e, i, n, r, s, o) {
      var _this62; _classCallCheck(this, Wl); _this62=_super61.call(this), _this62.context_=t, _this62.pixelRatio_=e, _this62.extent_=i, _this62.transform_=n, _this62.transformRotation_=n?Ci(Math.atan2(n[1], n[0]), 10):0, _this62.viewRotation_=r, _this62.squaredTolerance_=s, _this62.userTransform_=o, _this62.contextFillState_=null, _this62.contextStrokeState_=null, _this62.contextTextState_=null, _this62.fillState_=null, _this62.strokeState_=null, _this62.image_=null, _this62.imageAnchorX_=0, _this62.imageAnchorY_=0, _this62.imageHeight_=0, _this62.imageOpacity_=0, _this62.imageOriginX_=0, _this62.imageOriginY_=0, _this62.imageRotateWithView_=!1, _this62.imageRotation_=0, _this62.imageScale_=[0, 0], _this62.imageWidth_=0, _this62.text_='', _this62.textOffsetX_=0, _this62.textOffsetY_=0, _this62.textRotateWithView_=!1, _this62.textRotation_=0, _this62.textScale_=[0, 0], _this62.textFillState_=null, _this62.textStrokeState_=null, _this62.textState_=null, _this62.pixelCoordinates_=[], _this62.tmpLocalTransform_=[1, 0, 0, 1, 0, 0]; return _this62;
    }_createClass(Wl, [{key: 'drawImages_', value: function drawImages_(t, e, i, n) {
      if (!this.image_) return; var r=Ln(t, e, i, n, this.transform_, this.pixelCoordinates_); var s=this.context_; var o=this.tmpLocalTransform_; var a=s.globalAlpha; 1!=this.imageOpacity_&&(s.globalAlpha=a*this.imageOpacity_); var l=this.imageRotation_; 0===this.transformRotation_&&(l-=this.viewRotation_), this.imageRotateWithView_&&(l+=this.viewRotation_); for (var _t64=0, _e69=r.length; _t64<_e69; _t64+=2) {
        var _e70=r[_t64]-this.imageAnchorX_; var _i73=r[_t64+1]-this.imageAnchorY_; if (0!==l||1!=this.imageScale_[0]||1!=this.imageScale_[1]) {
          var _t65=_e70+this.imageAnchorX_; var _n70=_i73+this.imageAnchorY_; Zt(o, _t65, _n70, 1, 1, l, -_t65, -_n70), s.setTransform.apply(s, o), s.translate(_t65, _n70), s.scale(this.imageScale_[0], this.imageScale_[1]), s.drawImage(this.image_, this.imageOriginX_, this.imageOriginY_, this.imageWidth_, this.imageHeight_, -this.imageAnchorX_, -this.imageAnchorY_, this.imageWidth_, this.imageHeight_), s.setTransform(1, 0, 0, 1, 0, 0);
        } else s.drawImage(this.image_, this.imageOriginX_, this.imageOriginY_, this.imageWidth_, this.imageHeight_, _e70, _i73, this.imageWidth_, this.imageHeight_);
      }1!=this.imageOpacity_&&(s.globalAlpha=a);
    }}, {key: 'drawText_', value: function drawText_(t, e, i, n) {
      if (!this.textState_||''===this.text_) return; this.textFillState_&&this.setContextFillState_(this.textFillState_), this.textStrokeState_&&this.setContextStrokeState_(this.textStrokeState_), this.setContextTextState_(this.textState_); var r=Ln(t, e, i, n, this.transform_, this.pixelCoordinates_); var s=this.context_; var o=this.textRotation_; for (0===this.transformRotation_&&(o-=this.viewRotation_), this.textRotateWithView_&&(o+=this.viewRotation_); e<i; e+=n) {
        var _t66=r[e]+this.textOffsetX_; var _i74=r[e+1]+this.textOffsetY_; 0!==o||1!=this.textScale_[0]||1!=this.textScale_[1]?(s.translate(_t66-this.textOffsetX_, _i74-this.textOffsetY_), s.rotate(o), s.translate(this.textOffsetX_, this.textOffsetY_), s.scale(this.textScale_[0], this.textScale_[1]), this.textStrokeState_&&s.strokeText(this.text_, 0, 0), this.textFillState_&&s.fillText(this.text_, 0, 0), s.setTransform(1, 0, 0, 1, 0, 0)):(this.textStrokeState_&&s.strokeText(this.text_, _t66, _i74), this.textFillState_&&s.fillText(this.text_, _t66, _i74));
      }
    }}, {key: 'moveToLineTo_', value: function moveToLineTo_(t, e, i, n, r) {
      var s=this.context_; var o=Ln(t, e, i, n, this.transform_, this.pixelCoordinates_); s.moveTo(o[0], o[1]); var a=o.length; r&&(a-=2); for (var _t67=2; _t67<a; _t67+=2)s.lineTo(o[_t67], o[_t67+1]); return r&&s.closePath(), i;
    }}, {key: 'drawRings_', value: function drawRings_(t, e, i, n) {
      for (var _r48=0, _s45=i.length; _r48<_s45; ++_r48)e=this.moveToLineTo_(t, e, i[_r48], n, !0); return e;
    }}, {key: 'drawCircle', value: function drawCircle(t) {
      if (Ge(this.extent_, t.getExtent())) {
        if (this.fillState_||this.strokeState_) {
          this.fillState_&&this.setContextFillState_(this.fillState_), this.strokeState_&&this.setContextStrokeState_(this.strokeState_); var _e71=Gn(t, this.transform_, this.pixelCoordinates_); var _i75=_e71[2]-_e71[0]; var _n71=_e71[3]-_e71[1]; var _r49=Math.sqrt(_i75*_i75+_n71*_n71); var _s46=this.context_; _s46.beginPath(), _s46.arc(_e71[0], _e71[1], _r49, 0, 2*Math.PI), this.fillState_&&_s46.fill(), this.strokeState_&&_s46.stroke();
        }''!==this.text_&&this.drawText_(t.getCenter(), 0, 2, 2);
      }
    }}, {key: 'setStyle', value: function setStyle(t) {
      this.setFillStrokeStyle(t.getFill(), t.getStroke()), this.setImageStyle(t.getImage()), this.setTextStyle(t.getText());
    }}, {key: 'setTransform', value: function setTransform(t) {
      this.transform_=t;
    }}, {key: 'drawGeometry', value: function drawGeometry(t) {
      switch (t.getType()) {
        case 'Point': this.drawPoint(t); break; case 'LineString': this.drawLineString(t); break; case 'Polygon': this.drawPolygon(t); break; case 'MultiPoint': this.drawMultiPoint(t); break; case 'MultiLineString': this.drawMultiLineString(t); break; case 'MultiPolygon': this.drawMultiPolygon(t); break; case 'GeometryCollection': this.drawGeometryCollection(t); break; case 'Circle': this.drawCircle(t);
      }
    }}, {key: 'drawFeature', value: function drawFeature(t, e) {
      var i=e.getGeometryFunction()(t); i&&Ge(this.extent_, i.getExtent())&&(this.setStyle(e), this.drawGeometry(i));
    }}, {key: 'drawGeometryCollection', value: function drawGeometryCollection(t) {
      var e=t.getGeometriesArray(); for (var _t68=0, _i76=e.length; _t68<_i76; ++_t68) this.drawGeometry(e[_t68]);
    }}, {key: 'drawPoint', value: function drawPoint(t) {
      this.squaredTolerance_&&(t=t.simplifyTransformed(this.squaredTolerance_, this.userTransform_)); var e=t.getFlatCoordinates(); var i=t.getStride(); this.image_&&this.drawImages_(e, 0, e.length, i), ''!==this.text_&&this.drawText_(e, 0, e.length, i);
    }}, {key: 'drawMultiPoint', value: function drawMultiPoint(t) {
      this.squaredTolerance_&&(t=t.simplifyTransformed(this.squaredTolerance_, this.userTransform_)); var e=t.getFlatCoordinates(); var i=t.getStride(); this.image_&&this.drawImages_(e, 0, e.length, i), ''!==this.text_&&this.drawText_(e, 0, e.length, i);
    }}, {key: 'drawLineString', value: function drawLineString(t) {
      if (this.squaredTolerance_&&(t=t.simplifyTransformed(this.squaredTolerance_, this.userTransform_)), Ge(this.extent_, t.getExtent())) {
        if (this.strokeState_) {
          this.setContextStrokeState_(this.strokeState_); var _e72=this.context_; var _i77=t.getFlatCoordinates(); _e72.beginPath(), this.moveToLineTo_(_i77, 0, _i77.length, t.getStride(), !1), _e72.stroke();
        } if (''!==this.text_) {
          var _e73=t.getFlatMidpoint(); this.drawText_(_e73, 0, 2, 2);
        }
      }
    }}, {key: 'drawMultiLineString', value: function drawMultiLineString(t) {
      this.squaredTolerance_&&(t=t.simplifyTransformed(this.squaredTolerance_, this.userTransform_)); var e=t.getExtent(); if (Ge(this.extent_, e)) {
        if (this.strokeState_) {
          this.setContextStrokeState_(this.strokeState_); var _e74=this.context_; var _i78=t.getFlatCoordinates(); var _n72=0; var _r50=t.getEnds(); var _s47=t.getStride(); _e74.beginPath(); for (var _t69=0, _e75=_r50.length; _t69<_e75; ++_t69)_n72=this.moveToLineTo_(_i78, _n72, _r50[_t69], _s47, !1); _e74.stroke();
        } if (''!==this.text_) {
          var _e76=t.getFlatMidpoints(); this.drawText_(_e76, 0, _e76.length, 2);
        }
      }
    }}, {key: 'drawPolygon', value: function drawPolygon(t) {
      if (this.squaredTolerance_&&(t=t.simplifyTransformed(this.squaredTolerance_, this.userTransform_)), Ge(this.extent_, t.getExtent())) {
        if (this.strokeState_||this.fillState_) {
          this.fillState_&&this.setContextFillState_(this.fillState_), this.strokeState_&&this.setContextStrokeState_(this.strokeState_); var _e77=this.context_; _e77.beginPath(), this.drawRings_(t.getOrientedFlatCoordinates(), 0, t.getEnds(), t.getStride()), this.fillState_&&_e77.fill(), this.strokeState_&&_e77.stroke();
        } if (''!==this.text_) {
          var _e78=t.getFlatInteriorPoint(); this.drawText_(_e78, 0, 2, 2);
        }
      }
    }}, {key: 'drawMultiPolygon', value: function drawMultiPolygon(t) {
      if (this.squaredTolerance_&&(t=t.simplifyTransformed(this.squaredTolerance_, this.userTransform_)), Ge(this.extent_, t.getExtent())) {
        if (this.strokeState_||this.fillState_) {
          this.fillState_&&this.setContextFillState_(this.fillState_), this.strokeState_&&this.setContextStrokeState_(this.strokeState_); var _e79=this.context_; var _i79=t.getOrientedFlatCoordinates(); var _n73=0; var _r51=t.getEndss(); var _s48=t.getStride(); _e79.beginPath(); for (var _t70=0, _e80=_r51.length; _t70<_e80; ++_t70) {
            var _e81=_r51[_t70]; _n73=this.drawRings_(_i79, _n73, _e81, _s48);
          } this.fillState_&&_e79.fill(), this.strokeState_&&_e79.stroke();
        } if (''!==this.text_) {
          var _e82=t.getFlatInteriorPoints(); this.drawText_(_e82, 0, _e82.length, 2);
        }
      }
    }}, {key: 'setContextFillState_', value: function setContextFillState_(t) {
      var e=this.context_; var i=this.contextFillState_; i?i.fillStyle!=t.fillStyle&&(i.fillStyle=t.fillStyle, e.fillStyle=t.fillStyle):(e.fillStyle=t.fillStyle, this.contextFillState_={fillStyle: t.fillStyle});
    }}, {key: 'setContextStrokeState_', value: function setContextStrokeState_(t) {
      var e=this.context_; var i=this.contextStrokeState_; i?(i.lineCap!=t.lineCap&&(i.lineCap=t.lineCap, e.lineCap=t.lineCap), d(i.lineDash, t.lineDash)||e.setLineDash(i.lineDash=t.lineDash), i.lineDashOffset!=t.lineDashOffset&&(i.lineDashOffset=t.lineDashOffset, e.lineDashOffset=t.lineDashOffset), i.lineJoin!=t.lineJoin&&(i.lineJoin=t.lineJoin, e.lineJoin=t.lineJoin), i.lineWidth!=t.lineWidth&&(i.lineWidth=t.lineWidth, e.lineWidth=t.lineWidth), i.miterLimit!=t.miterLimit&&(i.miterLimit=t.miterLimit, e.miterLimit=t.miterLimit), i.strokeStyle!=t.strokeStyle&&(i.strokeStyle=t.strokeStyle, e.strokeStyle=t.strokeStyle)):(e.lineCap=t.lineCap, e.setLineDash(t.lineDash), e.lineDashOffset=t.lineDashOffset, e.lineJoin=t.lineJoin, e.lineWidth=t.lineWidth, e.miterLimit=t.miterLimit, e.strokeStyle=t.strokeStyle, this.contextStrokeState_={lineCap: t.lineCap, lineDash: t.lineDash, lineDashOffset: t.lineDashOffset, lineJoin: t.lineJoin, lineWidth: t.lineWidth, miterLimit: t.miterLimit, strokeStyle: t.strokeStyle});
    }}, {key: 'setContextTextState_', value: function setContextTextState_(t) {
      var e=this.context_; var i=this.contextTextState_; var n=t.textAlign?t.textAlign:ro; i?(i.font!=t.font&&(i.font=t.font, e.font=t.font), i.textAlign!=n&&(i.textAlign=n, e.textAlign=n), i.textBaseline!=t.textBaseline&&(i.textBaseline=t.textBaseline, e.textBaseline=t.textBaseline)):(e.font=t.font, e.textAlign=n, e.textBaseline=t.textBaseline, this.contextTextState_={font: t.font, textAlign: n, textBaseline: t.textBaseline});
    }}, {key: 'setFillStrokeStyle', value: function setFillStrokeStyle(t, e) {
      var _this63=this; if (t) {
        var _e83=t.getColor(); this.fillState_={fillStyle: Al(_e83||Js)};
      } else this.fillState_=null; if (e) {
        var _t71=e.getColor(); var _i80=e.getLineCap(); var _n74=e.getLineDash(); var _r52=e.getLineDashOffset(); var _s49=e.getLineJoin(); var _o58=e.getWidth(); var _a32=e.getMiterLimit(); var _l16=_n74||to; this.strokeState_={lineCap: void 0!==_i80?_i80:Qs, lineDash: 1===this.pixelRatio_?_l16:_l16.map(function(t) {
          return t*_this63.pixelRatio_;
        }), lineDashOffset: (_r52||0)*this.pixelRatio_, lineJoin: void 0!==_s49?_s49:eo, lineWidth: (void 0!==_o58?_o58:1)*this.pixelRatio_, miterLimit: void 0!==_a32?_a32:io, strokeStyle: Al(_t71||no)};
      } else this.strokeState_=null;
    }}, {key: 'setImageStyle', value: function setImageStyle(t) {
      var e; if (!t||!(e=t.getSize())) return void(this.image_=null); var i=t.getPixelRatio(this.pixelRatio_); var n=t.getAnchor(); var r=t.getOrigin(); this.image_=t.getImage(this.pixelRatio_), this.imageAnchorX_=n[0]*i, this.imageAnchorY_=n[1]*i, this.imageHeight_=e[1]*i, this.imageOpacity_=t.getOpacity(), this.imageOriginX_=r[0], this.imageOriginY_=r[1], this.imageRotateWithView_=t.getRotateWithView(), this.imageRotation_=t.getRotation(); var s=t.getScaleArray(); this.imageScale_=[s[0]*this.pixelRatio_/i, s[1]*this.pixelRatio_/i], this.imageWidth_=e[0]*i;
    }}, {key: 'setTextStyle', value: function setTextStyle(t) {
      if (t) {
        var _e84=t.getFill(); if (_e84) {
          var _t72=_e84.getColor(); this.textFillState_={fillStyle: Al(_t72||Js)};
        } else this.textFillState_=null; var _i81=t.getStroke(); if (_i81) {
          var _t73=_i81.getColor(); var _e85=_i81.getLineCap(); var _n75=_i81.getLineDash(); var _r53=_i81.getLineDashOffset(); var _s50=_i81.getLineJoin(); var _o59=_i81.getWidth(); var _a33=_i81.getMiterLimit(); this.textStrokeState_={lineCap: void 0!==_e85?_e85:Qs, lineDash: _n75||to, lineDashOffset: _r53||0, lineJoin: void 0!==_s50?_s50:eo, lineWidth: void 0!==_o59?_o59:1, miterLimit: void 0!==_a33?_a33:io, strokeStyle: Al(_t73||no)};
        } else this.textStrokeState_=null; var _n76=t.getFont(); var _r54=t.getOffsetX(); var _s51=t.getOffsetY(); var _o60=t.getRotateWithView(); var _a34=t.getRotation(); var _l17=t.getScaleArray(); var _h15=t.getText(); var _c7=t.getTextAlign(); var _u11=t.getTextBaseline(); this.textState_={font: void 0!==_n76?_n76:$s, textAlign: void 0!==_c7?_c7:ro, textBaseline: void 0!==_u11?_u11:so}, this.text_=void 0!==_h15?Array.isArray(_h15)?_h15.reduce(function(t, e, i) {
          return t+(i%2?' ':e);
        }, ''):_h15:'', this.textOffsetX_=void 0!==_r54?this.pixelRatio_*_r54:0, this.textOffsetY_=void 0!==_s51?this.pixelRatio_*_s51:0, this.textRotateWithView_=void 0!==_o60&&_o60, this.textRotation_=void 0!==_a34?_a34:0, this.textScale_=[this.pixelRatio_*_l17[0], this.pixelRatio_*_l17[1]];
      } else this.text_='';
    }}]); return Wl;
  }(Vl); var Zl={Point: function Point(t, e, i, n, r) {
    var s=i.getImage(); var o=i.getText(); var a; if (s) {
      if (s.getImageState()!=ts) return; var _l18=t; if (r) {
        var _h16=s.getDeclutterMode(); if ('none'!==_h16) {
          if (_l18=r, 'obstacle'===_h16) {
            var _r55=t.getBuilder(i.getZIndex(), 'Image'); _r55.setImageStyle(s, a), _r55.drawPoint(e, n);
          } else o&&o.getText()&&(a={});
        }
      } var _h17=_l18.getBuilder(i.getZIndex(), 'Image'); _h17.setImageStyle(s, a), _h17.drawPoint(e, n);
    } if (o&&o.getText()) {
      var _s52=t; r&&(_s52=r); var _l19=_s52.getBuilder(i.getZIndex(), 'Text'); _l19.setTextStyle(o, a), _l19.drawText(e, n);
    }
  }, LineString: function LineString(t, e, i, n, r) {
    var s=i.getStroke(); if (s) {
      var _r56=t.getBuilder(i.getZIndex(), 'LineString'); _r56.setFillStrokeStyle(null, s), _r56.drawLineString(e, n);
    } var o=i.getText(); if (o&&o.getText()) {
      var _s53=(r||t).getBuilder(i.getZIndex(), 'Text'); _s53.setTextStyle(o), _s53.drawText(e, n);
    }
  }, Polygon: function Polygon(t, e, i, n, r) {
    var s=i.getFill(); var o=i.getStroke(); if (s||o) {
      var _r57=t.getBuilder(i.getZIndex(), 'Polygon'); _r57.setFillStrokeStyle(s, o), _r57.drawPolygon(e, n);
    } var a=i.getText(); if (a&&a.getText()) {
      var _s54=(r||t).getBuilder(i.getZIndex(), 'Text'); _s54.setTextStyle(a), _s54.drawText(e, n);
    }
  }, MultiPoint: function MultiPoint(t, e, i, n, r) {
    var s=i.getImage(); var o=i.getText(); var a; if (s) {
      if (s.getImageState()!=ts) return; var _l20=t; if (r) {
        var _h18=s.getDeclutterMode(); if ('none'!==_h18) {
          if (_l20=r, 'obstacle'===_h18) {
            var _r58=t.getBuilder(i.getZIndex(), 'Image'); _r58.setImageStyle(s, a), _r58.drawMultiPoint(e, n);
          } else o&&o.getText()&&(a={});
        }
      } var _h19=_l20.getBuilder(i.getZIndex(), 'Image'); _h19.setImageStyle(s, a), _h19.drawMultiPoint(e, n);
    } if (o&&o.getText()) {
      var _s55=t; r&&(_s55=r); var _l21=_s55.getBuilder(i.getZIndex(), 'Text'); _l21.setTextStyle(o, a), _l21.drawText(e, n);
    }
  }, MultiLineString: function MultiLineString(t, e, i, n, r) {
    var s=i.getStroke(); if (s) {
      var _r59=t.getBuilder(i.getZIndex(), 'LineString'); _r59.setFillStrokeStyle(null, s), _r59.drawMultiLineString(e, n);
    } var o=i.getText(); if (o&&o.getText()) {
      var _s56=(r||t).getBuilder(i.getZIndex(), 'Text'); _s56.setTextStyle(o), _s56.drawText(e, n);
    }
  }, MultiPolygon: function MultiPolygon(t, e, i, n, r) {
    var s=i.getFill(); var o=i.getStroke(); if (o||s) {
      var _r60=t.getBuilder(i.getZIndex(), 'Polygon'); _r60.setFillStrokeStyle(s, o), _r60.drawMultiPolygon(e, n);
    } var a=i.getText(); if (a&&a.getText()) {
      var _s57=(r||t).getBuilder(i.getZIndex(), 'Text'); _s57.setTextStyle(a), _s57.drawText(e, n);
    }
  }, GeometryCollection: function GeometryCollection(t, e, i, n, r) {
    var s=e.getGeometriesArray(); var o; var a; for (o=0, a=s.length; o<a; ++o) {
      (0, Zl[s[o].getType()])(t, s[o], i, n, r);
    }
  }, Circle: function Circle(t, e, i, n, r) {
    var s=i.getFill(); var o=i.getStroke(); if (s||o) {
      var _r61=t.getBuilder(i.getZIndex(), 'Circle'); _r61.setFillStrokeStyle(s, o), _r61.drawCircle(e, n);
    } var a=i.getText(); if (a&&a.getText()) {
      var _s58=(r||t).getBuilder(i.getZIndex(), 'Text'); _s58.setTextStyle(a), _s58.drawText(e, n);
    }
  }}; function Yl(t, e) {
    return parseInt(X(t), 10)-parseInt(X(e), 10);
  } function Kl(t, e) {
    var i=ql(t, e); return i*i;
  } function ql(t, e) {
    return .5*t/e;
  } function Hl(t, e, i, n, r, s, o) {
    var a=!1; var l=i.getImage(); if (l) {
      var _t74=l.getImageState(); _t74==ts||_t74==es?l.unlistenImageChange(r):(_t74==Jr&&l.load(), l.listenImageChange(r), a=!0);
    } return function(t, e, i, n, r, s) {
      var o=i.getGeometryFunction()(e); if (!o) return; var a=o.simplifyTransformed(n, r); if (i.getRenderer())$l(t, a, i, e); else {
        (0, Zl[a.getType()])(t, a, i, e, s);
      }
    }(t, e, i, n, s, o), a;
  } function $l(t, e, i, n) {
    if ('GeometryCollection'==e.getType()) {
      var _r62=e.getGeometries(); for (var _e86=0, _s59=_r62.length; _e86<_s59; ++_e86)$l(t, _r62[_e86], i, n); return;
    }t.getBuilder(i.getZIndex(), 'Default').drawCustom(e, n, i.getRenderer(), i.getHitDetectionRenderer());
  } function Jl(t) {
    if (!(t.context instanceof CanvasRenderingContext2D)) throw new Error('Only works for render events from Canvas 2D layers'); var e=t.inversePixelTransform[0]; var i=t.inversePixelTransform[1]; var n=Math.sqrt(e*e+i*i); var r=t.frameState; var s=kt(t.inversePixelTransform.slice(), r.coordinateToPixelTransform); var o=Kl(r.viewState.resolution, n); var a; var l=Sn(); return l&&(a=pn(l, r.viewState.projection)), new Wl(t.context, n, r.extent, s, r.viewState.rotation, o, a);
  } var Ql; var th=[]; function eh(t, e, i, n, r) {
    t.beginPath(), t.moveTo(0, 0), t.lineTo(e, i), t.lineTo(n, r), t.closePath(), t.save(), t.clip(), t.fillRect(0, 0, Math.max(e, n)+1, Math.max(i, r)), t.restore();
  } function ih(t, e) {
    return Math.abs(t[4*e]-210)>2||Math.abs(t[4*e+3]-191.25)>2;
  } function nh(t, e, i, n) {
    var r=_n(i, e, t); var s=ln(e, n, i); var o=e.getMetersPerUnit(); void 0!==o&&(s*=o); var a=t.getMetersPerUnit(); void 0!==a&&(s/=a); var l=t.getExtent(); if (!l||ae(l, r)) {
      var _e87=ln(t, s, r)/s; isFinite(_e87)&&_e87>0&&(s/=_e87);
    } return s;
  } function rh(t, e, i, n) {
    var r=Pe(i); var s=nh(t, e, r, n); return (!isFinite(s)||s<=0)&&Ee(i, function(i) {
      return s=nh(t, e, i, n), isFinite(s)&&s>0;
    }), s;
  } function sh(t, e, i, n, r, s, o, a, l, h, c, u) {
    var d=_t(Math.round(i*t), Math.round(i*e), th); if (u||(d.imageSmoothingEnabled=!1), 0===l.length) return d.canvas; function g(t) {
      return Math.round(t*i)/i;
    }d.scale(i, i), d.globalCompositeOperation='lighter'; var f=[1/0, 1/0, -1/0, -1/0]; l.forEach(function(t, e, i) {
      ye(f, t.extent);
    }); var p=De(f); var m=Me(f); var _=_t(Math.round(i*p/n), Math.round(i*m/n), th); u||(_.imageSmoothingEnabled=!1); var y=i/n; l.forEach(function(t, e, i) {
      var n=t.extent[0]-f[0]; var r=-(t.extent[3]-f[3]); var s=De(t.extent); var o=Me(t.extent); t.image.width>0&&t.image.height>0&&_.drawImage(t.image, h, h, t.image.width-2*h, t.image.height-2*h, n*y, r*y, s*y, o*y);
    }); var x=Oe(o); return a.getTriangles().forEach(function(t, e, r) {
      var o=t.source; var a=t.target; var l=o[0][0]; var h=o[0][1]; var c=o[1][0]; var p=o[1][1]; var m=o[2][0]; var y=o[2][1]; var v=g((a[0][0]-x[0])/s); var S=g(-(a[0][1]-x[1])/s); var w=g((a[1][0]-x[0])/s); var T=g(-(a[1][1]-x[1])/s); var E=g((a[2][0]-x[0])/s); var C=g(-(a[2][1]-x[1])/s); var R=l; var b=h; l=0, h=0, c-=R, p-=b, m-=R, y-=b; var P=vi([[c, p, 0, 0, w-v], [m, y, 0, 0, E-v], [0, 0, c, p, T-S], [0, 0, m, y, C-S]]); if (P) {
        if (d.save(), d.beginPath(), function() {
          if (void 0===Ql) {
            var _t75=_t(6, 6, th); _t75.globalCompositeOperation='lighter', _t75.fillStyle='rgba(210, 0, 0, 0.75)', eh(_t75, 4, 5, 4, 0), eh(_t75, 4, 5, 0, 5); var _e88=_t75.getImageData(0, 0, 3, 3).data; Ql=ih(_e88, 0)||ih(_e88, 4)||ih(_e88, 8), yt(_t75), th.push(_t75.canvas);
          } return Ql;
        }()||!u) {
          d.moveTo(w, T); var _t76=4; var _e89=v-w; var _i82=S-T; for (var _n77=0; _n77<_t76; _n77++)d.lineTo(w+g((_n77+1)*_e89/_t76), T+g(_n77*_i82/(_t76-1))), _n77!=_t76-1&&d.lineTo(w+g((_n77+1)*_e89/_t76), T+g((_n77+1)*_i82/(_t76-1))); d.lineTo(E, C);
        } else d.moveTo(w, T), d.lineTo(v, S), d.lineTo(E, C); d.clip(), d.transform(P[0], P[2], P[1], P[3], v, S), d.translate(f[0]-R, f[3]-b), d.scale(n/i, -n/i), d.drawImage(_.canvas, 0, 0), d.restore();
      }
    }), yt(_), th.push(_.canvas), c&&(d.save(), d.globalCompositeOperation='source-over', d.strokeStyle='black', d.lineWidth=1, a.getTriangles().forEach(function(t, e, i) {
      var n=t.target; var r=(n[0][0]-x[0])/s; var o=-(n[0][1]-x[1])/s; var a=(n[1][0]-x[0])/s; var l=-(n[1][1]-x[1])/s; var h=(n[2][0]-x[0])/s; var c=-(n[2][1]-x[1])/s; d.beginPath(), d.moveTo(a, l), d.lineTo(r, o), d.lineTo(h, c), d.closePath(), d.stroke();
    }), d.restore()), d.canvas;
  } var oh=.5; var ah=/* #__PURE__*/function() {
    function ah(t, e, i, n, r, s) {
      var _this64=this; _classCallCheck(this, ah); this.sourceProj_=t, this.targetProj_=e; var o={}; var a=mn(this.targetProj_, this.sourceProj_); this.transformInv_=function(t) {
        var e=t[0]+'/'+t[1]; return o[e]||(o[e]=a(t)), o[e];
      }, this.maxSourceExtent_=n, this.errorThresholdSquared_=r*r, this.triangles_=[], this.wrapsXInSource_=!1, this.canWrapXInSource_=this.sourceProj_.canWrapX()&&!!n&&!!this.sourceProj_.getExtent()&&De(n)==De(this.sourceProj_.getExtent()), this.sourceWorldWidth_=this.sourceProj_.getExtent()?De(this.sourceProj_.getExtent()):null, this.targetWorldWidth_=this.targetProj_.getExtent()?De(this.targetProj_.getExtent()):null; var l=Oe(i); var h=Ne(i); var c=be(i); var u=Re(i); var d=this.transformInv_(l); var g=this.transformInv_(h); var f=this.transformInv_(c); var p=this.transformInv_(u); var m=10+(s?Math.max(0, Math.ceil(Math.log2(Ce(i)/(s*s*256*256)))):0); if (this.addQuad_(l, h, c, u, d, g, f, p, m), this.wrapsXInSource_) {
        var _t77=1/0; this.triangles_.forEach(function(e, i, n) {
          _t77=Math.min(_t77, e.source[0][0], e.source[1][0], e.source[2][0]);
        }), this.triangles_.forEach(function(e) {
          if (Math.max(e.source[0][0], e.source[1][0], e.source[2][0])-_t77>_this64.sourceWorldWidth_/2) {
            var _i83=[[e.source[0][0], e.source[0][1]], [e.source[1][0], e.source[1][1]], [e.source[2][0], e.source[2][1]]]; _i83[0][0]-_t77>_this64.sourceWorldWidth_/2&&(_i83[0][0]-=_this64.sourceWorldWidth_), _i83[1][0]-_t77>_this64.sourceWorldWidth_/2&&(_i83[1][0]-=_this64.sourceWorldWidth_), _i83[2][0]-_t77>_this64.sourceWorldWidth_/2&&(_i83[2][0]-=_this64.sourceWorldWidth_); var _n78=Math.min(_i83[0][0], _i83[1][0], _i83[2][0]); Math.max(_i83[0][0], _i83[1][0], _i83[2][0])-_n78<_this64.sourceWorldWidth_/2&&(e.source=_i83);
          }
        });
      }o={};
    }_createClass(ah, [{key: 'addTriangle_', value: function addTriangle_(t, e, i, n, r, s) {
      this.triangles_.push({source: [n, r, s], target: [t, e, i]});
    }}, {key: 'addQuad_', value: function addQuad_(t, e, i, n, r, s, o, a, l) {
      var h=ne([r, s, o, a]); var c=this.sourceWorldWidth_?De(h)/this.sourceWorldWidth_:null; var u=this.sourceWorldWidth_; var d=this.sourceProj_.canWrapX()&&c>.5&&c<1; var g=!1; if (l>0) {
        if (this.targetProj_.isGlobal()&&this.targetWorldWidth_) {
          g=De(ne([t, e, i, n]))/this.targetWorldWidth_>.25||g;
        }!d&&this.sourceProj_.isGlobal()&&c&&(g=c>.25||g);
      } if (!g&&this.maxSourceExtent_&&isFinite(h[0])&&isFinite(h[1])&&isFinite(h[2])&&isFinite(h[3])&&!Ge(h, this.maxSourceExtent_)) return; var f=0; if (!(g||isFinite(r[0])&&isFinite(r[1])&&isFinite(s[0])&&isFinite(s[1])&&isFinite(o[0])&&isFinite(o[1])&&isFinite(a[0])&&isFinite(a[1]))) if (l>0)g=!0; else if (f=(isFinite(r[0])&&isFinite(r[1])?0:8)+(isFinite(s[0])&&isFinite(s[1])?0:4)+(isFinite(o[0])&&isFinite(o[1])?0:2)+(isFinite(a[0])&&isFinite(a[1])?0:1), 1!=f&&2!=f&&4!=f&&8!=f) return; if (l>0) {
        if (!g) {
          var _e90=[(t[0]+i[0])/2, (t[1]+i[1])/2]; var _n79=this.transformInv_(_e90); var _s60; if (d) {
            _s60=(Ti(r[0], u)+Ti(o[0], u))/2-Ti(_n79[0], u);
          } else _s60=(r[0]+o[0])/2-_n79[0]; var _a35=(r[1]+o[1])/2-_n79[1]; g=_s60*_s60+_a35*_a35>this.errorThresholdSquared_;
        } if (g) {
          if (Math.abs(t[0]-i[0])<=Math.abs(t[1]-i[1])) {
            var _h20=[(e[0]+i[0])/2, (e[1]+i[1])/2]; var _c8=this.transformInv_(_h20); var _u12=[(n[0]+t[0])/2, (n[1]+t[1])/2]; var _d13=this.transformInv_(_u12); this.addQuad_(t, e, _h20, _u12, r, s, _c8, _d13, l-1), this.addQuad_(_u12, _h20, i, n, _d13, _c8, o, a, l-1);
          } else {
            var _h21=[(t[0]+e[0])/2, (t[1]+e[1])/2]; var _c9=this.transformInv_(_h21); var _u13=[(i[0]+n[0])/2, (i[1]+n[1])/2]; var _d14=this.transformInv_(_u13); this.addQuad_(t, _h21, _u13, n, r, _c9, _d14, a, l-1), this.addQuad_(_h21, e, i, _u13, _c9, s, o, _d14, l-1);
          } return;
        }
      } if (d) {
        if (!this.canWrapXInSource_) return; this.wrapsXInSource_=!0;
      }0==(11&f)&&this.addTriangle_(t, i, n, r, o, a), 0==(14&f)&&this.addTriangle_(t, i, e, r, o, s), f&&(0==(13&f)&&this.addTriangle_(e, n, t, s, a, r), 0==(7&f)&&this.addTriangle_(e, n, i, s, a, o));
    }}, {key: 'calculateSourceExtent', value: function calculateSourceExtent() {
      var t=[1/0, 1/0, -1/0, -1/0]; return this.triangles_.forEach(function(e, i, n) {
        var r=e.source; xe(t, r[0]), xe(t, r[1]), xe(t, r[2]);
      }), t;
    }}, {key: 'getTriangles', value: function getTriangles() {
      return this.triangles_;
    }}]); return ah;
  }(); var lh=/* #__PURE__*/function(_ot5) {
    _inherits(lh, _ot5); var _super62=_createSuper(lh); function lh(t, e, i, n, r, s, o, a, l, h, c, u) {
      var _this65; _classCallCheck(this, lh); _this65=_super62.call(this, r, $, {interpolate: !!u}), _this65.renderEdges_=void 0!==c&&c, _this65.pixelRatio_=o, _this65.gutter_=a, _this65.canvas_=null, _this65.sourceTileGrid_=e, _this65.targetTileGrid_=n, _this65.wrappedTileCoord_=s||r, _this65.sourceTiles_=[], _this65.sourcesListenerKeys_=null, _this65.sourceZ_=0; var d=n.getTileCoordExtent(_this65.wrappedTileCoord_); var g=_this65.targetTileGrid_.getExtent(); var f=_this65.sourceTileGrid_.getExtent(); var p=g?Ae(d, g):d; if (0===Ce(p)) return _possibleConstructorReturn(_this65, void(_this65.state=et)); var m=t.getExtent(); m&&(f=f?Ae(f, m):m); var _=n.getResolution(_this65.wrappedTileCoord_[0]); var y=rh(t, i, p, _); if (!isFinite(y)||y<=0) return _possibleConstructorReturn(_this65, void(_this65.state=et)); var x=void 0!==h?h:oh; if (_this65.triangulation_=new ah(t, i, p, f, y*x, _), 0===_this65.triangulation_.getTriangles().length) return _possibleConstructorReturn(_this65, void(_this65.state=et)); _this65.sourceZ_=e.getZForResolution(y); var v=_this65.triangulation_.calculateSourceExtent(); if (f&&(t.canWrapX()?(v[1]=_i(v[1], f[1], f[3]), v[3]=_i(v[3], f[1], f[3])):v=Ae(v, f)), Ce(v)) {
        var _t78=e.getTileRangeForExtentAndZ(v, _this65.sourceZ_); for (var _e91=_t78.minX; _e91<=_t78.maxX; _e91++) {
          for (var _i84=_t78.minY; _i84<=_t78.maxY; _i84++) {
            var _t79=l(_this65.sourceZ_, _e91, _i84, o); _t79&&_this65.sourceTiles_.push(_t79);
          }
        }0===_this65.sourceTiles_.length&&(_this65.state=et);
      } else _this65.state=et; return _this65;
    }_createClass(lh, [{key: 'getImage', value: function getImage() {
      return this.canvas_;
    }}, {key: 'reproject_', value: function reproject_() {
      var _this66=this; var t=[]; if (this.sourceTiles_.forEach(function(e) {
        e&&e.getState()==Q&&t.push({extent: _this66.sourceTileGrid_.getTileCoordExtent(e.tileCoord), image: e.getImage()});
      }), this.sourceTiles_.length=0, 0===t.length) this.state=tt; else {
        var _e92=this.wrappedTileCoord_[0]; var _i85=this.targetTileGrid_.getTileSize(_e92); var _n80='number'==typeof _i85?_i85:_i85[0]; var _r63='number'==typeof _i85?_i85:_i85[1]; var _s61=this.targetTileGrid_.getResolution(_e92); var _o61=this.sourceTileGrid_.getResolution(this.sourceZ_); var _a36=this.targetTileGrid_.getTileCoordExtent(this.wrappedTileCoord_); this.canvas_=sh(_n80, _r63, this.pixelRatio_, _o61, this.sourceTileGrid_.getExtent(), _s61, _a36, this.triangulation_, t, this.gutter_, this.renderEdges_, this.interpolate), this.state=Q;
      } this.changed();
    }}, {key: 'load', value: function load() {
      var _this67=this; if (this.state==$) {
        this.state=J, this.changed(); var _t80=0; this.sourcesListenerKeys_=[], this.sourceTiles_.forEach(function(e) {
          var i=e.getState(); if (i==$||i==J) {
            _t80++; var _i86=N(e, w, function(n) {
              var r=e.getState(); r!=Q&&r!=tt&&r!=et||(G(_i86), _t80--, 0===_t80&&(this.unlistenSources_(), this.reproject_()));
            }, _this67); _this67.sourcesListenerKeys_.push(_i86);
          }
        }), 0===_t80?setTimeout(this.reproject_.bind(this), 0):this.sourceTiles_.forEach(function(t, e, i) {
          t.getState()==$&&t.load();
        });
      }
    }}, {key: 'unlistenSources_', value: function unlistenSources_() {
      this.sourcesListenerKeys_.forEach(G), this.sourcesListenerKeys_=null;
    }}, {key: 'release', value: function release() {
      this.canvas_&&(yt(this.canvas_.getContext('2d')), th.push(this.canvas_), this.canvas_=null), _get(_getPrototypeOf(lh.prototype), 'release', this).call(this);
    }}]); return lh;
  }(ot); var hh='tileloadstart'; var ch='tileloadend'; var uh='tileloaderror'; function dh(t) {
    return t?Array.isArray(t)?function(e) {
      return t;
    }:'function'==typeof t?t:function(e) {
      return [t];
    }:null;
  } var gh=/* #__PURE__*/function(_W11) {
    _inherits(gh, _W11); var _super63=_createSuper(gh); function gh(t) {
      var _this68; _classCallCheck(this, gh); _this68=_super63.call(this), _this68.projection=an(t.projection), _this68.attributions_=dh(t.attributions), _this68.attributionsCollapsible_=void 0===t.attributionsCollapsible||t.attributionsCollapsible, _this68.loading=!1, _this68.state_=void 0!==t.state?t.state:'ready', _this68.wrapX_=void 0!==t.wrapX&&t.wrapX, _this68.interpolate_=!!t.interpolate, _this68.viewResolver=null, _this68.viewRejector=null; var e=_assertThisInitialized(_this68); _this68.viewPromise_=new Promise(function(t, i) {
        e.viewResolver=t, e.viewRejector=i;
      }); return _this68;
    }_createClass(gh, [{key: 'getAttributions', value: function getAttributions() {
      return this.attributions_;
    }}, {key: 'getAttributionsCollapsible', value: function getAttributionsCollapsible() {
      return this.attributionsCollapsible_;
    }}, {key: 'getProjection', value: function getProjection() {
      return this.projection;
    }}, {key: 'getResolutions', value: function getResolutions(t) {
      return null;
    }}, {key: 'getView', value: function getView() {
      return this.viewPromise_;
    }}, {key: 'getState', value: function getState() {
      return this.state_;
    }}, {key: 'getWrapX', value: function getWrapX() {
      return this.wrapX_;
    }}, {key: 'getInterpolate', value: function getInterpolate() {
      return this.interpolate_;
    }}, {key: 'refresh', value: function refresh() {
      this.changed();
    }}, {key: 'setAttributions', value: function setAttributions(t) {
      this.attributions_=dh(t), this.changed();
    }}, {key: 'setState', value: function setState(t) {
      this.state_=t, this.changed();
    }}]); return gh;
  }(W); var fh=[0, 0, 0]; var ph=/* #__PURE__*/function() {
    function ph(t) {
      _classCallCheck(this, ph); var e; if (this.minZoom=void 0!==t.minZoom?t.minZoom:0, this.resolutions_=t.resolutions, Ft(g(this.resolutions_, function(t, e) {
        return e-t;
      }, !0), 17), !t.origins) {
        for (var _t81=0, _i87=this.resolutions_.length-1; _t81<_i87; ++_t81) {
          if (e) {
            if (this.resolutions_[_t81]/this.resolutions_[_t81+1]!==e) {
              e=void 0; break;
            }
          } else e=this.resolutions_[_t81]/this.resolutions_[_t81+1];
        }
      } this.zoomFactor_=e, this.maxZoom=this.resolutions_.length-1, this.origin_=void 0!==t.origin?t.origin:null, this.origins_=null, void 0!==t.origins&&(this.origins_=t.origins, Ft(this.origins_.length==this.resolutions_.length, 20)); var i=t.extent; void 0===i||this.origin_||this.origins_||(this.origin_=Oe(i)), Ft(!this.origin_&&this.origins_||this.origin_&&!this.origins_, 18), this.tileSizes_=null, void 0!==t.tileSizes&&(this.tileSizes_=t.tileSizes, Ft(this.tileSizes_.length==this.resolutions_.length, 19)), this.tileSize_=void 0!==t.tileSize?t.tileSize:this.tileSizes_?null:Ko, Ft(!this.tileSize_&&this.tileSizes_||this.tileSize_&&!this.tileSizes_, 22), this.extent_=void 0!==i?i:null, this.fullTileRanges_=null, this.tmpSize_=[0, 0], this.tmpExtent_=[0, 0, 0, 0], void 0!==t.sizes?this.fullTileRanges_=t.sizes.map(function(t, e) {
        var n=new Il(Math.min(0, t[0]), Math.max(t[0]-1, -1), Math.min(0, t[1]), Math.max(t[1]-1, -1)); if (i) {
          var _t82=this.getTileRangeForExtentAndZ(i, e); n.minX=Math.max(_t82.minX, n.minX), n.maxX=Math.min(_t82.maxX, n.maxX), n.minY=Math.max(_t82.minY, n.minY), n.maxY=Math.min(_t82.maxY, n.maxY);
        } return n;
      }, this):i&&this.calculateTileRanges_(i);
    }_createClass(ph, [{key: 'forEachTileCoord', value: function forEachTileCoord(t, e, i) {
      var n=this.getTileRangeForExtentAndZ(t, e); for (var _t83=n.minX, _r64=n.maxX; _t83<=_r64; ++_t83) for (var _r65=n.minY, _s62=n.maxY; _r65<=_s62; ++_r65)i([e, _t83, _r65]);
    }}, {key: 'forEachTileCoordParentTileRange', value: function forEachTileCoordParentTileRange(t, e, i, n) {
      var r; var s; var o; var a=null; var l=t[0]-1; for (2===this.zoomFactor_?(s=t[1], o=t[2]):a=this.getTileCoordExtent(t, n); l>=this.minZoom;) {
        if (2===this.zoomFactor_?(s=Math.floor(s/2), o=Math.floor(o/2), r=Pl(s, s, o, o, i)):r=this.getTileRangeForExtentAndZ(a, l, i), e(l, r)) return !0; --l;
      } return !1;
    }}, {key: 'getExtent', value: function getExtent() {
      return this.extent_;
    }}, {key: 'getMaxZoom', value: function getMaxZoom() {
      return this.maxZoom;
    }}, {key: 'getMinZoom', value: function getMinZoom() {
      return this.minZoom;
    }}, {key: 'getOrigin', value: function getOrigin(t) {
      return this.origin_?this.origin_:this.origins_[t];
    }}, {key: 'getResolution', value: function getResolution(t) {
      return this.resolutions_[t];
    }}, {key: 'getResolutions', value: function getResolutions() {
      return this.resolutions_;
    }}, {key: 'getTileCoordChildTileRange', value: function getTileCoordChildTileRange(t, e, i) {
      if (t[0]<this.maxZoom) {
        if (2===this.zoomFactor_) {
          var _i88=2*t[1]; var _n81=2*t[2]; return Pl(_i88, _i88+1, _n81, _n81+1, e);
        } var _n82=this.getTileCoordExtent(t, i||this.tmpExtent_); return this.getTileRangeForExtentAndZ(_n82, t[0]+1, e);
      } return null;
    }}, {key: 'getTileRangeForTileCoordAndZ', value: function getTileRangeForTileCoordAndZ(t, e, i) {
      if (e>this.maxZoom||e<this.minZoom) return null; var n=t[0]; var r=t[1]; var s=t[2]; if (e===n) return Pl(r, s, r, s, i); if (this.zoomFactor_) {
        var _t84=Math.pow(this.zoomFactor_, e-n); var _o62=Math.floor(r*_t84); var _a37=Math.floor(s*_t84); if (e<n) return Pl(_o62, _o62, _a37, _a37, i); return Pl(_o62, Math.floor(_t84*(r+1))-1, _a37, Math.floor(_t84*(s+1))-1, i);
      } var o=this.getTileCoordExtent(t, this.tmpExtent_); return this.getTileRangeForExtentAndZ(o, e, i);
    }}, {key: 'getTileRangeExtent', value: function getTileRangeExtent(t, e, i) {
      var n=this.getOrigin(t); var r=this.getResolution(t); var s=ll(this.getTileSize(t), this.tmpSize_); var o=n[0]+e.minX*s[0]*r; var a=n[0]+(e.maxX+1)*s[0]*r; return de(o, n[1]+e.minY*s[1]*r, a, n[1]+(e.maxY+1)*s[1]*r, i);
    }}, {key: 'getTileRangeForExtentAndZ', value: function getTileRangeForExtentAndZ(t, e, i) {
      this.getTileCoordForXYAndZ_(t[0], t[3], e, !1, fh); var n=fh[1]; var r=fh[2]; this.getTileCoordForXYAndZ_(t[2], t[1], e, !0, fh); return Pl(n, fh[1], r, fh[2], i);
    }}, {key: 'getTileCoordCenter', value: function getTileCoordCenter(t) {
      var e=this.getOrigin(t[0]); var i=this.getResolution(t[0]); var n=ll(this.getTileSize(t[0]), this.tmpSize_); return [e[0]+(t[1]+.5)*n[0]*i, e[1]-(t[2]+.5)*n[1]*i];
    }}, {key: 'getTileCoordExtent', value: function getTileCoordExtent(t, e) {
      var i=this.getOrigin(t[0]); var n=this.getResolution(t[0]); var r=ll(this.getTileSize(t[0]), this.tmpSize_); var s=i[0]+t[1]*r[0]*n; var o=i[1]-(t[2]+1)*r[1]*n; return de(s, o, s+r[0]*n, o+r[1]*n, e);
    }}, {key: 'getTileCoordForCoordAndResolution', value: function getTileCoordForCoordAndResolution(t, e, i) {
      return this.getTileCoordForXYAndResolution_(t[0], t[1], e, !1, i);
    }}, {key: 'getTileCoordForXYAndResolution_', value: function getTileCoordForXYAndResolution_(t, e, i, n, r) {
      var s=this.getZForResolution(i); var o=i/this.getResolution(s); var a=this.getOrigin(s); var l=ll(this.getTileSize(s), this.tmpSize_); var h=o*(t-a[0])/i/l[0]; var c=o*(a[1]-e)/i/l[1]; return n?(h=Pi(h, 5)-1, c=Pi(c, 5)-1):(h=bi(h, 5), c=bi(c, 5)), xl(s, h, c, r);
    }}, {key: 'getTileCoordForXYAndZ_', value: function getTileCoordForXYAndZ_(t, e, i, n, r) {
      var s=this.getOrigin(i); var o=this.getResolution(i); var a=ll(this.getTileSize(i), this.tmpSize_); var l=(t-s[0])/o/a[0]; var h=(s[1]-e)/o/a[1]; return n?(l=Pi(l, 5)-1, h=Pi(h, 5)-1):(l=bi(l, 5), h=bi(h, 5)), xl(i, l, h, r);
    }}, {key: 'getTileCoordForCoordAndZ', value: function getTileCoordForCoordAndZ(t, e, i) {
      return this.getTileCoordForXYAndZ_(t[0], t[1], e, !1, i);
    }}, {key: 'getTileCoordResolution', value: function getTileCoordResolution(t) {
      return this.resolutions_[t[0]];
    }}, {key: 'getTileSize', value: function getTileSize(t) {
      return this.tileSize_?this.tileSize_:this.tileSizes_[t];
    }}, {key: 'getFullTileRange', value: function getFullTileRange(t) {
      return this.fullTileRanges_?this.fullTileRanges_[t]:this.extent_?this.getTileRangeForExtentAndZ(this.extent_, t):null;
    }}, {key: 'getZForResolution', value: function getZForResolution(t, e) {
      return _i(h(this.resolutions_, t, e||0), this.minZoom, this.maxZoom);
    }}, {key: 'tileCoordIntersectsViewport', value: function tileCoordIntersectsViewport(t, e) {
      return wr(e, 0, e.length, 2, this.getTileCoordExtent(t));
    }}, {key: 'calculateTileRanges_', value: function calculateTileRanges_(t) {
      var e=this.resolutions_.length; var i=new Array(e); for (var _n83=this.minZoom; _n83<e; ++_n83)i[_n83]=this.getTileRangeForExtentAndZ(t, _n83); this.fullTileRanges_=i;
    }}]); return ph;
  }(); function mh(t) {
    var e=t.getDefaultTileGrid(); return e||(e=Sh(t), t.setDefaultTileGrid(e)), e;
  } function _h(t, e, i) {
    var n=e[0]; var r=t.getTileCoordCenter(e); var s=wh(i); if (!ae(s, r)) {
      var _e93=De(s); var _i89=Math.ceil((s[0]-r[0])/_e93); return r[0]+=_e93*_i89, t.getTileCoordForCoordAndZ(r, n);
    } return e;
  } function yh(t, e, i, n) {
    n=void 0!==n?n:'top-left'; var r=vh(t, e, i); return new ph({extent: t, origin: Ie(t, n), resolutions: r, tileSize: i});
  } function xh(t) {
    var e=t||{}; var i=e.extent||an('EPSG:3857').getExtent(); var n={extent: i, minZoom: e.minZoom, tileSize: e.tileSize, resolutions: vh(i, e.maxZoom, e.tileSize, e.maxResolution)}; return new ph(n);
  } function vh(t, e, i, n) {
    e=void 0!==e?e:42, i=ll(void 0!==i?i:Ko); var r=Me(t); var s=De(t); n=n>0?n:Math.max(s/i[0], r/i[1]); var o=e+1; var a=new Array(o); for (var _t85=0; _t85<o; ++_t85)a[_t85]=n/Math.pow(2, _t85); return a;
  } function Sh(t, e, i, n) {
    return yh(wh(t), e, i, n);
  } function wh(t) {
    var e=(t=an(t)).getExtent(); if (!e) {
      var _i90=180*Ye.degrees/t.getMetersPerUnit(); e=de(-_i90, -_i90, _i90, _i90);
    } return e;
  } var Th=/* #__PURE__*/function(_r66) {
    _inherits(Th, _r66); var _super64=_createSuper(Th); function Th(t, e) {
      var _this69; _classCallCheck(this, Th); _this69=_super64.call(this, t), _this69.tile=e; return _this69;
    } return _createClass(Th);
  }(r); var Eh=/* #__PURE__*/function(_gh) {
    _inherits(Eh, _gh); var _super65=_createSuper(Eh); function Eh(t) {
      var _this70; _classCallCheck(this, Eh); _this70=_super65.call(this, {attributions: t.attributions, attributionsCollapsible: t.attributionsCollapsible, projection: t.projection, state: t.state, wrapX: t.wrapX, interpolate: t.interpolate}), _this70.on, _this70.once, _this70.un, _this70.opaque_=void 0!==t.opaque&&t.opaque, _this70.tilePixelRatio_=void 0!==t.tilePixelRatio?t.tilePixelRatio:1, _this70.tileGrid=void 0!==t.tileGrid?t.tileGrid:null; var e=[256, 256]; _this70.tileGrid&&ll(_this70.tileGrid.getTileSize(_this70.tileGrid.getMinZoom()), e), _this70.tileCache=new Rl(t.cacheSize||0), _this70.tmpSize=[0, 0], _this70.key_=t.key||'', _this70.tileOptions={transition: t.transition, interpolate: t.interpolate}, _this70.zDirection=t.zDirection?t.zDirection:0; return _this70;
    }_createClass(Eh, [{key: 'canExpireCache', value: function canExpireCache() {
      return this.tileCache.canExpireCache();
    }}, {key: 'expireCache', value: function expireCache(t, e) {
      var i=this.getTileCacheForProjection(t); i&&i.expireCache(e);
    }}, {key: 'forEachLoadedTile', value: function forEachLoadedTile(t, e, i, n) {
      var r=this.getTileCacheForProjection(t); if (!r) return !1; var s; var o; var a; var l=!0; for (var _t86=i.minX; _t86<=i.maxX; ++_t86) for (var _h22=i.minY; _h22<=i.maxY; ++_h22)o=vl(e, _t86, _h22), a=!1, r.containsKey(o)&&(s=r.get(o), a=s.getState()===Q, a&&(a=!1!==n(s))), a||(l=!1); return l;
    }}, {key: 'getGutterForProjection', value: function getGutterForProjection(t) {
      return 0;
    }}, {key: 'getKey', value: function getKey() {
      return this.key_;
    }}, {key: 'setKey', value: function setKey(t) {
      this.key_!==t&&(this.key_=t, this.changed());
    }}, {key: 'getOpaque', value: function getOpaque(t) {
      return this.opaque_;
    }}, {key: 'getResolutions', value: function getResolutions(t) {
      var e=t?this.getTileGridForProjection(t):this.tileGrid; return e?e.getResolutions():null;
    }}, {key: 'getTile', value: function getTile(t, e, i, n, r) {
      return z();
    }}, {key: 'getTileGrid', value: function getTileGrid() {
      return this.tileGrid;
    }}, {key: 'getTileGridForProjection', value: function getTileGridForProjection(t) {
      return this.tileGrid?this.tileGrid:mh(t);
    }}, {key: 'getTileCacheForProjection', value: function getTileCacheForProjection(t) {
      var e=this.getProjection(); return Ft(null===e||fn(e, t), 68), this.tileCache;
    }}, {key: 'getTilePixelRatio', value: function getTilePixelRatio(t) {
      return this.tilePixelRatio_;
    }}, {key: 'getTilePixelSize', value: function getTilePixelSize(t, e, i) {
      var n=this.getTileGridForProjection(i); var r=this.getTilePixelRatio(e); var s=ll(n.getTileSize(t), this.tmpSize); return 1==r?s:al(s, r, this.tmpSize);
    }}, {key: 'getTileCoordForTileUrlFunction', value: function getTileCoordForTileUrlFunction(t, e) {
      e=void 0!==e?e:this.getProjection(); var i=this.getTileGridForProjection(e); return this.getWrapX()&&e.isGlobal()&&(t=_h(i, t, e)), Cl(t, i)?t:null;
    }}, {key: 'clear', value: function clear() {
      this.tileCache.clear();
    }}, {key: 'refresh', value: function refresh() {
      this.clear(), _get(_getPrototypeOf(Eh.prototype), 'refresh', this).call(this);
    }}, {key: 'updateCacheSize', value: function updateCacheSize(t, e) {
      var i=this.getTileCacheForProjection(e); t>i.highWaterMark&&(i.highWaterMark=t);
    }}, {key: 'useTile', value: function useTile(t, e, i, n) {}}]); return Eh;
  }(gh); function Ch(t, e) {
    var i=/\{z\}/g; var n=/\{x\}/g; var r=/\{y\}/g; var s=/\{-y\}/g; return function(o, a, l) {
      if (o) {
        return t.replace(i, o[0].toString()).replace(n, o[1].toString()).replace(r, o[2].toString()).replace(s, function() {
          var t=o[0]; var i=e.getFullTileRange(t); Ft(i, 55); return (i.getHeight()-o[2]-1).toString();
        });
      }
    };
  } function Rh(t, e) {
    var i=t.length; var n=new Array(i); for (var _r67=0; _r67<i; ++_r67)n[_r67]=Ch(t[_r67], e); return bh(n);
  } function bh(t) {
    return 1===t.length?t[0]:function(e, i, n) {
      if (!e) return; var r=Ti(El(e), t.length); return t[r](e, i, n);
    };
  } function Ph(t, e, i) {} function Ih(t) {
    var e=[]; var i=/\{([a-z])-([a-z])\}/.exec(t); if (i) {
      var _n84=i[1].charCodeAt(0); var _r68=i[2].charCodeAt(0); var _s63; for (_s63=_n84; _s63<=_r68; ++_s63)e.push(t.replace(i[0], String.fromCharCode(_s63))); return e;
    } if (i=/\{(\d+)-(\d+)\}/.exec(t), i) {
      var _n85=parseInt(i[2], 10); for (var _r69=parseInt(i[1], 10); _r69<=_n85; _r69++)e.push(t.replace(i[0], _r69.toString())); return e;
    } return e.push(t), e;
  } var Lh=/* #__PURE__*/function(_Eh) {
    _inherits(Lh, _Eh); var _super66=_createSuper(Lh); function Lh(t) {
      var _this71; _classCallCheck(this, Lh); _this71=_super66.call(this, {attributions: t.attributions, cacheSize: t.cacheSize, opaque: t.opaque, projection: t.projection, state: t.state, tileGrid: t.tileGrid, tilePixelRatio: t.tilePixelRatio, wrapX: t.wrapX, transition: t.transition, interpolate: t.interpolate, key: t.key, attributionsCollapsible: t.attributionsCollapsible, zDirection: t.zDirection}), _this71.generateTileUrlFunction_=_this71.tileUrlFunction===Lh.prototype.tileUrlFunction, _this71.tileLoadFunction=t.tileLoadFunction, t.tileUrlFunction&&(_this71.tileUrlFunction=t.tileUrlFunction), _this71.urls=null, t.urls?_this71.setUrls(t.urls):t.url&&_this71.setUrl(t.url), _this71.tileLoadingKeys_={}; return _this71;
    }_createClass(Lh, [{key: 'getTileLoadFunction', value: function getTileLoadFunction() {
      return this.tileLoadFunction;
    }}, {key: 'getTileUrlFunction', value: function getTileUrlFunction() {
      return Object.getPrototypeOf(this).tileUrlFunction===this.tileUrlFunction?this.tileUrlFunction.bind(this):this.tileUrlFunction;
    }}, {key: 'getUrls', value: function getUrls() {
      return this.urls;
    }}, {key: 'handleTileChange', value: function handleTileChange(t) {
      var e=t.target; var i=X(e); var n=e.getState(); var r; n==J?(this.tileLoadingKeys_[i]=!0, r=hh):i in this.tileLoadingKeys_&&(delete this.tileLoadingKeys_[i], r=n==tt?uh:n==Q?ch:void 0), null!=r&&this.dispatchEvent(new Th(r, e));
    }}, {key: 'setTileLoadFunction', value: function setTileLoadFunction(t) {
      this.tileCache.clear(), this.tileLoadFunction=t, this.changed();
    }}, {key: 'setTileUrlFunction', value: function setTileUrlFunction(t, e) {
      this.tileUrlFunction=t, this.tileCache.pruneExceptNewestZ(), void 0!==e?this.setKey(e):this.changed();
    }}, {key: 'setUrl', value: function setUrl(t) {
      var e=Ih(t); this.urls=e, this.setUrls(e);
    }}, {key: 'setUrls', value: function setUrls(t) {
      this.urls=t; var e=t.join('\n'); this.generateTileUrlFunction_?this.setTileUrlFunction(Rh(t, this.tileGrid), e):this.setKey(e);
    }}, {key: 'tileUrlFunction', value: function tileUrlFunction(t, e, i) {}}, {key: 'useTile', value: function useTile(t, e, i) {
      var n=vl(t, e, i); this.tileCache.containsKey(n)&&this.tileCache.get(n);
    }}]); return Lh;
  }(Eh); var Fh=Lh; function Mh(t, e) {
    t.getImage().src=e;
  } var Ah=/* #__PURE__*/function(_Fh) {
    _inherits(Ah, _Fh); var _super67=_createSuper(Ah); function Ah(t) {
      var _this72; _classCallCheck(this, Ah); _this72=_super67.call(this, {attributions: t.attributions, cacheSize: t.cacheSize, opaque: t.opaque, projection: t.projection, state: t.state, tileGrid: t.tileGrid, tileLoadFunction: t.tileLoadFunction?t.tileLoadFunction:Mh, tilePixelRatio: t.tilePixelRatio, tileUrlFunction: t.tileUrlFunction, url: t.url, urls: t.urls, wrapX: t.wrapX, transition: t.transition, interpolate: void 0===t.interpolate||t.interpolate, key: t.key, attributionsCollapsible: t.attributionsCollapsible, zDirection: t.zDirection}), _this72.crossOrigin=void 0!==t.crossOrigin?t.crossOrigin:null, _this72.tileClass=void 0!==t.tileClass?t.tileClass:os, _this72.tileCacheForProjection={}, _this72.tileGridForProjection={}, _this72.reprojectionErrorThreshold_=t.reprojectionErrorThreshold, _this72.renderReprojectionEdges_=!1; return _this72;
    }_createClass(Ah, [{key: 'canExpireCache', value: function canExpireCache() {
      if (this.tileCache.canExpireCache()) return !0; for (var _t87 in this.tileCacheForProjection) if (this.tileCacheForProjection[_t87].canExpireCache()) return !0; return !1;
    }}, {key: 'expireCache', value: function expireCache(t, e) {
      var i=this.getTileCacheForProjection(t); this.tileCache.expireCache(this.tileCache==i?e:{}); for (var _t88 in this.tileCacheForProjection) {
        var _n86=this.tileCacheForProjection[_t88]; _n86.expireCache(_n86==i?e:{});
      }
    }}, {key: 'getGutterForProjection', value: function getGutterForProjection(t) {
      return this.getProjection()&&t&&!fn(this.getProjection(), t)?0:this.getGutter();
    }}, {key: 'getGutter', value: function getGutter() {
      return 0;
    }}, {key: 'getKey', value: function getKey() {
      var t=_get(_getPrototypeOf(Ah.prototype), 'getKey', this).call(this); return this.getInterpolate()||(t+=':disable-interpolation'), t;
    }}, {key: 'getOpaque', value: function getOpaque(t) {
      return !(this.getProjection()&&t&&!fn(this.getProjection(), t))&&_get(_getPrototypeOf(Ah.prototype), 'getOpaque', this).call(this, t);
    }}, {key: 'getTileGridForProjection', value: function getTileGridForProjection(t) {
      var e=this.getProjection(); if (this.tileGrid&&(!e||fn(e, t))) return this.tileGrid; var i=X(t); return i in this.tileGridForProjection||(this.tileGridForProjection[i]=mh(t)), this.tileGridForProjection[i];
    }}, {key: 'getTileCacheForProjection', value: function getTileCacheForProjection(t) {
      var e=this.getProjection(); if (!e||fn(e, t)) return this.tileCache; var i=X(t); return i in this.tileCacheForProjection||(this.tileCacheForProjection[i]=new Rl(this.tileCache.highWaterMark)), this.tileCacheForProjection[i];
    }}, {key: 'createTile_', value: function createTile_(t, e, i, n, r, s) {
      var o=[t, e, i]; var a=this.getTileCoordForTileUrlFunction(o, r); var l=a?this.tileUrlFunction(a, n, r):void 0; var h=new this.tileClass(o, void 0!==l?$:et, void 0!==l?l:'', this.crossOrigin, this.tileLoadFunction, this.tileOptions); return h.key=s, h.addEventListener(w, this.handleTileChange.bind(this)), h;
    }}, {key: 'getTile', value: function getTile(t, e, i, n, r) {
      var _this73=this; var s=this.getProjection(); if (!s||!r||fn(s, r)) return this.getTileInternal(t, e, i, n, s||r); var o=this.getTileCacheForProjection(r); var a=[t, e, i]; var l; var h=Sl(a); o.containsKey(h)&&(l=o.get(h)); var c=this.getKey(); if (l&&l.key==c) return l; var u=this.getTileGridForProjection(s); var d=this.getTileGridForProjection(r); var g=this.getTileCoordForTileUrlFunction(a, r); var f=new lh(s, u, r, d, a, g, this.getTilePixelRatio(n), this.getGutter(), function(t, e, i, n) {
        return _this73.getTileInternal(t, e, i, n, s);
      }, this.reprojectionErrorThreshold_, this.renderReprojectionEdges_, this.getInterpolate()); return f.key=c, l?(f.interimTile=l, f.refreshInterimChain(), o.replace(h, f)):o.set(h, f), f;
    }}, {key: 'getTileInternal', value: function getTileInternal(t, e, i, n, r) {
      var s=null; var o=vl(t, e, i); var a=this.getKey(); if (this.tileCache.containsKey(o)) {
        if (s=this.tileCache.get(o), s.key!=a) {
          var _l22=s; s=this.createTile_(t, e, i, n, r, a), _l22.getState()==$?s.interimTile=_l22.interimTile:s.interimTile=_l22, s.refreshInterimChain(), this.tileCache.replace(o, s);
        }
      } else s=this.createTile_(t, e, i, n, r, a), this.tileCache.set(o, s); return s;
    }}, {key: 'setRenderReprojectionEdges', value: function setRenderReprojectionEdges(t) {
      if (this.renderReprojectionEdges_!=t) {
        this.renderReprojectionEdges_=t; for (var _t89 in this.tileCacheForProjection) this.tileCacheForProjection[_t89].clear(); this.changed();
      }
    }}, {key: 'setTileGridForProjection', value: function setTileGridForProjection(t, e) {
      var i=an(t); if (i) {
        var _t90=X(i); _t90 in this.tileGridForProjection||(this.tileGridForProjection[_t90]=e);
      }
    }}, {key: 'clear', value: function clear() {
      _get(_getPrototypeOf(Ah.prototype), 'clear', this).call(this); for (var _t91 in this.tileCacheForProjection) this.tileCacheForProjection[_t91].clear();
    }}]); return Ah;
  }(Fh); function Oh(t) {
    var e=t[0]; var i=new Array(e); var n; var r; var s=1<<e-1; for (n=0; n<e; ++n)r=48, t[1]&s&&(r+=1), t[2]&s&&(r+=2), i[n]=String.fromCharCode(r), s>>=1; return i.join('');
  } var Nh=/* #__PURE__*/function(_Ah) {
    _inherits(Nh, _Ah); var _super68=_createSuper(Nh); function Nh(t) {
      var _this74; _classCallCheck(this, Nh); var e=void 0!==t.hidpi&&t.hidpi; _this74=_super68.call(this, {cacheSize: t.cacheSize, crossOrigin: 'anonymous', interpolate: t.interpolate, opaque: !0, projection: an('EPSG:3857'), reprojectionErrorThreshold: t.reprojectionErrorThreshold, state: 'loading', tileLoadFunction: t.tileLoadFunction, tilePixelRatio: e?2:1, wrapX: void 0===t.wrapX||t.wrapX, transition: t.transition, zDirection: t.zDirection}), _this74.hidpi_=e, _this74.culture_=void 0!==t.culture?t.culture:'en-us', _this74.maxZoom_=void 0!==t.maxZoom?t.maxZoom:-1, _this74.apiKey_=t.key, _this74.imagerySet_=t.imagerySet; jl('https://dev.virtualearth.net/REST/v1/Imagery/Metadata/'+_this74.imagerySet_+'?uriScheme=https&include=ImageryProviders&key='+_this74.apiKey_+'&c='+_this74.culture_, _this74.handleImageryMetadataResponse.bind(_assertThisInitialized(_this74)), void 0, 'jsonp'); return _this74;
    }_createClass(Nh, [{key: 'getApiKey', value: function getApiKey() {
      return this.apiKey_;
    }}, {key: 'getImagerySet', value: function getImagerySet() {
      return this.imagerySet_;
    }}, {key: 'handleImageryMetadataResponse', value: function handleImageryMetadataResponse(t) {
      var _this75=this; if (200!=t.statusCode||'OK'!=t.statusDescription||'ValidCredentials'!=t.authenticationResultCode||1!=t.resourceSets.length||1!=t.resourceSets[0].resources.length) return void this.setState('error'); var e=t.resourceSets[0].resources[0]; var i=-1==this.maxZoom_?e.zoomMax:this.maxZoom_; var n=wh(this.getProjection()); var r=this.hidpi_?2:1; var s=e.imageWidth==e.imageHeight?e.imageWidth/r:[e.imageWidth/r, e.imageHeight/r]; var o=xh({extent: n, minZoom: e.zoomMin, maxZoom: i, tileSize: s}); this.tileGrid=o; var a=this.culture_; var l=this.hidpi_; if (this.tileUrlFunction=bh(e.imageUrlSubdomains.map(function(t) {
        var i=[0, 0, 0]; var n=e.imageUrl.replace('{subdomain}', t).replace('{culture}', a); return function(t, e, r) {
          if (!t) return; xl(t[0], t[1], t[2], i); var s=n; return l&&(s+='&dpi=d1&device=mobile'), s.replace('{quadkey}', Oh(i));
        };
      })), e.imageryProviders) {
        var _t92=pn(an('EPSG:4326'), this.getProjection()); this.setAttributions(function(i) {
          var n=[]; var r=i.viewState; var s=_this75.getTileGrid(); var o=s.getZForResolution(r.resolution, _this75.zDirection); var a=s.getTileCoordForCoordAndZ(r.center, o)[0]; return e.imageryProviders.map(function(e) {
            var r=!1; var s=e.coverageAreas; for (var _e94=0, _n87=s.length; _e94<_n87; ++_e94) {
              var _n88=s[_e94]; if (a>=_n88.zoomMin&&a<=_n88.zoomMax) {
                var _e95=_n88.bbox; if (Ge(Ue([_e95[1], _e95[0], _e95[3], _e95[2]], _t92), i.extent)) {
                  r=!0; break;
                }
              }
            }r&&n.push(e.attribution);
          }), n.push('<a class="ol-attribution-bing-tos" href="https://www.microsoft.com/maps/product/terms.html" target="_blank">Terms of Use</a>'), n;
        });
      } this.setState('ready');
    }}]); return Nh;
  }(Ah); var Dh=/* #__PURE__*/function(_Ah2) {
    _inherits(Dh, _Ah2); var _super69=_createSuper(Dh); function Dh(t) {
      var _this76; _classCallCheck(this, Dh); var e=void 0!==(t=t||{}).projection?t.projection:'EPSG:3857'; var i=void 0!==t.tileGrid?t.tileGrid:xh({extent: wh(e), maxResolution: t.maxResolution, maxZoom: t.maxZoom, minZoom: t.minZoom, tileSize: t.tileSize}); _this76=_super69.call(this, {attributions: t.attributions, cacheSize: t.cacheSize, crossOrigin: t.crossOrigin, interpolate: t.interpolate, opaque: t.opaque, projection: e, reprojectionErrorThreshold: t.reprojectionErrorThreshold, tileGrid: i, tileLoadFunction: t.tileLoadFunction, tilePixelRatio: t.tilePixelRatio, tileUrlFunction: t.tileUrlFunction, url: t.url, urls: t.urls, wrapX: void 0===t.wrapX||t.wrapX, transition: t.transition, attributionsCollapsible: t.attributionsCollapsible, zDirection: t.zDirection}), _this76.gutter_=void 0!==t.gutter?t.gutter:0; return _this76;
    }_createClass(Dh, [{key: 'getGutter', value: function getGutter() {
      return this.gutter_;
    }}]); return Dh;
  }(Ah); var Gh=/* #__PURE__*/function(_Dh) {
    _inherits(Gh, _Dh); var _super70=_createSuper(Gh); function Gh(t) {
      var _this77; _classCallCheck(this, Gh); _this77=_super70.call(this, {attributions: t.attributions, cacheSize: t.cacheSize, crossOrigin: t.crossOrigin, maxZoom: void 0!==t.maxZoom?t.maxZoom:18, minZoom: t.minZoom, projection: t.projection, transition: t.transition, wrapX: t.wrapX, zDirection: t.zDirection}), _this77.account_=t.account, _this77.mapId_=t.map||'', _this77.config_=t.config||{}, _this77.templateCache_={}, _this77.initializeMap_(); return _this77;
    }_createClass(Gh, [{key: 'getConfig', value: function getConfig() {
      return this.config_;
    }}, {key: 'updateConfig', value: function updateConfig(t) {
      Object.assign(this.config_, t), this.initializeMap_();
    }}, {key: 'setConfig', value: function setConfig(t) {
      this.config_=t||{}, this.initializeMap_();
    }}, {key: 'initializeMap_', value: function initializeMap_() {
      var t=JSON.stringify(this.config_); if (this.templateCache_[t]) return void this.applyTemplate_(this.templateCache_[t]); var e='https://'+this.account_+'.carto.com/api/v1/map'; this.mapId_&&(e+='/named/'+this.mapId_); var i=new XMLHttpRequest(); i.addEventListener('load', this.handleInitResponse_.bind(this, t)), i.addEventListener('error', this.handleInitError_.bind(this)), i.open('POST', e), i.setRequestHeader('Content-type', 'application/json'), i.send(JSON.stringify(this.config_));
    }}, {key: 'handleInitResponse_', value: function handleInitResponse_(t, e) {
      var i=e.target; if (!i.status||i.status>=200&&i.status<300) {
        var _e96; try {
          _e96=JSON.parse(i.responseText);
        } catch (t) {
          return void this.setState('error');
        } this.applyTemplate_(_e96), this.templateCache_[t]=_e96, this.setState('ready');
      } else this.setState('error');
    }}, {key: 'handleInitError_', value: function handleInitError_(t) {
      this.setState('error');
    }}, {key: 'applyTemplate_', value: function applyTemplate_(t) {
      var e='https://'+t.cdn_url.https+'/'+this.account_+'/api/v1/map/'+t.layergroupid+'/{z}/{x}/{y}.png'; this.setUrl(e);
    }}]); return Gh;
  }(Dh); function kh(t, e, i, n, r) {
    jh(t, e, i||0, n||t.length-1, r||zh);
  } function jh(t, e, i, n, r) {
    for (;n>i;) {
      if (n-i>600) {
        var s=n-i+1; var o=e-i+1; var a=Math.log(s); var l=.5*Math.exp(2*a/3); var h=.5*Math.sqrt(a*l*(s-l)/s)*(o-s/2<0?-1:1); jh(t, e, Math.max(i, Math.floor(e-o*l/s+h)), Math.min(n, Math.floor(e+(s-o)*l/s+h)), r);
      } var c=t[e]; var u=i; var d=n; for (Bh(t, i, e), r(t[n], c)>0&&Bh(t, i, n); u<d;) {
        for (Bh(t, u, d), u++, d--; r(t[u], c)<0;)u++; for (;r(t[d], c)>0;)d--;
      }0===r(t[i], c)?Bh(t, i, d):Bh(t, ++d, n), d<=e&&(i=d+1), e<=d&&(n=d-1);
    }
  } function Bh(t, e, i) {
    var n=t[e]; t[e]=t[i], t[i]=n;
  } function zh(t, e) {
    return t<e?-1:t>e?1:0;
  } var Uh=/* #__PURE__*/function() {
    function Uh() {
      var t=arguments.length>0&&arguments[0]!==undefined?arguments[0]:9; _classCallCheck(this, Uh); this._maxEntries=Math.max(4, t), this._minEntries=Math.max(2, Math.ceil(.4*this._maxEntries)), this.clear();
    }_createClass(Uh, [{key: 'all', value: function all() {
      return this._all(this.data, []);
    }}, {key: 'search', value: function search(t) {
      var e=this.data; var i=[]; if (!Qh(t, e)) return i; var n=this.toBBox; var r=[]; for (;e;) {
        for (var _s64=0; _s64<e.children.length; _s64++) {
          var _o63=e.children[_s64]; var _a38=e.leaf?n(_o63):_o63; Qh(t, _a38)&&(e.leaf?i.push(_o63):Jh(t, _a38)?this._all(_o63, i):r.push(_o63));
        }e=r.pop();
      } return i;
    }}, {key: 'collides', value: function collides(t) {
      var e=this.data; if (!Qh(t, e)) return !1; var i=[]; for (;e;) {
        for (var _n89=0; _n89<e.children.length; _n89++) {
          var _r70=e.children[_n89]; var _s65=e.leaf?this.toBBox(_r70):_r70; if (Qh(t, _s65)) {
            if (e.leaf||Jh(t, _s65)) return !0; i.push(_r70);
          }
        }e=i.pop();
      } return !1;
    }}, {key: 'load', value: function load(t) {
      if (!t||!t.length) return this; if (t.length<this._minEntries) {
        for (var _e97=0; _e97<t.length; _e97++) this.insert(t[_e97]); return this;
      } var e=this._build(t.slice(), 0, t.length-1, 0); if (this.data.children.length) {
        if (this.data.height===e.height) this._splitRoot(this.data, e); else {
          if (this.data.height<e.height) {
            var _t93=this.data; this.data=e, e=_t93;
          } this._insert(e, this.data.height-e.height-1, !0);
        }
      } else this.data=e; return this;
    }}, {key: 'insert', value: function insert(t) {
      return t&&this._insert(t, this.data.height-1), this;
    }}, {key: 'clear', value: function clear() {
      return this.data=tc([]), this;
    }}, {key: 'remove', value: function remove(t, e) {
      if (!t) return this; var i=this.data; var n=this.toBBox(t); var r=[]; var s=[]; var o; var a; var l; for (;i||r.length;) {
        if (i||(i=r.pop(), a=r[r.length-1], o=s.pop(), l=!0), i.leaf) {
          var _n90=Xh(t, i.children, e); if (-1!==_n90) return i.children.splice(_n90, 1), r.push(i), this._condense(r), this;
        }l||i.leaf||!Jh(i, n)?a?(o++, i=a.children[o], l=!1):i=null:(r.push(i), s.push(o), o=0, a=i, i=i.children[0]);
      } return this;
    }}, {key: 'toBBox', value: function toBBox(t) {
      return t;
    }}, {key: 'compareMinX', value: function compareMinX(t, e) {
      return t.minX-e.minX;
    }}, {key: 'compareMinY', value: function compareMinY(t, e) {
      return t.minY-e.minY;
    }}, {key: 'toJSON', value: function toJSON() {
      return this.data;
    }}, {key: 'fromJSON', value: function fromJSON(t) {
      return this.data=t, this;
    }}, {key: '_all', value: function _all(t, e) {
      var i=[]; for (;t;)t.leaf?e.push.apply(e, _toConsumableArray(t.children)):i.push.apply(i, _toConsumableArray(t.children)), t=i.pop(); return e;
    }}, {key: '_build', value: function _build(t, e, i, n) {
      var r=i-e+1; var s; var o=this._maxEntries; if (r<=o) return s=tc(t.slice(e, i+1)), Vh(s, this.toBBox), s; n||(n=Math.ceil(Math.log(r)/Math.log(o)), o=Math.ceil(r/Math.pow(o, n-1))), s=tc([]), s.leaf=!1, s.height=n; var a=Math.ceil(r/o); var l=a*Math.ceil(Math.sqrt(o)); ec(t, e, i, l, this.compareMinX); for (var _r71=e; _r71<=i; _r71+=l) {
        var _e98=Math.min(_r71+l-1, i); ec(t, _r71, _e98, a, this.compareMinY); for (var _i91=_r71; _i91<=_e98; _i91+=a) {
          var _r72=Math.min(_i91+a-1, _e98); s.children.push(this._build(t, _i91, _r72, n-1));
        }
      } return Vh(s, this.toBBox), s;
    }}, {key: '_chooseSubtree', value: function _chooseSubtree(t, e, i, n) {
      for (;n.push(e), !e.leaf&&n.length-1!==i;) {
        var _i92=void 0; var _n91=1/0; var _o64=1/0; for (var _a39=0; _a39<e.children.length; _a39++) {
          var _l23=e.children[_a39]; var _h23=qh(_l23); var _c10=(r=t, s=_l23, (Math.max(s.maxX, r.maxX)-Math.min(s.minX, r.minX))*(Math.max(s.maxY, r.maxY)-Math.min(s.minY, r.minY))-_h23); _c10<_o64?(_o64=_c10, _n91=_h23<_n91?_h23:_n91, _i92=_l23):_c10===_o64&&_h23<_n91&&(_n91=_h23, _i92=_l23);
        }e=_i92||e.children[0];
      } var r; var s; return e;
    }}, {key: '_insert', value: function _insert(t, e, i) {
      var n=i?t:this.toBBox(t); var r=[]; var s=this._chooseSubtree(n, this.data, e, r); for (s.children.push(t), Zh(s, n); e>=0&&r[e].children.length>this._maxEntries;) this._split(r, e), e--; this._adjustParentBBoxes(n, r, e);
    }}, {key: '_split', value: function _split(t, e) {
      var i=t[e]; var n=i.children.length; var r=this._minEntries; this._chooseSplitAxis(i, r, n); var s=this._chooseSplitIndex(i, r, n); var o=tc(i.children.splice(s, i.children.length-s)); o.height=i.height, o.leaf=i.leaf, Vh(i, this.toBBox), Vh(o, this.toBBox), e?t[e-1].children.push(o):this._splitRoot(i, o);
    }}, {key: '_splitRoot', value: function _splitRoot(t, e) {
      this.data=tc([t, e]), this.data.height=t.height+1, this.data.leaf=!1, Vh(this.data, this.toBBox);
    }}, {key: '_chooseSplitIndex', value: function _chooseSplitIndex(t, e, i) {
      var n; var r=1/0; var s=1/0; for (var _o65=e; _o65<=i-e; _o65++) {
        var _e99=Wh(t, 0, _o65, this.toBBox); var _a40=Wh(t, _o65, i, this.toBBox); var _l24=$h(_e99, _a40); var _h24=qh(_e99)+qh(_a40); _l24<r?(r=_l24, n=_o65, s=_h24<s?_h24:s):_l24===r&&_h24<s&&(s=_h24, n=_o65);
      } return n||i-e;
    }}, {key: '_chooseSplitAxis', value: function _chooseSplitAxis(t, e, i) {
      var n=t.leaf?this.compareMinX:Yh; var r=t.leaf?this.compareMinY:Kh; this._allDistMargin(t, e, i, n)<this._allDistMargin(t, e, i, r)&&t.children.sort(n);
    }}, {key: '_allDistMargin', value: function _allDistMargin(t, e, i, n) {
      t.children.sort(n); var r=this.toBBox; var s=Wh(t, 0, e, r); var o=Wh(t, i-e, i, r); var a=Hh(s)+Hh(o); for (var _n92=e; _n92<i-e; _n92++) {
        var _e100=t.children[_n92]; Zh(s, t.leaf?r(_e100):_e100), a+=Hh(s);
      } for (var _n93=i-e-1; _n93>=e; _n93--) {
        var _e101=t.children[_n93]; Zh(o, t.leaf?r(_e101):_e101), a+=Hh(o);
      } return a;
    }}, {key: '_adjustParentBBoxes', value: function _adjustParentBBoxes(t, e, i) {
      for (var _n94=i; _n94>=0; _n94--)Zh(e[_n94], t);
    }}, {key: '_condense', value: function _condense(t) {
      for (var _e102, _i93=t.length-1; _i93>=0; _i93--)0===t[_i93].children.length?_i93>0?(_e102=t[_i93-1].children, _e102.splice(_e102.indexOf(t[_i93]), 1)):this.clear():Vh(t[_i93], this.toBBox);
    }}]); return Uh;
  }(); function Xh(t, e, i) {
    if (!i) return e.indexOf(t); for (var _n95=0; _n95<e.length; _n95++) if (i(t, e[_n95])) return _n95; return -1;
  } function Vh(t, e) {
    Wh(t, 0, t.children.length, e, t);
  } function Wh(t, e, i, n, r) {
    r||(r=tc(null)), r.minX=1/0, r.minY=1/0, r.maxX=-1/0, r.maxY=-1/0; for (var _s66=e; _s66<i; _s66++) {
      var _e103=t.children[_s66]; Zh(r, t.leaf?n(_e103):_e103);
    } return r;
  } function Zh(t, e) {
    return t.minX=Math.min(t.minX, e.minX), t.minY=Math.min(t.minY, e.minY), t.maxX=Math.max(t.maxX, e.maxX), t.maxY=Math.max(t.maxY, e.maxY), t;
  } function Yh(t, e) {
    return t.minX-e.minX;
  } function Kh(t, e) {
    return t.minY-e.minY;
  } function qh(t) {
    return (t.maxX-t.minX)*(t.maxY-t.minY);
  } function Hh(t) {
    return t.maxX-t.minX+(t.maxY-t.minY);
  } function $h(t, e) {
    var i=Math.max(t.minX, e.minX); var n=Math.max(t.minY, e.minY); var r=Math.min(t.maxX, e.maxX); var s=Math.min(t.maxY, e.maxY); return Math.max(0, r-i)*Math.max(0, s-n);
  } function Jh(t, e) {
    return t.minX<=e.minX&&t.minY<=e.minY&&e.maxX<=t.maxX&&e.maxY<=t.maxY;
  } function Qh(t, e) {
    return e.minX<=t.maxX&&e.minY<=t.maxY&&e.maxX>=t.minX&&e.maxY>=t.minY;
  } function tc(t) {
    return {children: t, height: 1, leaf: !0, minX: 1/0, minY: 1/0, maxX: -1/0, maxY: -1/0};
  } function ec(t, e, i, n, r) {
    var s=[e, i]; for (;s.length;) {
      if ((i=s.pop())-(e=s.pop())<=n) continue; var _o66=e+Math.ceil((i-e)/n/2)*n; kh(t, _o66, e, i, r), s.push(e, _o66, _o66, i);
    }
  } var ic=/* #__PURE__*/function() {
    function ic(t) {
      _classCallCheck(this, ic); this.rbush_=new Uh(t), this.items_={};
    }_createClass(ic, [{key: 'insert', value: function insert(t, e) {
      var i={minX: t[0], minY: t[1], maxX: t[2], maxY: t[3], value: e}; this.rbush_.insert(i), this.items_[X(e)]=i;
    }}, {key: 'load', value: function load(t, e) {
      var i=new Array(e.length); for (var _n96=0, _r73=e.length; _n96<_r73; _n96++) {
        var _r74=t[_n96]; var _s67=e[_n96]; var _o67={minX: _r74[0], minY: _r74[1], maxX: _r74[2], maxY: _r74[3], value: _s67}; i[_n96]=_o67, this.items_[X(_s67)]=_o67;
      } this.rbush_.load(i);
    }}, {key: 'remove', value: function remove(t) {
      var e=X(t); var i=this.items_[e]; return delete this.items_[e], null!==this.rbush_.remove(i);
    }}, {key: 'update', value: function update(t, e) {
      var i=this.items_[X(e)]; me([i.minX, i.minY, i.maxX, i.maxY], t)||(this.remove(e), this.insert(t, e));
    }}, {key: 'getAll', value: function getAll() {
      return this.rbush_.all().map(function(t) {
        return t.value;
      });
    }}, {key: 'getInExtent', value: function getInExtent(t) {
      var e={minX: t[0], minY: t[1], maxX: t[2], maxY: t[3]}; return this.rbush_.search(e).map(function(t) {
        return t.value;
      });
    }}, {key: 'forEach', value: function forEach(t) {
      return this.forEach_(this.getAll(), t);
    }}, {key: 'forEachInExtent', value: function forEachInExtent(t, e) {
      return this.forEach_(this.getInExtent(t), e);
    }}, {key: 'forEach_', value: function forEach_(t, e) {
      var i; for (var _n97=0, _r75=t.length; _n97<_r75; _n97++) if (i=e(t[_n97]), i) return i; return i;
    }}, {key: 'isEmpty', value: function isEmpty() {
      return v(this.items_);
    }}, {key: 'clear', value: function clear() {
      this.rbush_.clear(), this.items_={};
    }}, {key: 'getExtent', value: function getExtent(t) {
      var e=this.rbush_.toJSON(); return de(e.minX, e.minY, e.maxX, e.maxY, t);
    }}, {key: 'concat', value: function concat(t) {
      this.rbush_.load(t.rbush_.all()); for (var _e104 in t.items_) this.items_[_e104]=t.items_[_e104];
    }}]); return ic;
  }(); var nc='addfeature'; var rc='changefeature'; var sc='clear'; var oc='removefeature'; var ac='featuresloadstart'; var lc='featuresloadend'; var hc='featuresloaderror'; var cc=/* #__PURE__*/function(_r76) {
    _inherits(cc, _r76); var _super71=_createSuper(cc); function cc(t, e, i) {
      var _this78; _classCallCheck(this, cc); _this78=_super71.call(this, t), _this78.feature=e, _this78.features=i; return _this78;
    } return _createClass(cc);
  }(r); var uc=/* #__PURE__*/function(_gh2) {
    _inherits(uc, _gh2); var _super72=_createSuper(uc); function uc(t) {
      var _this79; _classCallCheck(this, uc); _this79=_super72.call(this, {attributions: (t=t||{}).attributions, interpolate: !0, projection: void 0, state: 'ready', wrapX: void 0===t.wrapX||t.wrapX}), _this79.on, _this79.once, _this79.un, _this79.loader_=m, _this79.format_=t.format, _this79.overlaps_=void 0===t.overlaps||t.overlaps, _this79.url_=t.url, void 0!==t.loader?_this79.loader_=t.loader:void 0!==_this79.url_&&(Ft(_this79.format_, 7), _this79.loader_=Gl(_this79.url_, _this79.format_)), _this79.strategy_=void 0!==t.strategy?t.strategy:kl; var e=void 0===t.useSpatialIndex||t.useSpatialIndex; var i; var n; _this79.featuresRtree_=e?new ic():null, _this79.loadedExtentsRtree_=new ic(), _this79.loadingExtentsCount_=0, _this79.nullGeometryFeatures_={}, _this79.idIndex_={}, _this79.uidIndex_={}, _this79.featureChangeKeys_={}, _this79.featuresCollection_=null, Array.isArray(t.features)?n=t.features:t.features&&(i=t.features, n=i.getArray()), e||void 0!==i||(i=new H(n)), void 0!==n&&_this79.addFeaturesInternal(n), void 0!==i&&_this79.bindFeaturesCollection_(i); return _this79;
    }_createClass(uc, [{key: 'addFeature', value: function addFeature(t) {
      this.addFeatureInternal(t), this.changed();
    }}, {key: 'addFeatureInternal', value: function addFeatureInternal(t) {
      var e=X(t); if (!this.addToIndex_(e, t)) return void(this.featuresCollection_&&this.featuresCollection_.remove(t)); this.setupChangeEvents_(e, t); var i=t.getGeometry(); if (i) {
        var _e105=i.getExtent(); this.featuresRtree_&&this.featuresRtree_.insert(_e105, t);
      } else this.nullGeometryFeatures_[e]=t; this.dispatchEvent(new cc(nc, t));
    }}, {key: 'setupChangeEvents_', value: function setupChangeEvents_(t, e) {
      this.featureChangeKeys_[t]=[N(e, w, this.handleFeatureChange_, this), N(e, s, this.handleFeatureChange_, this)];
    }}, {key: 'addToIndex_', value: function addToIndex_(t, e) {
      var i=!0; var n=e.getId(); return void 0!==n&&(n.toString()in this.idIndex_?i=!1:this.idIndex_[n.toString()]=e), i&&(Ft(!(t in this.uidIndex_), 30), this.uidIndex_[t]=e), i;
    }}, {key: 'addFeatures', value: function addFeatures(t) {
      this.addFeaturesInternal(t), this.changed();
    }}, {key: 'addFeaturesInternal', value: function addFeaturesInternal(t) {
      var e=[]; var i=[]; var n=[]; for (var _e106=0, _n98=t.length; _e106<_n98; _e106++) {
        var _n99=t[_e106]; var _r77=X(_n99); this.addToIndex_(_r77, _n99)&&i.push(_n99);
      } for (var _t94=0, _r78=i.length; _t94<_r78; _t94++) {
        var _r79=i[_t94]; var _s68=X(_r79); this.setupChangeEvents_(_s68, _r79); var _o68=_r79.getGeometry(); if (_o68) {
          var _t95=_o68.getExtent(); e.push(_t95), n.push(_r79);
        } else this.nullGeometryFeatures_[_s68]=_r79;
      } if (this.featuresRtree_&&this.featuresRtree_.load(e, n), this.hasListener(nc)) for (var _t96=0, _e107=i.length; _t96<_e107; _t96++) this.dispatchEvent(new cc(nc, i[_t96]));
    }}, {key: 'bindFeaturesCollection_', value: function bindFeaturesCollection_(t) {
      var _this80=this; var e=!1; this.addEventListener(nc, function(i) {
        e||(e=!0, t.push(i.feature), e=!1);
      }), this.addEventListener(oc, function(i) {
        e||(e=!0, t.remove(i.feature), e=!1);
      }), t.addEventListener(Z, function(t) {
        e||(e=!0, _this80.addFeature(t.element), e=!1);
      }), t.addEventListener(Y, function(t) {
        e||(e=!0, _this80.removeFeature(t.element), e=!1);
      }), this.featuresCollection_=t;
    }}, {key: 'clear', value: function clear(t) {
      var _this81=this; if (t) {
        for (var _t97 in this.featureChangeKeys_) {
          this.featureChangeKeys_[_t97].forEach(G);
        } this.featuresCollection_||(this.featureChangeKeys_={}, this.idIndex_={}, this.uidIndex_={});
      } else if (this.featuresRtree_) {
        var _t98=function _t98(t) {
          _this81.removeFeatureInternal(t);
        }; this.featuresRtree_.forEach(_t98); for (var _t99 in this.nullGeometryFeatures_) this.removeFeatureInternal(this.nullGeometryFeatures_[_t99]);
      } this.featuresCollection_&&this.featuresCollection_.clear(), this.featuresRtree_&&this.featuresRtree_.clear(), this.nullGeometryFeatures_={}; var e=new cc(sc); this.dispatchEvent(e), this.changed();
    }}, {key: 'forEachFeature', value: function forEachFeature(t) {
      if (this.featuresRtree_) return this.featuresRtree_.forEach(t); this.featuresCollection_&&this.featuresCollection_.forEach(t);
    }}, {key: 'forEachFeatureAtCoordinateDirect', value: function forEachFeatureAtCoordinateDirect(t, e) {
      var i=[t[0], t[1], t[0], t[1]]; return this.forEachFeatureInExtent(i, function(i) {
        if (i.getGeometry().intersectsCoordinate(t)) return e(i);
      });
    }}, {key: 'forEachFeatureInExtent', value: function forEachFeatureInExtent(t, e) {
      if (this.featuresRtree_) return this.featuresRtree_.forEachInExtent(t, e); this.featuresCollection_&&this.featuresCollection_.forEach(e);
    }}, {key: 'forEachFeatureIntersectingExtent', value: function forEachFeatureIntersectingExtent(t, e) {
      return this.forEachFeatureInExtent(t, function(i) {
        if (i.getGeometry().intersectsExtent(t)) {
          var _t100=e(i); if (_t100) return _t100;
        }
      });
    }}, {key: 'getFeaturesCollection', value: function getFeaturesCollection() {
      return this.featuresCollection_;
    }}, {key: 'getFeatures', value: function getFeatures() {
      var t; return this.featuresCollection_?t=this.featuresCollection_.getArray().slice(0):this.featuresRtree_&&(t=this.featuresRtree_.getAll(), v(this.nullGeometryFeatures_)||u(t, Object.values(this.nullGeometryFeatures_))), t;
    }}, {key: 'getFeaturesAtCoordinate', value: function getFeaturesAtCoordinate(t) {
      var e=[]; return this.forEachFeatureAtCoordinateDirect(t, function(t) {
        e.push(t);
      }), e;
    }}, {key: 'getFeaturesInExtent', value: function getFeaturesInExtent(t, e) {
      var _this82=this; if (this.featuresRtree_) {
        var _ref; if (!(e&&e.canWrapX()&&this.getWrapX())) return this.featuresRtree_.getInExtent(t); var _i94=Ve(t, e); return (_ref=[]).concat.apply(_ref, _toConsumableArray(_i94.map(function(t) {
          return _this82.featuresRtree_.getInExtent(t);
        })));
      } return this.featuresCollection_?this.featuresCollection_.getArray().slice(0):[];
    }}, {key: 'getClosestFeatureToCoordinate', value: function getClosestFeatureToCoordinate(t, e) {
      var i=t[0]; var n=t[1]; var r=null; var s=[NaN, NaN]; var o=1/0; var a=[-1/0, -1/0, 1/0, 1/0]; return e=e||f, this.featuresRtree_.forEachInExtent(a, function(t) {
        if (e(t)) {
          var _e108=t.getGeometry(); var _l25=o; if (o=_e108.closestPointXY(i, n, s, o), o<_l25) {
            r=t; var _e109=Math.sqrt(o); a[0]=i-_e109, a[1]=n-_e109, a[2]=i+_e109, a[3]=n+_e109;
          }
        }
      }), r;
    }}, {key: 'getExtent', value: function getExtent(t) {
      return this.featuresRtree_.getExtent(t);
    }}, {key: 'getFeatureById', value: function getFeatureById(t) {
      var e=this.idIndex_[t.toString()]; return void 0!==e?e:null;
    }}, {key: 'getFeatureByUid', value: function getFeatureByUid(t) {
      var e=this.uidIndex_[t]; return void 0!==e?e:null;
    }}, {key: 'getFormat', value: function getFormat() {
      return this.format_;
    }}, {key: 'getOverlaps', value: function getOverlaps() {
      return this.overlaps_;
    }}, {key: 'getUrl', value: function getUrl() {
      return this.url_;
    }}, {key: 'handleFeatureChange_', value: function handleFeatureChange_(t) {
      var e=t.target; var i=X(e); var n=e.getGeometry(); if (n) {
        var _t101=n.getExtent(); i in this.nullGeometryFeatures_?(delete this.nullGeometryFeatures_[i], this.featuresRtree_&&this.featuresRtree_.insert(_t101, e)):this.featuresRtree_&&this.featuresRtree_.update(_t101, e);
      } else i in this.nullGeometryFeatures_||(this.featuresRtree_&&this.featuresRtree_.remove(e), this.nullGeometryFeatures_[i]=e); var r=e.getId(); if (void 0!==r) {
        var _t102=r.toString(); this.idIndex_[_t102]!==e&&(this.removeFromIdIndex_(e), this.idIndex_[_t102]=e);
      } else this.removeFromIdIndex_(e), this.uidIndex_[i]=e; this.changed(), this.dispatchEvent(new cc(rc, e));
    }}, {key: 'hasFeature', value: function hasFeature(t) {
      var e=t.getId(); return void 0!==e?e in this.idIndex_:X(t)in this.uidIndex_;
    }}, {key: 'isEmpty', value: function isEmpty() {
      return this.featuresRtree_?this.featuresRtree_.isEmpty()&&v(this.nullGeometryFeatures_):!this.featuresCollection_||0===this.featuresCollection_.getLength();
    }}, {key: 'loadFeatures', value: function loadFeatures(t, e, i) {
      var _this83=this; var n=this.loadedExtentsRtree_; var r=this.strategy_(t, e, i); var _loop=function _loop() {
        var s=r[_t103]; n.forEachInExtent(s, function(t) {
          return le(t.extent, s);
        })||(++_this83.loadingExtentsCount_, _this83.dispatchEvent(new cc(ac)), _this83.loader_.call(_this83, s, e, i, function(t) {
          --_this83.loadingExtentsCount_, _this83.dispatchEvent(new cc(lc, void 0, t));
        }, function() {
          --_this83.loadingExtentsCount_, _this83.dispatchEvent(new cc(hc));
        }), n.insert(s, {extent: s.slice()}));
      }; for (var _t103=0, _s69=r.length; _t103<_s69; ++_t103) {
        _loop();
      } this.loading=!(this.loader_.length<4)&&this.loadingExtentsCount_>0;
    }}, {key: 'refresh', value: function refresh() {
      this.clear(!0), this.loadedExtentsRtree_.clear(), _get(_getPrototypeOf(uc.prototype), 'refresh', this).call(this);
    }}, {key: 'removeLoadedExtent', value: function removeLoadedExtent(t) {
      var e=this.loadedExtentsRtree_; var i; e.forEachInExtent(t, function(e) {
        if (me(e.extent, t)) return i=e, !0;
      }), i&&e.remove(i);
    }}, {key: 'removeFeature', value: function removeFeature(t) {
      if (!t) return; var e=X(t); e in this.nullGeometryFeatures_?delete this.nullGeometryFeatures_[e]:this.featuresRtree_&&this.featuresRtree_.remove(t); this.removeFeatureInternal(t)&&this.changed();
    }}, {key: 'removeFeatureInternal', value: function removeFeatureInternal(t) {
      var e=X(t); var i=this.featureChangeKeys_[e]; if (!i) return; i.forEach(G), delete this.featureChangeKeys_[e]; var n=t.getId(); return void 0!==n&&delete this.idIndex_[n.toString()], delete this.uidIndex_[e], this.dispatchEvent(new cc(oc, t)), t;
    }}, {key: 'removeFromIdIndex_', value: function removeFromIdIndex_(t) {
      var e=!1; for (var _i95 in this.idIndex_) {
        if (this.idIndex_[_i95]===t) {
          delete this.idIndex_[_i95], e=!0; break;
        }
      } return e;
    }}, {key: 'setLoader', value: function setLoader(t) {
      this.loader_=t;
    }}, {key: 'setUrl', value: function setUrl(t) {
      Ft(this.format_, 7), this.url_=t, this.setLoader(Gl(t, this.format_));
    }}]); return uc;
  }(gh); var dc=/* #__PURE__*/function(_uc) {
    _inherits(dc, _uc); var _super73=_createSuper(dc); function dc(t) {
      var _this84; _classCallCheck(this, dc); _this84=_super73.call(this, {attributions: t.attributions, wrapX: t.wrapX}), _this84.resolution=void 0, _this84.distance=void 0!==t.distance?t.distance:20, _this84.minDistance=t.minDistance||0, _this84.interpolationRatio=0, _this84.features=[], _this84.geometryFunction=t.geometryFunction||function(t) {
        var e=t.getGeometry(); return Ft('Point'==e.getType(), 10), e;
      }, _this84.createCustomCluster_=t.createCluster, _this84.source=null, _this84.boundRefresh_=_this84.refresh.bind(_assertThisInitialized(_this84)), _this84.updateDistance(_this84.distance, _this84.minDistance), _this84.setSource(t.source||null); return _this84;
    }_createClass(dc, [{key: 'clear', value: function clear(t) {
      this.features.length=0, _get(_getPrototypeOf(dc.prototype), 'clear', this).call(this, t);
    }}, {key: 'getDistance', value: function getDistance() {
      return this.distance;
    }}, {key: 'getSource', value: function getSource() {
      return this.source;
    }}, {key: 'loadFeatures', value: function loadFeatures(t, e, i) {
      this.source.loadFeatures(t, e, i), e!==this.resolution&&(this.resolution=e, this.refresh());
    }}, {key: 'setDistance', value: function setDistance(t) {
      this.updateDistance(t, this.minDistance);
    }}, {key: 'setMinDistance', value: function setMinDistance(t) {
      this.updateDistance(this.distance, t);
    }}, {key: 'getMinDistance', value: function getMinDistance() {
      return this.minDistance;
    }}, {key: 'setSource', value: function setSource(t) {
      this.source&&this.source.removeEventListener(w, this.boundRefresh_), this.source=t, t&&t.addEventListener(w, this.boundRefresh_), this.refresh();
    }}, {key: 'refresh', value: function refresh() {
      this.clear(), this.cluster(), this.addFeatures(this.features);
    }}, {key: 'updateDistance', value: function updateDistance(t, e) {
      var i=0===t?0:Math.min(e, t)/t; var n=t!==this.distance||this.interpolationRatio!==i; this.distance=t, this.minDistance=e, this.interpolationRatio=i, n&&this.refresh();
    }}, {key: 'cluster', value: function cluster() {
      if (void 0===this.resolution||!this.source) return; var t=[1/0, 1/0, -1/0, -1/0]; var e=this.distance*this.resolution; var i=this.source.getFeatures(); var n={}; for (var _r80=0, _s70=i.length; _r80<_s70; _r80++) {
        var _s71=i[_r80]; if (!(X(_s71)in n)) {
          var _i96=this.geometryFunction(_s71); if (_i96) {
            fe(_i96.getCoordinates(), t), re(t, e, t); var _r81=this.source.getFeaturesInExtent(t).filter(function(t) {
              var e=X(t); return !(e in n)&&(n[e]=!0, !0);
            }); this.features.push(this.createCluster(_r81, t));
          }
        }
      }
    }}, {key: 'createCluster', value: function createCluster(t, e) {
      var i=[0, 0]; for (var _e110=t.length-1; _e110>=0; --_e110) {
        var _n100=this.geometryFunction(t[_e110]); _n100?Fi(i, _n100.getCoordinates()):t.splice(_e110, 1);
      }ki(i, 1/t.length); var n=Pe(e); var r=this.interpolationRatio; var s=new dr([i[0]*(1-r)+n[0]*r, i[1]*(1-r)+n[1]*r]); return this.createCustomCluster_?this.createCustomCluster_(s, t):new Ot({geometry: s, features: t});
    }}]); return dc;
  }(uc); var gc=/* #__PURE__*/function(_Lt) {
    _inherits(gc, _Lt); var _super74=_createSuper(gc); function gc(t) {
      var _this85; _classCallCheck(this, gc); _this85=_super74.call(this, {tileCoord: t.tileCoord, loader: function loader() {
        return Promise.resolve(new Uint8Array(4));
      }, interpolate: t.interpolate, transition: t.transition}), _this85.pixelRatio_=t.pixelRatio, _this85.gutter_=t.gutter, _this85.reprojData_=null, _this85.reprojError_=null, _this85.reprojSize_=void 0, _this85.sourceTileGrid_=t.sourceTileGrid, _this85.targetTileGrid_=t.targetTileGrid, _this85.wrappedTileCoord_=t.wrappedTileCoord||t.tileCoord, _this85.sourceTiles_=[], _this85.sourcesListenerKeys_=null, _this85.sourceZ_=0; var e=_this85.targetTileGrid_.getTileCoordExtent(_this85.wrappedTileCoord_); var i=_this85.targetTileGrid_.getExtent(); var n=_this85.sourceTileGrid_.getExtent(); var r=i?Ae(e, i):e; if (0===Ce(r)) return _possibleConstructorReturn(_this85, void(_this85.state=et)); var s=t.sourceProj; var o=s.getExtent(); o&&(n=n?Ae(n, o):o); var a=_this85.targetTileGrid_.getResolution(_this85.wrappedTileCoord_[0]); var l=t.targetProj; var h=rh(s, l, r, a); if (!isFinite(h)||h<=0) return _possibleConstructorReturn(_this85, void(_this85.state=et)); var c=void 0!==t.errorThreshold?t.errorThreshold:oh; if (_this85.triangulation_=new ah(s, l, r, n, h*c, a), 0===_this85.triangulation_.getTriangles().length) return _possibleConstructorReturn(_this85, void(_this85.state=et)); _this85.sourceZ_=_this85.sourceTileGrid_.getZForResolution(h); var u=_this85.triangulation_.calculateSourceExtent(); if (n&&(s.canWrapX()?(u[1]=_i(u[1], n[1], n[3]), u[3]=_i(u[3], n[1], n[3])):u=Ae(u, n)), Ce(u)) {
        var _e111=_this85.sourceTileGrid_.getTileRangeForExtentAndZ(u, _this85.sourceZ_); var _i97=t.getTileFunction; for (var _t104=_e111.minX; _t104<=_e111.maxX; _t104++) {
          for (var _n101=_e111.minY; _n101<=_e111.maxY; _n101++) {
            var _e112=_i97(_this85.sourceZ_, _t104, _n101, _this85.pixelRatio_); _e112&&_this85.sourceTiles_.push(_e112);
          }
        }0===_this85.sourceTiles_.length&&(_this85.state=et);
      } else _this85.state=et; return _this85;
    }_createClass(gc, [{key: 'getSize', value: function getSize() {
      return this.reprojSize_;
    }}, {key: 'getData', value: function getData() {
      return this.reprojData_;
    }}, {key: 'getError', value: function getError() {
      return this.reprojError_;
    }}, {key: 'reproject_', value: function reproject_() {
      var _this86=this; var t=[]; if (this.sourceTiles_.forEach(function(e) {
        if (!e||e.getState()!==Q) return; var i=e.getSize(); var n=_this86.gutter_; var r; var s=Rt(e.getData()); r=s||Pt(Ct(e.getData())); var o=[i[0]+2*n, i[1]+2*n]; var a=r instanceof Float32Array; var l=o[0]*o[1]; var h=a?Float32Array:Uint8Array; var c=new h(r.buffer); var u=h.BYTES_PER_ELEMENT; var d=u*c.length/l; var g=c.byteLength/o[1]; var f=Math.floor(g/u/o[0]); var p=l*f; var m=c; if (c.length!==p) {
          m=new h(p); var _t105=0; var _e113=0; var _i98=o[0]*f; for (var _n102=0; _n102<o[1]; ++_n102) {
            for (var _n103=0; _n103<_i98; ++_n103)m[_t105++]=c[_e113+_n103]; _e113+=g/u;
          }
        }t.push({extent: _this86.sourceTileGrid_.getTileCoordExtent(e.tileCoord), data: new Uint8Array(m.buffer), dataType: h, bytesPerPixel: d, pixelSize: o});
      }), this.sourceTiles_.length=0, 0===t.length) this.state=tt; else {
        var _e114=this.wrappedTileCoord_[0]; var _i99=this.targetTileGrid_.getTileSize(_e114); var _n104='number'==typeof _i99?_i99:_i99[0]; var _r82='number'==typeof _i99?_i99:_i99[1]; var _s72=this.targetTileGrid_.getResolution(_e114); var _o69=this.sourceTileGrid_.getResolution(this.sourceZ_); var _a41=this.targetTileGrid_.getTileCoordExtent(this.wrappedTileCoord_); var _l26; var _h25; var _c11=t[0].bytesPerPixel; for (var _e115=Math.ceil(_c11/3)-1; _e115>=0; --_e115) {
          var _i100=[]; for (var _n105=0, _r83=t.length; _n105<_r83; ++_n105) {
            var _r84=t[_n105]; var _s73=_r84.data; var _o70=_r84.pixelSize; var _a42=_o70[0]; var _l27=_o70[1]; var _h26=_t(_a42, _l27, th); var _u14=_h26.createImageData(_a42, _l27); var _d15=_u14.data; var _g8=3*_e115; for (var _t106=0, _e116=_d15.length; _t106<_e116; _t106+=4)_d15[_t106]=_s73[_g8], _d15[_t106+1]=_s73[_g8+1], _d15[_t106+2]=_s73[_g8+2], _d15[_t106+3]=255, _g8+=_c11; _h26.putImageData(_u14, 0, 0), _i100.push({extent: _r84.extent, image: _h26.canvas});
          } var _u15=sh(_n104, _r82, this.pixelRatio_, _o69, this.sourceTileGrid_.getExtent(), _s72, _a41, this.triangulation_, _i100, this.gutter_, !1, !1); for (var _t107=0, _e117=_i100.length; _t107<_e117; ++_t107) {
            var _e118=_i100[_t107].image.getContext('2d'); yt(_e118), th.push(_e118.canvas);
          } var _d16=_u15.getContext('2d'); var _g9=_d16.getImageData(0, 0, _u15.width, _u15.height); yt(_d16), th.push(_u15), _l26||(_h25=new Uint8Array(_c11*_g9.width*_g9.height), _l26=new t[0].dataType(_h25.buffer)); var _f7=_g9.data; var _p5=3*_e115; for (var _t108=0, _e119=_f7.length; _t108<_e119; _t108+=4)255===_f7[_t108+3]?(_h25[_p5]=_f7[_t108], _h25[_p5+1]=_f7[_t108+1], _h25[_p5+2]=_f7[_t108+2]):(_h25[_p5]=0, _h25[_p5+1]=0, _h25[_p5+2]=0), _p5+=_c11;
        } this.reprojData_=_l26, this.reprojSize_=[Math.round(_n104*this.pixelRatio_), Math.round(_r82*this.pixelRatio_)], this.state=Q;
      } this.changed();
    }}, {key: 'load', value: function load() {
      var _this87=this; if (this.state!==$&&this.state!==tt) return; this.state=J, this.changed(); var t=0; this.sourcesListenerKeys_=[], this.sourceTiles_.forEach(function(e) {
        var i=e.getState(); if (i!==$&&i!==J) return; t++; var n=N(e, w, function() {
          var i=e.getState(); i!=Q&&i!=tt&&i!=et||(G(n), t--, 0===t&&(this.unlistenSources_(), this.reproject_()));
        }, _this87); _this87.sourcesListenerKeys_.push(n);
      }), 0===t?setTimeout(this.reproject_.bind(this), 0):this.sourceTiles_.forEach(function(t) {
        t.getState()==$&&t.load();
      });
    }}, {key: 'unlistenSources_', value: function unlistenSources_() {
      this.sourcesListenerKeys_.forEach(G), this.sourcesListenerKeys_=null;
    }}]); return gc;
  }(Lt); var fc=/* #__PURE__*/function(_Eh2) {
    _inherits(fc, _Eh2); var _super75=_createSuper(fc); function fc(t) {
      var _this88; _classCallCheck(this, fc); var e=void 0===t.projection?'EPSG:3857':t.projection; var i=t.tileGrid; void 0===i&&e&&(i=xh({extent: wh(e), maxResolution: t.maxResolution, maxZoom: t.maxZoom, minZoom: t.minZoom, tileSize: t.tileSize})), _this88=_super75.call(this, {cacheSize: .1, attributions: t.attributions, attributionsCollapsible: t.attributionsCollapsible, projection: e, tileGrid: i, opaque: t.opaque, state: t.state, wrapX: t.wrapX, transition: t.transition, interpolate: t.interpolate}), _this88.gutter_=void 0!==t.gutter?t.gutter:0, _this88.tileSize_=t.tileSize?ll(t.tileSize):null, _this88.tileSizes_=null, _this88.tileLoadingKeys_={}, _this88.loader_=t.loader, _this88.handleTileChange_=_this88.handleTileChange_.bind(_assertThisInitialized(_this88)), _this88.bandCount=void 0===t.bandCount?4:t.bandCount, _this88.tileGridForProjection_={}, _this88.tileCacheForProjection_={}; return _this88;
    }_createClass(fc, [{key: 'setTileSizes', value: function setTileSizes(t) {
      this.tileSizes_=t;
    }}, {key: 'getTileSize', value: function getTileSize(t) {
      if (this.tileSizes_) return this.tileSizes_[t]; if (this.tileSize_) return this.tileSize_; var e=this.getTileGrid(); return e?ll(e.getTileSize(t)):[256, 256];
    }}, {key: 'getGutterForProjection', value: function getGutterForProjection(t) {
      var e=this.getProjection(); return !e||fn(e, t)?this.gutter_:0;
    }}, {key: 'setLoader', value: function setLoader(t) {
      this.loader_=t;
    }}, {key: 'getReprojTile_', value: function getReprojTile_(t, e, i, n, r) {
      var _this89=this; var s=this.getTileCacheForProjection(n); var o=vl(t, e, i); if (s.containsKey(o)) {
        var _t109=s.get(o); if (_t109&&_t109.key==this.getKey()) return _t109;
      } var a=this.getTileGrid(); var l=Math.max.apply(null, a.getResolutions().map(function(t, e) {
        var i=ll(a.getTileSize(e)); var n=_this89.getTileSize(e); return Math.max(n[0]/i[0], n[1]/i[1]);
      })); var h=this.getTileGridForProjection(r); var c=this.getTileGridForProjection(n); var u=[t, e, i]; var d=this.getTileCoordForTileUrlFunction(u, n); var g=Object.assign({sourceProj: r, sourceTileGrid: h, targetProj: n, targetTileGrid: c, tileCoord: u, wrappedTileCoord: d, pixelRatio: l, gutter: this.getGutterForProjection(r), getTileFunction: function getTileFunction(t, e, i, n) {
        return _this89.getTile(t, e, i, n, r);
      }}, this.tileOptions); var f=new gc(g); return f.key=this.getKey(), f;
    }}, {key: 'getTile', value: function getTile(t, e, i, n, r) {
      var s=this.getProjection(); if (s&&r&&!fn(s, r)) return this.getReprojTile_(t, e, i, r, s); var o=this.getTileSize(t); var a=vl(t, e, i); if (this.tileCache.containsKey(a)) return this.tileCache.get(a); var l=this.loader_; var h=Object.assign({tileCoord: [t, e, i], loader: function loader() {
        return y(function() {
          return l(t, e, i);
        });
      }, size: o}, this.tileOptions); var c=new Lt(h); return c.key=this.getKey(), c.addEventListener(w, this.handleTileChange_), this.tileCache.set(a, c), c;
    }}, {key: 'handleTileChange_', value: function handleTileChange_(t) {
      var e=t.target; var i=X(e); var n=e.getState(); var r; n==J?(this.tileLoadingKeys_[i]=!0, r=hh):i in this.tileLoadingKeys_&&(delete this.tileLoadingKeys_[i], r=n==tt?uh:n==Q?ch:void 0), r&&this.dispatchEvent(new Th(r, e));
    }}, {key: 'getTileGridForProjection', value: function getTileGridForProjection(t) {
      var e=this.getProjection(); if (this.tileGrid&&(!e||fn(e, t))) return this.tileGrid; var i=X(t); return i in this.tileGridForProjection_||(this.tileGridForProjection_[i]=mh(t)), this.tileGridForProjection_[i];
    }}, {key: 'setTileGridForProjection', value: function setTileGridForProjection(t, e) {
      var i=an(t); if (i) {
        var _t110=X(i); _t110 in this.tileGridForProjection_||(this.tileGridForProjection_[_t110]=e);
      }
    }}, {key: 'getTileCacheForProjection', value: function getTileCacheForProjection(t) {
      var e=this.getProjection(); if (!e||fn(e, t)) return this.tileCache; var i=X(t); return i in this.tileCacheForProjection_||(this.tileCacheForProjection_[i]=new Rl(.1)), this.tileCacheForProjection_[i];
    }}, {key: 'expireCache', value: function expireCache(t, e) {
      var i=this.getTileCacheForProjection(t); this.tileCache.expireCache(this.tileCache==i?e:{}); for (var _t111 in this.tileCacheForProjection_) {
        var _n106=this.tileCacheForProjection_[_t111]; _n106.expireCache(_n106==i?e:{});
      }
    }}, {key: 'clear', value: function clear() {
      _get(_getPrototypeOf(fc.prototype), 'clear', this).call(this); for (var _t112 in this.tileCacheForProjection_) this.tileCacheForProjection_[_t112].clear();
    }}]); return fc;
  }(Eh); function pc(t, e) {
    if (!t) return !1; if (!0===t) return !0; if (3!==e.getSamplesPerPixel()) return !1; var i=e.fileDirectory.PhotometricInterpretation; var n=GeoTIFF.globals.photometricInterpretations; return i===n.CMYK||i===n.YCbCr||i===n.CIELab||i===n.ICCLab;
  } var mc='STATISTICS_MAXIMUM'; var _c='STATISTICS_MINIMUM'; var yc; function xc(t) {
    try {
      return t.getBoundingBox();
    } catch (e) {
      var _i101=t.fileDirectory; return [0, 0, _i101.ImageWidth, _i101.ImageLength];
    }
  } function vc(t) {
    try {
      return t.getOrigin().slice(0, 2);
    } catch (e) {
      return [0, t.fileDirectory.ImageLength];
    }
  } function Sc(t, e) {
    try {
      return t.getResolution(e);
    } catch (i) {
      return [e.fileDirectory.ImageWidth/t.fileDirectory.ImageWidth, e.fileDirectory.ImageHeight/t.fileDirectory.ImageHeight];
    }
  } function wc(t) {
    var e=t.geoKeys; if (!e) return null; if (e.ProjectedCSTypeGeoKey&&32767!==e.ProjectedCSTypeGeoKey) {
      var _t113='EPSG:'+e.ProjectedCSTypeGeoKey; var _i102=an(_t113); if (!_i102) {
        var _n107=Ze(e.ProjLinearUnitsGeoKey); _n107&&(_i102=new Ke({code: _t113, units: _n107}));
      } return _i102;
    } if (e.GeographicTypeGeoKey&&32767!==e.GeographicTypeGeoKey) {
      var _t114='EPSG:'+e.GeographicTypeGeoKey; var _i103=an(_t114); if (!_i103) {
        var _n108=Ze(e.GeogAngularUnitsGeoKey); _n108&&(_i103=new Ke({code: _t114, units: _n108}));
      } return _i103;
    } return null;
  } function Tc(t) {
    return t.getImageCount().then(function(e) {
      var i=new Array(e); for (var _n109=0; _n109<e; ++_n109)i[_n109]=t.getImage(_n109); return Promise.all(i);
    });
  } function Ec(t, e) {
    var i; return i=t.blob?GeoTIFF.fromBlob(t.blob):t.overviews?GeoTIFF.fromUrls(t.url, t.overviews, e):GeoTIFF.fromUrl(t.url, e), i.then(Tc);
  } function Cc(t, e, i, n, r) {
    if (Array.isArray(t)) {
      var _s74=t.length; if (!Array.isArray(e)||_s74!=e.length) {
        var _t115=new Error(n); throw r(_t115), _t115;
      } for (var _o71=0; _o71<_s74; ++_o71)Cc(t[_o71], e[_o71], i, n, r);
    } else if (Math.abs(t-e)>i*t) throw new Error(n);
  } function Rc(t) {
    return t instanceof Int8Array?127:t instanceof Uint8Array||t instanceof Uint8ClampedArray?255:t instanceof Int16Array?32767:t instanceof Uint16Array?65535:t instanceof Int32Array?2147483647:t instanceof Uint32Array?4294967295:t instanceof Float32Array?34e37:255;
  } var bc=/* #__PURE__*/function(_fc) {
    _inherits(bc, _fc); var _super76=_createSuper(bc); function bc(t) {
      var _this90; _classCallCheck(this, bc); _this90=_super76.call(this, {state: 'loading', tileGrid: null, projection: null, opaque: t.opaque, transition: t.transition, interpolate: !1!==t.interpolate, wrapX: t.wrapX}), _this90.sourceInfo_=t.sources; var e=_this90.sourceInfo_.length; _this90.sourceOptions_=t.sourceOptions, _this90.sourceImagery_=new Array(e), _this90.sourceMasks_=new Array(e), _this90.resolutionFactors_=new Array(e), _this90.samplesPerPixel_, _this90.nodataValues_, _this90.metadata_, _this90.normalize_=!1!==t.normalize, _this90.addAlpha_=!1, _this90.error_=null, _this90.convertToRGB_=t.convertToRGB||!1, _this90.setKey(_this90.sourceInfo_.map(function(t) {
        return t.url;
      }).join(',')); var i=_assertThisInitialized(_this90); var n=new Array(e); for (var _t116=0; _t116<e; ++_t116)n[_t116]=Ec(_this90.sourceInfo_[_t116], _this90.sourceOptions_); Promise.all(n).then(function(t) {
        i.configure_(t);
      })['catch'](function(t) {
        Qi(t), i.error_=t, i.setState('error');
      }); return _this90;
    }_createClass(bc, [{key: 'getError', value: function getError() {
      return this.error_;
    }}, {key: 'determineProjection', value: function determineProjection(t) {
      var e=t[0]; for (var _t117=e.length-1; _t117>=0; --_t117) {
        var _i104=wc(e[_t117]); if (_i104) {
          this.projection=_i104; break;
        }
      }
    }}, {key: 'configure_', value: function configure_(t) {
      var _this91=this; var e; var i; var n; var r; var s; var o=new Array(t.length); var a=new Array(t.length); var l=new Array(t.length); var h=0; var c=t.length; var _loop2=function _loop2() {
        var c=[]; var d=[]; t[_u16].forEach(function(t) {
4==(4&(t.fileDirectory.NewSubfileType||0))?d.push(t):c.push(t);
        }); var g=c.length; if (d.length>0&&d.length!==g) throw new Error('Expected one mask per image found '.concat(d.length, ' masks and ').concat(g, ' images')); var f; var p; var m=new Array(g); var _=new Array(g); var y=new Array(g); a[_u16]=new Array(g), l[_u16]=new Array(g); for (var _t123=0; _t123<g; ++_t123) {
          var _e123=c[_t123]; var _i106=_e123.getGDALNoData(); l[_u16][_t123]=_e123.getGDALMetadata(0), a[_u16][_t123]=_i106; var _n110=_this91.sourceInfo_[_u16].bands; o[_u16]=_n110?_n110.length:_e123.getSamplesPerPixel(); var _r85=g-(_t123+1); f||(f=xc(_e123)), p||(p=vc(_e123)); var _s75=Sc(_e123, c[0]); y[_r85]=_s75[0]; var _h27=[_e123.getTileWidth(), _e123.getTileHeight()]; _h27[0]!==_h27[1]&&_h27[1]<256&&(_h27[0]=256, _h27[1]=256), m[_r85]=_h27; var _d17=_s75[0]/Math.abs(_s75[1]); _[_r85]=[_h27[0], _h27[1]/_d17];
        } if (e?Ae(e, f, e):e=f, i) {
          Cc(i, p, 0, 'Origin mismatch for source '.concat(_u16, ', got [').concat(p, '] but expected [').concat(i, ']'), _this91.viewRejector);
        } else i=p; if (s) {
          s.length-h>y.length&&(h=s.length-y.length); var _t124=s[s.length-1]/y[y.length-1]; _this91.resolutionFactors_[_u16]=_t124; var _e124=y.map(function(e) {
            return e*_t124;
          }); var _i107='Resolution mismatch for source '.concat(_u16, ', got [').concat(_e124, '] but expected [').concat(s, ']'); Cc(s.slice(h, s.length), _e124, .02, _i107, _this91.viewRejector);
        } else s=y, _this91.resolutionFactors_[_u16]=1; n?Cc(n.slice(h, n.length), _, .01, 'Tile size mismatch for source '.concat(_u16), _this91.viewRejector):n=_, r?Cc(r.slice(h, r.length), m, 0, 'Tile size mismatch for source '.concat(_u16), _this91.viewRejector):r=m, _this91.sourceImagery_[_u16]=c.reverse(), _this91.sourceMasks_[_u16]=d.reverse();
      }; for (var _u16=0; _u16<c; ++_u16) {
        _loop2();
      } for (var _t118=0, _e120=this.sourceImagery_.length; _t118<_e120; ++_t118) {
        var _e121=this.sourceImagery_[_t118]; for (;_e121.length<s.length;)_e121.unshift(void 0);
      } this.getProjection()||this.determineProjection(t), this.samplesPerPixel_=o, this.nodataValues_=a, this.metadata_=l; t:for (var _t119=0; _t119<c; ++_t119) {
        if (void 0!==this.sourceInfo_[_t119].nodata) {
          this.addAlpha_=!0; break;
        } if (this.sourceMasks_[_t119].length) {
          this.addAlpha_=!0; break;
        } var _e122=a[_t119]; var _i105=this.sourceInfo_[_t119].bands; if (_i105) {
          for (var _t120=0; _t120<_i105.length; ++_t120) {
            if (null!==_e122[_i105[_t120]-1]) {
              this.addAlpha_=!0; break t;
            }
          }
        } else {
          for (var _t121=0; _t121<_e122.length; ++_t121) {
            if (null!==_e122[_t121]) {
              this.addAlpha_=!0; break t;
            }
          }
        }
      } var u=this.addAlpha_?1:0; for (var _t122=0; _t122<c; ++_t122)u+=o[_t122]; this.bandCount=u; var d=new ph({extent: e, minZoom: h, origin: i, resolutions: s, tileSizes: n}); this.tileGrid=d, this.setTileSizes(r), this.setLoader(this.loadTile_.bind(this)), this.setState('ready'); 2===s.length?s=[s[0], s[1], s[1]/2]:1===s.length&&(s=[2*s[0], s[0], s[0]/2]), this.viewResolver({showFullExtent: !0, projection: this.projection, resolutions: s, center: wn(Pe(e), this.projection), extent: En(e, this.projection), zoom: 1});
    }}, {key: 'loadTile_', value: function loadTile_(t, e, i) {
      var _this92=this; var n=this.getTileSize(t); var r=this.sourceImagery_.length; var s=new Array(2*r); var o=this.nodataValues_; var a=this.sourceInfo_; var l=(yc||(yc=new GeoTIFF.Pool()), yc); var _loop3=function _loop3(_h28) {
        var c=a[_h28]; var u=_this92.resolutionFactors_[_h28]; var d=[Math.round(e*(n[0]*u)), Math.round(i*(n[1]*u)), Math.round((e+1)*(n[0]*u)), Math.round((i+1)*(n[1]*u))]; var g=_this92.sourceImagery_[_h28][t]; var f; var p; c.bands&&(f=c.bands.map(function(t) {
          return t-1;
        })), p='nodata'in c&&null!==c.nodata?c.nodata:f?f.map(function(t) {
          return o[_h28][t];
        }):o[_h28]; var m={window: d, width: n[0], height: n[1], samples: f, fillValue: p, pool: l, interleave: !1}; pc(_this92.convertToRGB_, g)?s[_h28]=g.readRGB(m):s[_h28]=g.readRasters(m); var _=r+_h28; var y=_this92.sourceMasks_[_h28][t]; y?s[_]=y.readRasters({window: d, width: n[0], height: n[1], samples: [0], pool: l, interleave: !1}):s[_]=Promise.resolve(null);
      }; for (var _h28=0; _h28<r; ++_h28) {
        _loop3(_h28);
      } return Promise.all(s).then(this.composeTile_.bind(this, n))['catch'](function(t) {
        throw Qi(t), t;
      });
    }}, {key: 'composeTile_', value: function composeTile_(t, e) {
      var i=this.metadata_; var n=this.sourceInfo_; var r=this.sourceImagery_.length; var s=this.bandCount; var o=this.samplesPerPixel_; var a=this.nodataValues_; var l=this.normalize_; var h=this.addAlpha_; var c=t[0]*t[1]; var u=c*s; var d; d=l?new Uint8Array(u):new Float32Array(u); var g=0; for (var _t125=0; _t125<c; ++_t125) {
        var _s76=h; for (var _c12=0; _c12<r; ++_c12) {
          var _u17=n[_c12]; var _p6=void 0; var _m4=void 0; var _2=_u17.min; var _y2=_u17.max; if (l) {
            var _t126=i[_c12][0]; void 0===_2&&(_2=_t126&&_c in _t126?parseFloat(_t126.STATISTICS_MINIMUM):(f=e[_c12][0])instanceof Int8Array?-128:f instanceof Int16Array?-32768:f instanceof Int32Array?-2147483648:f instanceof Float32Array?12e-39:0), void 0===_y2&&(_y2=_t126&&mc in _t126?parseFloat(_t126.STATISTICS_MAXIMUM):Rc(e[_c12][0])), _p6=255/(_y2-_2), _m4=-_2*_p6;
          } for (var _i108=0; _i108<o[_c12]; ++_i108) {
            var _n111=e[_c12][_i108][_t125]; var _r86=void 0; if (_r86=l?_i(_p6*_n111+_m4, 0, 255):_n111, h) {
              var _t127=_u17.nodata; if (void 0===_t127) {
                var _e125=void 0; _e125=_u17.bands?_u17.bands[_i108]-1:_i108, _t127=a[_c12][_e125];
              } var _e126=isNaN(_t127); (!_e126&&_n111!==_t127||_e126&&!isNaN(_n111))&&(_s76=!1, d[g]=_r86);
            } else d[g]=_r86; g++;
          } if (!_s76) {
            var _i109=e[r+_c12]; _i109&&!_i109[0][_t125]&&(_s76=!0);
          }
        }h&&(_s76||(d[g]=255), g++);
      } var f; return d;
    }}]); return bc;
  }(fc); bc.prototype.getView; var Pc=bc; var Ic=/* #__PURE__*/function(_os) {
    _inherits(Ic, _os); var _super77=_createSuper(Ic); function Ic(t, e, i, n, r, s, o) {
      var _this93; _classCallCheck(this, Ic); _this93=_super77.call(this, e, i, n, r, s, o), _this93.zoomifyImage_=null, _this93.tileSize_=t; return _this93;
    }_createClass(Ic, [{key: 'getImage', value: function getImage() {
      if (this.zoomifyImage_) return this.zoomifyImage_; var t=_get(_getPrototypeOf(Ic.prototype), 'getImage', this).call(this); if (this.state==Q) {
        var _e127=this.tileSize_; if (t.width==_e127[0]&&t.height==_e127[1]) return this.zoomifyImage_=t, t; var _i110=_t(_e127[0], _e127[1]); return _i110.drawImage(t, 0, 0), this.zoomifyImage_=_i110.canvas, _i110.canvas;
      } return t;
    }}]); return Ic;
  }(os); var Lc=/* #__PURE__*/function(_Ah3) {
    _inherits(Lc, _Ah3); var _super78=_createSuper(Lc); function Lc(t) {
      var _this94; _classCallCheck(this, Lc); var e=t.size; var i=void 0!==t.tierSizeCalculation?t.tierSizeCalculation:'default'; var n=t.tilePixelRatio||1; var r=e[0]; var s=e[1]; var o=[]; var a=t.tileSize||Ko; var l=a*n; switch (i) {
        case 'default': for (;r>l||s>l;)o.push([Math.ceil(r/l), Math.ceil(s/l)]), l+=l; break; case 'truncated': var _t128=r; var _e128=s; for (;_t128>l||_e128>l;)o.push([Math.ceil(_t128/l), Math.ceil(_e128/l)]), _t128>>=1, _e128>>=1; break; default: Ft(!1, 53);
      }o.push([1, 1]), o.reverse(); var h=[n]; var c=[0]; for (var _t129=1, _e129=o.length; _t129<_e129; _t129++)h.push(n<<_t129), c.push(o[_t129-1][0]*o[_t129-1][1]+c[_t129-1]); h.reverse(); var u=new ph({tileSize: a, extent: t.extent||[0, -s, r, 0], resolutions: h}); var d=t.url; !d||d.includes('{TileGroup}')||d.includes('{tileIndex}')||(d+='{TileGroup}/{z}-{x}-{y}.jpg'); var g=Ih(d); var f=a*n; var p=bh(g.map(function(t) {
        return function(e, i, n) {
          if (!e) return; var r=e[0]; var s=e[1]; var a=e[2]; var l=s+a*o[r][0]; var h={z: r, x: s, y: a, tileIndex: l, TileGroup: 'TileGroup'+((l+c[r])/f|0)}; return t.replace(/\{(\w+?)\}/g, function(t, e) {
            return h[e];
          });
        };
      })); var m=Ic.bind(null, ll(a*n)); _this94=_super78.call(this, {attributions: t.attributions, cacheSize: t.cacheSize, crossOrigin: t.crossOrigin, interpolate: t.interpolate, projection: t.projection, tilePixelRatio: n, reprojectionErrorThreshold: t.reprojectionErrorThreshold, tileClass: m, tileGrid: u, tileUrlFunction: p, transition: t.transition}), _this94.zDirection=t.zDirection; var _=p(u.getTileCoordForCoordAndResolution(Pe(u.getExtent()), h[h.length-1]), 1, null); var y=new Image(); y.addEventListener('error', function() {
        f=a, _this94.changed();
      }), y.src=_; return _this94;
    } return _createClass(Lc);
  }(Ah); var Fc='version1'; var Mc='version2'; var Ac='version3'; var Oc={}; Oc[Fc]={level0: {supports: [], formats: [], qualities: ['native']}, level1: {supports: ['regionByPx', 'sizeByW', 'sizeByH', 'sizeByPct'], formats: ['jpg'], qualities: ['native']}, level2: {supports: ['regionByPx', 'regionByPct', 'sizeByW', 'sizeByH', 'sizeByPct', 'sizeByConfinedWh', 'sizeByWh'], formats: ['jpg', 'png'], qualities: ['native', 'color', 'grey', 'bitonal']}}, Oc[Mc]={level0: {supports: [], formats: ['jpg'], qualities: ['default']}, level1: {supports: ['regionByPx', 'sizeByW', 'sizeByH', 'sizeByPct'], formats: ['jpg'], qualities: ['default']}, level2: {supports: ['regionByPx', 'regionByPct', 'sizeByW', 'sizeByH', 'sizeByPct', 'sizeByConfinedWh', 'sizeByDistortedWh', 'sizeByWh'], formats: ['jpg', 'png'], qualities: ['default', 'bitonal']}}, Oc[Ac]={level0: {supports: [], formats: ['jpg'], qualities: ['default']}, level1: {supports: ['regionByPx', 'regionSquare', 'sizeByW', 'sizeByH', 'sizeByWh'], formats: ['jpg'], qualities: ['default']}, level2: {supports: ['regionByPx', 'regionSquare', 'regionByPct', 'sizeByW', 'sizeByH', 'sizeByPct', 'sizeByConfinedWh', 'sizeByWh'], formats: ['jpg', 'png'], qualities: ['default']}}, Oc.none={none: {supports: [], formats: [], qualities: []}}; var Nc=/^https?:\/\/library\.stanford\.edu\/iiif\/image-api\/(?:1\.1\/)?compliance\.html#level[0-2]$/; var Dc=/^https?:\/\/iiif\.io\/api\/image\/2\/level[0-2](?:\.json)?$/; var Gc=/(^https?:\/\/iiif\.io\/api\/image\/3\/level[0-2](?:\.json)?$)|(^level[0-2]$)/; var kc={}; kc[Fc]=function(t) {
    var e=t.getComplianceLevelSupportedFeatures(); return void 0===e&&(e=Oc[Fc].level0), {url: void 0===t.imageInfo['@id']?void 0:t.imageInfo['@id'].replace(/\/?(?:info\.json)?$/g, ''), supports: e.supports, formats: [].concat(_toConsumableArray(e.formats), [void 0===t.imageInfo.formats?[]:t.imageInfo.formats]), qualities: [].concat(_toConsumableArray(e.qualities), [void 0===t.imageInfo.qualities?[]:t.imageInfo.qualities]), resolutions: t.imageInfo.scale_factors, tileSize: void 0!==t.imageInfo.tile_width?void 0!==t.imageInfo.tile_height?[t.imageInfo.tile_width, t.imageInfo.tile_height]:[t.imageInfo.tile_width, t.imageInfo.tile_width]:null!=t.imageInfo.tile_height?[t.imageInfo.tile_height, t.imageInfo.tile_height]:void 0};
  }, kc[Mc]=function(t) {
    var e=t.getComplianceLevelSupportedFeatures(); var i=Array.isArray(t.imageInfo.profile)&&t.imageInfo.profile.length>1; var n=i&&t.imageInfo.profile[1].supports?t.imageInfo.profile[1].supports:[]; var r=i&&t.imageInfo.profile[1].formats?t.imageInfo.profile[1].formats:[]; var s=i&&t.imageInfo.profile[1].qualities?t.imageInfo.profile[1].qualities:[]; return {url: t.imageInfo['@id'].replace(/\/?(?:info\.json)?$/g, ''), sizes: void 0===t.imageInfo.sizes?void 0:t.imageInfo.sizes.map(function(t) {
      return [t.width, t.height];
    }), tileSize: void 0===t.imageInfo.tiles?void 0:[t.imageInfo.tiles.map(function(t) {
      return t.width;
    })[0], t.imageInfo.tiles.map(function(t) {
      return void 0===t.height?t.width:t.height;
    })[0]], resolutions: void 0===t.imageInfo.tiles?void 0:t.imageInfo.tiles.map(function(t) {
      return t.scaleFactors;
    })[0], supports: [].concat(_toConsumableArray(e.supports), _toConsumableArray(n)), formats: [].concat(_toConsumableArray(e.formats), _toConsumableArray(r)), qualities: [].concat(_toConsumableArray(e.qualities), _toConsumableArray(s))};
  }, kc[Ac]=function(t) {
    var e=t.getComplianceLevelSupportedFeatures(); var i=void 0===t.imageInfo.extraFormats?e.formats:[].concat(_toConsumableArray(e.formats), _toConsumableArray(t.imageInfo.extraFormats)); var n=void 0!==t.imageInfo.preferredFormats&&Array.isArray(t.imageInfo.preferredFormats)&&t.imageInfo.preferredFormats.length>0?t.imageInfo.preferredFormats.filter(function(t) {
      return ['jpg', 'png', 'gif'].includes(t);
    }).reduce(function(t, e) {
      return void 0===t&&i.includes(e)?e:t;
    }, void 0):void 0; return {url: t.imageInfo.id, sizes: void 0===t.imageInfo.sizes?void 0:t.imageInfo.sizes.map(function(t) {
      return [t.width, t.height];
    }), tileSize: void 0===t.imageInfo.tiles?void 0:[t.imageInfo.tiles.map(function(t) {
      return t.width;
    })[0], t.imageInfo.tiles.map(function(t) {
      return t.height;
    })[0]], resolutions: void 0===t.imageInfo.tiles?void 0:t.imageInfo.tiles.map(function(t) {
      return t.scaleFactors;
    })[0], supports: void 0===t.imageInfo.extraFeatures?e.supports:[].concat(_toConsumableArray(e.supports), _toConsumableArray(t.imageInfo.extraFeatures)), formats: i, qualities: void 0===t.imageInfo.extraQualities?e.qualities:[].concat(_toConsumableArray(e.qualities), _toConsumableArray(t.imageInfo.extraQualities)), preferredFormat: n};
  }; var jc=/* #__PURE__*/function() {
    function jc(t) {
      _classCallCheck(this, jc); this.setImageInfo(t);
    }_createClass(jc, [{key: 'setImageInfo', value: function setImageInfo(t) {
      this.imageInfo='string'==typeof t?JSON.parse(t):t;
    }}, {key: 'getImageApiVersion', value: function getImageApiVersion() {
      if (void 0===this.imageInfo) return; var t=this.imageInfo['@context']||'ol-no-context'; 'string'==typeof t&&(t=[t]); for (var _e130=0; _e130<t.length; _e130++) {
        switch (t[_e130]) {
          case 'http://library.stanford.edu/iiif/image-api/1.1/context.json': case 'http://iiif.io/api/image/1/context.json': return Fc; case 'http://iiif.io/api/image/2/context.json': return Mc; case 'http://iiif.io/api/image/3/context.json': return Ac; case 'ol-no-context': if (this.getComplianceLevelEntryFromProfile(Fc)&&this.imageInfo.identifier) return Fc;
        }
      }Ft(!1, 61);
    }}, {key: 'getComplianceLevelEntryFromProfile', value: function getComplianceLevelEntryFromProfile(t) {
      if (void 0!==this.imageInfo&&void 0!==this.imageInfo.profile) {
        switch (void 0===t&&(t=this.getImageApiVersion()), t) {
          case Fc: if (Nc.test(this.imageInfo.profile)) return this.imageInfo.profile; break; case Ac: if (Gc.test(this.imageInfo.profile)) return this.imageInfo.profile; break; case Mc: if ('string'==typeof this.imageInfo.profile&&Dc.test(this.imageInfo.profile)) return this.imageInfo.profile; if (Array.isArray(this.imageInfo.profile)&&this.imageInfo.profile.length>0&&'string'==typeof this.imageInfo.profile[0]&&Dc.test(this.imageInfo.profile[0])) return this.imageInfo.profile[0];
        }
      }
    }}, {key: 'getComplianceLevelFromProfile', value: function getComplianceLevelFromProfile(t) {
      var e=this.getComplianceLevelEntryFromProfile(t); if (void 0===e) return; var i=e.match(/level[0-2](?:\.json)?$/g); return Array.isArray(i)?i[0].replace('.json', ''):void 0;
    }}, {key: 'getComplianceLevelSupportedFeatures', value: function getComplianceLevelSupportedFeatures() {
      if (void 0===this.imageInfo) return; var t=this.getImageApiVersion(); var e=this.getComplianceLevelFromProfile(t); return void 0===e?Oc.none.none:Oc[t][e];
    }}, {key: 'getTileSourceOptions', value: function getTileSourceOptions(t) {
      var e=t||{}; var i=this.getImageApiVersion(); if (void 0===i) return; var n=void 0===i?void 0:kc[i](this); return void 0!==n?{url: n.url, version: i, size: [this.imageInfo.width, this.imageInfo.height], sizes: n.sizes, format: void 0!==e.format&&n.formats.includes(e.format)?e.format:void 0!==n.preferredFormat?n.preferredFormat:'jpg', supports: n.supports, quality: e.quality&&n.qualities.includes(e.quality)?e.quality:n.qualities.includes('native')?'native':'default', resolutions: Array.isArray(n.resolutions)?n.resolutions.sort(function(t, e) {
        return e-t;
      }):void 0, tileSize: n.tileSize}:void 0;
    }}]); return jc;
  }(); function Bc(t) {
    return t.toLocaleString('en', {maximumFractionDigits: 10});
  } var zc=/* #__PURE__*/function(_Ah4) {
    _inherits(zc, _Ah4); var _super79=_createSuper(zc); function zc(t) {
      var _this95; _classCallCheck(this, zc); var e=t||{}; var i=e.url||''; i+=i.lastIndexOf('/')===i.length-1||''===i?'':'/'; var n=e.version||Mc; var r=e.sizes||[]; var s=e.size; Ft(null!=s&&Array.isArray(s)&&2==s.length&&!isNaN(s[0])&&s[0]>0&&!isNaN(s[1])&&s[1]>0, 60); var o=s[0]; var a=s[1]; var l=e.tileSize; var h=e.tilePixelRatio||1; var c=e.format||'jpg'; var u=e.quality||(e.version==Fc?'native':'default'); var d=e.resolutions||[]; var g=e.supports||[]; var f=e.extent||[0, -a, o, 0]; var p=null!=r&&Array.isArray(r)&&r.length>0; var m=void 0!==l&&('number'==typeof l&&Number.isInteger(l)&&l>0||Array.isArray(l)&&l.length>0); var _=null!=g&&Array.isArray(g)&&(g.includes('regionByPx')||g.includes('regionByPct'))&&(g.includes('sizeByWh')||g.includes('sizeByH')||g.includes('sizeByW')||g.includes('sizeByPct')); var y; var x; var v; if (d.sort(function(t, e) {
        return e-t;
      }), m||_) {
        if (null!=l&&('number'==typeof l&&Number.isInteger(l)&&l>0?(y=l, x=l):Array.isArray(l)&&l.length>0&&((1==l.length||null==l[1]&&Number.isInteger(l[0]))&&(y=l[0], x=l[0]), 2==l.length&&(Number.isInteger(l[0])&&Number.isInteger(l[1])?(y=l[0], x=l[1]):null==l[0]&&Number.isInteger(l[1])&&(y=l[1], x=l[1])))), void 0!==y&&void 0!==x||(y=Ko, x=Ko), 0==d.length) {
          v=Math.max(Math.ceil(Math.log(o/y)/Math.LN2), Math.ceil(Math.log(a/x)/Math.LN2)); for (var _t130=v; _t130>=0; _t130--)d.push(Math.pow(2, _t130));
        } else {
          var _t131=Math.max.apply(Math, _toConsumableArray(d)); v=Math.round(Math.log(_t131)/Math.LN2);
        }
      } else if (y=o, x=a, d=[], p) {
        r.sort(function(t, e) {
          return t[0]-e[0];
        }), v=-1; var _t132=[]; for (var _e131=0; _e131<r.length; _e131++) {
          var _i111=o/r[_e131][0]; d.length>0&&d[d.length-1]==_i111?_t132.push(_e131):(d.push(_i111), v++);
        } if (_t132.length>0) for (var _e132=0; _e132<_t132.length; _e132++)r.splice(_t132[_e132]-_e132, 1);
      } else d.push(1), r.push([o, a]), v=0; var S=new ph({tileSize: [y, x], extent: f, origin: Oe(f), resolutions: d}); var w=Ic.bind(null, ll(l||256).map(function(t) {
        return t*h;
      })); _this95=_super79.call(this, {attributions: e.attributions, attributionsCollapsible: e.attributionsCollapsible, cacheSize: e.cacheSize, crossOrigin: e.crossOrigin, interpolate: e.interpolate, projection: e.projection, reprojectionErrorThreshold: e.reprojectionErrorThreshold, state: e.state, tileClass: w, tileGrid: S, tilePixelRatio: e.tilePixelRatio, tileUrlFunction: function tileUrlFunction(t, e, s) {
        var l; var h; var f=t[0]; if (f>v) return; var S=t[1]; var w=t[2]; var T=d[f]; if (!(void 0===S||void 0===w||void 0===T||S<0||Math.ceil(o/T/y)<=S||w<0||Math.ceil(a/T/x)<=w)) {
          if (_||m) {
            var _t133=S*y*T; var _e133=w*x*T; var _i112=y*T; var _r87=x*T; var _s77=y; var _c13=x; if (_t133+_i112>o&&(_i112=o-_t133), _e133+_r87>a&&(_r87=a-_e133), _t133+y*T>o&&(_s77=Math.floor((o-_t133+T-1)/T)), _e133+x*T>a&&(_c13=Math.floor((a-_e133+T-1)/T)), 0==_t133&&_i112==o&&0==_e133&&_r87==a)l='full'; else if (!_||g.includes('regionByPx'))l=_t133+','+_e133+','+_i112+','+_r87; else if (g.includes('regionByPct')) {
              l='pct:'+Bc(_t133/o*100)+','+Bc(_e133/a*100)+','+Bc(_i112/o*100)+','+Bc(_r87/a*100);
            }n!=Ac||_&&!g.includes('sizeByWh')?!_||g.includes('sizeByW')?h=_s77+',':g.includes('sizeByH')?h=','+_c13:g.includes('sizeByWh')?h=_s77+','+_c13:g.includes('sizeByPct')&&(h='pct:'+Bc(100/T)):h=_s77+','+_c13;
          } else if (l='full', p) {
            var _t134=r[f][0]; var _e134=r[f][1]; h=n==Ac?_t134==o&&_e134==a?'max':_t134+','+_e134:_t134==o?'full':_t134+',';
          } else h=n==Ac?'max':'full'; return i+l+'/'+h+'/0/'+u+'.'+c;
        }
      }, transition: e.transition}), _this95.zDirection=e.zDirection; return _this95;
    } return _createClass(zc);
  }(Ah); var Uc=/* #__PURE__*/function(_$r3) {
    _inherits(Uc, _$r3); var _super80=_createSuper(Uc); function Uc(t, e, i, n, r, s, o) {
      var _this96; _classCallCheck(this, Uc); var a=t.getExtent(); var l=e.getExtent(); var h=l?Ae(i, l):i; var c=nh(t, e, Pe(h), n); var u=new ah(t, e, h, a, .5*c, n); var d=s(u.calculateSourceExtent(), c, r); var g=d?Jr:is; var f=d?d.getPixelRatio():1; _this96=_super80.call(this, i, n, f, g), _this96.targetProj_=e, _this96.maxSourceExtent_=a, _this96.triangulation_=u, _this96.targetResolution_=n, _this96.targetExtent_=i, _this96.sourceImage_=d, _this96.sourcePixelRatio_=f, _this96.interpolate_=o, _this96.canvas_=null, _this96.sourceListenerKey_=null; return _this96;
    }_createClass(Uc, [{key: 'disposeInternal', value: function disposeInternal() {
      this.state==Qr&&this.unlistenSource_(), _get(_getPrototypeOf(Uc.prototype), 'disposeInternal', this).call(this);
    }}, {key: 'getImage', value: function getImage() {
      return this.canvas_;
    }}, {key: 'getProjection', value: function getProjection() {
      return this.targetProj_;
    }}, {key: 'reproject_', value: function reproject_() {
      var t=this.sourceImage_.getState(); if (t==ts) {
        var _t135=De(this.targetExtent_)/this.targetResolution_; var _e135=Me(this.targetExtent_)/this.targetResolution_; this.canvas_=sh(_t135, _e135, this.sourcePixelRatio_, this.sourceImage_.getResolution(), this.maxSourceExtent_, this.targetResolution_, this.targetExtent_, this.triangulation_, [{extent: this.sourceImage_.getExtent(), image: this.sourceImage_.getImage()}], 0, void 0, this.interpolate_);
      } this.state=t, this.changed();
    }}, {key: 'load', value: function load() {
      if (this.state==Jr) {
        this.state=Qr, this.changed(); var _t136=this.sourceImage_.getState(); _t136==ts||_t136==es?this.reproject_():(this.sourceListenerKey_=N(this.sourceImage_, w, function(t) {
          var e=this.sourceImage_.getState(); e!=ts&&e!=es||(this.unlistenSource_(), this.reproject_());
        }, this), this.sourceImage_.load());
      }
    }}, {key: 'unlistenSource_', value: function unlistenSource_() {
      G(this.sourceListenerKey_), this.sourceListenerKey_=null;
    }}]); return Uc;
  }($r); var Xc='imageloadstart'; var Vc='imageloadend'; var Wc='imageloaderror'; var Zc=/* #__PURE__*/function(_r88) {
    _inherits(Zc, _r88); var _super81=_createSuper(Zc); function Zc(t, e) {
      var _this97; _classCallCheck(this, Zc); _this97=_super81.call(this, t), _this97.image=e; return _this97;
    } return _createClass(Zc);
  }(r); function Yc(t, e) {
    t.getImage().src=e;
  } var Kc=/* #__PURE__*/function(_gh3) {
    _inherits(Kc, _gh3); var _super82=_createSuper(Kc); function Kc(t) {
      var _this98; _classCallCheck(this, Kc); _this98=_super82.call(this, {attributions: t.attributions, projection: t.projection, state: t.state, interpolate: void 0===t.interpolate||t.interpolate}), _this98.on, _this98.once, _this98.un, _this98.resolutions_=void 0!==t.resolutions?t.resolutions:null, _this98.reprojectedImage_=null, _this98.reprojectedRevision_=0; return _this98;
    }_createClass(Kc, [{key: 'getResolutions', value: function getResolutions() {
      return this.resolutions_;
    }}, {key: 'setResolutions', value: function setResolutions(t) {
      this.resolutions_=t;
    }}, {key: 'findNearestResolution', value: function findNearestResolution(t) {
      var e=this.getResolutions(); if (e) {
        t=e[h(e, t, 0)];
      } return t;
    }}, {key: 'getImage', value: function getImage(t, e, i, n) {
      var _this99=this; var r=this.getProjection(); if (!r||!n||fn(r, n)) return r&&(n=r), this.getImageInternal(t, e, i, n); if (this.reprojectedImage_) {
        if (this.reprojectedRevision_==this.getRevision()&&fn(this.reprojectedImage_.getProjection(), n)&&this.reprojectedImage_.getResolution()==e&&me(this.reprojectedImage_.getExtent(), t)) return this.reprojectedImage_; this.reprojectedImage_.dispose(), this.reprojectedImage_=null;
      } return this.reprojectedImage_=new Uc(r, n, t, e, i, function(t, e, i) {
        return _this99.getImageInternal(t, e, i, r);
      }, this.getInterpolate()), this.reprojectedRevision_=this.getRevision(), this.reprojectedImage_;
    }}, {key: 'getImageInternal', value: function getImageInternal(t, e, i, n) {
      return z();
    }}, {key: 'handleImageChange', value: function handleImageChange(t) {
      var e=t.target; var i; switch (e.getState()) {
        case Qr: this.loading=!0, i=Xc; break; case ts: this.loading=!1, i=Vc; break; case es: this.loading=!1, i=Wc; break; default: return;
      } this.hasListener(i)&&this.dispatchEvent(new Zc(i, e));
    }}]); return Kc;
  }(gh); function qc(t, e) {
    var i=[]; Object.keys(e).forEach(function(t) {
      null!==e[t]&&void 0!==e[t]&&i.push(t+'='+encodeURIComponent(e[t]));
    }); var n=i.join('&'); return t=t.replace(/[?&]$/, ''), (t+=t.includes('?')?'&':'?')+n;
  } var Hc=/* #__PURE__*/function(_Kc) {
    _inherits(Hc, _Kc); var _super83=_createSuper(Hc); function Hc(t) {
      var _this100; _classCallCheck(this, Hc); _this100=_super83.call(this, {attributions: (t=t||{}).attributions, interpolate: t.interpolate, projection: t.projection, resolutions: t.resolutions}), _this100.crossOrigin_=void 0!==t.crossOrigin?t.crossOrigin:null, _this100.hidpi_=void 0===t.hidpi||t.hidpi, _this100.url_=t.url, _this100.imageLoadFunction_=void 0!==t.imageLoadFunction?t.imageLoadFunction:Yc, _this100.params_=t.params||{}, _this100.image_=null, _this100.imageSize_=[0, 0], _this100.renderedRevision_=0, _this100.ratio_=void 0!==t.ratio?t.ratio:1.5; return _this100;
    }_createClass(Hc, [{key: 'getParams', value: function getParams() {
      return this.params_;
    }}, {key: 'getImageInternal', value: function getImageInternal(t, e, i, n) {
      if (void 0===this.url_) return null; e=this.findNearestResolution(e), i=this.hidpi_?i:1; var r=this.image_; if (r&&this.renderedRevision_==this.getRevision()&&r.getResolution()==e&&r.getPixelRatio()==i&&le(r.getExtent(), t)) return r; var s={F: 'image', FORMAT: 'PNG32', TRANSPARENT: !0}; Object.assign(s, this.params_); var o=((t=t.slice())[0]+t[2])/2; var a=(t[1]+t[3])/2; if (1!=this.ratio_) {
        var _e136=this.ratio_*De(t)/2; var _i113=this.ratio_*Me(t)/2; t[0]=o-_e136, t[1]=a-_i113, t[2]=o+_e136, t[3]=a+_i113;
      } var l=e/i; var h=Math.ceil(De(t)/l); var c=Math.ceil(Me(t)/l); t[0]=o-l*h/2, t[2]=o+l*h/2, t[1]=a-l*c/2, t[3]=a+l*c/2, this.imageSize_[0]=h, this.imageSize_[1]=c; var u=this.getRequestUrl_(t, this.imageSize_, i, n, s); return this.image_=new rs(t, e, i, u, this.crossOrigin_, this.imageLoadFunction_), this.renderedRevision_=this.getRevision(), this.image_.addEventListener(w, this.handleImageChange.bind(this)), this.image_;
    }}, {key: 'getImageLoadFunction', value: function getImageLoadFunction() {
      return this.imageLoadFunction_;
    }}, {key: 'getRequestUrl_', value: function getRequestUrl_(t, e, i, n, r) {
      var s=n.getCode().split(/:(?=\d+$)/).pop(); r.SIZE=e[0]+','+e[1], r.BBOX=t.join(','), r.BBOXSR=s, r.IMAGESR=s, r.DPI=Math.round(90*i); var o=this.url_; var a=o.replace(/MapServer\/?$/, 'MapServer/export').replace(/ImageServer\/?$/, 'ImageServer/exportImage'); return a==o&&Ft(!1, 50), qc(a, r);
    }}, {key: 'getUrl', value: function getUrl() {
      return this.url_;
    }}, {key: 'setImageLoadFunction', value: function setImageLoadFunction(t) {
      this.image_=null, this.imageLoadFunction_=t, this.changed();
    }}, {key: 'setUrl', value: function setUrl(t) {
      t!=this.url_&&(this.url_=t, this.image_=null, this.changed());
    }}, {key: 'updateParams', value: function updateParams(t) {
      Object.assign(this.params_, t), this.image_=null, this.changed();
    }}]); return Hc;
  }(Kc); var $c=/* #__PURE__*/function(_Kc2) {
    _inherits($c, _Kc2); var _super84=_createSuper($c); function $c(t) {
      var _this101; _classCallCheck(this, $c); _this101=_super84.call(this, {attributions: (t=t||{}).attributions, interpolate: t.interpolate, projection: t.projection, resolutions: t.resolutions, state: t.state}), _this101.canvasFunction_=t.canvasFunction, _this101.canvas_=null, _this101.renderedRevision_=0, _this101.ratio_=void 0!==t.ratio?t.ratio:1.5; return _this101;
    }_createClass($c, [{key: 'getImageInternal', value: function getImageInternal(t, e, i, n) {
      e=this.findNearestResolution(e); var r=this.canvas_; if (r&&this.renderedRevision_==this.getRevision()&&r.getResolution()==e&&r.getPixelRatio()==i&&le(r.getExtent(), t)) return r; Be(t=t.slice(), this.ratio_); var s=[De(t)/e*i, Me(t)/e*i]; var o=this.canvasFunction_.call(this, t, e, i, s, n); return o&&(r=new ss(t, e, i, o)), this.canvas_=r, this.renderedRevision_=this.getRevision(), r;
    }}]); return $c;
  }(Kc); var Jc=/* #__PURE__*/function(_Kc3) {
    _inherits(Jc, _Kc3); var _super85=_createSuper(Jc); function Jc(t) {
      var _this102; _classCallCheck(this, Jc); _this102=_super85.call(this, {interpolate: t.interpolate, projection: t.projection, resolutions: t.resolutions}), _this102.crossOrigin_=void 0!==t.crossOrigin?t.crossOrigin:null, _this102.displayDpi_=void 0!==t.displayDpi?t.displayDpi:96, _this102.params_=t.params||{}, _this102.url_=t.url, _this102.imageLoadFunction_=void 0!==t.imageLoadFunction?t.imageLoadFunction:Yc, _this102.hidpi_=void 0===t.hidpi||t.hidpi, _this102.metersPerUnit_=void 0!==t.metersPerUnit?t.metersPerUnit:1, _this102.ratio_=void 0!==t.ratio?t.ratio:1, _this102.useOverlay_=void 0!==t.useOverlay&&t.useOverlay, _this102.image_=null, _this102.renderedRevision_=0; return _this102;
    }_createClass(Jc, [{key: 'getParams', value: function getParams() {
      return this.params_;
    }}, {key: 'getImageInternal', value: function getImageInternal(t, e, i, n) {
      e=this.findNearestResolution(e), i=this.hidpi_?i:1; var r=this.image_; if (r&&this.renderedRevision_==this.getRevision()&&r.getResolution()==e&&r.getPixelRatio()==i&&le(r.getExtent(), t)) return r; 1!=this.ratio_&&Be(t=t.slice(), this.ratio_); var s=[De(t)/e*i, Me(t)/e*i]; if (void 0!==this.url_) {
        var _o72=this.getUrl(this.url_, this.params_, t, s, n); r=new rs(t, e, i, _o72, this.crossOrigin_, this.imageLoadFunction_), r.addEventListener(w, this.handleImageChange.bind(this));
      } else r=null; return this.image_=r, this.renderedRevision_=this.getRevision(), r;
    }}, {key: 'getImageLoadFunction', value: function getImageLoadFunction() {
      return this.imageLoadFunction_;
    }}, {key: 'updateParams', value: function updateParams(t) {
      Object.assign(this.params_, t), this.changed();
    }}, {key: 'getUrl', value: function getUrl(t, e, i, n, r) {
      var s=function(t, e, i, n) {
        var r=De(t); var s=Me(t); var o=e[0]; var a=e[1]; var l=.0254/n; if (a*r>o*s) return r*i/(o*l); return s*i/(a*l);
      }(i, n, this.metersPerUnit_, this.displayDpi_); var o=Pe(i); var a={OPERATION: this.useOverlay_?'GETDYNAMICMAPOVERLAYIMAGE':'GETMAPIMAGE', VERSION: '2.0.0', LOCALE: 'en', CLIENTAGENT: 'ol/source/ImageMapGuide source', CLIP: '1', SETDISPLAYDPI: this.displayDpi_, SETDISPLAYWIDTH: Math.round(n[0]), SETDISPLAYHEIGHT: Math.round(n[1]), SETVIEWSCALE: s, SETVIEWCENTERX: o[0], SETVIEWCENTERY: o[1]}; return Object.assign(a, e), qc(t, a);
    }}, {key: 'setImageLoadFunction', value: function setImageLoadFunction(t) {
      this.image_=null, this.imageLoadFunction_=t, this.changed();
    }}]); return Jc;
  }(Kc); var Qc=/* #__PURE__*/function(_Kc4) {
    _inherits(Qc, _Kc4); var _super86=_createSuper(Qc); function Qc(t) {
      var _this103; _classCallCheck(this, Qc); var e=void 0!==t.crossOrigin?t.crossOrigin:null; var i=void 0!==t.imageLoadFunction?t.imageLoadFunction:Yc; _this103=_super86.call(this, {attributions: t.attributions, interpolate: t.interpolate, projection: an(t.projection)}), _this103.url_=t.url, _this103.imageExtent_=t.imageExtent, _this103.image_=new rs(_this103.imageExtent_, void 0, 1, _this103.url_, e, i), _this103.imageSize_=t.imageSize?t.imageSize:null, _this103.image_.addEventListener(w, _this103.handleImageChange.bind(_assertThisInitialized(_this103))); return _this103;
    }_createClass(Qc, [{key: 'getImageExtent', value: function getImageExtent() {
      return this.imageExtent_;
    }}, {key: 'getImageInternal', value: function getImageInternal(t, e, i, n) {
      return Ge(t, this.image_.getExtent())?this.image_:null;
    }}, {key: 'getUrl', value: function getUrl() {
      return this.url_;
    }}, {key: 'handleImageChange', value: function handleImageChange(t) {
      if (this.image_.getState()==ts) {
        var _t137=this.image_.getExtent(); var _e137=this.image_.getImage(); var _i114; var _n112; this.imageSize_?(_i114=this.imageSize_[0], _n112=this.imageSize_[1]):(_i114=_e137.width, _n112=_e137.height); var _r89=De(_t137); var _s78=Me(_t137); var _o73=_r89/_i114; var _a43=_s78/_n112; var _l28=_i114; var _h29=_n112; if (_o73>_a43?_l28=Math.round(_r89/_a43):_h29=Math.round(_s78/_o73), _l28!==_i114||_h29!==_n112) {
          var _t138=_t(_l28, _h29); this.getInterpolate()||(_t138.imageSmoothingEnabled=!1); var _r90=_t138.canvas; _t138.drawImage(_e137, 0, 0, _i114, _n112, 0, 0, _r90.width, _r90.height), this.image_.setImage(_r90);
        }
      }_get(_getPrototypeOf(Qc.prototype), 'handleImageChange', this).call(this, t);
    }}]); return Qc;
  }(Kc); var tu='1.3.0'; var eu=[101, 101]; var iu=/* #__PURE__*/function(_Kc5) {
    _inherits(iu, _Kc5); var _super87=_createSuper(iu); function iu(t) {
      var _this104; _classCallCheck(this, iu); _this104=_super87.call(this, {attributions: (t=t||{}).attributions, interpolate: t.interpolate, projection: t.projection, resolutions: t.resolutions}), _this104.crossOrigin_=void 0!==t.crossOrigin?t.crossOrigin:null, _this104.url_=t.url, _this104.imageLoadFunction_=void 0!==t.imageLoadFunction?t.imageLoadFunction:Yc, _this104.params_=Object.assign({}, t.params), _this104.v13_=!0, _this104.updateV13_(), _this104.serverType_=t.serverType, _this104.hidpi_=void 0===t.hidpi||t.hidpi, _this104.image_=null, _this104.imageSize_=[0, 0], _this104.renderedRevision_=0, _this104.ratio_=void 0!==t.ratio?t.ratio:1.5; return _this104;
    }_createClass(iu, [{key: 'getFeatureInfoUrl', value: function getFeatureInfoUrl(t, e, i, n) {
      if (void 0===this.url_) return; var r=an(i); var s=this.getProjection(); s&&s!==r&&(e=nh(s, r, t, e), t=_n(t, r, s)); var o=Le(t, e, 0, eu); var a={SERVICE: 'WMS', VERSION: tu, REQUEST: 'GetFeatureInfo', FORMAT: 'image/png', TRANSPARENT: !0, QUERY_LAYERS: this.params_.LAYERS}; Object.assign(a, this.params_, n); var l=bi((t[0]-o[0])/e, 4); var h=bi((o[3]-t[1])/e, 4); return a[this.v13_?'I':'X']=l, a[this.v13_?'J':'Y']=h, this.getRequestUrl_(o, eu, 1, s||r, a);
    }}, {key: 'getLegendUrl', value: function getLegendUrl(t, e) {
      if (void 0===this.url_) return; var i={SERVICE: 'WMS', VERSION: tu, REQUEST: 'GetLegendGraphic', FORMAT: 'image/png'}; if (void 0===e||void 0===e.LAYER) {
        var _t139=this.params_.LAYERS; if (!(!Array.isArray(_t139)||1===_t139.length)) return; i.LAYER=_t139;
      } if (void 0!==t) {
        var _e138=this.getProjection()?this.getProjection().getMetersPerUnit():1; var _n113=28e-5; i.SCALE=t*_e138/_n113;
      } return Object.assign(i, e), qc(this.url_, i);
    }}, {key: 'getParams', value: function getParams() {
      return this.params_;
    }}, {key: 'getImageInternal', value: function getImageInternal(t, e, i, n) {
      if (void 0===this.url_) return null; e=this.findNearestResolution(e), 1==i||this.hidpi_&&void 0!==this.serverType_||(i=1); var r=e/i; var s=Pe(t); var o=Le(s, r, 0, [Pi(De(t)/r, 4), Pi(Me(t)/r, 4)]); var a=Le(s, r, 0, [Pi(this.ratio_*De(t)/r, 4), Pi(this.ratio_*Me(t)/r, 4)]); var l=this.image_; if (l&&this.renderedRevision_==this.getRevision()&&l.getResolution()==e&&l.getPixelRatio()==i&&le(l.getExtent(), o)) return l; var h={SERVICE: 'WMS', VERSION: tu, REQUEST: 'GetMap', FORMAT: 'image/png', TRANSPARENT: !0}; Object.assign(h, this.params_), this.imageSize_[0]=Ri(De(a)/r, 4), this.imageSize_[1]=Ri(Me(a)/r, 4); var c=this.getRequestUrl_(a, this.imageSize_, i, n, h); return this.image_=new rs(a, e, i, c, this.crossOrigin_, this.imageLoadFunction_), this.renderedRevision_=this.getRevision(), this.image_.addEventListener(w, this.handleImageChange.bind(this)), this.image_;
    }}, {key: 'getImageLoadFunction', value: function getImageLoadFunction() {
      return this.imageLoadFunction_;
    }}, {key: 'getRequestUrl_', value: function getRequestUrl_(t, e, i, n, r) {
      if (Ft(void 0!==this.url_, 9), r[this.v13_?'CRS':'SRS']=n.getCode(), 'STYLES'in this.params_||(r.STYLES=''), 1!=i) {
        switch (this.serverType_) {
          case 'geoserver': var _t140=90*i+.5|0; 'FORMAT_OPTIONS'in r?r.FORMAT_OPTIONS+=';dpi:'+_t140:r.FORMAT_OPTIONS='dpi:'+_t140; break; case 'mapserver': r.MAP_RESOLUTION=90*i; break; case 'carmentaserver': case 'qgis': r.DPI=90*i; break; default: Ft(!1, 8);
        }
      }r.WIDTH=e[0], r.HEIGHT=e[1]; var s=n.getAxisOrientation(); var o; return o=this.v13_&&'ne'==s.substr(0, 2)?[t[1], t[0], t[3], t[2]]:t, r.BBOX=o.join(','), qc(this.url_, r);
    }}, {key: 'getUrl', value: function getUrl() {
      return this.url_;
    }}, {key: 'setImageLoadFunction', value: function setImageLoadFunction(t) {
      this.image_=null, this.imageLoadFunction_=t, this.changed();
    }}, {key: 'setUrl', value: function setUrl(t) {
      t!=this.url_&&(this.url_=t, this.image_=null, this.changed());
    }}, {key: 'updateParams', value: function updateParams(t) {
      Object.assign(this.params_, t), this.updateV13_(), this.image_=null, this.changed();
    }}, {key: 'updateV13_', value: function updateV13_() {
      var t=this.params_.VERSION||tu; this.v13_=Li(t, '1.3')>=0;
    }}]); return iu;
  }(Kc); var nu='&#169; <a href="https://www.openstreetmap.org/copyright" target="_blank">OpenStreetMap</a> contributors.'; var ru=/* #__PURE__*/function(_Dh2) {
    _inherits(ru, _Dh2); var _super88=_createSuper(ru); function ru(t) {
      _classCallCheck(this, ru); var e; e=void 0!==(t=t||{}).attributions?t.attributions:[nu]; var i=void 0!==t.crossOrigin?t.crossOrigin:'anonymous'; var n=void 0!==t.url?t.url:'https://tile.openstreetmap.org/{z}/{x}/{y}.png'; return _super88.call(this, {attributions: e, attributionsCollapsible: !1, cacheSize: t.cacheSize, crossOrigin: i, interpolate: t.interpolate, maxZoom: void 0!==t.maxZoom?t.maxZoom:19, opaque: void 0===t.opaque||t.opaque, reprojectionErrorThreshold: t.reprojectionErrorThreshold, tileLoadFunction: t.tileLoadFunction, transition: t.transition, url: n, wrapX: t.wrapX, zDirection: t.zDirection});
    } return _createClass(ru);
  }(Dh); var su=/* #__PURE__*/function(_ks) {
    _inherits(su, _ks); var _super89=_createSuper(su); function su(t) {
      _classCallCheck(this, su); return _super89.call(this, t=t||{});
    } return _createClass(su);
  }(ks); var ou=/* #__PURE__*/function(_B2) {
    _inherits(ou, _B2); var _super90=_createSuper(ou); function ou(t) {
      var _this105; _classCallCheck(this, ou); _this105=_super90.call(this), _this105.ready=!0, _this105.boundHandleImageChange_=_this105.handleImageChange_.bind(_assertThisInitialized(_this105)), _this105.layer_=t, _this105.declutterExecutorGroup=null; return _this105;
    }_createClass(ou, [{key: 'getFeatures', value: function getFeatures(t) {
      return z();
    }}, {key: 'getData', value: function getData(t) {
      return null;
    }}, {key: 'prepareFrame', value: function prepareFrame(t) {
      return z();
    }}, {key: 'renderFrame', value: function renderFrame(t, e) {
      return z();
    }}, {key: 'loadedTileCallback', value: function loadedTileCallback(t, e, i) {
      t[e]||(t[e]={}), t[e][i.tileCoord.toString()]=i;
    }}, {key: 'createLoadedTileFinder', value: function createLoadedTileFinder(t, e, i) {
      var _this106=this; return function(n, r) {
        var s=_this106.loadedTileCallback.bind(_this106, i, n); return t.forEachLoadedTile(e, n, r, s);
      };
    }}, {key: 'forEachFeatureAtCoordinate', value: function forEachFeatureAtCoordinate(t, e, i, n, r) {}}, {key: 'getLayer', value: function getLayer() {
      return this.layer_;
    }}, {key: 'handleFontsChanged', value: function handleFontsChanged() {}}, {key: 'handleImageChange_', value: function handleImageChange_(t) {
      t.target.getState()===ts&&this.renderIfReadyAndVisible();
    }}, {key: 'loadImage', value: function loadImage(t) {
      var e=t.getState(); return e!=ts&&e!=es&&t.addEventListener(w, this.boundHandleImageChange_), e==Jr&&(t.load(), e=t.getState()), e==ts;
    }}, {key: 'renderIfReadyAndVisible', value: function renderIfReadyAndVisible() {
      var t=this.getLayer(); t&&t.getVisible()&&'ready'===t.getSourceState()&&t.changed();
    }}, {key: 'disposeInternal', value: function disposeInternal() {
      delete this.layer_, _get(_getPrototypeOf(ou.prototype), 'disposeInternal', this).call(this);
    }}]); return ou;
  }(B); var au=[]; var lu=null; var hu=/* #__PURE__*/function(_ou) {
    _inherits(hu, _ou); var _super91=_createSuper(hu); function hu(t) {
      var _this107; _classCallCheck(this, hu); _this107=_super91.call(this, t), _this107.container=null, _this107.renderedResolution, _this107.tempTransform=[1, 0, 0, 1, 0, 0], _this107.pixelTransform=[1, 0, 0, 1, 0, 0], _this107.inversePixelTransform=[1, 0, 0, 1, 0, 0], _this107.context=null, _this107.containerReused=!1, _this107.pixelContext_=null, _this107.frameState=null; return _this107;
    }_createClass(hu, [{key: 'getImageData', value: function getImageData(t, e, i) {
      var n; lu||(lu=_t(1, 1, void 0, {willReadFrequently: !0})), lu.clearRect(0, 0, 1, 1); try {
        lu.drawImage(t, e, i, 1, 1, 0, 0, 1, 1), n=lu.getImageData(0, 0, 1, 1).data;
      } catch (t) {
        return lu=null, null;
      } return n;
    }}, {key: 'getBackground', value: function getBackground(t) {
      var e=this.getLayer().getBackground(); return 'function'==typeof e&&(e=e(t.viewState.resolution)), e||void 0;
    }}, {key: 'useContainer', value: function useContainer(t, e, i) {
      var n=this.getLayer().getClassName(); var r; var s; if (t&&t.className===n&&(!i||t&&t.style.backgroundColor&&d(gs(t.style.backgroundColor), gs(i)))) {
        var _e139=t.firstElementChild; _e139 instanceof HTMLCanvasElement&&(s=_e139.getContext('2d'));
      } if (s&&s.canvas.style.transform===e?(this.container=t, this.context=s, this.containerReused=!0):this.containerReused&&(this.container=null, this.context=null, this.containerReused=!1), !this.container) {
        r=document.createElement('div'), r.className=n; var _t141=r.style; _t141.position='absolute', _t141.width='100%', _t141.height='100%', s=_t(); var _e140=s.canvas; r.appendChild(_e140), _t141=_e140.style, _t141.position='absolute', _t141.left='0', _t141.transformOrigin='top left', this.container=r, this.context=s;
      } this.containerReused||!i||this.container.style.backgroundColor||(this.container.style.backgroundColor=i);
    }}, {key: 'clipUnrotated', value: function clipUnrotated(t, e, i) {
      var n=Oe(i); var r=Ne(i); var s=be(i); var o=Re(i); zt(e.coordinateToPixelTransform, n), zt(e.coordinateToPixelTransform, r), zt(e.coordinateToPixelTransform, s), zt(e.coordinateToPixelTransform, o); var a=this.inversePixelTransform; zt(a, n), zt(a, r), zt(a, s), zt(a, o), t.save(), t.beginPath(), t.moveTo(Math.round(n[0]), Math.round(n[1])), t.lineTo(Math.round(r[0]), Math.round(r[1])), t.lineTo(Math.round(s[0]), Math.round(s[1])), t.lineTo(Math.round(o[0]), Math.round(o[1])), t.clip();
    }}, {key: 'dispatchRenderEvent_', value: function dispatchRenderEvent_(t, e, i) {
      var n=this.getLayer(); if (n.hasListener(t)) {
        var _r91=new zs(t, this.inversePixelTransform, i, e); n.dispatchEvent(_r91);
      }
    }}, {key: 'preRender', value: function preRender(t, e) {
      this.frameState=e, this.dispatchRenderEvent_(Ms, t, e);
    }}, {key: 'postRender', value: function postRender(t, e) {
      this.dispatchRenderEvent_(As, t, e);
    }}, {key: 'getRenderTransform', value: function getRenderTransform(t, e, i, n, r, s, o) {
      var a=r/2; var l=s/2; var h=n/e; var c=-h; var u=-t[0]+o; var d=-t[1]; return Zt(this.tempTransform, a, l, h, c, -i, u, d);
    }}, {key: 'disposeInternal', value: function disposeInternal() {
      delete this.frameState, _get(_getPrototypeOf(hu.prototype), 'disposeInternal', this).call(this);
    }}]); return hu;
  }(ou); var cu=/* #__PURE__*/function(_hu) {
    _inherits(cu, _hu); var _super92=_createSuper(cu); function cu(t) {
      var _this108; _classCallCheck(this, cu); _this108=_super92.call(this, t), _this108.image_=null; return _this108;
    }_createClass(cu, [{key: 'getImage', value: function getImage() {
      return this.image_?this.image_.getImage():null;
    }}, {key: 'prepareFrame', value: function prepareFrame(t) {
      var e=t.layerStatesArray[t.layerIndex]; var i=t.pixelRatio; var n=t.viewState; var r=n.resolution; var s=this.getLayer().getSource(); var o=t.viewHints; var a=t.extent; if (void 0!==e.extent&&(a=Ae(a, Cn(e.extent, n.projection))), !o[Wo]&&!o[Zo]&&!ke(a)) {
        if (s) {
          var _t142=n.projection; var _e141=s.getImage(a, r, i, _t142); _e141&&(this.loadImage(_e141)?this.image_=_e141:_e141.getState()===is&&(this.image_=null));
        } else this.image_=null;
      } return !!this.image_;
    }}, {key: 'getData', value: function getData(t) {
      var e=this.frameState; if (!e) return null; var i=this.getLayer(); var n=zt(e.pixelToCoordinateTransform, t.slice()); var r=i.getExtent(); if (r&&!ae(r, n)) return null; var s=this.image_.getExtent(); var o=this.image_.getImage(); var a=De(s); var l=Math.floor(o.width*((n[0]-s[0])/a)); if (l<0||l>=o.width) return null; var h=Me(s); var c=Math.floor(o.height*((s[3]-n[1])/h)); return c<0||c>=o.height?null:this.getImageData(o, l, c);
    }}, {key: 'renderFrame', value: function renderFrame(t, e) {
      var i=this.image_; var n=i.getExtent(); var r=i.getResolution(); var s=i.getPixelRatio(); var o=t.layerStatesArray[t.layerIndex]; var a=t.pixelRatio; var l=t.viewState; var h=l.center; var c=a*r/(l.resolution*s); var u=t.extent; var d=l.resolution; var g=l.rotation; var f=Math.round(De(u)/d*a); var p=Math.round(Me(u)/d*a); Zt(this.pixelTransform, t.size[0]/2, t.size[1]/2, 1/a, 1/a, g, -f/2, -p/2), Yt(this.inversePixelTransform, this.pixelTransform); var m=Ht(this.pixelTransform); this.useContainer(e, m, this.getBackground(t)); var _=this.context; var y=_.canvas; y.width!=f||y.height!=p?(y.width=f, y.height=p):this.containerReused||_.clearRect(0, 0, f, p); var x=!1; var v=!0; if (o.extent) {
        var _e142=Cn(o.extent, l.projection); v=Ge(_e142, t.extent), x=v&&!le(_e142, t.extent), x&&this.clipUnrotated(_, t, _e142);
      } var S=i.getImage(); var w=Zt(this.tempTransform, f/2, p/2, c, c, 0, s*(n[0]-h[0])/r, s*(h[1]-n[3])/r); this.renderedResolution=r*a/s; var T=S.width*w[0]; var E=S.height*w[3]; if (this.getLayer().getSource().getInterpolate()||(_.imageSmoothingEnabled=!1), this.preRender(_, t), v&&T>=.5&&E>=.5) {
        var _t143=w[4]; var _e143=w[5]; var _i115=o.opacity; var _n114; 1!==_i115&&(_n114=_.globalAlpha, _.globalAlpha=_i115), _.drawImage(S, 0, 0, +S.width, +S.height, _t143, _e143, T, E), 1!==_i115&&(_.globalAlpha=_n114);
      } return this.postRender(_, t), x&&_.restore(), _.imageSmoothingEnabled=!0, m!==y.style.transform&&(y.style.transform=m), this.container;
    }}]); return cu;
  }(hu); var uu=/* #__PURE__*/function(_su) {
    _inherits(uu, _su); var _super93=_createSuper(uu); function uu(t) {
      _classCallCheck(this, uu); return _super93.call(this, t);
    }_createClass(uu, [{key: 'createRenderer', value: function createRenderer() {
      return new cu(this);
    }}, {key: 'getData', value: function getData(t) {
      return _get(_getPrototypeOf(uu.prototype), 'getData', this).call(this, t);
    }}]); return uu;
  }(su); var du='preload'; var gu='useInterimTilesOnError'; var fu=/* #__PURE__*/function(_ks2) {
    _inherits(fu, _ks2); var _super94=_createSuper(fu); function fu(t) {
      var _this109; _classCallCheck(this, fu); t=t||{}; var e=Object.assign({}, t); delete e.preload, delete e.useInterimTilesOnError, _this109=_super94.call(this, e), _this109.on, _this109.once, _this109.un, _this109.setPreload(void 0!==t.preload?t.preload:0), _this109.setUseInterimTilesOnError(void 0===t.useInterimTilesOnError||t.useInterimTilesOnError); return _this109;
    }_createClass(fu, [{key: 'getPreload', value: function getPreload() {
      return this.get(du);
    }}, {key: 'setPreload', value: function setPreload(t) {
      this.set(du, t);
    }}, {key: 'getUseInterimTilesOnError', value: function getUseInterimTilesOnError() {
      return this.get(gu);
    }}, {key: 'setUseInterimTilesOnError', value: function setUseInterimTilesOnError(t) {
      this.set(gu, t);
    }}, {key: 'getData', value: function getData(t) {
      return _get(_getPrototypeOf(fu.prototype), 'getData', this).call(this, t);
    }}]); return fu;
  }(ks); var pu=/* #__PURE__*/function(_hu2) {
    _inherits(pu, _hu2); var _super95=_createSuper(pu); function pu(t) {
      var _this110; _classCallCheck(this, pu); _this110=_super95.call(this, t), _this110.extentChanged=!0, _this110.renderedExtent_=null, _this110.renderedPixelRatio, _this110.renderedProjection=null, _this110.renderedRevision, _this110.renderedTiles=[], _this110.newTiles_=!1, _this110.tmpExtent=[1/0, 1/0, -1/0, -1/0], _this110.tmpTileRange_=new Il(0, 0, 0, 0); return _this110;
    }_createClass(pu, [{key: 'isDrawableTile', value: function isDrawableTile(t) {
      var e=this.getLayer(); var i=t.getState(); var n=e.getUseInterimTilesOnError(); return i==Q||i==et||i==tt&&!n;
    }}, {key: 'getTile', value: function getTile(t, e, i, n) {
      var r=n.pixelRatio; var s=n.viewState.projection; var o=this.getLayer(); var a=o.getSource().getTile(t, e, i, r, s); return a.getState()==tt&&o.getUseInterimTilesOnError()&&o.getPreload()>0&&(this.newTiles_=!0), this.isDrawableTile(a)||(a=a.getInterimTile()), a;
    }}, {key: 'getData', value: function getData(t) {
      var e=this.frameState; if (!e) return null; var i=this.getLayer(); var n=zt(e.pixelToCoordinateTransform, t.slice()); var r=i.getExtent(); if (r&&!ae(r, n)) return null; var s=e.pixelRatio; var o=e.viewState.projection; var a=e.viewState; var l=i.getRenderSource(); var h=l.getTileGridForProjection(a.projection); var c=l.getTilePixelRatio(e.pixelRatio); for (var _t144=h.getZForResolution(a.resolution); _t144>=h.getMinZoom(); --_t144) {
        var _e144=h.getTileCoordForCoordAndZ(n, _t144); var _i116=l.getTile(_t144, _e144[1], _e144[2], s, o); if (!(_i116 instanceof os||_i116 instanceof lh)||_i116 instanceof lh&&_i116.getState()===et) return null; if (_i116.getState()!==Q) continue; var _r92=h.getOrigin(_t144); var _u18=ll(h.getTileSize(_t144)); var _d18=h.getResolution(_t144); var _g10=Math.floor(c*((n[0]-_r92[0])/_d18-_e144[1]*_u18[0])); var _f8=Math.floor(c*((_r92[1]-n[1])/_d18-_e144[2]*_u18[1])); var _p7=Math.round(c*l.getGutterForProjection(a.projection)); return this.getImageData(_i116.getImage(), _g10+_p7, _f8+_p7);
      } return null;
    }}, {key: 'loadedTileCallback', value: function loadedTileCallback(t, e, i) {
      return !!this.isDrawableTile(i)&&_get(_getPrototypeOf(pu.prototype), 'loadedTileCallback', this).call(this, t, e, i);
    }}, {key: 'prepareFrame', value: function prepareFrame(t) {
      return !!this.getLayer().getSource();
    }}, {key: 'renderFrame', value: function renderFrame(t, e) {
      var i=t.layerStatesArray[t.layerIndex]; var n=t.viewState; var r=n.projection; var s=n.resolution; var o=n.center; var a=n.rotation; var h=t.pixelRatio; var c=this.getLayer(); var u=c.getSource(); var d=u.getRevision(); var g=u.getTileGridForProjection(r); var f=g.getZForResolution(s, u.zDirection); var p=g.getResolution(f); var m=t.extent; var _=t.viewState.resolution; var y=u.getTilePixelRatio(h); var x=Math.round(De(m)/_*h); var v=Math.round(Me(m)/_*h); var S=i.extent&&Cn(i.extent, r); S&&(m=Ae(m, Cn(i.extent, r))); var w=p*x/2/y; var T=p*v/2/y; var E=[o[0]-w, o[1]-T, o[0]+w, o[1]+T]; var C=g.getTileRangeForExtentAndZ(m, f); var R={}; R[f]={}; var b=this.createLoadedTileFinder(u, r, R); var P=this.tmpExtent; var I=this.tmpTileRange_; this.newTiles_=!1; var L=a?Fe(n.center, _, a, t.size):void 0; for (var _e145=C.minX; _e145<=C.maxX; ++_e145) {
        for (var _n115=C.minY; _n115<=C.maxY; ++_n115) {
          if (a&&!g.tileCoordIntersectsViewport([f, _e145, _n115], L)) continue; var _r93=this.getTile(f, _e145, _n115, t); if (this.isDrawableTile(_r93)) {
            var _e146=X(this); if (_r93.getState()==Q) {
              R[f][_r93.tileCoord.toString()]=_r93; var _t145=_r93.inTransition(_e146); _t145&&1!==i.opacity&&(_r93.endTransition(_e146), _t145=!1), this.newTiles_||!_t145&&this.renderedTiles.includes(_r93)||(this.newTiles_=!0);
            } if (1===_r93.getAlpha(_e146, t.time)) continue;
          } var _s79=g.getTileCoordChildTileRange(_r93.tileCoord, I, P); var _o74=!1; _s79&&(_o74=b(f+1, _s79)), _o74||g.forEachTileCoordParentTileRange(_r93.tileCoord, b, I, P);
        }
      } var F=p/s*h/y; Zt(this.pixelTransform, t.size[0]/2, t.size[1]/2, 1/h, 1/h, a, -x/2, -v/2); var M=Ht(this.pixelTransform); this.useContainer(e, M, this.getBackground(t)); var A=this.context; var O=A.canvas; Yt(this.inversePixelTransform, this.pixelTransform), Zt(this.tempTransform, x/2, v/2, F, F, 0, -x/2, -v/2), O.width!=x||O.height!=v?(O.width=x, O.height=v):this.containerReused||A.clearRect(0, 0, x, v), S&&this.clipUnrotated(A, t, S), u.getInterpolate()||(A.imageSmoothingEnabled=!1), this.preRender(A, t), this.renderedTiles.length=0; var N; var D; var G; var k=Object.keys(R).map(Number); k.sort(l), 1!==i.opacity||this.containerReused&&!u.getOpaque(t.viewState.projection)?(N=[], D=[]):k=k.reverse(); for (var _e147=k.length-1; _e147>=0; --_e147) {
        var _i117=k[_e147]; var _n116=u.getTilePixelSize(_i117, h, r); var _s80=g.getResolution(_i117)/p; var _o75=_n116[0]*_s80*F; var _a44=_n116[1]*_s80*F; var _l29=g.getTileCoordForCoordAndZ(Oe(E), _i117); var _c14=g.getTileCoordExtent(_l29); var _d19=zt(this.tempTransform, [y*(_c14[0]-E[0])/p, y*(E[3]-_c14[3])/p]); var _m5=y*u.getGutterForProjection(r); var _3=R[_i117]; for (var _e148 in _3) {
          var _n117=_3[_e148]; var _r94=_n117.tileCoord; var _s81=_l29[1]-_r94[1]; var _h30=Math.round(_d19[0]-(_s81-1)*_o75); var _c15=_l29[2]-_r94[2]; var _g11=Math.round(_d19[1]-(_c15-1)*_a44); var _p8=Math.round(_d19[0]-_s81*_o75); var _y3=Math.round(_d19[1]-_c15*_a44); var _x2=_h30-_p8; var _v2=_g11-_y3; var _S6=f===_i117; var _w2=_S6&&1!==_n117.getAlpha(X(this), t.time); var _T2=!1; if (!_w2) {
            if (N) {
              G=[_p8, _y3, _p8+_x2, _y3, _p8+_x2, _y3+_v2, _p8, _y3+_v2]; for (var _t146=0, _e149=N.length; _t146<_e149; ++_t146) {
                if (f!==_i117&&_i117<D[_t146]) {
                  var _e150=N[_t146]; Ge([_p8, _y3, _p8+_x2, _y3+_v2], [_e150[0], _e150[3], _e150[4], _e150[7]])&&(_T2||(A.save(), _T2=!0), A.beginPath(), A.moveTo(G[0], G[1]), A.lineTo(G[2], G[3]), A.lineTo(G[4], G[5]), A.lineTo(G[6], G[7]), A.moveTo(_e150[6], _e150[7]), A.lineTo(_e150[4], _e150[5]), A.lineTo(_e150[2], _e150[3]), A.lineTo(_e150[0], _e150[1]), A.clip());
                }
              }N.push(G), D.push(_i117);
            } else A.clearRect(_p8, _y3, _x2, _v2);
          } this.drawTileImage(_n117, t, _p8, _y3, _x2, _v2, _m5, _S6), N&&!_w2?(_T2&&A.restore(), this.renderedTiles.unshift(_n117)):this.renderedTiles.push(_n117), this.updateUsedTiles(t.usedTiles, u, _n117);
        }
      } return this.renderedRevision=d, this.renderedResolution=p, this.extentChanged=!this.renderedExtent_||!me(this.renderedExtent_, E), this.renderedExtent_=E, this.renderedPixelRatio=h, this.renderedProjection=r, this.manageTilePyramid(t, u, g, h, r, m, f, c.getPreload()), this.scheduleExpireCache(t, u), this.postRender(A, t), i.extent&&A.restore(), A.imageSmoothingEnabled=!0, M!==O.style.transform&&(O.style.transform=M), this.container;
    }}, {key: 'drawTileImage', value: function drawTileImage(t, e, i, n, r, s, o, a) {
      var l=this.getTileImage(t); if (!l) return; var h=X(this); var c=e.layerStatesArray[e.layerIndex]; var u=c.opacity*(a?t.getAlpha(h, e.time):1); var d=u!==this.context.globalAlpha; d&&(this.context.save(), this.context.globalAlpha=u), this.context.drawImage(l, o, o, l.width-2*o, l.height-2*o, i, n, r, s), d&&this.context.restore(), u!==c.opacity?e.animate=!0:a&&t.endTransition(h);
    }}, {key: 'getImage', value: function getImage() {
      var t=this.context; return t?t.canvas:null;
    }}, {key: 'getTileImage', value: function getTileImage(t) {
      return t.getImage();
    }}, {key: 'scheduleExpireCache', value: function scheduleExpireCache(t, e) {
      if (e.canExpireCache()) {
        var _i118=function(t, e, i) {
          var n=X(t); n in i.usedTiles&&t.expireCache(i.viewState.projection, i.usedTiles[n]);
        }.bind(null, e); t.postRenderFunctions.push(_i118);
      }
    }}, {key: 'updateUsedTiles', value: function updateUsedTiles(t, e, i) {
      var n=X(e); n in t||(t[n]={}), t[n][i.getKey()]=!0;
    }}, {key: 'manageTilePyramid', value: function manageTilePyramid(t, e, i, n, r, s, o, a, l) {
      var h=X(e); h in t.wantedTiles||(t.wantedTiles[h]={}); var c=t.wantedTiles[h]; var u=t.tileQueue; var d=i.getMinZoom(); var g=t.viewState.rotation; var f=g?Fe(t.viewState.center, t.viewState.resolution, g, t.size):void 0; var p; var m; var _; var y; var x; var v; var S=0; for (v=d; v<=o; ++v) for (m=i.getTileRangeForExtentAndZ(s, v, m), _=i.getResolution(v), y=m.minX; y<=m.maxX; ++y) for (x=m.minY; x<=m.maxY; ++x)g&&!i.tileCoordIntersectsViewport([v, y, x], f)||(o-v<=a?(++S, p=e.getTile(v, y, x, n, r), p.getState()==$&&(c[p.getKey()]=!0, u.isKeyQueued(p.getKey())||u.enqueue([p, h, i.getTileCoordCenter(p.tileCoord), _])), void 0!==l&&l(p)):e.useTile(v, y, x, r)); e.updateCacheSize(S, r);
    }}]); return pu;
  }(hu); var mu=/* #__PURE__*/function(_fu) {
    _inherits(mu, _fu); var _super96=_createSuper(mu); function mu(t) {
      _classCallCheck(this, mu); return _super96.call(this, t);
    }_createClass(mu, [{key: 'createRenderer', value: function createRenderer() {
      return new pu(this);
    }}]); return mu;
  }(fu); var _u; var yu=!0; try {
    new ImageData(10, 10);
  } catch (t) {
    yu=!1;
  } function xu(t, e, i) {
    if (yu) return new ImageData(t, e, i); _u||(_u=document.createElement('canvas').getContext('2d')); var n=_u.createImageData(e, i); return n.data.set(t), n;
  } function vu(t) {
    var e=!0; try {
      new ImageData(10, 10);
    } catch (t) {
      e=!1;
    } function i(t, i, n) {
      return e?new ImageData(t, i, n):{data: t, width: i, height: n};
    } return function(e) {
      var n=e.buffers; var r=e.meta; var s=e.imageOps; var o=e.width; var a=e.height; var l=n.length; var h=n[0].byteLength; if (s) {
        var _e151=new Array(l); for (var _t147=0; _t147<l; ++_t147)_e151[_t147]=i(new Uint8ClampedArray(n[_t147]), o, a); return t(_e151, r).data.buffer;
      } var c=new Uint8ClampedArray(h); var u=new Array(l); var d=new Array(l); for (var _t148=0; _t148<l; ++_t148)u[_t148]=new Uint8ClampedArray(n[_t148]), d[_t148]=[0, 0, 0, 0]; for (var _e152=0; _e152<h; _e152+=4) {
        for (var _t149=0; _t149<l; ++_t149) {
          var _i119=u[_t149]; d[_t149][0]=_i119[_e152], d[_t149][1]=_i119[_e152+1], d[_t149][2]=_i119[_e152+2], d[_t149][3]=_i119[_e152+3];
        } var _i120=t(d, r); c[_e152]=_i120[0], c[_e152+1]=_i120[1], c[_e152+2]=_i120[2], c[_e152+3]=_i120[3];
      } return c.buffer;
    };
  } function Su(t, e) {
    var i=Object.keys(t.lib||{}).map(function(e) {
      return 'var '+e+' = '+t.lib[e].toString()+';';
    }).concat(['var __minion__ = ('+vu.toString()+')(', t.operation.toString(), ');', 'self.addEventListener("message", function(event) {', '  var buffer = __minion__(event.data);', '  self.postMessage({buffer: buffer, meta: event.data.meta}, [buffer]);', '});']); var n=new Worker('undefined'==typeof Blob?'data:text/javascript;base64,'+Buffer.from(i.join('\n'), 'binary').toString('base64'):URL.createObjectURL(new Blob(i, {type: 'text/javascript'}))); return n.addEventListener('message', e), n;
  } var wu=/* #__PURE__*/function(_o76) {
    _inherits(wu, _o76); var _super97=_createSuper(wu); function wu(t) {
      var _this111; _classCallCheck(this, wu); var e; _this111=_super97.call(this), _this111._imageOps=!!t.imageOps, e=0===t.threads?0:_this111._imageOps?1:t.threads||1; var i=new Array(e); if (e) for (var _n118=0; _n118<e; ++_n118)i[_n118]=Su(t, _this111._onWorkerMessage.bind(_assertThisInitialized(_this111), _n118)); else {
        i[0]=function(t, e) {
          var i=vu(t.operation); var n=!1; return {postMessage: function postMessage(t) {
            setTimeout(function() {
              n||e({data: {buffer: i(t), meta: t.meta}});
            }, 0);
          }, terminate: function terminate() {
            n=!0;
          }};
        }(t, _this111._onWorkerMessage.bind(_assertThisInitialized(_this111), 0));
      } _this111._workers=i, _this111._queue=[], _this111._maxQueueLength=t.queue||1/0, _this111._running=0, _this111._dataLookup={}, _this111._job=null; return _this111;
    }_createClass(wu, [{key: 'process', value: function process(t, e, i) {
      this._enqueue({inputs: t, meta: e, callback: i}), this._dispatch();
    }}, {key: '_enqueue', value: function _enqueue(t) {
      for (this._queue.push(t); this._queue.length>this._maxQueueLength;) this._queue.shift().callback(null, null);
    }}, {key: '_dispatch', value: function _dispatch() {
      if (this._running||0===this._queue.length) return; var t=this._queue.shift(); this._job=t; var e=t.inputs[0].width; var i=t.inputs[0].height; var n=t.inputs.map(function(t) {
        return t.data.buffer;
      }); var r=this._workers.length; if (this._running=r, 1===r) return void this._workers[0].postMessage({buffers: n, meta: t.meta, imageOps: this._imageOps, width: e, height: i}, n); var s=t.inputs[0].data.length; var o=4*Math.ceil(s/4/r); for (var _s82=0; _s82<r; ++_s82) {
        var _r95=_s82*o; var _a45=[]; for (var _t150=0, _e153=n.length; _t150<_e153; ++_t150)_a45.push(n[_t150].slice(_r95, _r95+o)); this._workers[_s82].postMessage({buffers: _a45, meta: t.meta, imageOps: this._imageOps, width: e, height: i}, _a45);
      }
    }}, {key: '_onWorkerMessage', value: function _onWorkerMessage(t, e) {
      this.disposed||(this._dataLookup[t]=e.data, --this._running, 0===this._running&&this._resolveJob());
    }}, {key: '_resolveJob', value: function _resolveJob() {
      var t=this._job; var e=this._workers.length; var i; var n; if (1===e)i=new Uint8ClampedArray(this._dataLookup[0].buffer), n=this._dataLookup[0].meta; else {
        var _r96=t.inputs[0].data.length; i=new Uint8ClampedArray(_r96), n=new Array(e); var _s83=4*Math.ceil(_r96/4/e); for (var _t151=0; _t151<e; ++_t151) {
          var _e154=this._dataLookup[_t151].buffer; var _r97=_t151*_s83; i.set(new Uint8ClampedArray(_e154), _r97), n[_t151]=this._dataLookup[_t151].meta;
        }
      } this._job=null, this._dataLookup={}, t.callback(null, xu(i, t.inputs[0].width, t.inputs[0].height), n), this._dispatch();
    }}, {key: 'disposeInternal', value: function disposeInternal() {
      for (var _t152=0; _t152<this._workers.length; ++_t152) this._workers[_t152].terminate(); this._workers.length=0;
    }}]); return wu;
  }(o); var Tu='beforeoperations'; var Eu='afteroperations'; var Cu=/* #__PURE__*/function(_r98) {
    _inherits(Cu, _r98); var _super98=_createSuper(Cu); function Cu(t, e, i) {
      var _this112; _classCallCheck(this, Cu); _this112=_super98.call(this, t), _this112.extent=e.extent, _this112.resolution=e.viewState.resolution/e.pixelRatio, _this112.data=i; return _this112;
    } return _createClass(Cu);
  }(r); var Ru=/* #__PURE__*/function(_Kc6) {
    _inherits(Ru, _Kc6); var _super99=_createSuper(Ru); function Ru(t) {
      var _this113; _classCallCheck(this, Ru); _this113=_super99.call(this, {projection: null}), _this113.on, _this113.once, _this113.un, _this113.processor_=null, _this113.operationType_=void 0!==t.operationType?t.operationType:'pixel', _this113.threads_=void 0!==t.threads?t.threads:1, _this113.layers_=function(t) {
        var e=t.length; var i=new Array(e); for (var _n119=0; _n119<e; ++_n119)i[_n119]=Iu(t[_n119]); return i;
      }(t.sources); var e=_this113.changed.bind(_assertThisInitialized(_this113)); for (var _t153=0, _i121=_this113.layers_.length; _t153<_i121; ++_t153)_this113.layers_[_t153].addEventListener(w, e); var i; _this113.useResolutions_=null!==t.resolutions, _this113.tileQueue_=new Xo(function() {
        return 1;
      }, _this113.changed.bind(_assertThisInitialized(_this113))), _this113.requestedFrameState_, _this113.renderedImageCanvas_=null, _this113.renderedRevision_, _this113.frameState_={animate: !1, coordinateToPixelTransform: [1, 0, 0, 1, 0, 0], declutterTree: null, extent: null, index: 0, layerIndex: 0, layerStatesArray: (i=_this113.layers_, i.map(function(t) {
        return t.getLayerState();
      })), pixelRatio: 1, pixelToCoordinateTransform: [1, 0, 0, 1, 0, 0], postRenderFunctions: [], size: [0, 0], tileQueue: _this113.tileQueue_, time: Date.now(), usedTiles: {}, viewState: {rotation: 0}, viewHints: [], wantedTiles: {}, mapId: X(_assertThisInitialized(_this113)), renderTargets: {}}, _this113.setAttributions(function(e) {
        var i=[]; for (var _n120=0, _r99=t.sources.length; _n120<_r99; ++_n120) {
          var _r100=t.sources[_n120]; var _s84=_r100 instanceof gh?_r100:_r100.getSource(); if (!_s84) continue; var _o77=_s84.getAttributions(); if ('function'==typeof _o77) {
            var _t154=_o77(e); i.push.apply(i, _t154);
          }
        } return 0!==i.length?i:null;
      }), void 0!==t.operation&&_this113.setOperation(t.operation, t.lib); return _this113;
    }_createClass(Ru, [{key: 'setOperation', value: function setOperation(t, e) {
      this.processor_&&this.processor_.dispose(), this.processor_=new wu({operation: t, imageOps: 'image'===this.operationType_, queue: 1, lib: e, threads: this.threads_}), this.changed();
    }}, {key: 'updateFrameState_', value: function updateFrameState_(t, e, i) {
      var n=Object.assign({}, this.frameState_); n.viewState=Object.assign({}, n.viewState); var r=Pe(t); n.size[0]=Math.ceil(De(t)/e), n.size[1]=Math.ceil(Me(t)/e), n.extent=[r[0]-n.size[0]*e/2, r[1]-n.size[1]*e/2, r[0]+n.size[0]*e/2, r[1]+n.size[1]*e/2], n.time=Date.now(); var s=n.viewState; return s.center=r, s.projection=i, s.resolution=e, n;
    }}, {key: 'allSourcesReady_', value: function allSourcesReady_() {
      var t; var e=!0; for (var _i122=0, _n121=this.layers_.length; _i122<_n121; ++_i122) {
        if (t=this.layers_[_i122].getSource(), !t||'ready'!==t.getState()) {
          e=!1; break;
        }
      } return e;
    }}, {key: 'getImage', value: function getImage(t, e, i, n) {
      if (!this.allSourcesReady_()) return null; e=this.findNearestResolution(e); var r=this.updateFrameState_(t, e, n); if (this.requestedFrameState_=r, this.renderedImageCanvas_) {
        var _t155=this.renderedImageCanvas_.getResolution(); var _i123=this.renderedImageCanvas_.getExtent(); e===_t155&&me(r.extent, _i123)||(this.renderedImageCanvas_=null);
      } return this.renderedImageCanvas_&&this.getRevision()===this.renderedRevision_||this.processSources_(), r.tileQueue.loadMoreTiles(16, 16), r.animate&&requestAnimationFrame(this.changed.bind(this)), this.renderedImageCanvas_;
    }}, {key: 'processSources_', value: function processSources_() {
      var t=this.requestedFrameState_; var e=this.layers_.length; var i=new Array(e); for (var _n122=0; _n122<e; ++_n122) {
        t.layerIndex=_n122; var _e155=Pu(this.layers_[_n122], t); if (!_e155) return; i[_n122]=_e155;
      } var n={}; this.dispatchEvent(new Cu(Tu, t, n)), this.processor_.process(i, n, this.onWorkerComplete_.bind(this, t));
    }}, {key: 'onWorkerComplete_', value: function onWorkerComplete_(t, e, i, n) {
      if (e||!i) return; var r=t.extent; var s=t.viewState.resolution; if (s!==this.requestedFrameState_.viewState.resolution||!me(r, this.requestedFrameState_.extent)) return; var o; if (this.renderedImageCanvas_)o=this.renderedImageCanvas_.getImage().getContext('2d'); else {
        o=_t(Math.round(De(r)/s), Math.round(Me(r)/s)), this.renderedImageCanvas_=new ss(r, s, 1, o.canvas);
      }o.putImageData(i, 0, 0), this.changed(), this.renderedRevision_=this.getRevision(), this.dispatchEvent(new Cu(Eu, t, n)), t.animate&&requestAnimationFrame(this.changed.bind(this));
    }}, {key: 'getResolutions', value: function getResolutions(t) {
      if (!this.useResolutions_) return null; var e=_get(_getPrototypeOf(Ru.prototype), 'getResolutions', this).call(this); if (!e) {
        for (var _i124=0, _n123=this.layers_.length; _i124<_n123; ++_i124) {
          if (e=this.layers_[_i124].getSource().getResolutions(t), e) break;
        }
      } return e;
    }}, {key: 'disposeInternal', value: function disposeInternal() {
      this.processor_&&this.processor_.dispose(), _get(_getPrototypeOf(Ru.prototype), 'disposeInternal', this).call(this);
    }}]); return Ru;
  }(Kc); Ru.prototype.dispose; var bu=null; function Pu(t, e) {
    var i=t.getRenderer(); if (!i) throw new Error('Unsupported layer type: '+t); if (!i.prepareFrame(e)) return null; var n=e.size[0]; var r=e.size[1]; if (0===n||0===r) return null; var s=i.renderFrame(e, null); var o; if (s instanceof HTMLCanvasElement)o=s; else {
      if (s&&(o=s.firstElementChild), !(o instanceof HTMLCanvasElement)) throw new Error('Unsupported rendered element: '+o); if (o.width===n&&o.height===r) {
        return o.getContext('2d').getImageData(0, 0, n, r);
      }
    } if (bu) {
      var _t156=bu.canvas; _t156.width!==n||_t156.height!==r?bu=_t(n, r, void 0, {willReadFrequently: !0}):bu.clearRect(0, 0, n, r);
    } else bu=_t(n, r, void 0, {willReadFrequently: !0}); return bu.drawImage(o, 0, 0, n, r), bu.getImageData(0, 0, n, r);
  } function Iu(t) {
    var e; return t instanceof gh?t instanceof Eh?e=new mu({source: t}):t instanceof Kc&&(e=new uu({source: t})):e=t, e;
  } var Lu=Ru; var Fu=['Map tiles by <a href="https://stamen.com/" target="_blank">Stamen Design</a>, under <a href="https://creativecommons.org/licenses/by/3.0/" target="_blank">CC BY 3.0</a>.', nu]; var Mu={'terrain': {extension: 'png', opaque: !0}, 'terrain-background': {extension: 'png', opaque: !0}, 'terrain-labels': {extension: 'png', opaque: !1}, 'terrain-lines': {extension: 'png', opaque: !1}, 'toner-background': {extension: 'png', opaque: !0}, 'toner': {extension: 'png', opaque: !0}, 'toner-hybrid': {extension: 'png', opaque: !1}, 'toner-labels': {extension: 'png', opaque: !1}, 'toner-lines': {extension: 'png', opaque: !1}, 'toner-lite': {extension: 'png', opaque: !0}, 'watercolor': {extension: 'jpg', opaque: !0}}; var Au={terrain: {minZoom: 0, maxZoom: 18}, toner: {minZoom: 0, maxZoom: 20}, watercolor: {minZoom: 0, maxZoom: 18}}; var Ou=/* #__PURE__*/function(_Dh3) {
    _inherits(Ou, _Dh3); var _super100=_createSuper(Ou); function Ou(t) {
      _classCallCheck(this, Ou); var e=t.layer.indexOf('-'); var i=-1==e?t.layer:t.layer.slice(0, e); var n=Au[i]; var r=Mu[t.layer]; var s=void 0!==t.url?t.url:'https://stamen-tiles-{a-d}.a.ssl.fastly.net/'+t.layer+'/{z}/{x}/{y}.'+r.extension; return _super100.call(this, {attributions: Fu, cacheSize: t.cacheSize, crossOrigin: 'anonymous', interpolate: t.interpolate, maxZoom: null!=t.maxZoom?t.maxZoom:n.maxZoom, minZoom: null!=t.minZoom?t.minZoom:n.minZoom, opaque: r.opaque, reprojectionErrorThreshold: t.reprojectionErrorThreshold, tileLoadFunction: t.tileLoadFunction, transition: t.transition, url: s, wrapX: t.wrapX, zDirection: t.zDirection});
    } return _createClass(Ou);
  }(Dh); var Nu=/* #__PURE__*/function(_Ah5) {
    _inherits(Nu, _Ah5); var _super101=_createSuper(Nu); function Nu(t) {
      var _this114; _classCallCheck(this, Nu); _this114=_super101.call(this, {attributions: (t=t||{}).attributions, cacheSize: t.cacheSize, crossOrigin: t.crossOrigin, interpolate: t.interpolate, projection: t.projection, reprojectionErrorThreshold: t.reprojectionErrorThreshold, tileGrid: t.tileGrid, tileLoadFunction: t.tileLoadFunction, url: t.url, urls: t.urls, wrapX: void 0===t.wrapX||t.wrapX, transition: t.transition, zDirection: t.zDirection}), _this114.params_=t.params||{}, _this114.hidpi_=void 0===t.hidpi||t.hidpi, _this114.tmpExtent_=[1/0, 1/0, -1/0, -1/0], _this114.setKey(_this114.getKeyForParams_()); return _this114;
    }_createClass(Nu, [{key: 'getKeyForParams_', value: function getKeyForParams_() {
      var t=0; var e=[]; for (var _i125 in this.params_)e[t++]=_i125+'-'+this.params_[_i125]; return e.join('/');
    }}, {key: 'getParams', value: function getParams() {
      return this.params_;
    }}, {key: 'getRequestUrl_', value: function getRequestUrl_(t, e, i, n, r, s) {
      var o=this.urls; if (!o) return; var a=r.getCode().split(/:(?=\d+$)/).pop(); var l; if (s.SIZE=e[0]+','+e[1], s.BBOX=i.join(','), s.BBOXSR=a, s.IMAGESR=a, s.DPI=Math.round(s.DPI?s.DPI*n:90*n), 1==o.length)l=o[0]; else {
        l=o[Ti(El(t), o.length)];
      } return qc(l.replace(/MapServer\/?$/, 'MapServer/export').replace(/ImageServer\/?$/, 'ImageServer/exportImage'), s);
    }}, {key: 'getTilePixelRatio', value: function getTilePixelRatio(t) {
      return this.hidpi_?t:1;
    }}, {key: 'updateParams', value: function updateParams(t) {
      Object.assign(this.params_, t), this.setKey(this.getKeyForParams_());
    }}, {key: 'tileUrlFunction', value: function tileUrlFunction(t, e, i) {
      var n=this.getTileGrid(); if (n||(n=this.getTileGridForProjection(i)), n.getResolutions().length<=t[0]) return; 1==e||this.hidpi_||(e=1); var r=n.getTileCoordExtent(t, this.tmpExtent_); var s=ll(n.getTileSize(t[0]), this.tmpSize); 1!=e&&(s=al(s, e, this.tmpSize)); var o={F: 'image', FORMAT: 'PNG32', TRANSPARENT: !0}; return Object.assign(o, this.params_), this.getRequestUrl_(t, s, r, e, i, o);
    }}]); return Nu;
  }(Ah); var Du=/* #__PURE__*/function(_Dh4) {
    _inherits(Du, _Dh4); var _super102=_createSuper(Du); function Du(t) {
      var _this115; _classCallCheck(this, Du); return _this115=_super102.call(this, {opaque: !1, projection: (t=t||{}).projection, tileGrid: t.tileGrid, wrapX: void 0===t.wrapX||t.wrapX, zDirection: t.zDirection, url: t.template||'z:{z} x:{x} y:{y}', tileLoadFunction: function tileLoadFunction(t, e) {
        var i=t.getTileCoord()[0]; var n=ll(_this115.tileGrid.getTileSize(i)); var r=_t(n[0], n[1]); r.strokeStyle='grey', r.strokeRect(.5, .5, n[0]+.5, n[1]+.5), r.fillStyle='grey', r.strokeStyle='white', r.textAlign='center', r.textBaseline='middle', r.font='24px sans-serif', r.lineWidth=4, r.strokeText(e, n[0]/2, n[1]/2, n[0]), r.fillText(e, n[0]/2, n[1]/2, n[0]), t.setImage(r.canvas);
      }});
    } return _createClass(Du);
  }(Dh); var Gu=/* #__PURE__*/function(_Ah6) {
    _inherits(Gu, _Ah6); var _super103=_createSuper(Gu); function Gu(t) {
      var _this116; _classCallCheck(this, Gu); if (_this116=_super103.call(this, {attributions: t.attributions, cacheSize: t.cacheSize, crossOrigin: t.crossOrigin, interpolate: t.interpolate, projection: an('EPSG:3857'), reprojectionErrorThreshold: t.reprojectionErrorThreshold, state: 'loading', tileLoadFunction: t.tileLoadFunction, wrapX: void 0===t.wrapX||t.wrapX, transition: t.transition, zDirection: t.zDirection}), _this116.tileJSON_=null, _this116.tileSize_=t.tileSize, t.url) {
        if (t.jsonp)jl(t.url, _this116.handleTileJSONResponse.bind(_assertThisInitialized(_this116)), _this116.handleTileJSONError.bind(_assertThisInitialized(_this116))); else {
          var _e156=new XMLHttpRequest(); _e156.addEventListener('load', _this116.onXHRLoad_.bind(_assertThisInitialized(_this116))), _e156.addEventListener('error', _this116.onXHRError_.bind(_assertThisInitialized(_this116))), _e156.open('GET', t.url), _e156.send();
        }
      } else t.tileJSON?_this116.handleTileJSONResponse(t.tileJSON):Ft(!1, 51); return _possibleConstructorReturn(_this116);
    }_createClass(Gu, [{key: 'onXHRLoad_', value: function onXHRLoad_(t) {
      var e=t.target; if (!e.status||e.status>=200&&e.status<300) {
        var _t157; try {
          _t157=JSON.parse(e.responseText);
        } catch (t) {
          return void this.handleTileJSONError();
        } this.handleTileJSONResponse(_t157);
      } else this.handleTileJSONError();
    }}, {key: 'onXHRError_', value: function onXHRError_(t) {
      this.handleTileJSONError();
    }}, {key: 'getTileJSON', value: function getTileJSON() {
      return this.tileJSON_;
    }}, {key: 'handleTileJSONResponse', value: function handleTileJSONResponse(t) {
      var e=an('EPSG:4326'); var i=this.getProjection(); var n; if (void 0!==t.bounds) {
        var _r101=pn(e, i); n=Ue(t.bounds, _r101);
      } var r=wh(i); var s=t.minzoom||0; var o=xh({extent: r, maxZoom: t.maxzoom||22, minZoom: s, tileSize: this.tileSize_}); if (this.tileGrid=o, this.tileUrlFunction=Rh(t.tiles, o), t.attribution&&!this.getAttributions()) {
        var _e157=void 0!==n?n:r; this.setAttributions(function(i) {
          return Ge(_e157, i.extent)?[t.attribution]:null;
        });
      } this.tileJSON_=t, this.setState('ready');
    }}, {key: 'handleTileJSONError', value: function handleTileJSONError() {
      this.setState('error');
    }}]); return Gu;
  }(Ah); var ku=/* #__PURE__*/function(_Ah7) {
    _inherits(ku, _Ah7); var _super104=_createSuper(ku); function ku(t) {
      var _this117; _classCallCheck(this, ku); t=t||{}; var e=Object.assign({}, t.params); var i=!('TRANSPARENT'in e)||e.TRANSPARENT; _this117=_super104.call(this, {attributions: t.attributions, attributionsCollapsible: t.attributionsCollapsible, cacheSize: t.cacheSize, crossOrigin: t.crossOrigin, interpolate: t.interpolate, opaque: !i, projection: t.projection, reprojectionErrorThreshold: t.reprojectionErrorThreshold, tileClass: t.tileClass, tileGrid: t.tileGrid, tileLoadFunction: t.tileLoadFunction, url: t.url, urls: t.urls, wrapX: void 0===t.wrapX||t.wrapX, transition: t.transition, zDirection: t.zDirection}), _this117.gutter_=void 0!==t.gutter?t.gutter:0, _this117.params_=e, _this117.v13_=!0, _this117.serverType_=t.serverType, _this117.hidpi_=void 0===t.hidpi||t.hidpi, _this117.tmpExtent_=[1/0, 1/0, -1/0, -1/0], _this117.updateV13_(), _this117.setKey(_this117.getKeyForParams_()); return _this117;
    }_createClass(ku, [{key: 'getFeatureInfoUrl', value: function getFeatureInfoUrl(t, e, i, n) {
      var r=an(i); var s=this.getProjection(); var o=this.getTileGrid(); o||(o=this.getTileGridForProjection(r)); var a=o.getZForResolution(e, this.zDirection); var l=o.getTileCoordForCoordAndZ(t, a); if (o.getResolutions().length<=l[0]) return; var h=o.getResolution(l[0]); var c=o.getTileCoordExtent(l, this.tmpExtent_); var u=ll(o.getTileSize(l[0]), this.tmpSize); var d=this.gutter_; 0!==d&&(u=sl(u, d, this.tmpSize), c=re(c, h*d, c)), s&&s!==r&&(h=nh(s, r, t, h), c=yn(c, r, s), t=_n(t, r, s)); var g={SERVICE: 'WMS', VERSION: tu, REQUEST: 'GetFeatureInfo', FORMAT: 'image/png', TRANSPARENT: !0, QUERY_LAYERS: this.params_.LAYERS}; Object.assign(g, this.params_, n); var f=Math.floor((t[0]-c[0])/h); var p=Math.floor((c[3]-t[1])/h); return g[this.v13_?'I':'X']=f, g[this.v13_?'J':'Y']=p, this.getRequestUrl_(l, u, c, 1, s||r, g);
    }}, {key: 'getLegendUrl', value: function getLegendUrl(t, e) {
      if (void 0===this.urls[0]) return; var i={SERVICE: 'WMS', VERSION: tu, REQUEST: 'GetLegendGraphic', FORMAT: 'image/png'}; if (void 0===e||void 0===e.LAYER) {
        var _t158=this.params_.LAYERS; if (!(!Array.isArray(_t158)||1===_t158.length)) return; i.LAYER=_t158;
      } if (void 0!==t) {
        var _e158=this.getProjection()?this.getProjection().getMetersPerUnit():1; var _n124=28e-5; i.SCALE=t*_e158/_n124;
      } return Object.assign(i, e), qc(this.urls[0], i);
    }}, {key: 'getGutter', value: function getGutter() {
      return this.gutter_;
    }}, {key: 'getParams', value: function getParams() {
      return this.params_;
    }}, {key: 'getRequestUrl_', value: function getRequestUrl_(t, e, i, n, r, s) {
      var o=this.urls; if (!o) return; if (s.WIDTH=e[0], s.HEIGHT=e[1], s[this.v13_?'CRS':'SRS']=r.getCode(), 'STYLES'in this.params_||(s.STYLES=''), 1!=n) {
        switch (this.serverType_) {
          case 'geoserver': var _t159=90*n+.5|0; 'FORMAT_OPTIONS'in s?s.FORMAT_OPTIONS+=';dpi:'+_t159:s.FORMAT_OPTIONS='dpi:'+_t159; break; case 'mapserver': s.MAP_RESOLUTION=90*n; break; case 'carmentaserver': case 'qgis': s.DPI=90*n; break; default: Ft(!1, 52);
        }
      } var a=r.getAxisOrientation(); var l=i; if (this.v13_&&'ne'==a.substr(0, 2)) {
        var _t160; _t160=i[0], l[0]=i[1], l[1]=_t160, _t160=i[2], l[2]=i[3], l[3]=_t160;
      } var h; if (s.BBOX=l.join(','), 1==o.length)h=o[0]; else {
        h=o[Ti(El(t), o.length)];
      } return qc(h, s);
    }}, {key: 'getTilePixelRatio', value: function getTilePixelRatio(t) {
      return this.hidpi_&&void 0!==this.serverType_?t:1;
    }}, {key: 'getKeyForParams_', value: function getKeyForParams_() {
      var t=0; var e=[]; for (var _i126 in this.params_)e[t++]=_i126+'-'+this.params_[_i126]; return e.join('/');
    }}, {key: 'updateParams', value: function updateParams(t) {
      Object.assign(this.params_, t), this.updateV13_(), this.setKey(this.getKeyForParams_());
    }}, {key: 'updateV13_', value: function updateV13_() {
      var t=this.params_.VERSION||tu; this.v13_=Li(t, '1.3')>=0;
    }}, {key: 'tileUrlFunction', value: function tileUrlFunction(t, e, i) {
      var n=this.getTileGrid(); if (n||(n=this.getTileGridForProjection(i)), n.getResolutions().length<=t[0]) return; 1==e||this.hidpi_&&void 0!==this.serverType_||(e=1); var r=n.getResolution(t[0]); var s=n.getTileCoordExtent(t, this.tmpExtent_); var o=ll(n.getTileSize(t[0]), this.tmpSize); var a=this.gutter_; 0!==a&&(o=sl(o, a, this.tmpSize), s=re(s, r*a, s)), 1!=e&&(o=al(o, e, this.tmpSize)); var l={SERVICE: 'WMS', VERSION: tu, REQUEST: 'GetMap', FORMAT: 'image/png', TRANSPARENT: !0}; return Object.assign(l, this.params_), this.getRequestUrl_(t, o, s, e, i, l);
    }}]); return ku;
  }(Ah); var ju=/* #__PURE__*/function(_ot6) {
    _inherits(ju, _ot6); var _super105=_createSuper(ju); function ju(t, e, i, n, r, s) {
      var _this118; _classCallCheck(this, ju); _this118=_super105.call(this, t, e), _this118.src_=i, _this118.extent_=n, _this118.preemptive_=r, _this118.grid_=null, _this118.keys_=null, _this118.data_=null, _this118.jsonp_=s; return _this118;
    }_createClass(ju, [{key: 'getImage', value: function getImage() {
      return null;
    }}, {key: 'getData', value: function getData(t) {
      if (!this.grid_||!this.keys_) return null; var e=(t[0]-this.extent_[0])/(this.extent_[2]-this.extent_[0]); var i=(t[1]-this.extent_[1])/(this.extent_[3]-this.extent_[1]); var n=this.grid_[Math.floor((1-i)*this.grid_.length)]; if ('string'!=typeof n) return null; var r=n.charCodeAt(Math.floor(e*n.length)); r>=93&&r--, r>=35&&r--, r-=32; var s=null; if (r in this.keys_) {
        var _t161=this.keys_[r]; s=this.data_&&_t161 in this.data_?this.data_[_t161]:_t161;
      } return s;
    }}, {key: 'forDataAtCoordinate', value: function forDataAtCoordinate(t, e, i) {
      var _this119=this; this.state==et&&!0===i?(this.state=$, D(this, w, function(i) {
        e(this.getData(t));
      }, this), this.loadInternal_()):!0===i?setTimeout(function() {
        e(_this119.getData(t));
      }, 0):e(this.getData(t));
    }}, {key: 'getKey', value: function getKey() {
      return this.src_;
    }}, {key: 'handleError_', value: function handleError_() {
      this.state=tt, this.changed();
    }}, {key: 'handleLoad_', value: function handleLoad_(t) {
      this.grid_=t.grid, this.keys_=t.keys, this.data_=t.data, this.state=Q, this.changed();
    }}, {key: 'loadInternal_', value: function loadInternal_() {
      if (this.state==$) {
        if (this.state=J, this.jsonp_)jl(this.src_, this.handleLoad_.bind(this), this.handleError_.bind(this)); else {
          var _t162=new XMLHttpRequest(); _t162.addEventListener('load', this.onXHRLoad_.bind(this)), _t162.addEventListener('error', this.onXHRError_.bind(this)), _t162.open('GET', this.src_), _t162.send();
        }
      }
    }}, {key: 'onXHRLoad_', value: function onXHRLoad_(t) {
      var e=t.target; if (!e.status||e.status>=200&&e.status<300) {
        var _t163; try {
          _t163=JSON.parse(e.responseText);
        } catch (t) {
          return void this.handleError_();
        } this.handleLoad_(_t163);
      } else this.handleError_();
    }}, {key: 'onXHRError_', value: function onXHRError_(t) {
      this.handleError_();
    }}, {key: 'load', value: function load() {
this.preemptive_?this.loadInternal_():this.setState(et);
    }}]); return ju;
  }(ot); var Bu=/* #__PURE__*/function(_Eh3) {
    _inherits(Bu, _Eh3); var _super106=_createSuper(Bu); function Bu(t) {
      var _this120; _classCallCheck(this, Bu); if (_this120=_super106.call(this, {projection: an('EPSG:3857'), state: 'loading', zDirection: t.zDirection}), _this120.preemptive_=void 0===t.preemptive||t.preemptive, _this120.tileUrlFunction_=Ph, _this120.template_=void 0, _this120.jsonp_=t.jsonp||!1, t.url) {
        if (_this120.jsonp_)jl(t.url, _this120.handleTileJSONResponse.bind(_assertThisInitialized(_this120)), _this120.handleTileJSONError.bind(_assertThisInitialized(_this120))); else {
          var _e159=new XMLHttpRequest(); _e159.addEventListener('load', _this120.onXHRLoad_.bind(_assertThisInitialized(_this120))), _e159.addEventListener('error', _this120.onXHRError_.bind(_assertThisInitialized(_this120))), _e159.open('GET', t.url), _e159.send();
        }
      } else t.tileJSON?_this120.handleTileJSONResponse(t.tileJSON):Ft(!1, 51); return _possibleConstructorReturn(_this120);
    }_createClass(Bu, [{key: 'onXHRLoad_', value: function onXHRLoad_(t) {
      var e=t.target; if (!e.status||e.status>=200&&e.status<300) {
        var _t164; try {
          _t164=JSON.parse(e.responseText);
        } catch (t) {
          return void this.handleTileJSONError();
        } this.handleTileJSONResponse(_t164);
      } else this.handleTileJSONError();
    }}, {key: 'onXHRError_', value: function onXHRError_(t) {
      this.handleTileJSONError();
    }}, {key: 'getTemplate', value: function getTemplate() {
      return this.template_;
    }}, {key: 'forDataAtCoordinateAndResolution', value: function forDataAtCoordinateAndResolution(t, e, i, n) {
      if (this.tileGrid) {
        var _r102=this.tileGrid.getZForResolution(e, this.zDirection); var _s85=this.tileGrid.getTileCoordForCoordAndZ(t, _r102); this.getTile(_s85[0], _s85[1], _s85[2], 1, this.getProjection()).forDataAtCoordinate(t, i, n);
      } else {
!0===n?setTimeout(function() {
  i(null);
}, 0):i(null);
      }
    }}, {key: 'handleTileJSONError', value: function handleTileJSONError() {
      this.setState('error');
    }}, {key: 'handleTileJSONResponse', value: function handleTileJSONResponse(t) {
      var e=an('EPSG:4326'); var i=this.getProjection(); var n; if (void 0!==t.bounds) {
        var _r103=pn(e, i); n=Ue(t.bounds, _r103);
      } var r=wh(i); var s=t.minzoom||0; var o=xh({extent: r, maxZoom: t.maxzoom||22, minZoom: s}); this.tileGrid=o, this.template_=t.template; var a=t.grids; if (a) {
        if (this.tileUrlFunction_=Rh(a, o), void 0!==t.attribution) {
          var _e160=void 0!==n?n:r; this.setAttributions(function(i) {
            return Ge(_e160, i.extent)?[t.attribution]:null;
          });
        } this.setState('ready');
      } else this.setState('error');
    }}, {key: 'getTile', value: function getTile(t, e, i, n, r) {
      var s=vl(t, e, i); if (this.tileCache.containsKey(s)) return this.tileCache.get(s); var o=[t, e, i]; var a=this.getTileCoordForTileUrlFunction(o, r); var l=this.tileUrlFunction_(a, n, r); var h=new ju(o, void 0!==l?$:et, void 0!==l?l:'', this.tileGrid.getTileCoordExtent(o), this.preemptive_, this.jsonp_); return this.tileCache.set(s, h), h;
    }}, {key: 'useTile', value: function useTile(t, e, i) {
      var n=vl(t, e, i); this.tileCache.containsKey(n)&&this.tileCache.get(n);
    }}]); return Bu;
  }(Eh); var zu=/* #__PURE__*/function(_Fh2) {
    _inherits(zu, _Fh2); var _super107=_createSuper(zu); function zu(t) {
      var _this121; _classCallCheck(this, zu); var e=t.projection||'EPSG:3857'; var i=t.extent||wh(e); var n=t.tileGrid||xh({extent: i, maxResolution: t.maxResolution, maxZoom: void 0!==t.maxZoom?t.maxZoom:22, minZoom: t.minZoom, tileSize: t.tileSize||512}); _this121=_super107.call(this, {attributions: t.attributions, attributionsCollapsible: t.attributionsCollapsible, cacheSize: t.cacheSize, interpolate: !0, opaque: !1, projection: e, state: t.state, tileGrid: n, tileLoadFunction: t.tileLoadFunction?t.tileLoadFunction:Uu, tileUrlFunction: t.tileUrlFunction, url: t.url, urls: t.urls, wrapX: void 0===t.wrapX||t.wrapX, transition: t.transition, zDirection: void 0===t.zDirection?1:t.zDirection}), _this121.format_=t.format?t.format:null, _this121.sourceTileCache=new Rl(_this121.tileCache.highWaterMark), _this121.overlaps_=null==t.overlaps||t.overlaps, _this121.tileClass=t.tileClass?t.tileClass:Ml, _this121.tileGrids_={}; return _this121;
    }_createClass(zu, [{key: 'getFeaturesInExtent', value: function getFeaturesInExtent(t) {
      var e=[]; var i=this.tileCache; if (0===i.getCount()) return e; var n=Tl(i.peekFirstKey())[0]; var r=this.tileGrid; return i.forEach(function(i) {
        if (i.tileCoord[0]!==n||i.getState()!==Q) return; var s=i.getSourceTiles(); for (var _i127=0, _n125=s.length; _i127<_n125; ++_i127) {
          var _n126=s[_i127]; var _o78=_n126.tileCoord; if (Ge(t, r.getTileCoordExtent(_o78))) {
            var _i128=_n126.getFeatures(); if (_i128) {
              for (var _n127=0, _r104=_i128.length; _n127<_r104; ++_n127) {
                var _r105=_i128[_n127]; var _s86=_r105.getGeometry(); Ge(t, _s86.getExtent())&&e.push(_r105);
              }
            }
          }
        }
      }), e;
    }}, {key: 'getOverlaps', value: function getOverlaps() {
      return this.overlaps_;
    }}, {key: 'clear', value: function clear() {
      this.tileCache.clear(), this.sourceTileCache.clear();
    }}, {key: 'expireCache', value: function expireCache(t, e) {
      var i=this.getTileCacheForProjection(t); var n=Object.keys(e).reduce(function(t, e) {
        var n=wl(e); var r=i.peek(n); if (r) {
          var _e161=r.sourceTiles; for (var _i129=0, _n128=_e161.length; _i129<_n128; ++_i129)t[_e161[_i129].getKey()]=!0;
        } return t;
      }, {}); _get(_getPrototypeOf(zu.prototype), 'expireCache', this).call(this, t, e), this.sourceTileCache.expireCache(n);
    }}, {key: 'getSourceTiles', value: function getSourceTiles(t, e, i) {
      var _this122=this; if (i.getState()===$) {
        i.setState(J); var _n129=i.wrappedTileCoord; var _r106=this.getTileGridForProjection(e); var _s87=_r106.getTileCoordExtent(_n129); var _o79=_n129[0]; var _a46=_r106.getResolution(_o79); re(_s87, -_a46, _s87); var _l30=this.tileGrid; var _h31=_l30.getExtent(); _h31&&Ae(_s87, _h31, _s87); var _c16=_l30.getZForResolution(_a46, this.zDirection); _l30.forEachTileCoord(_s87, _c16, function(n) {
          var r=_this122.tileUrlFunction(n, t, e); var s=_this122.sourceTileCache.containsKey(r)?_this122.sourceTileCache.get(r):new _this122.tileClass(n, r?$:et, r, _this122.format_, _this122.tileLoadFunction); i.sourceTiles.push(s); var o=s.getState(); if (o<Q) {
            var _t165=function _t165(e) {
              _this122.handleTileChange(e); var n=s.getState(); if (n===Q||n===tt) {
                var _e162=s.getKey(); _e162 in i.errorTileKeys?s.getState()===Q&&delete i.errorTileKeys[_e162]:i.loadingSourceTiles--, n===tt?i.errorTileKeys[_e162]=!0:s.removeEventListener(w, _t165), 0===i.loadingSourceTiles&&i.setState(v(i.errorTileKeys)?Q:tt);
              }
            }; s.addEventListener(w, _t165), i.loadingSourceTiles++;
          }o===$&&(s.extent=_l30.getTileCoordExtent(n), s.projection=e, s.resolution=_l30.getResolution(n[0]), _this122.sourceTileCache.set(r, s), s.load());
        }), i.loadingSourceTiles||i.setState(i.sourceTiles.some(function(t) {
          return t.getState()===tt;
        })?tt:Q);
      } return i.sourceTiles;
    }}, {key: 'getTile', value: function getTile(t, e, i, n, r) {
      var _this123=this; var s=vl(t, e, i); var o=this.getKey(); var a; if (this.tileCache.containsKey(s)&&(a=this.tileCache.get(s), a.key===o)) return a; var l=[t, e, i]; var h=this.getTileCoordForTileUrlFunction(l, r); var c=this.getTileGrid().getExtent(); var u=this.getTileGridForProjection(r); if (h&&c) {
        var _e163=u.getTileCoordExtent(h); re(_e163, -u.getResolution(t), _e163), Ge(c, _e163)||(h=null);
      } var d=!0; if (null!==h) {
        var _e164=this.tileGrid; var _i130=u.getResolution(t); var _s88=_e164.getZForResolution(_i130, 1); var _o80=u.getTileCoordExtent(h); re(_o80, -_i130, _o80), _e164.forEachTileCoord(_o80, _s88, function(t) {
          d=d&&!_this123.tileUrlFunction(t, n, r);
        });
      } var g=new Fl(l, d?et:$, h, this.getSourceTiles.bind(this, n, r)); return g.key=o, a?(g.interimTile=a, g.refreshInterimChain(), this.tileCache.replace(s, g)):this.tileCache.set(s, g), g;
    }}, {key: 'getTileGridForProjection', value: function getTileGridForProjection(t) {
      var e=t.getCode(); var i=this.tileGrids_[e]; if (!i) {
        var _t166=this.tileGrid; var _n130=_t166.getResolutions().slice(); var _r107=_n130.map(function(e, i) {
          return _t166.getOrigin(i);
        }); var _s89=_n130.map(function(e, i) {
          return _t166.getTileSize(i);
        }); var _o81=43; for (var _t167=_n130.length; _t167<_o81; ++_t167)_n130.push(_n130[_t167-1]/2), _r107.push(_r107[_t167-1]), _s89.push(_s89[_t167-1]); i=new ph({extent: _t166.getExtent(), origins: _r107, resolutions: _n130, tileSizes: _s89}), this.tileGrids_[e]=i;
      } return i;
    }}, {key: 'getTilePixelRatio', value: function getTilePixelRatio(t) {
      return t;
    }}, {key: 'getTilePixelSize', value: function getTilePixelSize(t, e, i) {
      var n=ll(this.getTileGridForProjection(i).getTileSize(t), this.tmpSize); return [Math.round(n[0]*e), Math.round(n[1]*e)];
    }}, {key: 'updateCacheSize', value: function updateCacheSize(t, e) {
      _get(_getPrototypeOf(zu.prototype), 'updateCacheSize', this).call(this, 2*t, e), this.sourceTileCache.highWaterMark=this.getTileCacheForProjection(e).highWaterMark;
    }}]); return zu;
  }(Fh); function Uu(t, e) {
    t.setLoader(function(i, n, r) {
      Dl(e, t.getFormat(), i, n, r, t.onLoad.bind(t), t.onError.bind(t));
    });
  } var Xu=/* #__PURE__*/function(_ph) {
    _inherits(Xu, _ph); var _super108=_createSuper(Xu); function Xu(t) {
      var _this124; _classCallCheck(this, Xu); _this124=_super108.call(this, {extent: t.extent, origin: t.origin, origins: t.origins, resolutions: t.resolutions, tileSize: t.tileSize, tileSizes: t.tileSizes, sizes: t.sizes}), _this124.matrixIds_=t.matrixIds; return _this124;
    }_createClass(Xu, [{key: 'getMatrixId', value: function getMatrixId(t) {
      return this.matrixIds_[t];
    }}, {key: 'getMatrixIds', value: function getMatrixIds() {
      return this.matrixIds_;
    }}]); return Xu;
  }(ph); var Vu=Xu; function Wu(t, e, i) {
    var n=[]; var r=[]; var s=[]; var o=[]; var a=[]; i=void 0!==i?i:[]; var l=an(t.SupportedCRS); var h=l.getMetersPerUnit(); var c='ne'==l.getAxisOrientation().substr(0, 2); return t.TileMatrix.sort(function(t, e) {
      return e.ScaleDenominator-t.ScaleDenominator;
    }), t.TileMatrix.forEach(function(e) {
      var l; if (l=!(i.length>0)||i.find(function(i) {
        return e.Identifier==i.TileMatrix||!e.Identifier.includes(':')&&t.Identifier+':'+e.Identifier===i.TileMatrix;
      }), l) {
        r.push(e.Identifier); var _t168=28e-5*e.ScaleDenominator/h; var _i131=e.TileWidth; var _l31=e.TileHeight; c?s.push([e.TopLeftCorner[1], e.TopLeftCorner[0]]):s.push(e.TopLeftCorner), n.push(_t168), o.push(_i131==_l31?_i131:[_i131, _l31]), a.push([e.MatrixWidth, e.MatrixHeight]);
      }
    }), new Xu({extent: e, origins: s, resolutions: n, matrixIds: r, tileSizes: o, sizes: a});
  } var Zu=/* #__PURE__*/function(_Ah8) {
    _inherits(Zu, _Ah8); var _super109=_createSuper(Zu); function Zu(t) {
      var _this125; _classCallCheck(this, Zu); var e=void 0!==t.requestEncoding?t.requestEncoding:'KVP'; var i=t.tileGrid; var n=t.urls; void 0===n&&void 0!==t.url&&(n=Ih(t.url)), _this125=_super109.call(this, {attributions: t.attributions, attributionsCollapsible: t.attributionsCollapsible, cacheSize: t.cacheSize, crossOrigin: t.crossOrigin, interpolate: t.interpolate, projection: t.projection, reprojectionErrorThreshold: t.reprojectionErrorThreshold, tileClass: t.tileClass, tileGrid: i, tileLoadFunction: t.tileLoadFunction, tilePixelRatio: t.tilePixelRatio, urls: n, wrapX: void 0!==t.wrapX&&t.wrapX, transition: t.transition, zDirection: t.zDirection}), _this125.version_=void 0!==t.version?t.version:'1.0.0', _this125.format_=void 0!==t.format?t.format:'image/jpeg', _this125.dimensions_=void 0!==t.dimensions?t.dimensions:{}, _this125.layer_=t.layer, _this125.matrixSet_=t.matrixSet, _this125.style_=t.style, _this125.requestEncoding_=e, _this125.setKey(_this125.getKeyForDimensions_()), n&&n.length>0&&(_this125.tileUrlFunction=bh(n.map(_this125.createFromWMTSTemplate.bind(_assertThisInitialized(_this125))))); return _this125;
    }_createClass(Zu, [{key: 'setUrls', value: function setUrls(t) {
      this.urls=t; var e=t.join('\n'); this.setTileUrlFunction(bh(t.map(this.createFromWMTSTemplate.bind(this))), e);
    }}, {key: 'getDimensions', value: function getDimensions() {
      return this.dimensions_;
    }}, {key: 'getFormat', value: function getFormat() {
      return this.format_;
    }}, {key: 'getLayer', value: function getLayer() {
      return this.layer_;
    }}, {key: 'getMatrixSet', value: function getMatrixSet() {
      return this.matrixSet_;
    }}, {key: 'getRequestEncoding', value: function getRequestEncoding() {
      return this.requestEncoding_;
    }}, {key: 'getStyle', value: function getStyle() {
      return this.style_;
    }}, {key: 'getVersion', value: function getVersion() {
      return this.version_;
    }}, {key: 'getKeyForDimensions_', value: function getKeyForDimensions_() {
      var t=this.urls?this.urls.slice(0):[]; for (var _e165 in this.dimensions_)t.push(_e165+'-'+this.dimensions_[_e165]); return t.join('/');
    }}, {key: 'updateDimensions', value: function updateDimensions(t) {
      Object.assign(this.dimensions_, t), this.setKey(this.getKeyForDimensions_());
    }}, {key: 'createFromWMTSTemplate', value: function createFromWMTSTemplate(t) {
      var e=this.requestEncoding_; var i={layer: this.layer_, style: this.style_, tilematrixset: this.matrixSet_}; 'KVP'==e&&Object.assign(i, {Service: 'WMTS', Request: 'GetTile', Version: this.version_, Format: this.format_}), t='KVP'==e?qc(t, i):t.replace(/\{(\w+?)\}/g, function(t, e) {
        return e.toLowerCase()in i?i[e.toLowerCase()]:t;
      }); var n=this.tileGrid; var r=this.dimensions_; return function(i, s, o) {
        if (!i) return; var a={TileMatrix: n.getMatrixId(i[0]), TileCol: i[1], TileRow: i[2]}; Object.assign(a, r); var l=t; return l='KVP'==e?qc(l, a):l.replace(/\{(\w+?)\}/g, function(t, e) {
          return a[e];
        }), l;
      };
    }}]); return Zu;
  }(Ah); var Yu=34962; var Ku=34963; var qu=35044; var Hu=35048; var $u=5126; var Ju=['experimental-webgl', 'webgl', 'webkit-3d', 'moz-webgl']; function Qu(t, e) {
    e=Object.assign({preserveDrawingBuffer: !0, antialias: !ct}, e); var i=Ju.length; for (var _n131=0; _n131<i; ++_n131) {
      try {
        var _i132=t.getContext(Ju[_n131], e); if (_i132) return _i132;
      } catch (t) {}
    } return null;
  } var td; var ed='http://www.w3.org/2001/XMLSchema-instance'; function id(t, e) {
    return Rd().createElementNS(t, e);
  } function nd(t, e) {
    return rd(t, e, []).join('');
  } function rd(t, e, i) {
    if (t.nodeType==Node.CDATA_SECTION_NODE||t.nodeType==Node.TEXT_NODE)e?i.push(String(t.nodeValue).replace(/(\r\n|\r|\n)/g, '')):i.push(t.nodeValue); else {
      var _n132; for (_n132=t.firstChild; _n132; _n132=_n132.nextSibling)rd(_n132, e, i);
    } return i;
  } function sd(t) {
    return 'documentElement'in t;
  } function od(t, e, i) {
    return t.getAttributeNS(e, i)||'';
  } function ad(t) {
    return new DOMParser().parseFromString(t, 'application/xml');
  } function ld(t, e) {
    return function(i, n) {
      var r=t.call(void 0!==e?e:this, i, n); if (void 0!==r) {
        u(n[n.length-1], r);
      }
    };
  } function hd(t, e) {
    return function(i, n) {
      var r=t.call(void 0!==e?e:this, i, n); if (void 0!==r) {
        n[n.length-1].push(r);
      }
    };
  } function cd(t, e) {
    return function(i, n) {
      var r=t.call(void 0!==e?e:this, i, n); void 0!==r&&(n[n.length-1]=r);
    };
  } function ud(t, e, i) {
    return function(n, r) {
      var s=t.call(void 0!==i?i:this, n, r); if (void 0!==s) {
        var _t169=r[r.length-1]; var _i133=void 0!==e?e:n.localName; var _o82; _i133 in _t169?_o82=_t169[_i133]:(_o82=[], _t169[_i133]=_o82), _o82.push(s);
      }
    };
  } function dd(t, e, i) {
    return function(n, r) {
      var s=t.call(void 0!==i?i:this, n, r); if (void 0!==s) {
        r[r.length-1][void 0!==e?e:n.localName]=s;
      }
    };
  } function gd(t, e) {
    return function(i, n, r) {
      t.call(void 0!==e?e:this, i, n, r); r[r.length-1].node.appendChild(i);
    };
  } function fd(t, e) {
    var i; var n; return function(e, r, s) {
      if (void 0===i) {
        i={}; var _r108={}; _r108[e.localName]=t, i[e.namespaceURI]=_r108, n=pd(e.localName);
      }Sd(i, n, r, s);
    };
  } function pd(t, e) {
    return function(i, n, r) {
      var s=n[n.length-1].node; var o=t; void 0===o&&(o=r); return id(void 0!==e?e:s.namespaceURI, o);
    };
  } var md=pd(); function _d(t, e) {
    var i=e.length; var n=new Array(i); for (var _r109=0; _r109<i; ++_r109)n[_r109]=t[e[_r109]]; return n;
  } function yd(t, e, i) {
    var n; var r; for (i=void 0!==i?i:{}, n=0, r=t.length; n<r; ++n)i[t[n]]=e; return i;
  } function xd(t, e, i, n) {
    var r; for (r=e.firstElementChild; r; r=r.nextElementSibling) {
      var _e166=t[r.namespaceURI]; if (void 0!==_e166) {
        var _t170=_e166[r.localName]; void 0!==_t170&&_t170.call(n, r, i);
      }
    }
  } function vd(t, e, i, n, r) {
    return n.push(t), xd(e, i, n, r), n.pop();
  } function Sd(t, e, i, n, r, s) {
    var o=(void 0!==r?r:i).length; var a; var l; for (var _h32=0; _h32<o; ++_h32)a=i[_h32], void 0!==a&&(l=e.call(void 0!==s?s:this, a, n, void 0!==r?r[_h32]:void 0), void 0!==l&&t[l.namespaceURI][l.localName].call(s, l, a, n));
  } function wd(t, e, i, n, r, s, o) {
    return r.push(t), Sd(e, i, n, r, s, o), r.pop();
  } var Td; var Ed; function Cd() {
    return void 0===Td&&'undefined'!=typeof XMLSerializer&&(Td=new XMLSerializer()), Td;
  } function Rd() {
    return void 0===Ed&&'undefined'!=typeof document&&(Ed=document.implementation.createDocument('', '', null)), Ed;
  } var bd=qu; function Pd(t) {
    switch (t) {
      case Yu: return Float32Array; case Ku: return Uint32Array; default: return Float32Array;
    }
  } var Id=/* #__PURE__*/function() {
    function Id(t, e) {
      _classCallCheck(this, Id); this.array=null, this.type=t, Ft(t===Yu||t===Ku, 62), this.usage=void 0!==e?e:bd;
    }_createClass(Id, [{key: 'ofSize', value: function ofSize(t) {
      this.array=new(Pd(this.type))(t);
    }}, {key: 'fromArray', value: function fromArray(t) {
      this.array=Pd(this.type).from(t);
    }}, {key: 'fromArrayBuffer', value: function fromArrayBuffer(t) {
      this.array=new(Pd(this.type))(t);
    }}, {key: 'getType', value: function getType() {
      return this.type;
    }}, {key: 'getArray', value: function getArray() {
      return this.array;
    }}, {key: 'getUsage', value: function getUsage() {
      return this.usage;
    }}, {key: 'getSize', value: function getSize() {
      return this.array?this.array.length:0;
    }}]); return Id;
  }(); var Ld='webglcontextlost'; var Fd='webglcontextrestored'; var Md=/* #__PURE__*/function() {
    function Md(t) {
      var _this126=this; _classCallCheck(this, Md); this.gl_=t.webGlContext; var e=this.gl_; this.scaleRatio_=t.scaleRatio||1, this.renderTargetTexture_=e.createTexture(), this.renderTargetTextureSize_=null, this.frameBuffer_=e.createFramebuffer(); var i=e.createShader(e.VERTEX_SHADER); e.shaderSource(i, t.vertexShader||'\n  precision mediump float;\n  \n  attribute vec2 a_position;\n  varying vec2 v_texCoord;\n  varying vec2 v_screenCoord;\n  \n  uniform vec2 u_screenSize;\n   \n  void main() {\n    v_texCoord = a_position * 0.5 + 0.5;\n    v_screenCoord = v_texCoord * u_screenSize;\n    gl_Position = vec4(a_position, 0.0, 1.0);\n  }\n'), e.compileShader(i); var n=e.createShader(e.FRAGMENT_SHADER); e.shaderSource(n, t.fragmentShader||'\n  precision mediump float;\n   \n  uniform sampler2D u_image;\n  uniform float u_opacity;\n   \n  varying vec2 v_texCoord;\n   \n  void main() {\n    gl_FragColor = texture2D(u_image, v_texCoord) * u_opacity;\n  }\n'), e.compileShader(n), this.renderTargetProgram_=e.createProgram(), e.attachShader(this.renderTargetProgram_, i), e.attachShader(this.renderTargetProgram_, n), e.linkProgram(this.renderTargetProgram_), this.renderTargetVerticesBuffer_=e.createBuffer(); e.bindBuffer(e.ARRAY_BUFFER, this.renderTargetVerticesBuffer_), e.bufferData(e.ARRAY_BUFFER, new Float32Array([-1, -1, 1, -1, -1, 1, 1, -1, 1, 1, -1, 1]), e.STATIC_DRAW), this.renderTargetAttribLocation_=e.getAttribLocation(this.renderTargetProgram_, 'a_position'), this.renderTargetUniformLocation_=e.getUniformLocation(this.renderTargetProgram_, 'u_screenSize'), this.renderTargetOpacityLocation_=e.getUniformLocation(this.renderTargetProgram_, 'u_opacity'), this.renderTargetTextureLocation_=e.getUniformLocation(this.renderTargetProgram_, 'u_image'), this.uniforms_=[], t.uniforms&&Object.keys(t.uniforms).forEach(function(i) {
        _this126.uniforms_.push({value: t.uniforms[i], location: e.getUniformLocation(_this126.renderTargetProgram_, i)});
      });
    }_createClass(Md, [{key: 'getGL', value: function getGL() {
      return this.gl_;
    }}, {key: 'init', value: function init(t) {
      var e=this.getGL(); var i=[e.drawingBufferWidth*this.scaleRatio_, e.drawingBufferHeight*this.scaleRatio_]; if (e.bindFramebuffer(e.FRAMEBUFFER, this.getFrameBuffer()), e.viewport(0, 0, i[0], i[1]), !this.renderTargetTextureSize_||this.renderTargetTextureSize_[0]!==i[0]||this.renderTargetTextureSize_[1]!==i[1]) {
        this.renderTargetTextureSize_=i; var _t171=0; var _n133=e.RGBA; var _r110=0; var _s90=e.RGBA; var _o83=e.UNSIGNED_BYTE; var _a47=null; e.bindTexture(e.TEXTURE_2D, this.renderTargetTexture_), e.texImage2D(e.TEXTURE_2D, _t171, _n133, i[0], i[1], _r110, _s90, _o83, _a47), e.texParameteri(e.TEXTURE_2D, e.TEXTURE_MIN_FILTER, e.LINEAR), e.texParameteri(e.TEXTURE_2D, e.TEXTURE_WRAP_S, e.CLAMP_TO_EDGE), e.texParameteri(e.TEXTURE_2D, e.TEXTURE_WRAP_T, e.CLAMP_TO_EDGE), e.framebufferTexture2D(e.FRAMEBUFFER, e.COLOR_ATTACHMENT0, e.TEXTURE_2D, this.renderTargetTexture_, 0);
      }
    }}, {key: 'apply', value: function apply(t, e, i, n) {
      var r=this.getGL(); var s=t.size; if (r.bindFramebuffer(r.FRAMEBUFFER, e?e.getFrameBuffer():null), r.activeTexture(r.TEXTURE0), r.bindTexture(r.TEXTURE_2D, this.renderTargetTexture_), !e) {
        var _e167=X(r.canvas); if (!t.renderTargets[_e167]) {
          var _i134=r.getContextAttributes(); _i134&&_i134.preserveDrawingBuffer&&(r.clearColor(0, 0, 0, 0), r.clear(r.COLOR_BUFFER_BIT)), t.renderTargets[_e167]=!0;
        }
      }r.enable(r.BLEND), r.blendFunc(r.ONE, r.ONE_MINUS_SRC_ALPHA), r.viewport(0, 0, r.drawingBufferWidth, r.drawingBufferHeight), r.bindBuffer(r.ARRAY_BUFFER, this.renderTargetVerticesBuffer_), r.useProgram(this.renderTargetProgram_), r.enableVertexAttribArray(this.renderTargetAttribLocation_), r.vertexAttribPointer(this.renderTargetAttribLocation_, 2, r.FLOAT, !1, 0, 0), r.uniform2f(this.renderTargetUniformLocation_, s[0], s[1]), r.uniform1i(this.renderTargetTextureLocation_, 0); var o=t.layerStatesArray[t.layerIndex].opacity; r.uniform1f(this.renderTargetOpacityLocation_, o), this.applyUniforms(t), i&&i(r, t), r.drawArrays(r.TRIANGLES, 0, 6), n&&n(r, t);
    }}, {key: 'getFrameBuffer', value: function getFrameBuffer() {
      return this.frameBuffer_;
    }}, {key: 'applyUniforms', value: function applyUniforms(t) {
      var e=this.getGL(); var i; var n=1; this.uniforms_.forEach(function(r) {
        if (i='function'==typeof r.value?r.value(t):r.value, i instanceof HTMLCanvasElement||i instanceof ImageData)r.texture||(r.texture=e.createTexture()), e.activeTexture(e['TEXTURE'.concat(n)]), e.bindTexture(e.TEXTURE_2D, r.texture), e.texParameteri(e.TEXTURE_2D, e.TEXTURE_MIN_FILTER, e.LINEAR), e.texParameteri(e.TEXTURE_2D, e.TEXTURE_WRAP_S, e.CLAMP_TO_EDGE), e.texParameteri(e.TEXTURE_2D, e.TEXTURE_WRAP_T, e.CLAMP_TO_EDGE), i instanceof ImageData?e.texImage2D(e.TEXTURE_2D, 0, e.RGBA, e.RGBA, i.width, i.height, 0, e.UNSIGNED_BYTE, new Uint8Array(i.data)):e.texImage2D(e.TEXTURE_2D, 0, e.RGBA, e.RGBA, e.UNSIGNED_BYTE, i), e.uniform1i(r.location, n++); else if (Array.isArray(i)) {
          switch (i.length) {
            case 2: return void e.uniform2f(r.location, i[0], i[1]); case 3: return void e.uniform3f(r.location, i[0], i[1], i[2]); case 4: return void e.uniform4f(r.location, i[0], i[1], i[2], i[3]); default: return;
          }
        } else 'number'==typeof i&&e.uniform1f(r.location, i);
      });
    }}]); return Md;
  }(); function Ad() {
    return [1, 0, 0, 0, 0, 1, 0, 0, 0, 0, 1, 0, 0, 0, 0, 1];
  } function Od(t, e) {
    return t[0]=e[0], t[1]=e[1], t[4]=e[2], t[5]=e[3], t[12]=e[4], t[13]=e[5], t;
  } var Nd='u_projectionMatrix'; var Dd='u_offsetScaleMatrix'; var Gd='u_offsetRotateMatrix'; var kd='u_time'; var jd='u_zoom'; var Bd='u_resolution'; var zd='u_sizePx'; var Ud='u_pixelRatio'; var Xd={UNSIGNED_BYTE: 5121, UNSIGNED_SHORT: 5123, UNSIGNED_INT: 5125, FLOAT: $u}; var Vd={}; function Wd(t) {
    return 'shared/'+t;
  } var Zd=0; function Yd(t) {
    var e=0; for (var _i135=0; _i135<t.length; _i135++) {
      var _n134=t[_i135]; e+=_n134.size*Kd(_n134.type);
    } return e;
  } function Kd(t) {
    switch (t) {
      case Xd.UNSIGNED_BYTE: return Uint8Array.BYTES_PER_ELEMENT; case Xd.UNSIGNED_SHORT: return Uint16Array.BYTES_PER_ELEMENT; case Xd.UNSIGNED_INT: return Uint32Array.BYTES_PER_ELEMENT; case Xd.FLOAT: default: return Float32Array.BYTES_PER_ELEMENT;
    }
  } var qd=/* #__PURE__*/function(_o84) {
    _inherits(qd, _o84); var _super110=_createSuper(qd); function qd(t) {
      var _this127; _classCallCheck(this, qd); _this127=_super110.call(this), t=t||{}, _this127.boundHandleWebGLContextLost_=_this127.handleWebGLContextLost.bind(_assertThisInitialized(_this127)), _this127.boundHandleWebGLContextRestored_=_this127.handleWebGLContextRestored.bind(_assertThisInitialized(_this127)), _this127.canvasCacheKey_=t.canvasCacheKey?Wd(t.canvasCacheKey):function() {
        var t='unique/'+Zd; return Zd+=1, t;
      }(), _this127.canvas_=function(t) {
        var e=Vd[t]; if (!e) {
          var _i136=document.createElement('canvas'); _i136.style.position='absolute', _i136.style.left='0', e={users: 0, canvas: _i136}, Vd[t]=e;
        } return e.users+=1, e.canvas;
      }(_this127.canvasCacheKey_), _this127.gl_=Qu(_this127.canvas_), _this127.bufferCache_={}, _this127.extensionCache_={}, _this127.currentProgram_=null, _this127.canvas_.addEventListener(Ld, _this127.boundHandleWebGLContextLost_), _this127.canvas_.addEventListener(Fd, _this127.boundHandleWebGLContextRestored_), _this127.offsetRotateMatrix_=[1, 0, 0, 1, 0, 0], _this127.offsetScaleMatrix_=[1, 0, 0, 1, 0, 0], _this127.tmpMat4_=[1, 0, 0, 0, 0, 1, 0, 0, 0, 0, 1, 0, 0, 0, 0, 1], _this127.uniformLocations_={}, _this127.attribLocations_={}, _this127.uniforms_=[], t.uniforms&&_this127.setUniforms(t.uniforms); var e=_this127.getGL(); _this127.postProcessPasses_=t.postProcesses?t.postProcesses.map(function(t) {
        return new Md({webGlContext: e, scaleRatio: t.scaleRatio, vertexShader: t.vertexShader, fragmentShader: t.fragmentShader, uniforms: t.uniforms});
      }):[new Md({webGlContext: e})], _this127.shaderCompileErrors_=null, _this127.startTime_=Date.now(); return _this127;
    }_createClass(qd, [{key: 'setUniforms', value: function setUniforms(t) {
      this.uniforms_=[]; for (var _e168 in t) this.uniforms_.push({name: _e168, value: t[_e168]}); this.uniformLocations_={};
    }}, {key: 'canvasCacheKeyMatches', value: function canvasCacheKeyMatches(t) {
      return this.canvasCacheKey_===Wd(t);
    }}, {key: 'getExtension', value: function getExtension(t) {
      if (t in this.extensionCache_) return this.extensionCache_[t]; var e=this.gl_.getExtension(t); return this.extensionCache_[t]=e, e;
    }}, {key: 'bindBuffer', value: function bindBuffer(t) {
      var e=this.getGL(); var i=X(t); var n=this.bufferCache_[i]; if (!n) {
        n={buffer: t, webGlBuffer: e.createBuffer()}, this.bufferCache_[i]=n;
      }e.bindBuffer(t.getType(), n.webGlBuffer);
    }}, {key: 'flushBufferData', value: function flushBufferData(t) {
      var e=this.getGL(); this.bindBuffer(t), e.bufferData(t.getType(), t.getArray(), t.getUsage());
    }}, {key: 'deleteBuffer', value: function deleteBuffer(t) {
      var e=this.getGL(); var i=X(t); var n=this.bufferCache_[i]; n&&!e.isContextLost()&&e.deleteBuffer(n.webGlBuffer), delete this.bufferCache_[i];
    }}, {key: 'disposeInternal', value: function disposeInternal() {
      this.canvas_.removeEventListener(Ld, this.boundHandleWebGLContextLost_), this.canvas_.removeEventListener(Fd, this.boundHandleWebGLContextRestored_), function(t) {
        var e=Vd[t]; if (!e) return; if (e.users-=1, e.users>0) return; var i=Qu(e.canvas).getExtension('WEBGL_lose_context'); i&&i.loseContext(), delete Vd[t];
      }(this.canvasCacheKey_), delete this.gl_, delete this.canvas_;
    }}, {key: 'prepareDraw', value: function prepareDraw(t, e) {
      var i=this.getGL(); var n=this.getCanvas(); var r=t.size; var s=t.pixelRatio; n.width=r[0]*s, n.height=r[1]*s, n.style.width=r[0]+'px', n.style.height=r[1]+'px'; for (var _e169=this.postProcessPasses_.length-1; _e169>=0; _e169--) this.postProcessPasses_[_e169].init(t); i.bindTexture(i.TEXTURE_2D, null), i.clearColor(0, 0, 0, 0), i.clear(i.COLOR_BUFFER_BIT), i.enable(i.BLEND), i.blendFunc(i.ONE, e?i.ZERO:i.ONE_MINUS_SRC_ALPHA);
    }}, {key: 'prepareDrawToRenderTarget', value: function prepareDrawToRenderTarget(t, e, i) {
      var n=this.getGL(); var r=e.getSize(); n.bindFramebuffer(n.FRAMEBUFFER, e.getFramebuffer()), n.viewport(0, 0, r[0], r[1]), n.bindTexture(n.TEXTURE_2D, e.getTexture()), n.clearColor(0, 0, 0, 0), n.clear(n.COLOR_BUFFER_BIT), n.enable(n.BLEND), n.blendFunc(n.ONE, i?n.ZERO:n.ONE_MINUS_SRC_ALPHA);
    }}, {key: 'drawElements', value: function drawElements(t, e) {
      var i=this.getGL(); this.getExtension('OES_element_index_uint'); var n=i.UNSIGNED_INT; var r=e-t; var s=4*t; i.drawElements(i.TRIANGLES, r, n, s);
    }}, {key: 'finalizeDraw', value: function finalizeDraw(t, e, i) {
      for (var _n135=0, _r111=this.postProcessPasses_.length; _n135<_r111; _n135++)_n135===_r111-1?this.postProcessPasses_[_n135].apply(t, null, e, i):this.postProcessPasses_[_n135].apply(t, this.postProcessPasses_[_n135+1]);
    }}, {key: 'getCanvas', value: function getCanvas() {
      return this.canvas_;
    }}, {key: 'getGL', value: function getGL() {
      return this.gl_;
    }}, {key: 'applyFrameState', value: function applyFrameState(t) {
      var e=t.size; var i=t.viewState.rotation; var n=t.pixelRatio; var r=Gt(this.offsetScaleMatrix_); Xt(r, 2/e[0], 2/e[1]); var s=Gt(this.offsetRotateMatrix_); 0!==i&&Ut(s, -i), this.setUniformMatrixValue(Dd, Od(this.tmpMat4_, r)), this.setUniformMatrixValue(Gd, Od(this.tmpMat4_, s)), this.setUniformFloatValue(kd, .001*(Date.now()-this.startTime_)), this.setUniformFloatValue(jd, t.viewState.zoom), this.setUniformFloatValue(Bd, t.viewState.resolution), this.setUniformFloatValue(Ud, n), this.setUniformFloatVec2(zd, [e[0], e[1]]);
    }}, {key: 'applyUniforms', value: function applyUniforms(t) {
      var _this128=this; var e=this.getGL(); var i; var n=0; this.uniforms_.forEach(function(r) {
        if (i='function'==typeof r.value?r.value(t):r.value, i instanceof HTMLCanvasElement||i instanceof HTMLImageElement||i instanceof ImageData) {
          r.texture||(r.prevValue=void 0, r.texture=e.createTexture()), e.activeTexture(e['TEXTURE'.concat(n)]), e.bindTexture(e.TEXTURE_2D, r.texture), e.texParameteri(e.TEXTURE_2D, e.TEXTURE_MIN_FILTER, e.LINEAR), e.texParameteri(e.TEXTURE_2D, e.TEXTURE_WRAP_S, e.CLAMP_TO_EDGE), e.texParameteri(e.TEXTURE_2D, e.TEXTURE_WRAP_T, e.CLAMP_TO_EDGE); (!(i instanceof HTMLImageElement)||i.complete)&&r.prevValue!==i&&(r.prevValue=i, e.texImage2D(e.TEXTURE_2D, 0, e.RGBA, e.RGBA, e.UNSIGNED_BYTE, i)), e.uniform1i(_this128.getUniformLocation(r.name), n++);
        } else if (Array.isArray(i)&&6===i.length)_this128.setUniformMatrixValue(r.name, Od(_this128.tmpMat4_, i)); else if (Array.isArray(i)&&i.length<=4) {
          switch (i.length) {
            case 2: return void e.uniform2f(_this128.getUniformLocation(r.name), i[0], i[1]); case 3: return void e.uniform3f(_this128.getUniformLocation(r.name), i[0], i[1], i[2]); case 4: return void e.uniform4f(_this128.getUniformLocation(r.name), i[0], i[1], i[2], i[3]); default: return;
          }
        } else 'number'==typeof i&&e.uniform1f(_this128.getUniformLocation(r.name), i);
      });
    }}, {key: 'useProgram', value: function useProgram(t, e) {
      this.getGL().useProgram(t), this.currentProgram_=t, this.uniformLocations_={}, this.attribLocations_={}, this.applyFrameState(e), this.applyUniforms(e);
    }}, {key: 'compileShader', value: function compileShader(t, e) {
      var i=this.getGL(); var n=i.createShader(e); return i.shaderSource(n, t), i.compileShader(n), n;
    }}, {key: 'getProgram', value: function getProgram(t, e) {
      var i=this.getGL(); var n=this.compileShader(t, i.FRAGMENT_SHADER); var r=this.compileShader(e, i.VERTEX_SHADER); var s=i.createProgram(); if (i.attachShader(s, n), i.attachShader(s, r), i.linkProgram(s), !i.getShaderParameter(n, i.COMPILE_STATUS)) {
        var _t172='Fragment shader compilation failed: '.concat(i.getShaderInfoLog(n)); throw new Error(_t172);
      } if (i.deleteShader(n), !i.getShaderParameter(r, i.COMPILE_STATUS)) {
        var _t173='Vertex shader compilation failed: '.concat(i.getShaderInfoLog(r)); throw new Error(_t173);
      } if (i.deleteShader(r), !i.getProgramParameter(s, i.LINK_STATUS)) {
        var _t174='GL program linking failed: '.concat(i.getShaderInfoLog(r)); throw new Error(_t174);
      } return s;
    }}, {key: 'getUniformLocation', value: function getUniformLocation(t) {
      return void 0===this.uniformLocations_[t]&&(this.uniformLocations_[t]=this.getGL().getUniformLocation(this.currentProgram_, t)), this.uniformLocations_[t];
    }}, {key: 'getAttributeLocation', value: function getAttributeLocation(t) {
      return void 0===this.attribLocations_[t]&&(this.attribLocations_[t]=this.getGL().getAttribLocation(this.currentProgram_, t)), this.attribLocations_[t];
    }}, {key: 'makeProjectionTransform', value: function makeProjectionTransform(t, e) {
      var i=t.size; var n=t.viewState.rotation; var r=t.viewState.resolution; var s=t.viewState.center; return Gt(e), Zt(e, 0, 0, 2/(r*i[0]), 2/(r*i[1]), -n, -s[0], -s[1]), e;
    }}, {key: 'setUniformFloatValue', value: function setUniformFloatValue(t, e) {
      this.getGL().uniform1f(this.getUniformLocation(t), e);
    }}, {key: 'setUniformFloatVec2', value: function setUniformFloatVec2(t, e) {
      this.getGL().uniform2fv(this.getUniformLocation(t), e);
    }}, {key: 'setUniformFloatVec4', value: function setUniformFloatVec4(t, e) {
      this.getGL().uniform4fv(this.getUniformLocation(t), e);
    }}, {key: 'setUniformMatrixValue', value: function setUniformMatrixValue(t, e) {
      this.getGL().uniformMatrix4fv(this.getUniformLocation(t), !1, e);
    }}, {key: 'enableAttributeArray_', value: function enableAttributeArray_(t, e, i, n, r) {
      var s=this.getAttributeLocation(t); s<0||(this.getGL().enableVertexAttribArray(s), this.getGL().vertexAttribPointer(s, e, i, !1, n, r));
    }}, {key: 'enableAttributes', value: function enableAttributes(t) {
      var e=Yd(t); var i=0; for (var _n136=0; _n136<t.length; _n136++) {
        var _r112=t[_n136]; this.enableAttributeArray_(_r112.name, _r112.size, _r112.type||$u, e, i), i+=_r112.size*Kd(_r112.type);
      }
    }}, {key: 'handleWebGLContextLost', value: function handleWebGLContextLost() {
      x(this.bufferCache_), this.currentProgram_=null;
    }}, {key: 'handleWebGLContextRestored', value: function handleWebGLContextRestored() {}}, {key: 'createTexture', value: function createTexture(t, e, i) {
      var n=this.getGL(); i=i||n.createTexture(); var r=n.RGBA; var s=n.RGBA; var o=n.UNSIGNED_BYTE; return n.bindTexture(n.TEXTURE_2D, i), e?n.texImage2D(n.TEXTURE_2D, 0, r, s, o, e):n.texImage2D(n.TEXTURE_2D, 0, r, t[0], t[1], 0, s, o, null), n.texParameteri(n.TEXTURE_2D, n.TEXTURE_MIN_FILTER, n.LINEAR), n.texParameteri(n.TEXTURE_2D, n.TEXTURE_WRAP_S, n.CLAMP_TO_EDGE), n.texParameteri(n.TEXTURE_2D, n.TEXTURE_WRAP_T, n.CLAMP_TO_EDGE), i;
    }}]); return qd;
  }(o); var Hd=/* #__PURE__*/function() {
    function Hd(t, e) {
      _classCallCheck(this, Hd); this.name=t, this.data=e, this.texture_=null;
    }_createClass(Hd, [{key: 'getTexture', value: function getTexture(t) {
      if (!this.texture_) {
        var _e170=t.createTexture(); t.bindTexture(t.TEXTURE_2D, _e170), t.texParameteri(t.TEXTURE_2D, t.TEXTURE_WRAP_S, t.CLAMP_TO_EDGE), t.texParameteri(t.TEXTURE_2D, t.TEXTURE_WRAP_T, t.CLAMP_TO_EDGE), t.texParameteri(t.TEXTURE_2D, t.TEXTURE_MIN_FILTER, t.NEAREST), t.texParameteri(t.TEXTURE_2D, t.TEXTURE_MAG_FILTER, t.NEAREST), t.texImage2D(t.TEXTURE_2D, 0, t.RGBA, this.data.length/4, 1, 0, t.RGBA, t.UNSIGNED_BYTE, this.data), this.texture_=_e170;
      } return this.texture_;
    }}]); return Hd;
  }(); var $d=new Uint8Array(4); var Jd=/* #__PURE__*/function() {
    function Jd(t, e) {
      _classCallCheck(this, Jd); this.helper_=t; var i=t.getGL(); this.texture_=i.createTexture(), this.framebuffer_=i.createFramebuffer(), this.size_=e||[1, 1], this.data_=new Uint8Array(0), this.dataCacheDirty_=!0, this.updateSize_();
    }_createClass(Jd, [{key: 'setSize', value: function setSize(t) {
      d(t, this.size_)||(this.size_[0]=t[0], this.size_[1]=t[1], this.updateSize_());
    }}, {key: 'getSize', value: function getSize() {
      return this.size_;
    }}, {key: 'clearCachedData', value: function clearCachedData() {
      this.dataCacheDirty_=!0;
    }}, {key: 'readAll', value: function readAll() {
      if (this.dataCacheDirty_) {
        var _t175=this.size_; var _e171=this.helper_.getGL(); _e171.bindFramebuffer(_e171.FRAMEBUFFER, this.framebuffer_), _e171.readPixels(0, 0, _t175[0], _t175[1], _e171.RGBA, _e171.UNSIGNED_BYTE, this.data_), this.dataCacheDirty_=!1;
      } return this.data_;
    }}, {key: 'readPixel', value: function readPixel(t, e) {
      if (t<0||e<0||t>this.size_[0]||e>=this.size_[1]) return $d[0]=0, $d[1]=0, $d[2]=0, $d[3]=0, $d; this.readAll(); var i=Math.floor(t)+(this.size_[1]-Math.floor(e)-1)*this.size_[0]; return $d[0]=this.data_[4*i], $d[1]=this.data_[4*i+1], $d[2]=this.data_[4*i+2], $d[3]=this.data_[4*i+3], $d;
    }}, {key: 'getTexture', value: function getTexture() {
      return this.texture_;
    }}, {key: 'getFramebuffer', value: function getFramebuffer() {
      return this.framebuffer_;
    }}, {key: 'updateSize_', value: function updateSize_() {
      var t=this.size_; var e=this.helper_.getGL(); this.texture_=this.helper_.createTexture(t, null, this.texture_), e.bindFramebuffer(e.FRAMEBUFFER, this.framebuffer_), e.viewport(0, 0, t[0], t[1]), e.framebufferTexture2D(e.FRAMEBUFFER, e.COLOR_ATTACHMENT0, e.TEXTURE_2D, this.texture_, 0), this.data_=new Uint8Array(t[0]*t[1]*4);
    }}]); return Jd;
  }(); function Qd(t, e, i) {
    var n=i?t.LINEAR:t.NEAREST; t.bindTexture(t.TEXTURE_2D, e), t.texParameteri(t.TEXTURE_2D, t.TEXTURE_WRAP_S, t.CLAMP_TO_EDGE), t.texParameteri(t.TEXTURE_2D, t.TEXTURE_WRAP_T, t.CLAMP_TO_EDGE), t.texParameteri(t.TEXTURE_2D, t.TEXTURE_MIN_FILTER, n), t.texParameteri(t.TEXTURE_2D, t.TEXTURE_MAG_FILTER, n);
  } function tg(t, e, i, n, r, s) {
    var o=t.getGL(); var a; var l; if (i instanceof Float32Array) {
      a=o.FLOAT, t.getExtension('OES_texture_float'); l=null!==t.getExtension('OES_texture_float_linear');
    } else a=o.UNSIGNED_BYTE, l=!0; Qd(o, e, s&&l); var h=i.byteLength/n[1]; var c; var u=1; switch (h%8==0?u=8:h%4==0?u=4:h%2==0&&(u=2), r) {
      case 1: c=o.LUMINANCE; break; case 2: c=o.LUMINANCE_ALPHA; break; case 3: c=o.RGB; break; case 4: c=o.RGBA; break; default: throw new Error('Unsupported number of bands: '.concat(r));
    } var d=o.getParameter(o.UNPACK_ALIGNMENT); o.pixelStorei(o.UNPACK_ALIGNMENT, u), o.texImage2D(o.TEXTURE_2D, 0, c, n[0], n[1], 0, c, a, i), o.pixelStorei(o.UNPACK_ALIGNMENT, d);
  } var eg=null; var ig=/* #__PURE__*/function(_S7) {
    _inherits(ig, _S7); var _super111=_createSuper(ig); function ig(t) {
      var _this129; _classCallCheck(this, ig); _this129=_super111.call(this), _this129.tile, _this129.textures=[], _this129.handleTileChange_=_this129.handleTileChange_.bind(_assertThisInitialized(_this129)), _this129.renderSize_=ll(t.grid.getTileSize(t.tile.tileCoord[0])), _this129.gutter_=t.gutter||0, _this129.bandCount=NaN, _this129.helper_=t.helper; var e=new Id(Yu, qu); e.fromArray([0, 1, 1, 1, 1, 0, 0, 0]), _this129.helper_.flushBufferData(e), _this129.coords=e, _this129.setTile(t.tile); return _this129;
    }_createClass(ig, [{key: 'setTile', value: function setTile(t) {
      if (t!==this.tile) {
        if (this.tile&&this.tile.removeEventListener(w, this.handleTileChange_), this.tile=t, this.textures.length=0, this.loaded=t.getState()===Q, this.loaded) this.uploadTile_(); else {
          if (t instanceof os) {
            var _e172=t.getImage(); _e172 instanceof Image&&!_e172.crossOrigin&&(_e172.crossOrigin='anonymous');
          }t.addEventListener(w, this.handleTileChange_);
        }
      }
    }}, {key: 'uploadTile_', value: function uploadTile_() {
      var t=this.helper_; var e=t.getGL(); var i=this.tile; var n; n=i instanceof os||i instanceof lh?i.getImage():i.getData(); var r=Ct(n); if (r) {
        var _t176=e.createTexture(); return this.textures.push(_t176), this.bandCount=4, void function(t, e, i, n) {
          Qd(t, e, n), t.texImage2D(t.TEXTURE_2D, 0, t.RGBA, t.RGBA, t.UNSIGNED_BYTE, i);
        }(e, _t176, r, i.interpolate);
      }n=Rt(n); var s=i.getSize(); var o=[s[0]+2*this.gutter_, s[1]+2*this.gutter_]; var a=n instanceof Float32Array; var l=o[0]*o[1]; var h=a?Float32Array:Uint8Array; var c=h.BYTES_PER_ELEMENT; var u=n.byteLength/o[1]; this.bandCount=Math.floor(u/c/o[0]); var d=Math.ceil(this.bandCount/4); if (1===d) {
        var _r113=e.createTexture(); return this.textures.push(_r113), void tg(t, _r113, n, o, this.bandCount, i.interpolate);
      } var g=new Array(d); for (var _t177=0; _t177<d; ++_t177) {
        var _i137=e.createTexture(); this.textures.push(_i137); var _n137=_t177<d-1?4:(this.bandCount-1)%4+1; g[_t177]=new h(l*_n137);
      } var f=0; var p=0; var m=o[0]*this.bandCount; for (var _t178=0; _t178<o[1]; ++_t178) {
        for (var _t179=0; _t179<m; ++_t179) {
          var _e173=n[p+_t179]; var _i138=Math.floor(f/this.bandCount); var _r114=_t179%this.bandCount; var _s91=g[Math.floor(_r114/4)]; _s91[_i138*(_s91.length/l)+_r114%4]=_e173, ++f;
        }p+=u/c;
      } for (var _e174=0; _e174<d; ++_e174) {
        var _n138=this.textures[_e174]; var _r115=g[_e174]; tg(t, _n138, _r115, o, _r115.length/l, i.interpolate);
      }
    }}, {key: 'handleTileChange_', value: function handleTileChange_() {
      this.tile.getState()===Q&&(this.loaded=!0, this.uploadTile_(), this.dispatchEvent(w));
    }}, {key: 'disposeInternal', value: function disposeInternal() {
      var t=this.helper_.getGL(); this.helper_.deleteBuffer(this.coords); for (var _e175=0; _e175<this.textures.length; ++_e175)t.deleteTexture(this.textures[_e175]); this.tile.removeEventListener(w, this.handleTileChange_);
    }}, {key: 'getImagePixelData_', value: function getImagePixelData_(t, e, i) {
      var n=this.gutter_; var r=this.renderSize_[0]; var s=this.renderSize_[1]; eg||(eg=_t(1, 1, void 0, {willReadFrequently: !0})), eg.clearRect(0, 0, 1, 1); var o=t.width-2*n; var a=t.height-2*n; var l=n+Math.floor(o*(e/r)); var h=n+Math.floor(a*(i/s)); var c; try {
        eg.drawImage(t, l, h, 1, 1, 0, 0, 1, 1), c=eg.getImageData(0, 0, 1, 1).data;
      } catch (t) {
        return eg=null, null;
      } return c;
    }}, {key: 'getArrayPixelData_', value: function getArrayPixelData_(t, e, i, n) {
      var r=this.gutter_; var s=this.renderSize_[0]; var o=this.renderSize_[1]; var a=e[0]; var l=e[1]; var h=a+2*r; var c=l+2*r; var u=r+Math.floor(a*(i/s)); var d=r+Math.floor(l*(n/o)); if (t instanceof DataView) {
        var _e176=t.byteLength/(h*c); var _i139=_e176*(d*h+u); var _n139=t.buffer.slice(_i139, _i139+_e176); return new DataView(_n139);
      } var g=this.bandCount*(d*h+u); return t.slice(g, g+this.bandCount);
    }}, {key: 'getPixelData', value: function getPixelData(t, e) {
      if (!this.loaded) return null; if (this.tile instanceof Lt) {
        var _i140=this.tile.getData(); var _n140=Rt(_i140); if (_n140) {
          var _i141=this.tile.getSize(); return this.getArrayPixelData_(_n140, _i141, t, e);
        } return this.getImagePixelData_(Ct(_i140), t, e);
      } return this.getImagePixelData_(this.tile.getImage(), t, e);
    }}]); return ig;
  }(S); var ng=/* #__PURE__*/function(_ou2) {
    _inherits(ng, _ou2); var _super112=_createSuper(ng); function ng(t, e) {
      var _this130; _classCallCheck(this, ng); _this130=_super112.call(this, t), e=e||{}, _this130.inversePixelTransform_=[1, 0, 0, 1, 0, 0], _this130.pixelContext_=null, _this130.postProcesses_=e.postProcesses, _this130.uniforms_=e.uniforms, _this130.helper, t.addChangeListener(Ls, _this130.removeHelper.bind(_assertThisInitialized(_this130))), _this130.dispatchPreComposeEvent=_this130.dispatchPreComposeEvent.bind(_assertThisInitialized(_this130)), _this130.dispatchPostComposeEvent=_this130.dispatchPostComposeEvent.bind(_assertThisInitialized(_this130)); return _this130;
    }_createClass(ng, [{key: 'dispatchPreComposeEvent', value: function dispatchPreComposeEvent(t, e) {
      var i=this.getLayer(); if (i.hasListener(Os)) {
        var _n141=new zs(Os, void 0, e, t); i.dispatchEvent(_n141);
      }
    }}, {key: 'dispatchPostComposeEvent', value: function dispatchPostComposeEvent(t, e) {
      var i=this.getLayer(); if (i.hasListener(Ns)) {
        var _n142=new zs(Ns, void 0, e, t); i.dispatchEvent(_n142);
      }
    }}, {key: 'reset', value: function reset(t) {
      this.uniforms_=t.uniforms, this.helper&&this.helper.setUniforms(this.uniforms_);
    }}, {key: 'removeHelper', value: function removeHelper() {
      this.helper&&(this.helper.dispose(), delete this.helper);
    }}, {key: 'prepareFrame', value: function prepareFrame(t) {
      if (this.getLayer().getRenderSource()) {
        var _e177; var _i142=!0; var _n143=-1; for (var _r116=0, _s92=t.layerStatesArray.length; _r116<_s92; _r116++) {
          var _s93=t.layerStatesArray[_r116].layer; var _o85=_s93.getRenderer(); if (!(_o85 instanceof ng)) {
            _i142=!0; continue;
          } var _a48=_s93.getClassName(); if ((_i142||_a48!==_e177)&&(_n143+=1, _i142=!1), _e177=_a48, _o85===this) break;
        } var _r117='map/'+t.mapId+'/group/'+_n143; this.helper&&this.helper.canvasCacheKeyMatches(_r117)||(this.removeHelper(), this.helper=new qd({postProcesses: this.postProcesses_, uniforms: this.uniforms_, canvasCacheKey: _r117}), _e177&&(this.helper.getCanvas().className=_e177), this.afterHelperCreated());
      } return this.prepareFrameInternal(t);
    }}, {key: 'afterHelperCreated', value: function afterHelperCreated() {}}, {key: 'prepareFrameInternal', value: function prepareFrameInternal(t) {
      return !0;
    }}, {key: 'disposeInternal', value: function disposeInternal() {
      this.removeHelper(), _get(_getPrototypeOf(ng.prototype), 'disposeInternal', this).call(this);
    }}, {key: 'dispatchRenderEvent_', value: function dispatchRenderEvent_(t, e, i) {
      var n=this.getLayer(); if (n.hasListener(t)) {
        Zt(this.inversePixelTransform_, 0, 0, i.pixelRatio, -i.pixelRatio, 0, 0, -i.size[1]); var _r118=new zs(t, this.inversePixelTransform_, i, e); n.dispatchEvent(_r118);
      }
    }}, {key: 'preRender', value: function preRender(t, e) {
      this.dispatchRenderEvent_(Ms, t, e);
    }}, {key: 'postRender', value: function postRender(t, e) {
      this.dispatchRenderEvent_(As, t, e);
    }}]); return ng;
  }(ou); var rg=ng; var sg={TILE_TEXTURE_ARRAY: 'u_tileTextures', TILE_TRANSFORM: 'u_tileTransform', TRANSITION_ALPHA: 'u_transitionAlpha', DEPTH: 'u_depth', TEXTURE_PIXEL_WIDTH: 'u_texturePixelWidth', TEXTURE_PIXEL_HEIGHT: 'u_texturePixelHeight', TEXTURE_RESOLUTION: 'u_textureResolution', TEXTURE_ORIGIN_X: 'u_textureOriginX', TEXTURE_ORIGIN_Y: 'u_textureOriginY', RENDER_EXTENT: 'u_renderExtent', RESOLUTION: 'u_resolution', ZOOM: 'u_zoom'}; var og={TEXTURE_COORD: 'a_textureCoord'}; var ag=[{name: og.TEXTURE_COORD, size: 2, type: Xd.FLOAT}]; var lg={}; function hg(t) {
    return 2*(1-1/(t+1))-1;
  } function cg(t, e, i) {
    i in t||(t[i]=[]), t[i].push(e);
  } function ug(t, e) {
    var i=t.layerStatesArray[t.layerIndex]; i.extent&&(e=Ae(e, Cn(i.extent, t.viewState.projection))); var n=i.layer.getRenderSource(); if (!n.getWrapX()) {
      var _i143=n.getTileGridForProjection(t.viewState.projection).getExtent(); _i143&&(e=Ae(e, _i143));
    } return e;
  } function dg(t, e) {
    return ''.concat(t.getKey(), ',').concat(Sl(e));
  } var gg=/* #__PURE__*/function(_rg) {
    _inherits(gg, _rg); var _super113=_createSuper(gg); function gg(t, e) {
      var _this131; _classCallCheck(this, gg); _this131=_super113.call(this, t, {uniforms: e.uniforms}), _this131.renderComplete=!1, _this131.tileTransform_=[1, 0, 0, 1, 0, 0], _this131.tempMat4_=[1, 0, 0, 0, 0, 1, 0, 0, 0, 0, 1, 0, 0, 0, 0, 1], _this131.tempTileRange_=new Il(0, 0, 0, 0), _this131.tempTileCoord_=xl(0, 0, 0), _this131.tempSize_=[0, 0], _this131.program_, _this131.vertexShader_=e.vertexShader, _this131.fragmentShader_=e.fragmentShader, _this131.indices_=new Id(Ku, qu), _this131.indices_.fromArray([0, 1, 3, 1, 2, 3]); var i=void 0!==e.cacheSize?e.cacheSize:512; _this131.tileTextureCache_=new yl(i), _this131.paletteTextures_=e.paletteTextures||[], _this131.frameState_=null, _this131.projection_=void 0; return _this131;
    }_createClass(gg, [{key: 'reset', value: function reset(t) {
      _get(_getPrototypeOf(gg.prototype), 'reset', this).call(this, {uniforms: t.uniforms}), this.vertexShader_=t.vertexShader, this.fragmentShader_=t.fragmentShader, this.paletteTextures_=t.paletteTextures||[], this.helper&&(this.program_=this.helper.getProgram(this.fragmentShader_, this.vertexShader_));
    }}, {key: 'afterHelperCreated', value: function afterHelperCreated() {
      this.program_=this.helper.getProgram(this.fragmentShader_, this.vertexShader_), this.helper.flushBufferData(this.indices_);
    }}, {key: 'isDrawableTile_', value: function isDrawableTile_(t) {
      var e=this.getLayer(); var i=t.getState(); var n=e.getUseInterimTilesOnError(); return i==Q||i==et||i==tt&&!n;
    }}, {key: 'prepareFrameInternal', value: function prepareFrameInternal(t) {
this.projection_?t.viewState.projection!==this.projection_&&(this.clearCache(), this.projection_=t.viewState.projection):this.projection_=t.viewState.projection; var e=this.getLayer().getRenderSource(); return !!e&&!ke(ug(t, t.extent))&&'ready'===e.getState();
    }}, {key: 'enqueueTiles', value: function enqueueTiles(t, e, i, n, r) {
      var s=t.viewState; var o=this.getLayer(); var a=o.getRenderSource(); var l=a.getTileGridForProjection(s.projection); var h=a.getGutterForProjection(s.projection); var c=X(a); c in t.wantedTiles||(t.wantedTiles[c]={}); var u=t.wantedTiles[c]; var d=this.tileTextureCache_; var g=o.getMapInternal(); var f=Math.max(i-r, l.getMinZoom(), l.getZForResolution(Math.min(o.getMaxResolution(), g?g.getView().getResolutionForZoom(Math.max(o.getMinZoom(), 0)):l.getResolution(0)), a.zDirection)); for (var _r119=i; _r119>=f; --_r119) {
        var _i144=l.getTileRangeForExtentAndZ(e, _r119, this.tempTileRange_); var _o86=l.getResolution(_r119); for (var _e178=_i144.minX; _e178<=_i144.maxX; ++_e178) {
          for (var _g12=_i144.minY; _g12<=_i144.maxY; ++_g12) {
            var _i145=xl(_r119, _e178, _g12, this.tempTileCoord_); var _f9=dg(a, _i145); var _p9=void 0; var _m6=void 0; if (d.containsKey(_f9)&&(_p9=d.get(_f9), _m6=_p9.tile), !_p9||_p9.tile.key!==a.getKey()) {
              if (_m6=a.getTile(_r119, _e178, _g12, t.pixelRatio, s.projection), _p9) {
                if (this.isDrawableTile_(_m6))_p9.setTile(_m6); else {
                  var _t180=_m6.getInterimTile(); _p9.setTile(_t180);
                }
              } else _p9=new ig({tile: _m6, grid: l, helper: this.helper, gutter: h}), d.set(_f9, _p9);
            } cg(n, _p9, _r119); var _4=_m6.getKey(); u[_4]=!0, _m6.getState()===$&&(t.tileQueue.isKeyQueued(_4)||t.tileQueue.enqueue([_m6, c, l.getTileCoordCenter(_i145), _o86]));
          }
        }
      }
    }}, {key: 'renderFrame', value: function renderFrame(t) {
      var _this132=this; this.frameState_=t, this.renderComplete=!0; var e=this.helper.getGL(); this.preRender(e, t); var i=t.viewState; var n=this.getLayer(); var r=n.getRenderSource(); var s=r.getTileGridForProjection(i.projection); var o=r.getGutterForProjection(i.projection); var a=ug(t, t.extent); var h=s.getZForResolution(i.resolution, r.zDirection); var c={}; var u=n.getPreload(); if (t.nextExtent) {
        var _e179=s.getZForResolution(i.nextResolution, r.zDirection); var _n144=ug(t, t.nextExtent); this.enqueueTiles(t, _n144, _e179, c, u);
      } this.enqueueTiles(t, a, h, c, 0), u>0&&setTimeout(function() {
        _this132.enqueueTiles(t, a, h-1, c, u-1);
      }, 0); var d={}; var g=X(this); var f=t.time; var p=!1; var m=c[h]; for (var _t181=0, _e180=m.length; _t181<_e180; ++_t181) {
        var _e181=m[_t181]; var _i146=_e181.tile; if ((_i146 instanceof lh||_i146 instanceof gc)&&_i146.getState()===et) continue; var _n145=_i146.tileCoord; if (_e181.loaded) {
          var _t182=_i146.getAlpha(g, f); if (1===_t182) {
            _i146.endTransition(g); continue;
          }p=!0; d[Sl(_n145)]=_t182;
        } this.renderComplete=!1; if (this.findAltTiles_(s, _n145, h+1, c)) continue; var _r120=s.getMinZoom(); for (var _t183=h-1; _t183>=_r120; --_t183) {
          if (this.findAltTiles_(s, _n145, _t183, c)) break;
        }
      } this.helper.useProgram(this.program_, t), this.helper.prepareDraw(t, !p); var _=Object.keys(c).map(Number).sort(l); var y=i.center[0]; var x=i.center[1]; for (var _n146=0, _r121=_.length; _n146<_r121; ++_n146) {
        var _r122=_[_n146]; var _l32=s.getResolution(_r122); var _h33=ll(s.getTileSize(_r122), this.tempSize_); var _u19=s.getOrigin(_r122); var _g13=_h33[0]+2*o; var _f10=_h33[1]+2*o; var _p10=_g13/_f10; var _m7=(y-_u19[0])/(_h33[0]*_l32); var _v3=(_u19[1]-x)/(_h33[1]*_l32); var _S8=i.resolution/_l32; var _w3=hg(_r122); var _T3=c[_r122]; for (var _n147=0, _r123=_T3.length; _n147<_r123; ++_n147) {
          var _r124=_T3[_n147]; if (!_r124.loaded) continue; var _c17=_r124.tile.tileCoord; var _5=Sl(_c17); var _y4=_c17[1]; var _x3=_c17[2]; Gt(this.tileTransform_), Xt(this.tileTransform_, 2/(t.size[0]*_S8/_g13), -2/(t.size[1]*_S8/_g13)), Ut(this.tileTransform_, i.rotation), Xt(this.tileTransform_, 1, 1/_p10), Wt(this.tileTransform_, (_h33[0]*(_y4-_m7)-o)/_g13, (_h33[1]*(_x3-_v3)-o)/_f10), this.helper.setUniformMatrixValue(sg.TILE_TRANSFORM, Od(this.tempMat4_, this.tileTransform_)), this.helper.bindBuffer(_r124.coords), this.helper.bindBuffer(this.indices_), this.helper.enableAttributes(ag); var _E2=0; for (;_E2<_r124.textures.length;) {
            var _t184='TEXTURE'+_E2; var _i147=''.concat(sg.TILE_TEXTURE_ARRAY, '[').concat(_E2, ']'); e.activeTexture(e[_t184]), e.bindTexture(e.TEXTURE_2D, _r124.textures[_E2]), e.uniform1i(this.helper.getUniformLocation(_i147), _E2), ++_E2;
          } for (var _t185=0; _t185<this.paletteTextures_.length; ++_t185) {
            var _i148=this.paletteTextures_[_t185]; e.activeTexture(e['TEXTURE'+_E2]); var _n148=_i148.getTexture(e); e.bindTexture(e.TEXTURE_2D, _n148), e.uniform1i(this.helper.getUniformLocation(_i148.name), _E2), ++_E2;
          } var _C2=_5 in d?d[_5]:1; _C2<1&&(t.animate=!0), this.helper.setUniformFloatValue(sg.TRANSITION_ALPHA, _C2), this.helper.setUniformFloatValue(sg.DEPTH, _w3), this.helper.setUniformFloatValue(sg.TEXTURE_PIXEL_WIDTH, _g13), this.helper.setUniformFloatValue(sg.TEXTURE_PIXEL_HEIGHT, _f10), this.helper.setUniformFloatValue(sg.TEXTURE_RESOLUTION, _l32), this.helper.setUniformFloatValue(sg.TEXTURE_ORIGIN_X, _u19[0]+_y4*_h33[0]*_l32-o*_l32), this.helper.setUniformFloatValue(sg.TEXTURE_ORIGIN_Y, _u19[1]-_x3*_h33[1]*_l32+o*_l32); var _R2=a; o>0&&(_R2=s.getTileCoordExtent(_c17), Ae(_R2, a, _R2)), this.helper.setUniformFloatVec4(sg.RENDER_EXTENT, _R2), this.helper.setUniformFloatValue(sg.RESOLUTION, i.resolution), this.helper.setUniformFloatValue(sg.ZOOM, i.zoom), this.helper.drawElements(0, this.indices_.getSize());
        }
      } this.helper.finalizeDraw(t, this.dispatchPreComposeEvent, this.dispatchPostComposeEvent); var v=this.helper.getCanvas(); var S=this.tileTextureCache_; for (;S.canExpireCache();) {
        S.pop().dispose();
      } return t.postRenderFunctions.push(function(t, e) {
        r.updateCacheSize(.1, e.viewState.projection), r.expireCache(e.viewState.projection, lg);
      }), this.postRender(e, t), v;
    }}, {key: 'getData', value: function getData(t) {
      if (!this.helper.getGL()) return null; var e=this.frameState_; if (!e) return null; var i=this.getLayer(); var n=zt(e.pixelToCoordinateTransform, t.slice()); var r=e.viewState; var s=i.getExtent(); if (s&&!ae(Cn(s, r.projection), n)) return null; var o=i.getSources(ne([n]), r.resolution); var a; var l; var h; for (a=o.length-1; a>=0; --a) {
        if (l=o[a], 'ready'===l.getState()) {
          if (h=l.getTileGridForProjection(r.projection), l.getWrapX()) break; var _t186=h.getExtent(); if (!_t186||ae(_t186, n)) break;
        }
      } if (a<0) return null; var c=this.tileTextureCache_; for (var _t187=h.getZForResolution(r.resolution); _t187>=h.getMinZoom(); --_t187) {
        var _e182=h.getTileCoordForCoordAndZ(n, _t187); var _i149=dg(l, _e182); if (!c.containsKey(_i149)) continue; var _r125=c.get(_i149); var _s94=_r125.tile; if ((_s94 instanceof lh||_s94 instanceof gc)&&_s94.getState()===et) return null; if (!_r125.loaded) continue; var _o87=h.getOrigin(_t187); var _a49=ll(h.getTileSize(_t187)); var _u20=h.getResolution(_t187); var _d20=(n[0]-_o87[0])/_u20-_e182[1]*_a49[0]; var _g14=(_o87[1]-n[1])/_u20-_e182[2]*_a49[1]; return _r125.getPixelData(_d20, _g14);
      } return null;
    }}, {key: 'findAltTiles_', value: function findAltTiles_(t, e, i, n) {
      var r=t.getTileRangeForTileCoordAndZ(e, i, this.tempTileRange_); if (!r) return !1; var s=!0; var o=this.tileTextureCache_; var a=this.getLayer().getRenderSource(); for (var _t188=r.minX; _t188<=r.maxX; ++_t188) {
        for (var _e183=r.minY; _e183<=r.maxY; ++_e183) {
          var _r126=dg(a, [i, _t188, _e183]); var _l33=!1; if (o.containsKey(_r126)) {
            var _t189=o.get(_r126); _t189.loaded&&(cg(n, _t189, i), _l33=!0);
          }_l33||(s=!1);
        }
      } return s;
    }}, {key: 'clearCache', value: function clearCache() {
      var t=this.tileTextureCache_; t.forEach(function(t) {
        return t.dispose();
      }), t.clear();
    }}, {key: 'removeHelper', value: function removeHelper() {
      this.helper&&this.clearCache(), _get(_getPrototypeOf(gg.prototype), 'removeHelper', this).call(this);
    }}, {key: 'disposeInternal', value: function disposeInternal() {
      var t=this.helper; if (t) {
        t.getGL().deleteProgram(this.program_), delete this.program_, t.deleteBuffer(this.indices_);
      }_get(_getPrototypeOf(gg.prototype), 'disposeInternal', this).call(this), delete this.indices_, delete this.tileTextureCache_, delete this.frameState_;
    }}]); return gg;
  }(rg); var fg=1; var pg=2; var mg=4; var _g=8; var yg=16; var xg=31; var vg=0; var Sg={}; function wg(t) {
    if ('number'==typeof t) return fg; if ('boolean'==typeof t) return _g; if ('string'==typeof t) return ms(t)?mg|pg:pg; if (!Array.isArray(t)) throw new Error('Unhandled value type: '.concat(JSON.stringify(t))); var e=t; if (e.every(function(t) {
      return 'number'==typeof t;
    })) return 3===e.length||4===e.length?mg|yg:yg; if ('string'!=typeof e[0]) throw new Error('Expected an expression operator but received: '.concat(JSON.stringify(e))); var i=Sg[e[0]]; if (void 0===i) throw new Error('Unrecognized expression operator: '.concat(JSON.stringify(e))); return i.getReturnType(e.slice(1));
  } function Tg(t) {
    return Math.log2(t)%1==0;
  } function Eg(t) {
    var e=t.toString(); return e.includes('.')?e:e+'.0';
  } function Cg(t) {
    if (t.length<2||t.length>4) throw new Error('`formatArray` can only output `vec2`, `vec3` or `vec4` arrays.'); return 'vec'.concat(t.length, '(').concat(t.map(Eg).join(', '), ')');
  } function Rg(t) {
    var e=gs(t).slice(); return e.length<4&&e.push(1), Cg(e.map(function(t, e) {
      return e<3?t/255:t;
    }));
  } function bg(t, e) {
    return void 0===t.stringLiteralsMap[e]&&(t.stringLiteralsMap[e]=Object.keys(t.stringLiteralsMap).length), t.stringLiteralsMap[e];
  } function Pg(t, e) {
    return Eg(bg(t, e));
  } function Ig(t, e, i) {
    if (Array.isArray(e)&&'string'==typeof e[0]) {
      var _n149=Sg[e[0]]; if (void 0===_n149) throw new Error('Unrecognized expression operator: '.concat(JSON.stringify(e))); return _n149.toGlsl(t, e.slice(1), i);
    } var n=wg(e); if ((n&fg)>0) return Eg(e); if ((n&_g)>0) return e.toString(); if ((n&pg)>0&&(void 0===i||i==pg)) return Pg(t, e.toString()); if ((n&mg)>0&&(void 0===i||i==mg)) return Rg(e); if ((n&yg)>0) return Cg(e); throw new Error('Unexpected expression '.concat(e, ' (expected type ').concat(i, ')'));
  } function Lg(t) {
    if (!(wg(t)&fg)) throw new Error('A numeric value was expected, got '.concat(JSON.stringify(t), ' instead'));
  } function Fg(t) {
    for (var _e184=0; _e184<t.length; _e184++)Lg(t[_e184]);
  } function Mg(t) {
    if (!(wg(t)&pg)) throw new Error('A string value was expected, got '.concat(JSON.stringify(t), ' instead'));
  } function Ag(t) {
    if (!(wg(t)&_g)) throw new Error('A boolean value was expected, got '.concat(JSON.stringify(t), ' instead'));
  } function Og(t, e) {
    if (t.length!==e) throw new Error('Exactly '.concat(e, ' arguments were expected, got ').concat(t.length, ' instead'));
  } function Ng(t, e) {
    if (t.length<e) throw new Error('At least '.concat(e, ' arguments were expected, got ').concat(t.length, ' instead'));
  } function Dg(t, e) {
    if (t.length>e) throw new Error('At most '.concat(e, ' arguments were expected, got ').concat(t.length, ' instead'));
  } function Gg(t) {
    if (t.length%2!=0) throw new Error('An even amount of arguments was expected, got '.concat(t, ' instead'));
  } function kg(t, e) {
    if (!Tg(e)) throw new Error('Could not infer only one type from the following expression: '.concat(JSON.stringify(t)));
  } function jg(t) {
    return 'u_var_'+t;
  }Sg.get={getReturnType: function getReturnType(t) {
    return xg;
  }, toGlsl: function toGlsl(t, e) {
    Og(e, 1), Mg(e[0]); var i=e[0].toString(); t.attributes.includes(i)||t.attributes.push(i); return (t.inFragmentShader?'v_':'a_')+i;
  }}, Sg['var']={getReturnType: function getReturnType(t) {
    return xg;
  }, toGlsl: function toGlsl(t, e) {
    Og(e, 1), Mg(e[0]); var i=e[0].toString(); return t.variables.includes(i)||t.variables.push(i), jg(i);
  }}; var Bg='u_paletteTextures'; Sg.palette={getReturnType: function getReturnType(t) {
    return mg;
  }, toGlsl: function toGlsl(t, e) {
    Og(e, 2), Lg(e[0]); var i=Ig(t, e[0]); var n=e[1]; if (!Array.isArray(n)) throw new Error('The second argument of palette must be an array'); var r=n.length; var s=new Uint8Array(4*r); for (var _t190=0; _t190<r; _t190++) {
      var _e185=n[_t190]; var _i150=void 0; if ('string'==typeof _e185)_i150=ds(_e185); else {
        if (!Array.isArray(_e185)) throw new Error('The second argument of palette must be an array of strings or colors'); var _t191=_e185.length; if (4===_t191)_i150=_e185; else {
          if (3!==_t191) throw new Error('Expected palette color to have 3 or 4 values, got '.concat(_t191)); _i150=[_e185[0], _e185[1], _e185[2], 1];
        }
      } var _r127=4*_t190; s[_r127]=_i150[0], s[_r127+1]=_i150[1], s[_r127+2]=_i150[2], s[_r127+3]=255*_i150[3];
    }t.paletteTextures||(t.paletteTextures=[]); var o='u_paletteTextures['.concat(t.paletteTextures.length, ']'); var a=new Hd(o, s); return t.paletteTextures.push(a), 'texture2D('.concat(o, ', vec2((').concat(i, ' + 0.5) / ').concat(r, '.0, 0.5))');
  }}; var zg='getBandValue'; function Ug(t) {
    return {getReturnType: function getReturnType(t) {
      return _g;
    }, toGlsl: function toGlsl(e, i) {
      Og(i, 2); var n=xg; for (var _t192=0; _t192<i.length; _t192++)n&=wg(i[_t192]); if (n===vg) throw new Error('All arguments should be of compatible type, got '.concat(JSON.stringify(i), ' instead')); return n&=~mg, '('.concat(Ig(e, i[0], n), ' ').concat(t, ' ').concat(Ig(e, i[1], n), ')');
    }};
  } function Xg(t) {
    return {getReturnType: function getReturnType(t) {
      return _g;
    }, toGlsl: function toGlsl(e, i) {
      Ng(i, 2); for (var _t193=0; _t193<i.length; _t193++)Ag(i[_t193]); var n=''; return n=i.map(function(t) {
        return Ig(e, t);
      }).join(' '.concat(t, ' ')), n='('.concat(n, ')'), n;
    }};
  }Sg.band={getReturnType: function getReturnType(t) {
    return fg;
  }, toGlsl: function toGlsl(t, e) {
    Ng(e, 1), Dg(e, 3); var i=e[0]; if (!(zg in t.functions)) {
      var _e186=''; var _i151=t.bandCount||1; for (var _t194=0; _t194<_i151; _t194++) {
        var _n150=Math.floor(_t194/4); var _r128=_t194%4; _t194===_i151-1&&1===_r128&&(_r128=3); _e186+='\n          if (band == '.concat(_t194+1, '.0) {\n            return texture2D(', ''.concat(sg.TILE_TEXTURE_ARRAY, '[').concat(_n150, ']'), ', v_textureCoord + vec2(dx, dy))[').concat(_r128, '];\n          }\n        ');
      }t.functions.getBandValue='\n        float getBandValue(float band, float xOffset, float yOffset) {\n          float dx = xOffset / '.concat(sg.TEXTURE_PIXEL_WIDTH, ';\n          float dy = yOffset / ').concat(sg.TEXTURE_PIXEL_HEIGHT, ';\n          ').concat(_e186, '\n        }\n      ');
    } return 'getBandValue('.concat(Ig(t, i), ', ').concat(Ig(t, e[1]||0), ', ').concat(Ig(t, e[2]||0), ')');
  }}, Sg.time={getReturnType: function getReturnType(t) {
    return fg;
  }, toGlsl: function toGlsl(t, e) {
    return Og(e, 0), 'u_time';
  }}, Sg.zoom={getReturnType: function getReturnType(t) {
    return fg;
  }, toGlsl: function toGlsl(t, e) {
    return Og(e, 0), 'u_zoom';
  }}, Sg.resolution={getReturnType: function getReturnType(t) {
    return fg;
  }, toGlsl: function toGlsl(t, e) {
    return Og(e, 0), 'u_resolution';
  }}, Sg['*']={getReturnType: function getReturnType(t) {
    return fg;
  }, toGlsl: function toGlsl(t, e) {
    return Ng(e, 2), Fg(e), '('.concat(e.map(function(e) {
      return Ig(t, e);
    }).join(' * '), ')');
  }}, Sg['/']={getReturnType: function getReturnType(t) {
    return fg;
  }, toGlsl: function toGlsl(t, e) {
    return Og(e, 2), Fg(e), '('.concat(Ig(t, e[0]), ' / ').concat(Ig(t, e[1]), ')');
  }}, Sg['+']={getReturnType: function getReturnType(t) {
    return fg;
  }, toGlsl: function toGlsl(t, e) {
    return Ng(e, 2), Fg(e), '('.concat(e.map(function(e) {
      return Ig(t, e);
    }).join(' + '), ')');
  }}, Sg['-']={getReturnType: function getReturnType(t) {
    return fg;
  }, toGlsl: function toGlsl(t, e) {
    return Og(e, 2), Fg(e), '('.concat(Ig(t, e[0]), ' - ').concat(Ig(t, e[1]), ')');
  }}, Sg.clamp={getReturnType: function getReturnType(t) {
    return fg;
  }, toGlsl: function toGlsl(t, e) {
    Og(e, 3), Fg(e); var i=Ig(t, e[1]); var n=Ig(t, e[2]); return 'clamp('.concat(Ig(t, e[0]), ', ').concat(i, ', ').concat(n, ')');
  }}, Sg['%']={getReturnType: function getReturnType(t) {
    return fg;
  }, toGlsl: function toGlsl(t, e) {
    return Og(e, 2), Fg(e), 'mod('.concat(Ig(t, e[0]), ', ').concat(Ig(t, e[1]), ')');
  }}, Sg['^']={getReturnType: function getReturnType(t) {
    return fg;
  }, toGlsl: function toGlsl(t, e) {
    return Og(e, 2), Fg(e), 'pow('.concat(Ig(t, e[0]), ', ').concat(Ig(t, e[1]), ')');
  }}, Sg.abs={getReturnType: function getReturnType(t) {
    return fg;
  }, toGlsl: function toGlsl(t, e) {
    return Og(e, 1), Fg(e), 'abs('.concat(Ig(t, e[0]), ')');
  }}, Sg.floor={getReturnType: function getReturnType(t) {
    return fg;
  }, toGlsl: function toGlsl(t, e) {
    return Og(e, 1), Fg(e), 'floor('.concat(Ig(t, e[0]), ')');
  }}, Sg.round={getReturnType: function getReturnType(t) {
    return fg;
  }, toGlsl: function toGlsl(t, e) {
    return Og(e, 1), Fg(e), 'floor('.concat(Ig(t, e[0]), ' + 0.5)');
  }}, Sg.ceil={getReturnType: function getReturnType(t) {
    return fg;
  }, toGlsl: function toGlsl(t, e) {
    return Og(e, 1), Fg(e), 'ceil('.concat(Ig(t, e[0]), ')');
  }}, Sg.sin={getReturnType: function getReturnType(t) {
    return fg;
  }, toGlsl: function toGlsl(t, e) {
    return Og(e, 1), Fg(e), 'sin('.concat(Ig(t, e[0]), ')');
  }}, Sg.cos={getReturnType: function getReturnType(t) {
    return fg;
  }, toGlsl: function toGlsl(t, e) {
    return Og(e, 1), Fg(e), 'cos('.concat(Ig(t, e[0]), ')');
  }}, Sg.atan={getReturnType: function getReturnType(t) {
    return fg;
  }, toGlsl: function toGlsl(t, e) {
    return Ng(e, 1), Dg(e, 2), Fg(e), 2===e.length?'atan('.concat(Ig(t, e[0]), ', ').concat(Ig(t, e[1]), ')'):'atan('.concat(Ig(t, e[0]), ')');
  }}, Sg['>']={getReturnType: function getReturnType(t) {
    return _g;
  }, toGlsl: function toGlsl(t, e) {
    return Og(e, 2), Fg(e), '('.concat(Ig(t, e[0]), ' > ').concat(Ig(t, e[1]), ')');
  }}, Sg['>=']={getReturnType: function getReturnType(t) {
    return _g;
  }, toGlsl: function toGlsl(t, e) {
    return Og(e, 2), Fg(e), '('.concat(Ig(t, e[0]), ' >= ').concat(Ig(t, e[1]), ')');
  }}, Sg['<']={getReturnType: function getReturnType(t) {
    return _g;
  }, toGlsl: function toGlsl(t, e) {
    return Og(e, 2), Fg(e), '('.concat(Ig(t, e[0]), ' < ').concat(Ig(t, e[1]), ')');
  }}, Sg['<=']={getReturnType: function getReturnType(t) {
    return _g;
  }, toGlsl: function toGlsl(t, e) {
    return Og(e, 2), Fg(e), '('.concat(Ig(t, e[0]), ' <= ').concat(Ig(t, e[1]), ')');
  }}, Sg['==']=Ug('=='), Sg['!=']=Ug('!='), Sg['!']={getReturnType: function getReturnType(t) {
    return _g;
  }, toGlsl: function toGlsl(t, e) {
    return Og(e, 1), Ag(e[0]), '(!'.concat(Ig(t, e[0]), ')');
  }}, Sg.all=Xg('&&'), Sg.any=Xg('||'), Sg.between={getReturnType: function getReturnType(t) {
    return _g;
  }, toGlsl: function toGlsl(t, e) {
    Og(e, 3), Fg(e); var i=Ig(t, e[1]); var n=Ig(t, e[2]); var r=Ig(t, e[0]); return '('.concat(r, ' >= ').concat(i, ' && ').concat(r, ' <= ').concat(n, ')');
  }}, Sg.array={getReturnType: function getReturnType(t) {
    return yg;
  }, toGlsl: function toGlsl(t, e) {
    Ng(e, 2), Dg(e, 4), Fg(e); var i=e.map(function(e) {
      return Ig(t, e, fg);
    }); return 'vec'.concat(e.length, '(').concat(i.join(', '), ')');
  }}, Sg.color={getReturnType: function getReturnType(t) {
    return mg;
  }, toGlsl: function toGlsl(t, e) {
    Ng(e, 3), Dg(e, 4), Fg(e); var i=e; 3===e.length&&i.push(1); var n=e.map(function(e, i) {
      return Ig(t, e, fg)+(i<3?' / 255.0':'');
    }); return 'vec'.concat(e.length, '(').concat(n.join(', '), ')');
  }}, Sg.interpolate={getReturnType: function getReturnType(t) {
    var e=mg|fg; for (var _i152=3; _i152<t.length; _i152+=2)e&=wg(t[_i152]); return e;
  }, toGlsl: function toGlsl(t, e, i) {
    Gg(e), Ng(e, 6); var n=e[0]; var r; switch (n[0]) {
      case 'linear': r=1; break; case 'exponential': r=n[1]; break; default: r=null;
    } if (!r) throw new Error('Invalid interpolation type for "interpolate" operator, received: '.concat(JSON.stringify(n))); i=void 0!==i?i:xg; var s=Sg.interpolate.getReturnType(e)&i; kg(e, s); var o=Ig(t, e[1]); var a=Eg(r); var l=''; for (var _i153=2; _i153<e.length-2; _i153+=2) {
      var _n151=Ig(t, e[_i153]); var _r129=l||Ig(t, e[_i153+1], s); var _h34=Ig(t, e[_i153+2]); l='mix('.concat(_r129, ', ').concat(Ig(t, e[_i153+3], s), ', pow(clamp((').concat(o, ' - ').concat(_n151, ') / (').concat(_h34, ' - ').concat(_n151, '), 0.0, 1.0), ').concat(a, '))');
    } return l;
  }}, Sg.match={getReturnType: function getReturnType(t) {
    var e=xg; for (var _i154=2; _i154<t.length; _i154+=2)e&=wg(t[_i154]); return e&=wg(t[t.length-1]), e;
  }, toGlsl: function toGlsl(t, e, i) {
    Gg(e), Ng(e, 4), i=void 0!==i?i:xg; var n=Sg.match.getReturnType(e)&i; kg(e, n); var r=Ig(t, e[0]); var s=Ig(t, e[e.length-1], n); var o=null; for (var _i155=e.length-3; _i155>=1; _i155-=2) {
      o='('.concat(r, ' == ').concat(Ig(t, e[_i155]), ' ? ').concat(Ig(t, e[_i155+1], n), ' : ').concat(o||s, ')');
    } return o;
  }}, Sg['case']={getReturnType: function getReturnType(t) {
    var e=xg; for (var _i156=1; _i156<t.length; _i156+=2)e&=wg(t[_i156]); return e&=wg(t[t.length-1]), e;
  }, toGlsl: function toGlsl(t, e, i) {
    !function(t) {
      if (t.length%2==0) throw new Error('An odd amount of arguments was expected, got '.concat(t, ' instead'));
    }(e), Ng(e, 3), i=void 0!==i?i:xg; var n=Sg['case'].getReturnType(e)&i; kg(e, n); for (var _t195=0; _t195<e.length-1; _t195+=2)Ag(e[_t195]); var r=Ig(t, e[e.length-1], n); var s=null; for (var _i157=e.length-3; _i157>=0; _i157-=2) {
      s='('.concat(Ig(t, e[_i157]), ' ? ').concat(Ig(t, e[_i157+1], n), ' : ').concat(s||r, ')');
    } return s;
  }}; var Vg=/* #__PURE__*/function() {
    function Vg() {
      _classCallCheck(this, Vg); this.uniforms=[], this.attributes=[], this.varyings=[], this.sizeExpression='vec2(1.0)', this.rotationExpression='0.0', this.offsetExpression='vec2(0.0)', this.colorExpression='vec4(1.0)', this.texCoordExpression='vec4(0.0, 0.0, 1.0, 1.0)', this.discardExpression='false', this.rotateWithView=!1;
    }_createClass(Vg, [{key: 'addUniform', value: function addUniform(t) {
      return this.uniforms.push(t), this;
    }}, {key: 'addAttribute', value: function addAttribute(t) {
      return this.attributes.push(t), this;
    }}, {key: 'addVarying', value: function addVarying(t, e, i) {
      return this.varyings.push({name: t, type: e, expression: i}), this;
    }}, {key: 'setSizeExpression', value: function setSizeExpression(t) {
      return this.sizeExpression=t, this;
    }}, {key: 'setRotationExpression', value: function setRotationExpression(t) {
      return this.rotationExpression=t, this;
    }}, {key: 'setSymbolOffsetExpression', value: function setSymbolOffsetExpression(t) {
      return this.offsetExpression=t, this;
    }}, {key: 'setColorExpression', value: function setColorExpression(t) {
      return this.colorExpression=t, this;
    }}, {key: 'setTextureCoordinateExpression', value: function setTextureCoordinateExpression(t) {
      return this.texCoordExpression=t, this;
    }}, {key: 'setFragmentDiscardExpression', value: function setFragmentDiscardExpression(t) {
      return this.discardExpression=t, this;
    }}, {key: 'setSymbolRotateWithView', value: function setSymbolRotateWithView(t) {
      return this.rotateWithView=t, this;
    }}, {key: 'getSizeExpression', value: function getSizeExpression() {
      return this.sizeExpression;
    }}, {key: 'getOffsetExpression', value: function getOffsetExpression() {
      return this.offsetExpression;
    }}, {key: 'getColorExpression', value: function getColorExpression() {
      return this.colorExpression;
    }}, {key: 'getTextureCoordinateExpression', value: function getTextureCoordinateExpression() {
      return this.texCoordExpression;
    }}, {key: 'getFragmentDiscardExpression', value: function getFragmentDiscardExpression() {
      return this.discardExpression;
    }}, {key: 'getSymbolVertexShader', value: function getSymbolVertexShader(t) {
      var e=this.rotateWithView?'u_offsetScaleMatrix * u_offsetRotateMatrix':'u_offsetScaleMatrix'; var i=this.attributes; var n=this.varyings; return t&&(i=i.concat('vec4 a_hitColor'), n=n.concat({name: 'v_hitColor', type: 'vec4', expression: 'a_hitColor'})), 'precision mediump float;\nuniform mat4 u_projectionMatrix;\nuniform mat4 u_offsetScaleMatrix;\nuniform mat4 u_offsetRotateMatrix;\nuniform float u_time;\nuniform float u_zoom;\nuniform float u_resolution;\n'.concat(this.uniforms.map(function(t) {
        return 'uniform '+t+';';
      }).join('\n'), '\nattribute vec2 a_position;\nattribute float a_index;\n').concat(i.map(function(t) {
        return 'attribute '+t+';';
      }).join('\n'), '\nvarying vec2 v_texCoord;\nvarying vec2 v_quadCoord;\n').concat(n.map(function(t) {
        return 'varying '+t.type+' '+t.name+';';
      }).join('\n'), '\nvoid main(void) {\n  mat4 offsetMatrix = ').concat(e, ';\n  vec2 halfSize = ').concat(this.sizeExpression, ' * 0.5;\n  vec2 offset = ').concat(this.offsetExpression, ';\n  float angle = ').concat(this.rotationExpression, ';\n  float offsetX;\n  float offsetY;\n  if (a_index == 0.0) {\n    offsetX = (offset.x - halfSize.x) * cos(angle) + (offset.y - halfSize.y) * sin(angle);\n    offsetY = (offset.y - halfSize.y) * cos(angle) - (offset.x - halfSize.x) * sin(angle);\n  } else if (a_index == 1.0) {\n    offsetX = (offset.x + halfSize.x) * cos(angle) + (offset.y - halfSize.y) * sin(angle);\n    offsetY = (offset.y - halfSize.y) * cos(angle) - (offset.x + halfSize.x) * sin(angle);\n  } else if (a_index == 2.0) {\n    offsetX = (offset.x + halfSize.x) * cos(angle) + (offset.y + halfSize.y) * sin(angle);\n    offsetY = (offset.y + halfSize.y) * cos(angle) - (offset.x + halfSize.x) * sin(angle);\n  } else {\n    offsetX = (offset.x - halfSize.x) * cos(angle) + (offset.y + halfSize.y) * sin(angle);\n    offsetY = (offset.y + halfSize.y) * cos(angle) - (offset.x - halfSize.x) * sin(angle);\n  }\n  vec4 offsets = offsetMatrix * vec4(offsetX, offsetY, 0.0, 0.0);\n  gl_Position = u_projectionMatrix * vec4(a_position, 0.0, 1.0) + offsets;\n  vec4 texCoord = ').concat(this.texCoordExpression, ';\n  float u = a_index == 0.0 || a_index == 3.0 ? texCoord.s : texCoord.p;\n  float v = a_index == 2.0 || a_index == 3.0 ? texCoord.t : texCoord.q;\n  v_texCoord = vec2(u, v);\n  u = a_index == 0.0 || a_index == 3.0 ? 0.0 : 1.0;\n  v = a_index == 2.0 || a_index == 3.0 ? 0.0 : 1.0;\n  v_quadCoord = vec2(u, v);\n').concat(n.map(function(t) {
        return '  '+t.name+' = '+t.expression+';';
      }).join('\n'), '\n}');
    }}, {key: 'getSymbolFragmentShader', value: function getSymbolFragmentShader(t) {
      var e=t?'  if (gl_FragColor.a < 0.1) { discard; } gl_FragColor = v_hitColor;':''; var i=this.varyings; return t&&(i=i.concat({name: 'v_hitColor', type: 'vec4', expression: 'a_hitColor'})), 'precision mediump float;\nuniform float u_time;\nuniform float u_zoom;\nuniform float u_resolution;\n'.concat(this.uniforms.map(function(t) {
        return 'uniform '+t+';';
      }).join('\n'), '\nvarying vec2 v_texCoord;\nvarying vec2 v_quadCoord;\n').concat(i.map(function(t) {
        return 'varying '+t.type+' '+t.name+';';
      }).join('\n'), '\nvoid main(void) {\n  if (').concat(this.discardExpression, ') { discard; }\n  gl_FragColor = ').concat(this.colorExpression, ';\n  gl_FragColor.rgb *= gl_FragColor.a;\n').concat(e, '\n}');
    }}]); return Vg;
  }(); function Wg(t) {
    var e=t.symbol; var i=void 0!==e.size?e.size:1; var n=e.color||'white'; var r=e.textureCoord||[0, 0, 1, 1]; var s=e.offset||[0, 0]; var o=void 0!==e.opacity?e.opacity:1; var a=void 0!==e.rotation?e.rotation:0; var l={inFragmentShader: !1, variables: [], attributes: [], stringLiteralsMap: {}, functions: {}}; var h=Ig(l, i, yg|fg); var c=Ig(l, s, yg); var u=Ig(l, r, yg); var d=Ig(l, a, fg); var g={inFragmentShader: !0, variables: l.variables, attributes: [], stringLiteralsMap: l.stringLiteralsMap, functions: {}}; var f=Ig(g, n, mg); var p=Ig(g, o, fg); var m='1.0'; var _='vec2('.concat(Ig(g, i, yg|fg), ').x'); switch (e.symbolType) {
      case 'square': case 'image': break; case 'circle': m='(1.0-smoothstep(1.-4./'.concat(_, ',1.,dot(v_quadCoord-.5,v_quadCoord-.5)*4.))'); break; case 'triangle': var _t196='(v_quadCoord*2.-1.)'; var _i158='(atan('.concat(_t196, '.x,').concat(_t196, '.y))'); m='(1.0-smoothstep(.5-3./'.concat(_, ',.5,cos(floor(.5+').concat(_i158, '/2.094395102)*2.094395102-').concat(_i158, ')*length(').concat(_t196, ')))'); break; default: throw new Error('Unexpected symbol type: '+e.symbolType);
    } var y=new Vg().setSizeExpression('vec2('.concat(h, ')')).setRotationExpression(d).setSymbolOffsetExpression(c).setTextureCoordinateExpression(u).setSymbolRotateWithView(!!e.rotateWithView).setColorExpression('vec4('.concat(f, '.rgb, ').concat(f, '.a * ').concat(p, ' * ').concat(m, ')')); if (t.filter) {
      var _e187=Ig(g, t.filter, _g); y.setFragmentDiscardExpression('!'.concat(_e187));
    } var x={}; if (g.variables.forEach(function(e) {
      var i=jg(e); y.addUniform('float '.concat(i)), x[i]=function() {
        if (!t.variables||void 0===t.variables[e]) throw new Error('The following variable is missing from the style: '.concat(e)); var i=t.variables[e]; return 'string'==typeof i&&(i=bg(l, i)), void 0!==i?i:-9999999;
      };
    }), 'image'===e.symbolType&&e.src) {
      var _t197=new Image(); _t197.crossOrigin=void 0===e.crossOrigin?'anonymous':e.crossOrigin, _t197.src=e.src, y.addUniform('sampler2D u_texture').setColorExpression(y.getColorExpression()+' * texture2D(u_texture, v_texCoord)'), x.u_texture=_t197;
    } return g.attributes.forEach(function(t) {
      l.attributes.includes(t)||l.attributes.push(t), y.addVarying('v_'.concat(t), 'float', 'a_'.concat(t));
    }), l.attributes.forEach(function(t) {
      y.addAttribute('float a_'.concat(t));
    }), {builder: y, attributes: l.attributes.map(function(t) {
      return {name: t, callback: function callback(e, i) {
        var n=i[t]; return 'string'==typeof n&&(n=bg(l, n)), void 0!==n?n:-9999999;
      }};
    }), uniforms: x};
  } var Zg=/* #__PURE__*/function() {
    function Zg(t) {
      _classCallCheck(this, Zg); this.opacity_=t.opacity, this.rotateWithView_=t.rotateWithView, this.rotation_=t.rotation, this.scale_=t.scale, this.scaleArray_=ll(t.scale), this.displacement_=t.displacement, this.declutterMode_=t.declutterMode;
    }_createClass(Zg, [{key: 'clone', value: function clone() {
      var t=this.getScale(); return new Zg({opacity: this.getOpacity(), scale: Array.isArray(t)?t.slice():t, rotation: this.getRotation(), rotateWithView: this.getRotateWithView(), displacement: this.getDisplacement().slice(), declutterMode: this.getDeclutterMode()});
    }}, {key: 'getOpacity', value: function getOpacity() {
      return this.opacity_;
    }}, {key: 'getRotateWithView', value: function getRotateWithView() {
      return this.rotateWithView_;
    }}, {key: 'getRotation', value: function getRotation() {
      return this.rotation_;
    }}, {key: 'getScale', value: function getScale() {
      return this.scale_;
    }}, {key: 'getScaleArray', value: function getScaleArray() {
      return this.scaleArray_;
    }}, {key: 'getDisplacement', value: function getDisplacement() {
      return this.displacement_;
    }}, {key: 'getDeclutterMode', value: function getDeclutterMode() {
      return this.declutterMode_;
    }}, {key: 'getAnchor', value: function getAnchor() {
      return z();
    }}, {key: 'getImage', value: function getImage(t) {
      return z();
    }}, {key: 'getHitDetectionImage', value: function getHitDetectionImage() {
      return z();
    }}, {key: 'getPixelRatio', value: function getPixelRatio(t) {
      return 1;
    }}, {key: 'getImageState', value: function getImageState() {
      return z();
    }}, {key: 'getImageSize', value: function getImageSize() {
      return z();
    }}, {key: 'getOrigin', value: function getOrigin() {
      return z();
    }}, {key: 'getSize', value: function getSize() {
      return z();
    }}, {key: 'setDisplacement', value: function setDisplacement(t) {
      this.displacement_=t;
    }}, {key: 'setOpacity', value: function setOpacity(t) {
      this.opacity_=t;
    }}, {key: 'setRotateWithView', value: function setRotateWithView(t) {
      this.rotateWithView_=t;
    }}, {key: 'setRotation', value: function setRotation(t) {
      this.rotation_=t;
    }}, {key: 'setScale', value: function setScale(t) {
      this.scale_=t, this.scaleArray_=ll(t);
    }}, {key: 'listenImageChange', value: function listenImageChange(t) {
      z();
    }}, {key: 'load', value: function load() {
      z();
    }}, {key: 'unlistenImageChange', value: function unlistenImageChange(t) {
      z();
    }}]); return Zg;
  }(); var Yg=Zg; var Kg=/* #__PURE__*/function(_Yg) {
    _inherits(Kg, _Yg); var _super114=_createSuper(Kg); function Kg(t) {
      var _this133; _classCallCheck(this, Kg); _this133=_super114.call(this, {opacity: 1, rotateWithView: void 0!==t.rotateWithView&&t.rotateWithView, rotation: void 0!==t.rotation?t.rotation:0, scale: void 0!==t.scale?t.scale:1, displacement: void 0!==t.displacement?t.displacement:[0, 0], declutterMode: t.declutterMode}), _this133.canvas_=void 0, _this133.hitDetectionCanvas_=null, _this133.fill_=void 0!==t.fill?t.fill:null, _this133.origin_=[0, 0], _this133.points_=t.points, _this133.radius_=void 0!==t.radius?t.radius:t.radius1, _this133.radius2_=t.radius2, _this133.angle_=void 0!==t.angle?t.angle:0, _this133.stroke_=void 0!==t.stroke?t.stroke:null, _this133.size_=null, _this133.renderOptions_=null, _this133.render(); return _this133;
    }_createClass(Kg, [{key: 'clone', value: function clone() {
      var t=this.getScale(); var e=new Kg({fill: this.getFill()?this.getFill().clone():void 0, points: this.getPoints(), radius: this.getRadius(), radius2: this.getRadius2(), angle: this.getAngle(), stroke: this.getStroke()?this.getStroke().clone():void 0, rotation: this.getRotation(), rotateWithView: this.getRotateWithView(), scale: Array.isArray(t)?t.slice():t, displacement: this.getDisplacement().slice(), declutterMode: this.getDeclutterMode()}); return e.setOpacity(this.getOpacity()), e;
    }}, {key: 'getAnchor', value: function getAnchor() {
      var t=this.size_; if (!t) return null; var e=this.getDisplacement(); var i=this.getScaleArray(); return [t[0]/2-e[0]/i[0], t[1]/2+e[1]/i[1]];
    }}, {key: 'getAngle', value: function getAngle() {
      return this.angle_;
    }}, {key: 'getFill', value: function getFill() {
      return this.fill_;
    }}, {key: 'setFill', value: function setFill(t) {
      this.fill_=t, this.render();
    }}, {key: 'getHitDetectionImage', value: function getHitDetectionImage() {
      return this.hitDetectionCanvas_||this.createHitDetectionCanvas_(this.renderOptions_), this.hitDetectionCanvas_;
    }}, {key: 'getImage', value: function getImage(t) {
      var e=this.canvas_[t]; if (!e) {
        var _i159=this.renderOptions_; var _n152=_t(_i159.size*t, _i159.size*t); this.draw_(_i159, _n152, t), e=_n152.canvas, this.canvas_[t]=e;
      } return e;
    }}, {key: 'getPixelRatio', value: function getPixelRatio(t) {
      return t;
    }}, {key: 'getImageSize', value: function getImageSize() {
      return this.size_;
    }}, {key: 'getImageState', value: function getImageState() {
      return ts;
    }}, {key: 'getOrigin', value: function getOrigin() {
      return this.origin_;
    }}, {key: 'getPoints', value: function getPoints() {
      return this.points_;
    }}, {key: 'getRadius', value: function getRadius() {
      return this.radius_;
    }}, {key: 'getRadius2', value: function getRadius2() {
      return this.radius2_;
    }}, {key: 'getSize', value: function getSize() {
      return this.size_;
    }}, {key: 'getStroke', value: function getStroke() {
      return this.stroke_;
    }}, {key: 'setStroke', value: function setStroke(t) {
      this.stroke_=t, this.render();
    }}, {key: 'listenImageChange', value: function listenImageChange(t) {}}, {key: 'load', value: function load() {}}, {key: 'unlistenImageChange', value: function unlistenImageChange(t) {}}, {key: 'calculateLineJoinSize_', value: function calculateLineJoinSize_(t, e, i) {
      if (0===e||this.points_===1/0||'bevel'!==t&&'miter'!==t) return e; var n=this.radius_; var r=void 0===this.radius2_?n:this.radius2_; if (n<r) {
        var _t198=n; n=r, r=_t198;
      } var s=void 0===this.radius2_?this.points_:2*this.points_; var o=2*Math.PI/s; var a=r*Math.sin(o); var l=n-Math.sqrt(r*r-a*a); var h=Math.sqrt(a*a+l*l); var c=h/a; if ('miter'===t&&c<=i) return c*e; var u=e/2/c; var d=e/2*(l/h); var g=Math.sqrt((n+u)*(n+u)+d*d)-n; if (void 0===this.radius2_||'bevel'===t) return 2*g; var f=n*Math.sin(o); var p=r-Math.sqrt(n*n-f*f); var m=Math.sqrt(f*f+p*p)/f; if (m<=i) {
        var _t199=m*e/2-r-n; return 2*Math.max(g, _t199);
      } return 2*g;
    }}, {key: 'createRenderOptions', value: function createRenderOptions() {
      var t; var e=eo; var i=0; var n=null; var r=0; var s=0; this.stroke_&&(t=this.stroke_.getColor(), null===t&&(t=no), t=Al(t), s=this.stroke_.getWidth(), void 0===s&&(s=1), n=this.stroke_.getLineDash(), r=this.stroke_.getLineDashOffset(), e=this.stroke_.getLineJoin(), void 0===e&&(e=eo), i=this.stroke_.getMiterLimit(), void 0===i&&(i=io)); var o=this.calculateLineJoinSize_(e, s, i); var a=Math.max(this.radius_, this.radius2_||0); return {strokeStyle: t, strokeWidth: s, size: Math.ceil(2*a+o), lineDash: n, lineDashOffset: r, lineJoin: e, miterLimit: i};
    }}, {key: 'render', value: function render() {
      this.renderOptions_=this.createRenderOptions(); var t=this.renderOptions_.size; this.canvas_={}, this.size_=[t, t];
    }}, {key: 'draw_', value: function draw_(t, e, i) {
      if (e.scale(i, i), e.translate(t.size/2, t.size/2), this.createPath_(e), this.fill_) {
        var _t200=this.fill_.getColor(); null===_t200&&(_t200=Js), e.fillStyle=Al(_t200), e.fill();
      } this.stroke_&&(e.strokeStyle=t.strokeStyle, e.lineWidth=t.strokeWidth, t.lineDash&&(e.setLineDash(t.lineDash), e.lineDashOffset=t.lineDashOffset), e.lineJoin=t.lineJoin, e.miterLimit=t.miterLimit, e.stroke());
    }}, {key: 'createHitDetectionCanvas_', value: function createHitDetectionCanvas_(t) {
      if (this.fill_) {
        var _e188=this.fill_.getColor(); var _i160=0; if ('string'==typeof _e188&&(_e188=gs(_e188)), null===_e188?_i160=1:Array.isArray(_e188)&&(_i160=4===_e188.length?_e188[3]:1), 0===_i160) {
          var _e189=_t(t.size, t.size); this.hitDetectionCanvas_=_e189.canvas, this.drawHitDetectionCanvas_(t, _e189);
        }
      } this.hitDetectionCanvas_||(this.hitDetectionCanvas_=this.getImage(1));
    }}, {key: 'createPath_', value: function createPath_(t) {
      var e=this.points_; var i=this.radius_; if (e===1/0)t.arc(0, 0, i, 0, 2*Math.PI); else {
        var _n153=void 0===this.radius2_?i:this.radius2_; void 0!==this.radius2_&&(e*=2); var _r130=this.angle_-Math.PI/2; var _s95=2*Math.PI/e; for (var _o88=0; _o88<e; _o88++) {
          var _e190=_r130+_o88*_s95; var _a50=_o88%2==0?i:_n153; t.lineTo(_a50*Math.cos(_e190), _a50*Math.sin(_e190));
        }t.closePath();
      }
    }}, {key: 'drawHitDetectionCanvas_', value: function drawHitDetectionCanvas_(t, e) {
      e.translate(t.size/2, t.size/2), this.createPath_(e), e.fillStyle=Js, e.fill(), this.stroke_&&(e.strokeStyle=t.strokeStyle, e.lineWidth=t.strokeWidth, t.lineDash&&(e.setLineDash(t.lineDash), e.lineDashOffset=t.lineDashOffset), e.lineJoin=t.lineJoin, e.miterLimit=t.miterLimit, e.stroke());
    }}]); return Kg;
  }(Yg); var qg=Kg; var Hg=/* #__PURE__*/function(_qg) {
    _inherits(Hg, _qg); var _super115=_createSuper(Hg); function Hg(t) {
      _classCallCheck(this, Hg); return _super115.call(this, {points: 1/0, fill: (t=t||{radius: 5}).fill, radius: t.radius, stroke: t.stroke, scale: void 0!==t.scale?t.scale:1, rotation: void 0!==t.rotation?t.rotation:0, rotateWithView: void 0!==t.rotateWithView&&t.rotateWithView, displacement: void 0!==t.displacement?t.displacement:[0, 0], declutterMode: t.declutterMode});
    }_createClass(Hg, [{key: 'clone', value: function clone() {
      var t=this.getScale(); var e=new Hg({fill: this.getFill()?this.getFill().clone():void 0, stroke: this.getStroke()?this.getStroke().clone():void 0, radius: this.getRadius(), scale: Array.isArray(t)?t.slice():t, rotation: this.getRotation(), rotateWithView: this.getRotateWithView(), displacement: this.getDisplacement().slice(), declutterMode: this.getDeclutterMode()}); return e.setOpacity(this.getOpacity()), e;
    }}, {key: 'setRadius', value: function setRadius(t) {
      this.radius_=t, this.render();
    }}]); return Hg;
  }(qg); var $g=Hg; var Jg=/* #__PURE__*/function() {
    function Jg(t) {
      _classCallCheck(this, Jg); t=t||{}, this.color_=void 0!==t.color?t.color:null;
    }_createClass(Jg, [{key: 'clone', value: function clone() {
      var t=this.getColor(); return new Jg({color: Array.isArray(t)?t.slice():t||void 0});
    }}, {key: 'getColor', value: function getColor() {
      return this.color_;
    }}, {key: 'setColor', value: function setColor(t) {
      this.color_=t;
    }}]); return Jg;
  }(); var Qg=Jg; var tf=null; var ef=/* #__PURE__*/function(_S9) {
    _inherits(ef, _S9); var _super116=_createSuper(ef); function ef(t, e, i, n, r, s) {
      var _this134; _classCallCheck(this, ef); _this134=_super116.call(this), _this134.hitDetectionImage_=null, _this134.image_=t, _this134.crossOrigin_=n, _this134.canvas_={}, _this134.color_=s, _this134.unlisten_=null, _this134.imageState_=r, _this134.size_=i, _this134.src_=e, _this134.tainted_; return _this134;
    }_createClass(ef, [{key: 'initializeImage_', value: function initializeImage_() {
      this.image_=new Image(), null!==this.crossOrigin_&&(this.image_.crossOrigin=this.crossOrigin_);
    }}, {key: 'isTainted_', value: function isTainted_() {
      if (void 0===this.tainted_&&this.imageState_===ts) {
        tf||(tf=_t(1, 1, void 0, {willReadFrequently: !0})), tf.drawImage(this.image_, 0, 0); try {
          tf.getImageData(0, 0, 1, 1), this.tainted_=!1;
        } catch (t) {
          tf=null, this.tainted_=!0;
        }
      } return !0===this.tainted_;
    }}, {key: 'dispatchChangeEvent_', value: function dispatchChangeEvent_() {
      this.dispatchEvent(w);
    }}, {key: 'handleImageError_', value: function handleImageError_() {
      this.imageState_=es, this.unlistenImage_(), this.dispatchChangeEvent_();
    }}, {key: 'handleImageLoad_', value: function handleImageLoad_() {
      this.imageState_=ts, this.size_?(this.image_.width=this.size_[0], this.image_.height=this.size_[1]):this.size_=[this.image_.width, this.image_.height], this.unlistenImage_(), this.dispatchChangeEvent_();
    }}, {key: 'getImage', value: function getImage(t) {
      return this.image_||this.initializeImage_(), this.replaceColor_(t), this.canvas_[t]?this.canvas_[t]:this.image_;
    }}, {key: 'getPixelRatio', value: function getPixelRatio(t) {
      return this.replaceColor_(t), this.canvas_[t]?t:1;
    }}, {key: 'getImageState', value: function getImageState() {
      return this.imageState_;
    }}, {key: 'getHitDetectionImage', value: function getHitDetectionImage() {
      if (this.image_||this.initializeImage_(), !this.hitDetectionImage_) {
        if (this.isTainted_()) {
          var _t201=this.size_[0]; var _e191=this.size_[1]; var _i161=_t(_t201, _e191); _i161.fillRect(0, 0, _t201, _e191), this.hitDetectionImage_=_i161.canvas;
        } else this.hitDetectionImage_=this.image_;
      } return this.hitDetectionImage_;
    }}, {key: 'getSize', value: function getSize() {
      return this.size_;
    }}, {key: 'getSrc', value: function getSrc() {
      return this.src_;
    }}, {key: 'load', value: function load() {
      if (this.imageState_===Jr) {
        this.image_||this.initializeImage_(), this.imageState_=Qr; try {
          this.image_.src=this.src_;
        } catch (t) {
          this.handleImageError_();
        } this.unlisten_=ns(this.image_, this.handleImageLoad_.bind(this), this.handleImageError_.bind(this));
      }
    }}, {key: 'replaceColor_', value: function replaceColor_(t) {
      if (!this.color_||this.canvas_[t]||this.imageState_!==ts) return; var e=this.image_; var i=document.createElement('canvas'); i.width=Math.ceil(e.width*t), i.height=Math.ceil(e.height*t); var n=i.getContext('2d'); n.scale(t, t), n.drawImage(e, 0, 0), n.globalCompositeOperation='multiply', n.fillStyle=cs(this.color_), n.fillRect(0, 0, i.width/t, i.height/t), n.globalCompositeOperation='destination-in', n.drawImage(e, 0, 0), this.canvas_[t]=i;
    }}, {key: 'unlistenImage_', value: function unlistenImage_() {
      this.unlisten_&&(this.unlisten_(), this.unlisten_=null);
    }}]); return ef;
  }(S); function nf(t, e, i, n, r, s) {
    var o=vs.get(e, n, s); return o||(o=new ef(t, e, i, n, r, s), vs.set(e, n, s, o)), o;
  } var rf=ef; var sf=/* #__PURE__*/function(_Yg2) {
    _inherits(sf, _Yg2); var _super117=_createSuper(sf); function sf(t) {
      var _this135; _classCallCheck(this, sf); var e=void 0!==(t=t||{}).opacity?t.opacity:1; var i=void 0!==t.rotation?t.rotation:0; var n=void 0!==t.scale?t.scale:1; var r=void 0!==t.rotateWithView&&t.rotateWithView; _this135=_super117.call(this, {opacity: e, rotation: i, scale: n, displacement: void 0!==t.displacement?t.displacement:[0, 0], rotateWithView: r, declutterMode: t.declutterMode}), _this135.anchor_=void 0!==t.anchor?t.anchor:[.5, .5], _this135.normalizedAnchor_=null, _this135.anchorOrigin_=void 0!==t.anchorOrigin?t.anchorOrigin:'top-left', _this135.anchorXUnits_=void 0!==t.anchorXUnits?t.anchorXUnits:'fraction', _this135.anchorYUnits_=void 0!==t.anchorYUnits?t.anchorYUnits:'fraction', _this135.crossOrigin_=void 0!==t.crossOrigin?t.crossOrigin:null; var s=void 0!==t.img?t.img:null; _this135.imgSize_=t.imgSize; var o=t.src; Ft(!(void 0!==o&&s), 4), Ft(!s||s&&_this135.imgSize_, 5), void 0!==o&&0!==o.length||!s||(o=s.src||X(s)), Ft(void 0!==o&&o.length>0, 6), Ft(!((void 0!==t.width||void 0!==t.height)&&void 0!==t.scale), 69); var a=void 0!==t.src?Jr:ts; if (_this135.color_=void 0!==t.color?gs(t.color):null, _this135.iconImage_=nf(s, o, void 0!==_this135.imgSize_?_this135.imgSize_:null, _this135.crossOrigin_, a, _this135.color_), _this135.offset_=void 0!==t.offset?t.offset:[0, 0], _this135.offsetOrigin_=void 0!==t.offsetOrigin?t.offsetOrigin:'top-left', _this135.origin_=null, _this135.size_=void 0!==t.size?t.size:null, _this135.width_=t.width, _this135.height_=t.height, void 0!==_this135.width_||void 0!==_this135.height_) {
        var _t202=_this135.getImage(1); var _e192=function _e192() {
          _this135.updateScaleFromWidthAndHeight(_this135.width_, _this135.height_);
        }; _t202.width>0?_this135.updateScaleFromWidthAndHeight(_this135.width_, _this135.height_):_t202.addEventListener('load', _e192);
      } return _this135;
    }_createClass(sf, [{key: 'clone', value: function clone() {
      var t=this.getScale(); return new sf({anchor: this.anchor_.slice(), anchorOrigin: this.anchorOrigin_, anchorXUnits: this.anchorXUnits_, anchorYUnits: this.anchorYUnits_, color: this.color_&&this.color_.slice?this.color_.slice():this.color_||void 0, crossOrigin: this.crossOrigin_, imgSize: this.imgSize_, offset: this.offset_.slice(), offsetOrigin: this.offsetOrigin_, opacity: this.getOpacity(), rotateWithView: this.getRotateWithView(), rotation: this.getRotation(), scale: Array.isArray(t)?t.slice():t, size: null!==this.size_?this.size_.slice():void 0, src: this.getSrc(), displacement: this.getDisplacement().slice(), declutterMode: this.getDeclutterMode(), width: this.width_, height: this.height_});
    }}, {key: 'updateScaleFromWidthAndHeight', value: function updateScaleFromWidthAndHeight(t, e) {
      var i=this.getImage(1); void 0!==t&&void 0!==e?_get(_getPrototypeOf(sf.prototype), 'setScale', this).call(this, [t/i.width, e/i.height]):void 0!==t?_get(_getPrototypeOf(sf.prototype), 'setScale', this).call(this, [t/i.width, t/i.width]):void 0!==e?_get(_getPrototypeOf(sf.prototype), 'setScale', this).call(this, [e/i.height, e/i.height]):_get(_getPrototypeOf(sf.prototype), 'setScale', this).call(this, [1, 1]);
    }}, {key: 'getAnchor', value: function getAnchor() {
      var t=this.normalizedAnchor_; if (!t) {
        t=this.anchor_; var _e193=this.getSize(); if ('fraction'==this.anchorXUnits_||'fraction'==this.anchorYUnits_) {
          if (!_e193) return null; t=this.anchor_.slice(), 'fraction'==this.anchorXUnits_&&(t[0]*=_e193[0]), 'fraction'==this.anchorYUnits_&&(t[1]*=_e193[1]);
        } if ('top-left'!=this.anchorOrigin_) {
          if (!_e193) return null; t===this.anchor_&&(t=this.anchor_.slice()), 'top-right'!=this.anchorOrigin_&&'bottom-right'!=this.anchorOrigin_||(t[0]=-t[0]+_e193[0]), 'bottom-left'!=this.anchorOrigin_&&'bottom-right'!=this.anchorOrigin_||(t[1]=-t[1]+_e193[1]);
        } this.normalizedAnchor_=t;
      } var e=this.getDisplacement(); var i=this.getScaleArray(); return [t[0]-e[0]/i[0], t[1]+e[1]/i[1]];
    }}, {key: 'setAnchor', value: function setAnchor(t) {
      this.anchor_=t, this.normalizedAnchor_=null;
    }}, {key: 'getColor', value: function getColor() {
      return this.color_;
    }}, {key: 'getImage', value: function getImage(t) {
      return this.iconImage_.getImage(t);
    }}, {key: 'getPixelRatio', value: function getPixelRatio(t) {
      return this.iconImage_.getPixelRatio(t);
    }}, {key: 'getImageSize', value: function getImageSize() {
      return this.iconImage_.getSize();
    }}, {key: 'getImageState', value: function getImageState() {
      return this.iconImage_.getImageState();
    }}, {key: 'getHitDetectionImage', value: function getHitDetectionImage() {
      return this.iconImage_.getHitDetectionImage();
    }}, {key: 'getOrigin', value: function getOrigin() {
      if (this.origin_) return this.origin_; var t=this.offset_; if ('top-left'!=this.offsetOrigin_) {
        var _e194=this.getSize(); var _i162=this.iconImage_.getSize(); if (!_e194||!_i162) return null; t=t.slice(), 'top-right'!=this.offsetOrigin_&&'bottom-right'!=this.offsetOrigin_||(t[0]=_i162[0]-_e194[0]-t[0]), 'bottom-left'!=this.offsetOrigin_&&'bottom-right'!=this.offsetOrigin_||(t[1]=_i162[1]-_e194[1]-t[1]);
      } return this.origin_=t, this.origin_;
    }}, {key: 'getSrc', value: function getSrc() {
      return this.iconImage_.getSrc();
    }}, {key: 'getSize', value: function getSize() {
      return this.size_?this.size_:this.iconImage_.getSize();
    }}, {key: 'getWidth', value: function getWidth() {
      return this.width_;
    }}, {key: 'getHeight', value: function getHeight() {
      return this.height_;
    }}, {key: 'setWidth', value: function setWidth(t) {
      this.width_=t, this.updateScaleFromWidthAndHeight(t, this.height_);
    }}, {key: 'setHeight', value: function setHeight(t) {
      this.height_=t, this.updateScaleFromWidthAndHeight(this.width_, t);
    }}, {key: 'setScale', value: function setScale(t) {
      _get(_getPrototypeOf(sf.prototype), 'setScale', this).call(this, t); var e=this.getImage(1); if (e) {
        var _i163=Array.isArray(t)?t[0]:t; void 0!==_i163&&(this.width_=_i163*e.width); var _n154=Array.isArray(t)?t[1]:t; void 0!==_n154&&(this.height_=_n154*e.height);
      }
    }}, {key: 'listenImageChange', value: function listenImageChange(t) {
      this.iconImage_.addEventListener(w, t);
    }}, {key: 'load', value: function load() {
      this.iconImage_.load();
    }}, {key: 'unlistenImageChange', value: function unlistenImageChange(t) {
      this.iconImage_.removeEventListener(w, t);
    }}]); return sf;
  }(Yg); var of=sf; var af=/* #__PURE__*/function() {
    function af(t) {
      _classCallCheck(this, af); t=t||{}, this.color_=void 0!==t.color?t.color:null, this.lineCap_=t.lineCap, this.lineDash_=void 0!==t.lineDash?t.lineDash:null, this.lineDashOffset_=t.lineDashOffset, this.lineJoin_=t.lineJoin, this.miterLimit_=t.miterLimit, this.width_=t.width;
    }_createClass(af, [{key: 'clone', value: function clone() {
      var t=this.getColor(); return new af({color: Array.isArray(t)?t.slice():t||void 0, lineCap: this.getLineCap(), lineDash: this.getLineDash()?this.getLineDash().slice():void 0, lineDashOffset: this.getLineDashOffset(), lineJoin: this.getLineJoin(), miterLimit: this.getMiterLimit(), width: this.getWidth()});
    }}, {key: 'getColor', value: function getColor() {
      return this.color_;
    }}, {key: 'getLineCap', value: function getLineCap() {
      return this.lineCap_;
    }}, {key: 'getLineDash', value: function getLineDash() {
      return this.lineDash_;
    }}, {key: 'getLineDashOffset', value: function getLineDashOffset() {
      return this.lineDashOffset_;
    }}, {key: 'getLineJoin', value: function getLineJoin() {
      return this.lineJoin_;
    }}, {key: 'getMiterLimit', value: function getMiterLimit() {
      return this.miterLimit_;
    }}, {key: 'getWidth', value: function getWidth() {
      return this.width_;
    }}, {key: 'setColor', value: function setColor(t) {
      this.color_=t;
    }}, {key: 'setLineCap', value: function setLineCap(t) {
      this.lineCap_=t;
    }}, {key: 'setLineDash', value: function setLineDash(t) {
      this.lineDash_=t;
    }}, {key: 'setLineDashOffset', value: function setLineDashOffset(t) {
      this.lineDashOffset_=t;
    }}, {key: 'setLineJoin', value: function setLineJoin(t) {
      this.lineJoin_=t;
    }}, {key: 'setMiterLimit', value: function setMiterLimit(t) {
      this.miterLimit_=t;
    }}, {key: 'setWidth', value: function setWidth(t) {
      this.width_=t;
    }}]); return af;
  }(); var lf=af; var hf=/* #__PURE__*/function() {
    function hf(t) {
      _classCallCheck(this, hf); t=t||{}, this.geometry_=null, this.geometryFunction_=ff, void 0!==t.geometry&&this.setGeometry(t.geometry), this.fill_=void 0!==t.fill?t.fill:null, this.image_=void 0!==t.image?t.image:null, this.renderer_=void 0!==t.renderer?t.renderer:null, this.hitDetectionRenderer_=void 0!==t.hitDetectionRenderer?t.hitDetectionRenderer:null, this.stroke_=void 0!==t.stroke?t.stroke:null, this.text_=void 0!==t.text?t.text:null, this.zIndex_=t.zIndex;
    }_createClass(hf, [{key: 'clone', value: function clone() {
      var t=this.getGeometry(); return t&&'object'==_typeof(t)&&(t=t.clone()), new hf({geometry: t, fill: this.getFill()?this.getFill().clone():void 0, image: this.getImage()?this.getImage().clone():void 0, renderer: this.getRenderer(), stroke: this.getStroke()?this.getStroke().clone():void 0, text: this.getText()?this.getText().clone():void 0, zIndex: this.getZIndex()});
    }}, {key: 'getRenderer', value: function getRenderer() {
      return this.renderer_;
    }}, {key: 'setRenderer', value: function setRenderer(t) {
      this.renderer_=t;
    }}, {key: 'setHitDetectionRenderer', value: function setHitDetectionRenderer(t) {
      this.hitDetectionRenderer_=t;
    }}, {key: 'getHitDetectionRenderer', value: function getHitDetectionRenderer() {
      return this.hitDetectionRenderer_;
    }}, {key: 'getGeometry', value: function getGeometry() {
      return this.geometry_;
    }}, {key: 'getGeometryFunction', value: function getGeometryFunction() {
      return this.geometryFunction_;
    }}, {key: 'getFill', value: function getFill() {
      return this.fill_;
    }}, {key: 'setFill', value: function setFill(t) {
      this.fill_=t;
    }}, {key: 'getImage', value: function getImage() {
      return this.image_;
    }}, {key: 'setImage', value: function setImage(t) {
      this.image_=t;
    }}, {key: 'getStroke', value: function getStroke() {
      return this.stroke_;
    }}, {key: 'setStroke', value: function setStroke(t) {
      this.stroke_=t;
    }}, {key: 'getText', value: function getText() {
      return this.text_;
    }}, {key: 'setText', value: function setText(t) {
      this.text_=t;
    }}, {key: 'getZIndex', value: function getZIndex() {
      return this.zIndex_;
    }}, {key: 'setGeometry', value: function setGeometry(t) {
'function'==typeof t?this.geometryFunction_=t:'string'==typeof t?this.geometryFunction_=function(e) {
  return e.get(t);
}:t?void 0!==t&&(this.geometryFunction_=function() {
  return t;
}):this.geometryFunction_=ff, this.geometry_=t;
    }}, {key: 'setZIndex', value: function setZIndex(t) {
      this.zIndex_=t;
    }}]); return hf;
  }(); function cf(t) {
    var e; if ('function'==typeof t)e=t; else {
      var _i164; if (Array.isArray(t))_i164=t; else {
        Ft('function'==typeof t.getZIndex, 41); _i164=[t];
      }e=function e() {
        return _i164;
      };
    } return e;
  } var uf=null; function df(t, e) {
    if (!uf) {
      var _t203=new Qg({color: 'rgba(255,255,255,0.4)'}); var _e195=new lf({color: '#3399CC', width: 1.25}); uf=[new hf({image: new $g({fill: _t203, stroke: _e195, radius: 5}), fill: _t203, stroke: _e195})];
    } return uf;
  } function gf() {
    var t={}; var e=[255, 255, 255, 1]; var i=[0, 153, 255, 1]; return t.Polygon=[new hf({fill: new Qg({color: [255, 255, 255, .5]})})], t.MultiPolygon=t.Polygon, t.LineString=[new hf({stroke: new lf({color: e, width: 5})}), new hf({stroke: new lf({color: i, width: 3})})], t.MultiLineString=t.LineString, t.Circle=t.Polygon.concat(t.LineString), t.Point=[new hf({image: new $g({radius: 6, fill: new Qg({color: i}), stroke: new lf({color: e, width: 1.5})}), zIndex: 1/0})], t.MultiPoint=t.Point, t.GeometryCollection=t.Polygon.concat(t.LineString, t.Point), t;
  } function ff(t) {
    return t.getGeometry();
  } var pf=hf; var mf=/* #__PURE__*/function() {
    function mf(t) {
      _classCallCheck(this, mf); t=t||{}, this.font_=t.font, this.rotation_=t.rotation, this.rotateWithView_=t.rotateWithView, this.scale_=t.scale, this.scaleArray_=ll(void 0!==t.scale?t.scale:1), this.text_=t.text, this.textAlign_=t.textAlign, this.justify_=t.justify, this.textBaseline_=t.textBaseline, this.fill_=void 0!==t.fill?t.fill:new Qg({color: '#333'}), this.maxAngle_=void 0!==t.maxAngle?t.maxAngle:Math.PI/4, this.placement_=void 0!==t.placement?t.placement:'point', this.overflow_=!!t.overflow, this.stroke_=void 0!==t.stroke?t.stroke:null, this.offsetX_=void 0!==t.offsetX?t.offsetX:0, this.offsetY_=void 0!==t.offsetY?t.offsetY:0, this.backgroundFill_=t.backgroundFill?t.backgroundFill:null, this.backgroundStroke_=t.backgroundStroke?t.backgroundStroke:null, this.padding_=void 0===t.padding?null:t.padding;
    }_createClass(mf, [{key: 'clone', value: function clone() {
      var t=this.getScale(); return new mf({font: this.getFont(), placement: this.getPlacement(), maxAngle: this.getMaxAngle(), overflow: this.getOverflow(), rotation: this.getRotation(), rotateWithView: this.getRotateWithView(), scale: Array.isArray(t)?t.slice():t, text: this.getText(), textAlign: this.getTextAlign(), justify: this.getJustify(), textBaseline: this.getTextBaseline(), fill: this.getFill()?this.getFill().clone():void 0, stroke: this.getStroke()?this.getStroke().clone():void 0, offsetX: this.getOffsetX(), offsetY: this.getOffsetY(), backgroundFill: this.getBackgroundFill()?this.getBackgroundFill().clone():void 0, backgroundStroke: this.getBackgroundStroke()?this.getBackgroundStroke().clone():void 0, padding: this.getPadding()||void 0});
    }}, {key: 'getOverflow', value: function getOverflow() {
      return this.overflow_;
    }}, {key: 'getFont', value: function getFont() {
      return this.font_;
    }}, {key: 'getMaxAngle', value: function getMaxAngle() {
      return this.maxAngle_;
    }}, {key: 'getPlacement', value: function getPlacement() {
      return this.placement_;
    }}, {key: 'getOffsetX', value: function getOffsetX() {
      return this.offsetX_;
    }}, {key: 'getOffsetY', value: function getOffsetY() {
      return this.offsetY_;
    }}, {key: 'getFill', value: function getFill() {
      return this.fill_;
    }}, {key: 'getRotateWithView', value: function getRotateWithView() {
      return this.rotateWithView_;
    }}, {key: 'getRotation', value: function getRotation() {
      return this.rotation_;
    }}, {key: 'getScale', value: function getScale() {
      return this.scale_;
    }}, {key: 'getScaleArray', value: function getScaleArray() {
      return this.scaleArray_;
    }}, {key: 'getStroke', value: function getStroke() {
      return this.stroke_;
    }}, {key: 'getText', value: function getText() {
      return this.text_;
    }}, {key: 'getTextAlign', value: function getTextAlign() {
      return this.textAlign_;
    }}, {key: 'getJustify', value: function getJustify() {
      return this.justify_;
    }}, {key: 'getTextBaseline', value: function getTextBaseline() {
      return this.textBaseline_;
    }}, {key: 'getBackgroundFill', value: function getBackgroundFill() {
      return this.backgroundFill_;
    }}, {key: 'getBackgroundStroke', value: function getBackgroundStroke() {
      return this.backgroundStroke_;
    }}, {key: 'getPadding', value: function getPadding() {
      return this.padding_;
    }}, {key: 'setOverflow', value: function setOverflow(t) {
      this.overflow_=t;
    }}, {key: 'setFont', value: function setFont(t) {
      this.font_=t;
    }}, {key: 'setMaxAngle', value: function setMaxAngle(t) {
      this.maxAngle_=t;
    }}, {key: 'setOffsetX', value: function setOffsetX(t) {
      this.offsetX_=t;
    }}, {key: 'setOffsetY', value: function setOffsetY(t) {
      this.offsetY_=t;
    }}, {key: 'setPlacement', value: function setPlacement(t) {
      this.placement_=t;
    }}, {key: 'setRotateWithView', value: function setRotateWithView(t) {
      this.rotateWithView_=t;
    }}, {key: 'setFill', value: function setFill(t) {
      this.fill_=t;
    }}, {key: 'setRotation', value: function setRotation(t) {
      this.rotation_=t;
    }}, {key: 'setScale', value: function setScale(t) {
      this.scale_=t, this.scaleArray_=ll(void 0!==t?t:1);
    }}, {key: 'setStroke', value: function setStroke(t) {
      this.stroke_=t;
    }}, {key: 'setText', value: function setText(t) {
      this.text_=t;
    }}, {key: 'setTextAlign', value: function setTextAlign(t) {
      this.textAlign_=t;
    }}, {key: 'setJustify', value: function setJustify(t) {
      this.justify_=t;
    }}, {key: 'setTextBaseline', value: function setTextBaseline(t) {
      this.textBaseline_=t;
    }}, {key: 'setBackgroundFill', value: function setBackgroundFill(t) {
      this.backgroundFill_=t;
    }}, {key: 'setBackgroundStroke', value: function setBackgroundStroke(t) {
      this.backgroundStroke_=t;
    }}, {key: 'setPadding', value: function setPadding(t) {
      this.padding_=t;
    }}]); return mf;
  }(); var _f=mf; function yf(t) {
    return new pf({fill: xf(t, ''), stroke: vf(t, ''), text: Sf(t), image: wf(t)});
  } function xf(t, e) {
    var i=t[e+'fill-color']; if (i) return new Qg({color: i});
  } function vf(t, e) {
    var i=t[e+'stroke-width']; var n=t[e+'stroke-color']; if (i||n) return new lf({width: i, color: n, lineCap: t[e+'stroke-line-cap'], lineJoin: t[e+'stroke-line-join'], lineDash: t[e+'stroke-line-dash'], lineDashOffset: t[e+'stroke-line-dash-offset'], miterLimit: t[e+'stroke-miter-limit']});
  } function Sf(t) {
    var e=t['text-value']; if (!e) return; return new _f({text: e, font: t['text-font'], maxAngle: t['text-max-angle'], offsetX: t['text-offset-x'], offsetY: t['text-offset-y'], overflow: t['text-overflow'], placement: t['text-placement'], scale: t['text-scale'], rotateWithView: t['text-rotate-with-view'], rotation: t['text-rotation'], textAlign: t['text-align'], justify: t['text-justify'], textBaseline: t['text-baseline'], padding: t['text-padding'], fill: xf(t, 'text-'), backgroundFill: xf(t, 'text-background-'), stroke: vf(t, 'text-'), backgroundStroke: vf(t, 'text-background-')});
  } function wf(t) {
    var e=t['icon-src']; var i=t['icon-img']; if (e||i) {
      return new of({src: e, img: i, imgSize: t['icon-img-size'], anchor: t['icon-anchor'], anchorOrigin: t['icon-anchor-origin'], anchorXUnits: t['icon-anchor-x-units'], anchorYUnits: t['icon-anchor-y-units'], color: t['icon-color'], crossOrigin: t['icon-cross-origin'], offset: t['icon-offset'], displacement: t['icon-displacement'], opacity: t['icon-opacity'], scale: t['icon-scale'], rotation: t['icon-rotation'], rotateWithView: t['icon-rotate-with-view'], size: t['icon-size'], declutterMode: t['icon-declutter-mode']});
    } var n=t['shape-points']; if (n) {
      var _e196='shape-'; return new qg({points: n, fill: xf(t, _e196), stroke: vf(t, _e196), radius: t['shape-radius'], radius1: t['shape-radius1'], radius2: t['shape-radius2'], angle: t['shape-angle'], displacement: t['shape-displacement'], rotation: t['shape-rotation'], rotateWithView: t['shape-rotate-with-view'], scale: t['shape-scale'], declutterMode: t['shape-declutter-mode']});
    } var r=t['circle-radius']; if (r) {
      var _e197='circle-'; return new $g({radius: r, fill: xf(t, _e197), stroke: vf(t, _e197), displacement: t['circle-displacement'], scale: t['circle-scale'], rotation: t['circle-rotation'], rotateWithView: t['circle-rotate-with-view'], declutterMode: t['circle-declutter-mode']});
    }
  } var Tf=/* #__PURE__*/function() {
    function Tf(t) {
      _classCallCheck(this, Tf); this.first_, this.last_, this.head_, this.circular_=void 0===t||t, this.length_=0;
    }_createClass(Tf, [{key: 'insertItem', value: function insertItem(t) {
      var e={prev: void 0, next: void 0, data: t}; var i=this.head_; if (i) {
        var _t204=i.next; e.prev=i, e.next=_t204, i.next=e, _t204&&(_t204.prev=e), i===this.last_&&(this.last_=e);
      } else this.first_=e, this.last_=e, this.circular_&&(e.next=e, e.prev=e); this.head_=e, this.length_++;
    }}, {key: 'removeItem', value: function removeItem() {
      var t=this.head_; if (t) {
        var _e198=t.next; var _i165=t.prev; _e198&&(_e198.prev=_i165), _i165&&(_i165.next=_e198), this.head_=_e198||_i165, this.first_===this.last_?(this.head_=void 0, this.first_=void 0, this.last_=void 0):this.first_===t?this.first_=this.head_:this.last_===t&&(this.last_=_i165?this.head_.prev:this.head_), this.length_--;
      }
    }}, {key: 'firstItem', value: function firstItem() {
      if (this.head_=this.first_, this.head_) return this.head_.data;
    }}, {key: 'lastItem', value: function lastItem() {
      if (this.head_=this.last_, this.head_) return this.head_.data;
    }}, {key: 'nextItem', value: function nextItem() {
      if (this.head_&&this.head_.next) return this.head_=this.head_.next, this.head_.data;
    }}, {key: 'getNextItem', value: function getNextItem() {
      if (this.head_&&this.head_.next) return this.head_.next.data;
    }}, {key: 'prevItem', value: function prevItem() {
      if (this.head_&&this.head_.prev) return this.head_=this.head_.prev, this.head_.data;
    }}, {key: 'getPrevItem', value: function getPrevItem() {
      if (this.head_&&this.head_.prev) return this.head_.prev.data;
    }}, {key: 'getCurrItem', value: function getCurrItem() {
      if (this.head_) return this.head_.data;
    }}, {key: 'setFirstItem', value: function setFirstItem() {
      this.circular_&&this.head_&&(this.first_=this.head_, this.last_=this.head_.prev);
    }}, {key: 'concat', value: function concat(t) {
      if (t.head_) {
        if (this.head_) {
          var _e199=this.head_.next; this.head_.next=t.first_, t.first_.prev=this.head_, _e199.prev=t.last_, t.last_.next=_e199, this.length_+=t.length_;
        } else this.head_=t.head_, this.first_=t.first_, this.last_=t.last_, this.length_=t.length_; t.head_=void 0, t.first_=void 0, t.last_=void 0, t.length_=0;
      }
    }}, {key: 'getLength', value: function getLength() {
      return this.length_;
    }}]); return Tf;
  }(); var Ef={'image/png': !0, 'image/jpeg': !0, 'image/gif': !0, 'image/webp': !0}; var Cf={'application/vnd.mapbox-vector-tile': !0, 'application/geo+json': !0}; function Rf(t, e) {
    var i; var n; for (var _r131=0; _r131<t.length; ++_r131) {
      var _s96=t[_r131]; if ('item'===_s96.rel) {
        if (_s96.type===e) {
          i=_s96.href; break;
        }(Ef[_s96.type]||!n&&_s96.type.startsWith('image/'))&&(n=_s96.href);
      }
    } if (!i) {
      if (!n) throw new Error('Could not find "item" link'); i=n;
    } return i;
  } function bf(t, e, i) {
    var n; var r; var s={}; for (var _i166=0; _i166<t.length; ++_i166) {
      var _o89=t[_i166]; if (s[_o89.type]=_o89.href, 'item'===_o89.rel) {
        if (_o89.type===e) {
          n=_o89.href; break;
        }Cf[_o89.type]&&(r=_o89.href);
      }
    } if (!n&&i) {
      for (var _t205=0; _t205<i.length; ++_t205) {
        var _e200=i[_t205]; if (s[_e200]) {
          n=s[_e200]; break;
        }
      }
    } if (!n) {
      if (!r) throw new Error('Could not find "item" link'); n=r;
    } return n;
  } function Pf(t, e, i, n) {
    var r=t.projection; if (!r&&(r=an(e.crs), !r)) throw new Error('Unsupported CRS: '.concat(e.crs)); var s='en'!==r.getAxisOrientation().substr(0, 2); var o=e.tileMatrices; var a={}; for (var _t206=0; _t206<o.length; ++_t206) {
      var _e201=o[_t206]; a[_e201.id]=_e201;
    } var l={}; var h=[]; if (n) {
      for (var _t207=0; _t207<n.length; ++_t207) {
        var _e202=n[_t207]; var _i167=_e202.tileMatrix; h.push(_i167), l[_i167]=_e202;
      }
    } else {
      for (var _t208=0; _t208<o.length; ++_t208) {
        var _e203=o[_t208].id; h.push(_e203);
      }
    } var c=h.length; var u=new Array(c); var d=new Array(c); var g=new Array(c); var f=new Array(c); var p=[-1/0, -1/0, 1/0, 1/0]; for (var _t209=0; _t209<c; ++_t209) {
      var _e204=h[_t209]; var _i168=a[_e204]; var _n155=_i168.pointOfOrigin; u[_t209]=s?[_n155[1], _n155[0]]:_n155, d[_t209]=_i168.cellSize, g[_t209]=[_i168.matrixWidth, _i168.matrixHeight], f[_t209]=[_i168.tileWidth, _i168.tileHeight]; var _r132=l[_e204]; if (_r132) {
        var _e205=_i168.cellSize*_i168.tileWidth; var _n156=u[_t209][0]+_r132.minTileCol*_e205; var _s97=u[_t209][0]+(_r132.maxTileCol+1)*_e205; var _o90=_i168.cellSize*_i168.tileHeight; var _a51=void 0; var _l34=void 0; 'bottomLeft'===_i168.cornerOfOrigin?(_a51=u[_t209][1]+_r132.minTileRow*_o90, _l34=u[_t209][1]+(_r132.maxTileRow+1)*_o90):(_a51=u[_t209][1]-(_r132.maxTileRow+1)*_o90, _l34=u[_t209][1]-_r132.minTileRow*_o90), Ae(p, [_n156, _a51, _s97, _l34], p);
      }
    } var m=new ph({origins: u, resolutions: d, sizes: g, tileSizes: f, extent: n?p:void 0}); var _=t.context; var y=t.url; return {grid: m, urlTemplate: i, urlFunction: function urlFunction(t, e, r) {
      if (!t) return; var s=h[t[0]]; var o=a[s]; var c='bottomLeft'===o.cornerOfOrigin; var u={tileMatrix: s, tileCol: t[1], tileRow: c?-t[2]-1:t[2]}; if (n) {
        var _t210=l[o.id]; if (u.tileCol<_t210.minTileCol||u.tileCol>_t210.maxTileCol||u.tileRow<_t210.minTileRow||u.tileRow>_t210.maxTileRow) return;
      }Object.assign(u, _); var d=i.replace(/\{(\w+?)\}/g, function(t, e) {
        return u[e];
      }); return Xl(y, d);
    }};
  } function If(t) {
    return Ul(t.url).then(function(e) {
      return function(t, e) {
        var i=e.tileMatrixSetLimits; var n; if ('map'===e.dataType)n=Rf(e.links, t.mediaType); else {
          if ('vector'!==e.dataType) throw new Error('Expected tileset data type to be "map" or "vector"'); n=bf(e.links, t.mediaType, t.supportedMediaTypes);
        } if (e.tileMatrixSet) return Pf(t, e.tileMatrixSet, n, i); var r=e.links.find(function(t) {
          return 'http://www.opengis.net/def/rel/ogc/1.0/tiling-scheme'===t.rel;
        }); if (!r) throw new Error('Expected http://www.opengis.net/def/rel/ogc/1.0/tiling-scheme link or tileMatrixSet'); var s=r.href; return Ul(Xl(t.url, s)).then(function(e) {
          return Pf(t, e, n, i);
        });
      }(t, e);
    });
  } var Lf=/* #__PURE__*/function(_Ah9) {
    _inherits(Lf, _Ah9); var _super118=_createSuper(Lf); function Lf(t) {
      var _this136; _classCallCheck(this, Lf); _this136=_super118.call(this, {attributions: t.attributions, cacheSize: t.cacheSize, crossOrigin: t.crossOrigin, interpolate: t.interpolate, projection: t.projection, reprojectionErrorThreshold: t.reprojectionErrorThreshold, state: 'loading', tileLoadFunction: t.tileLoadFunction, wrapX: void 0===t.wrapX||t.wrapX, transition: t.transition}); If({url: t.url, projection: _this136.getProjection(), mediaType: t.mediaType, context: t.context||null}).then(_this136.handleTileSetInfo_.bind(_assertThisInitialized(_this136)))['catch'](_this136.handleError_.bind(_assertThisInitialized(_this136))); return _this136;
    }_createClass(Lf, [{key: 'handleTileSetInfo_', value: function handleTileSetInfo_(t) {
      this.tileGrid=t.grid, this.setTileUrlFunction(t.urlFunction, t.urlTemplate), this.setState('ready');
    }}, {key: 'handleError_', value: function handleError_(t) {
      Qi(t), this.setState('error');
    }}]); return Lf;
  }(Ah); var Ff=/* #__PURE__*/function(_zu) {
    _inherits(Ff, _zu); var _super119=_createSuper(Ff); function Ff(t) {
      var _this137; _classCallCheck(this, Ff); _this137=_super119.call(this, {attributions: t.attributions, attributionsCollapsible: t.attributionsCollapsible, cacheSize: t.cacheSize, format: t.format, overlaps: t.overlaps, projection: t.projection, tileClass: t.tileClass, transition: t.transition, wrapX: t.wrapX, zDirection: t.zDirection, state: 'loading'}); If({url: t.url, projection: _this137.getProjection(), mediaType: t.mediaType, supportedMediaTypes: t.format.supportedMediaTypes, context: t.context||null}).then(_this137.handleTileSetInfo_.bind(_assertThisInitialized(_this137)))['catch'](_this137.handleError_.bind(_assertThisInitialized(_this137))); return _this137;
    }_createClass(Ff, [{key: 'handleTileSetInfo_', value: function handleTileSetInfo_(t) {
      this.tileGrid=t.grid, this.setTileUrlFunction(t.urlFunction, t.urlTemplate), this.setState('ready');
    }}, {key: 'handleError_', value: function handleError_(t) {
      Qi(t), this.setState('error');
    }}]); return Ff;
  }(zu); var Mf='renderOrder'; var Af=/* #__PURE__*/function(_ks3) {
    _inherits(Af, _ks3); var _super120=_createSuper(Af); function Af(t) {
      var _this138; _classCallCheck(this, Af); t=t||{}; var e=Object.assign({}, t); delete e.style, delete e.renderBuffer, delete e.updateWhileAnimating, delete e.updateWhileInteracting, _this138=_super120.call(this, e), _this138.declutter_=void 0!==t.declutter&&t.declutter, _this138.renderBuffer_=void 0!==t.renderBuffer?t.renderBuffer:100, _this138.style_=null, _this138.styleFunction_=void 0, _this138.setStyle(t.style), _this138.updateWhileAnimating_=void 0!==t.updateWhileAnimating&&t.updateWhileAnimating, _this138.updateWhileInteracting_=void 0!==t.updateWhileInteracting&&t.updateWhileInteracting; return _this138;
    }_createClass(Af, [{key: 'getDeclutter', value: function getDeclutter() {
      return this.declutter_;
    }}, {key: 'getFeatures', value: function getFeatures(t) {
      return _get(_getPrototypeOf(Af.prototype), 'getFeatures', this).call(this, t);
    }}, {key: 'getRenderBuffer', value: function getRenderBuffer() {
      return this.renderBuffer_;
    }}, {key: 'getRenderOrder', value: function getRenderOrder() {
      return this.get(Mf);
    }}, {key: 'getStyle', value: function getStyle() {
      return this.style_;
    }}, {key: 'getStyleFunction', value: function getStyleFunction() {
      return this.styleFunction_;
    }}, {key: 'getUpdateWhileAnimating', value: function getUpdateWhileAnimating() {
      return this.updateWhileAnimating_;
    }}, {key: 'getUpdateWhileInteracting', value: function getUpdateWhileInteracting() {
      return this.updateWhileInteracting_;
    }}, {key: 'renderDeclutter', value: function renderDeclutter(t) {
      t.declutterTree||(t.declutterTree=new Uh(9)), this.getRenderer().renderDeclutter(t);
    }}, {key: 'setRenderOrder', value: function setRenderOrder(t) {
      this.set(Mf, t);
    }}, {key: 'setStyle', value: function setStyle(t) {
      var e; if (void 0===t)e=df; else if (null===t)e=null; else if ('function'==typeof t)e=t; else if (t instanceof pf)e=t; else if (Array.isArray(t)) {
        var _i169=t.length; var _n157=new Array(_i169); for (var _e206=0; _e206<_i169; ++_e206) {
          var _i170=t[_e206]; _n157[_e206]=_i170 instanceof pf?_i170:yf(_i170);
        }e=_n157;
      } else e=yf(t); this.style_=e, this.styleFunction_=null===t?void 0:cf(this.style_), this.changed();
    }}]); return Af;
  }(ks); var Of='GENERATE_POLYGON_BUFFERS'; var Nf='GENERATE_POINT_BUFFERS'; var Df='GENERATE_LINE_STRING_BUFFERS'; var Gf={}; function kf(t, e, i) {
    i=i||2; var n; var r; var s; var o; var a; var l; var h; var c=e&&e.length; var u=c?e[0]*i:t.length; var d=jf(t, 0, u, i, !0); var g=[]; if (!d||d.next===d.prev) return g; if (c&&(d=function(t, e, i, n) {
      var r; var s; var o; var a=[]; for (r=0, s=e.length; r<s; r++)(o=jf(t, e[r]*n, r<s-1?e[r+1]*n:t.length, n, !1))===o.next&&(o.steiner=!0), a.push(Hf(o)); for (a.sort(Zf), r=0; r<a.length; r++)i=Yf(a[r], i); return i;
    }(t, e, d, i)), t.length>80*i) {
      n=s=t[0], r=o=t[1]; for (var f=i; f<u; f+=i)(a=t[f])<n&&(n=a), (l=t[f+1])<r&&(r=l), a>s&&(s=a), l>o&&(o=l); h=0!==(h=Math.max(s-n, o-r))?32767/h:0;
    } return zf(d, g, i, n, r, h, 0), g;
  } function jf(t, e, i, n, r) {
    var s; var o; if (r===hp(t, e, i, n)>0) for (s=e; s<i; s+=n)o=op(s, t[s], t[s+1], o); else for (s=i-n; s>=e; s-=n)o=op(s, t[s], t[s+1], o); return o&&tp(o, o.next)&&(ap(o), o=o.next), o;
  } function Bf(t, e) {
    if (!t) return t; e||(e=t); var i; var n=t; do {
      if (i=!1, n.steiner||!tp(n, n.next)&&0!==Qf(n.prev, n, n.next))n=n.next; else {
        if (ap(n), (n=e=n.prev)===n.next) break; i=!0;
      }
    } while (i||n!==e); return e;
  } function zf(t, e, i, n, r, s, o) {
    if (t) {
      !o&&s&&function(t, e, i, n) {
        var r=t; do {
          0===r.z&&(r.z=qf(r.x, r.y, e, i, n)), r.prevZ=r.prev, r.nextZ=r.next, r=r.next;
        } while (r!==t); r.prevZ.nextZ=null, r.prevZ=null, function(t) {
          var e; var i; var n; var r; var s; var o; var a; var l; var h=1; do {
            for (i=t, t=null, s=null, o=0; i;) {
              for (o++, n=i, a=0, e=0; e<h&&(a++, n=n.nextZ); e++);for (l=h; a>0||l>0&&n;)0!==a&&(0===l||!n||i.z<=n.z)?(r=i, i=i.nextZ, a--):(r=n, n=n.nextZ, l--), s?s.nextZ=r:t=r, r.prevZ=s, s=r; i=n;
            }s.nextZ=null, h*=2;
          } while (o>1);
        }(r);
      }(t, n, r, s); for (var a, l, h=t; t.prev!==t.next;) {
        if (a=t.prev, l=t.next, s?Xf(t, n, r, s):Uf(t))e.push(a.i/i|0), e.push(t.i/i|0), e.push(l.i/i|0), ap(t), t=l.next, h=l.next; else if ((t=l)===h) {
o?1===o?zf(t=Vf(Bf(t), e, i), e, i, n, r, s, 2):2===o&&Wf(t, e, i, n, r, s):zf(Bf(t), e, i, n, r, s, 1); break;
        }
      }
    }
  } function Uf(t) {
    var e=t.prev; var i=t; var n=t.next; if (Qf(e, i, n)>=0) return !1; for (var r=e.x, s=i.x, o=n.x, a=e.y, l=i.y, h=n.y, c=r<s?r<o?r:o:s<o?s:o, u=a<l?a<h?a:h:l<h?l:h, d=r>s?r>o?r:o:s>o?s:o, g=a>l?a>h?a:h:l>h?l:h, f=n.next; f!==e;) {
      if (f.x>=c&&f.x<=d&&f.y>=u&&f.y<=g&&$f(r, a, s, l, o, h, f.x, f.y)&&Qf(f.prev, f, f.next)>=0) return !1; f=f.next;
    } return !0;
  } function Xf(t, e, i, n) {
    var r=t.prev; var s=t; var o=t.next; if (Qf(r, s, o)>=0) return !1; for (var a=r.x, l=s.x, h=o.x, c=r.y, u=s.y, d=o.y, g=a<l?a<h?a:h:l<h?l:h, f=c<u?c<d?c:d:u<d?u:d, p=a>l?a>h?a:h:l>h?l:h, m=c>u?c>d?c:d:u>d?u:d, _=qf(g, f, e, i, n), y=qf(p, m, e, i, n), x=t.prevZ, v=t.nextZ; x&&x.z>=_&&v&&v.z<=y;) {
      if (x.x>=g&&x.x<=p&&x.y>=f&&x.y<=m&&x!==r&&x!==o&&$f(a, c, l, u, h, d, x.x, x.y)&&Qf(x.prev, x, x.next)>=0) return !1; if (x=x.prevZ, v.x>=g&&v.x<=p&&v.y>=f&&v.y<=m&&v!==r&&v!==o&&$f(a, c, l, u, h, d, v.x, v.y)&&Qf(v.prev, v, v.next)>=0) return !1; v=v.nextZ;
    } for (;x&&x.z>=_;) {
      if (x.x>=g&&x.x<=p&&x.y>=f&&x.y<=m&&x!==r&&x!==o&&$f(a, c, l, u, h, d, x.x, x.y)&&Qf(x.prev, x, x.next)>=0) return !1; x=x.prevZ;
    } for (;v&&v.z<=y;) {
      if (v.x>=g&&v.x<=p&&v.y>=f&&v.y<=m&&v!==r&&v!==o&&$f(a, c, l, u, h, d, v.x, v.y)&&Qf(v.prev, v, v.next)>=0) return !1; v=v.nextZ;
    } return !0;
  } function Vf(t, e, i) {
    var n=t; do {
      var r=n.prev; var s=n.next.next; !tp(r, s)&&ep(r, n, n.next, s)&&rp(r, s)&&rp(s, r)&&(e.push(r.i/i|0), e.push(n.i/i|0), e.push(s.i/i|0), ap(n), ap(n.next), n=t=s), n=n.next;
    } while (n!==t); return Bf(n);
  } function Wf(t, e, i, n, r, s) {
    var o=t; do {
      for (var a=o.next.next; a!==o.prev;) {
        if (o.i!==a.i&&Jf(o, a)) {
          var l=sp(o, a); return o=Bf(o, o.next), l=Bf(l, l.next), zf(o, e, i, n, r, s, 0), void zf(l, e, i, n, r, s, 0);
        }a=a.next;
      }o=o.next;
    } while (o!==t);
  } function Zf(t, e) {
    return t.x-e.x;
  } function Yf(t, e) {
    var i=function(t, e) {
      var i; var n=e; var r=t.x; var s=t.y; var o=-1/0; do {
        if (s<=n.y&&s>=n.next.y&&n.next.y!==n.y) {
          var a=n.x+(s-n.y)*(n.next.x-n.x)/(n.next.y-n.y); if (a<=r&&a>o&&(o=a, i=n.x<n.next.x?n:n.next, a===r)) return i;
        }n=n.next;
      } while (n!==e); if (!i) return null; var l; var h=i; var c=i.x; var u=i.y; var d=1/0; n=i; do {
        r>=n.x&&n.x>=c&&r!==n.x&&$f(s<u?r:o, s, c, u, s<u?o:r, s, n.x, n.y)&&(l=Math.abs(s-n.y)/(r-n.x), rp(n, t)&&(l<d||l===d&&(n.x>i.x||n.x===i.x&&Kf(i, n)))&&(i=n, d=l)), n=n.next;
      } while (n!==h); return i;
    }(t, e); if (!i) return e; var n=sp(i, t); return Bf(n, n.next), Bf(i, i.next);
  } function Kf(t, e) {
    return Qf(t.prev, t, e.prev)<0&&Qf(e.next, t, t.next)<0;
  } function qf(t, e, i, n, r) {
    return (t=1431655765&((t=858993459&((t=252645135&((t=16711935&((t=(t-i)*r|0)|t<<8))|t<<4))|t<<2))|t<<1))|(e=1431655765&((e=858993459&((e=252645135&((e=16711935&((e=(e-n)*r|0)|e<<8))|e<<4))|e<<2))|e<<1))<<1;
  } function Hf(t) {
    var e=t; var i=t; do {
      (e.x<i.x||e.x===i.x&&e.y<i.y)&&(i=e), e=e.next;
    } while (e!==t); return i;
  } function $f(t, e, i, n, r, s, o, a) {
    return (r-o)*(e-a)>=(t-o)*(s-a)&&(t-o)*(n-a)>=(i-o)*(e-a)&&(i-o)*(s-a)>=(r-o)*(n-a);
  } function Jf(t, e) {
    return t.next.i!==e.i&&t.prev.i!==e.i&&!function(t, e) {
      var i=t; do {
        if (i.i!==t.i&&i.next.i!==t.i&&i.i!==e.i&&i.next.i!==e.i&&ep(i, i.next, t, e)) return !0; i=i.next;
      } while (i!==t); return !1;
    }(t, e)&&(rp(t, e)&&rp(e, t)&&function(t, e) {
      var i=t; var n=!1; var r=(t.x+e.x)/2; var s=(t.y+e.y)/2; do {
        i.y>s!=i.next.y>s&&i.next.y!==i.y&&r<(i.next.x-i.x)*(s-i.y)/(i.next.y-i.y)+i.x&&(n=!n), i=i.next;
      } while (i!==t); return n;
    }(t, e)&&(Qf(t.prev, t, e.prev)||Qf(t, e.prev, e))||tp(t, e)&&Qf(t.prev, t, t.next)>0&&Qf(e.prev, e, e.next)>0);
  } function Qf(t, e, i) {
    return (e.y-t.y)*(i.x-e.x)-(e.x-t.x)*(i.y-e.y);
  } function tp(t, e) {
    return t.x===e.x&&t.y===e.y;
  } function ep(t, e, i, n) {
    var r=np(Qf(t, e, i)); var s=np(Qf(t, e, n)); var o=np(Qf(i, n, t)); var a=np(Qf(i, n, e)); return r!==s&&o!==a||!(0!==r||!ip(t, i, e))||!(0!==s||!ip(t, n, e))||!(0!==o||!ip(i, t, n))||!(0!==a||!ip(i, e, n));
  } function ip(t, e, i) {
    return e.x<=Math.max(t.x, i.x)&&e.x>=Math.min(t.x, i.x)&&e.y<=Math.max(t.y, i.y)&&e.y>=Math.min(t.y, i.y);
  } function np(t) {
    return t>0?1:t<0?-1:0;
  } function rp(t, e) {
    return Qf(t.prev, t, t.next)<0?Qf(t, e, t.next)>=0&&Qf(t, t.prev, e)>=0:Qf(t, e, t.prev)<0||Qf(t, t.next, e)<0;
  } function sp(t, e) {
    var i=new lp(t.i, t.x, t.y); var n=new lp(e.i, e.x, e.y); var r=t.next; var s=e.prev; return t.next=e, e.prev=t, i.next=r, r.prev=i, n.next=i, i.prev=n, s.next=n, n.prev=s, n;
  } function op(t, e, i, n) {
    var r=new lp(t, e, i); return n?(r.next=n.next, r.prev=n, n.next.prev=r, n.next=r):(r.prev=r, r.next=r), r;
  } function ap(t) {
    t.next.prev=t.prev, t.prev.next=t.next, t.prevZ&&(t.prevZ.nextZ=t.nextZ), t.nextZ&&(t.nextZ.prevZ=t.prevZ);
  } function lp(t, e, i) {
    this.i=t, this.x=e, this.y=i, this.prev=null, this.next=null, this.z=0, this.prevZ=null, this.nextZ=null, this.steiner=!1;
  } function hp(t, e, i, n) {
    for (var r=0, s=e, o=i-n; s<i; s+=n)r+=(t[o]-t[s])*(t[s+1]+t[o+1]), o=s; return r;
  }({get exports() {
    return Gf;
  }, set exports(t) {
    Gf=t;
  }}).exports=kf, Gf['default']=kf, kf.deviation=function(t, e, i, n) {
    var r=e&&e.length; var s=r?e[0]*i:t.length; var o=Math.abs(hp(t, 0, s, i)); if (r) {
      for (var a=0, l=e.length; a<l; a++) {
        var h=e[a]*i; var c=a<l-1?e[a+1]*i:t.length; o-=Math.abs(hp(t, h, c, i));
      }
    } var u=0; for (a=0; a<n.length; a+=3) {
      var d=n[a]*i; var g=n[a+1]*i; var f=n[a+2]*i; u+=Math.abs((t[d]-t[f])*(t[g+1]-t[d+1])-(t[d]-t[g])*(t[f+1]-t[d+1]));
    } return 0===o&&0===u?0:Math.abs((u-o)/o);
  }, kf.flatten=function(t) {
    for (var e=t[0][0].length, i={vertices: [], holes: [], dimensions: e}, n=0, r=0; r<t.length; r++) {
      for (var s=0; s<t[r].length; s++) for (var o=0; o<e; o++)i.vertices.push(t[r][s][o]); r>0&&(n+=t[r-1].length, i.holes.push(n));
    } return i;
  }; var cp=[]; var up={vertexPosition: 0, indexPosition: 0}; function dp(t, e, i, n, r) {
    t[e+0]=i, t[e+1]=n, t[e+2]=r;
  } function gp(t, e) {
    var i=256; var n=255; return (e=e||[])[0]=Math.floor(t/i/i/i)/n, e[1]=Math.floor(t/i/i)%i/n, e[2]=Math.floor(t/i)%i/n, e[3]=t%i/n, e;
  } function fp(t) {
    var e=0; var i=256; var n=255; return e+=Math.round(t[0]*i*i*i*n), e+=Math.round(t[1]*i*i*n), e+=Math.round(t[2]*i*n), e+=Math.round(t[3]*n), e;
  } function pp() {
    var t='var e="GENERATE_POLYGON_BUFFERS",t="GENERATE_POINT_BUFFERS",n="GENERATE_LINE_STRING_BUFFERS",r={1:"The view center is not defined",2:"The view resolution is not defined",3:"The view rotation is not defined",4:"`image` and `src` cannot be provided at the same time",5:"`imgSize` must be set when `image` is provided",7:"`format` must be set when `url` is set",8:"Unknown `serverType` configured",9:"`url` must be configured or set using `#setUrl()`",10:"The default `geometryFunction` can only handle `Point` geometries",11:"`options.featureTypes` must be an Array",12:"`options.geometryName` must also be provided when `options.bbox` is set",13:"Invalid corner",14:"Invalid color",15:"Tried to get a value for a key that does not exist in the cache",16:"Tried to set a value for a key that is used already",17:"`resolutions` must be sorted in descending order",18:"Either `origin` or `origins` must be configured, never both",19:"Number of `tileSizes` and `resolutions` must be equal",20:"Number of `origins` and `resolutions` must be equal",22:"Either `tileSize` or `tileSizes` must be configured, never both",24:"Invalid extent or geometry provided as `geometry`",25:"Cannot fit empty extent provided as `geometry`",26:"Features must have an id set",27:"Features must have an id set",28:\'`renderMode` must be `"hybrid"` or `"vector"`\',30:"The passed `feature` was already added to the source",31:"Tried to enqueue an `element` that was already added to the queue",32:"Transformation matrix cannot be inverted",33:"Invalid units",34:"Invalid geometry layout",36:"Unknown SRS type",37:"Unknown geometry type found",38:"`styleMapValue` has an unknown type",39:"Unknown geometry type",40:"Expected `feature` to have a geometry",41:"Expected an `ol/style/Style` or an array of `ol/style/Style.js`",42:"Question unknown, the answer is 42",43:"Expected `layers` to be an array or a `Collection`",47:"Expected `controls` to be an array or an `ol/Collection`",48:"Expected `interactions` to be an array or an `ol/Collection`",49:"Expected `overlays` to be an array or an `ol/Collection`",50:"`options.featureTypes` should be an Array",51:"Either `url` or `tileJSON` options must be provided",52:"Unknown `serverType` configured",53:"Unknown `tierSizeCalculation` configured",55:"The {-y} placeholder requires a tile grid with extent",56:"mapBrowserEvent must originate from a pointer event",57:"At least 2 conditions are required",59:"Invalid command found in the PBF",60:"Missing or invalid `size`",61:"Cannot determine IIIF Image API version from provided image information JSON",62:"A `WebGLArrayBuffer` must either be of type `ELEMENT_ARRAY_BUFFER` or `ARRAY_BUFFER`",64:"Layer opacity must be a number",66:"`forEachFeatureAtCoordinate` cannot be used on a WebGL layer if the hit detection logic has not been enabled. This is done by providing adequate shaders using the `hitVertexShader` and `hitFragmentShader` properties of `WebGLPointsLayerRenderer`",67:"A layer can only be added to the map once. Use either `layer.setMap()` or `map.addLayer()`, not both",68:"A VectorTile source can only be rendered if it has a projection compatible with the view projection",69:"`width` or `height` cannot be provided together with `scale`"};class o extends Error{constructor(e){var t=r[e];super(t),this.code=e,this.name="AssertionError",this.message=t}}var i=o;function a(e,t){var n=t[0],r=t[1];return t[0]=e[0]*n+e[2]*r+e[4],t[1]=e[1]*n+e[3]*r+e[5],t}function s(e,t){var n=(r=t)[0]*r[3]-r[1]*r[2];var r;!function(e,t){if(!e)throw new i(t)}(0!==n,32);var o=t[0],a=t[1],s=t[2],u=t[3],f=t[4],x=t[5];return e[0]=u/n,e[1]=-a/n,e[2]=-s/n,e[3]=o/n,e[4]=(s*x-u*f)/n,e[5]=-(o*x-a*f)/n,e}new Array(6);var u={};function f(e,t,n){n=n||2;var r,o,i,a,s,u,f,l=t&&t.length,c=l?t[0]*n:e.length,v=x(e,0,c,n,!0),d=[];if(!v||v.next===v.prev)return d;if(l&&(v=function(e,t,n,r){var o,i,a,s=[];for(o=0,i=t.length;o<i;o++)(a=x(e,t[o]*r,o<i-1?t[o+1]*r:e.length,r,!1))===a.next&&(a.steiner=!0),s.push(w(a));for(s.sort(p),o=0;o<s.length;o++)n=b(s[o],n);return n}(e,t,v,n)),e.length>80*n){r=i=e[0],o=a=e[1];for(var y=n;y<c;y+=n)(s=e[y])<r&&(r=s),(u=e[y+1])<o&&(o=u),s>i&&(i=s),u>a&&(a=u);f=0!==(f=Math.max(i-r,a-o))?32767/f:0}return h(v,d,n,r,o,f,0),d}function x(e,t,n,r,o){var i,a;if(o===B(e,t,n,r)>0)for(i=t;i<n;i+=r)a=k(i,e[i],e[i+1],a);else for(i=n-r;i>=t;i-=r)a=k(i,e[i],e[i+1],a);return a&&M(a,a.next)&&(z(a),a=a.next),a}function l(e,t){if(!e)return e;t||(t=e);var n,r=e;do{if(n=!1,r.steiner||!M(r,r.next)&&0!==Z(r.prev,r,r.next))r=r.next;else{if(z(r),(r=t=r.prev)===r.next)break;n=!0}}while(n||r!==t);return t}function h(e,t,n,r,o,i,a){if(e){!a&&i&&function(e,t,n,r){var o=e;do{0===o.z&&(o.z=m(o.x,o.y,t,n,r)),o.prevZ=o.prev,o.nextZ=o.next,o=o.next}while(o!==e);o.prevZ.nextZ=null,o.prevZ=null,function(e){var t,n,r,o,i,a,s,u,f=1;do{for(n=e,e=null,i=null,a=0;n;){for(a++,r=n,s=0,t=0;t<f&&(s++,r=r.nextZ);t++);for(u=f;s>0||u>0&&r;)0!==s&&(0===u||!r||n.z<=r.z)?(o=n,n=n.nextZ,s--):(o=r,r=r.nextZ,u--),i?i.nextZ=o:e=o,o.prevZ=i,i=o;n=r}i.nextZ=null,f*=2}while(a>1)}(o)}(e,r,o,i);for(var s,u,f=e;e.prev!==e.next;)if(s=e.prev,u=e.next,i?v(e,r,o,i):c(e))t.push(s.i/n|0),t.push(e.i/n|0),t.push(u.i/n|0),z(e),e=u.next,f=u.next;else if((e=u)===f){a?1===a?h(e=d(l(e),t,n),t,n,r,o,i,2):2===a&&y(e,t,n,r,o,i):h(l(e),t,n,r,o,i,1);break}}}function c(e){var t=e.prev,n=e,r=e.next;if(Z(t,n,r)>=0)return!1;for(var o=t.x,i=n.x,a=r.x,s=t.y,u=n.y,f=r.y,x=o<i?o<a?o:a:i<a?i:a,l=s<u?s<f?s:f:u<f?u:f,h=o>i?o>a?o:a:i>a?i:a,c=s>u?s>f?s:f:u>f?u:f,v=r.next;v!==t;){if(v.x>=x&&v.x<=h&&v.y>=l&&v.y<=c&&A(o,s,i,u,a,f,v.x,v.y)&&Z(v.prev,v,v.next)>=0)return!1;v=v.next}return!0}function v(e,t,n,r){var o=e.prev,i=e,a=e.next;if(Z(o,i,a)>=0)return!1;for(var s=o.x,u=i.x,f=a.x,x=o.y,l=i.y,h=a.y,c=s<u?s<f?s:f:u<f?u:f,v=x<l?x<h?x:h:l<h?l:h,d=s>u?s>f?s:f:u>f?u:f,y=x>l?x>h?x:h:l>h?l:h,p=m(c,v,t,n,r),b=m(d,y,t,n,r),g=e.prevZ,w=e.nextZ;g&&g.z>=p&&w&&w.z<=b;){if(g.x>=c&&g.x<=d&&g.y>=v&&g.y<=y&&g!==o&&g!==a&&A(s,x,u,l,f,h,g.x,g.y)&&Z(g.prev,g,g.next)>=0)return!1;if(g=g.prevZ,w.x>=c&&w.x<=d&&w.y>=v&&w.y<=y&&w!==o&&w!==a&&A(s,x,u,l,f,h,w.x,w.y)&&Z(w.prev,w,w.next)>=0)return!1;w=w.nextZ}for(;g&&g.z>=p;){if(g.x>=c&&g.x<=d&&g.y>=v&&g.y<=y&&g!==o&&g!==a&&A(s,x,u,l,f,h,g.x,g.y)&&Z(g.prev,g,g.next)>=0)return!1;g=g.prevZ}for(;w&&w.z<=b;){if(w.x>=c&&w.x<=d&&w.y>=v&&w.y<=y&&w!==o&&w!==a&&A(s,x,u,l,f,h,w.x,w.y)&&Z(w.prev,w,w.next)>=0)return!1;w=w.nextZ}return!0}function d(e,t,n){var r=e;do{var o=r.prev,i=r.next.next;!M(o,i)&&F(o,r,r.next,i)&&S(o,i)&&S(i,o)&&(t.push(o.i/n|0),t.push(r.i/n|0),t.push(i.i/n|0),z(r),z(r.next),r=e=i),r=r.next}while(r!==e);return l(r)}function y(e,t,n,r,o,i){var a=e;do{for(var s=a.next.next;s!==a.prev;){if(a.i!==s.i&&E(a,s)){var u=U(a,s);return a=l(a,a.next),u=l(u,u.next),h(a,t,n,r,o,i,0),void h(u,t,n,r,o,i,0)}s=s.next}a=a.next}while(a!==e)}function p(e,t){return e.x-t.x}function b(e,t){var n=function(e,t){var n,r=t,o=e.x,i=e.y,a=-1/0;do{if(i<=r.y&&i>=r.next.y&&r.next.y!==r.y){var s=r.x+(i-r.y)*(r.next.x-r.x)/(r.next.y-r.y);if(s<=o&&s>a&&(a=s,n=r.x<r.next.x?r:r.next,s===o))return n}r=r.next}while(r!==t);if(!n)return null;var u,f=n,x=n.x,l=n.y,h=1/0;r=n;do{o>=r.x&&r.x>=x&&o!==r.x&&A(i<l?o:a,i,x,l,i<l?a:o,i,r.x,r.y)&&(u=Math.abs(i-r.y)/(o-r.x),S(r,e)&&(u<h||u===h&&(r.x>n.x||r.x===n.x&&g(n,r)))&&(n=r,h=u)),r=r.next}while(r!==f);return n}(e,t);if(!n)return t;var r=U(n,e);return l(r,r.next),l(n,n.next)}function g(e,t){return Z(e.prev,e,t.prev)<0&&Z(t.next,e,e.next)<0}function m(e,t,n,r,o){return(e=1431655765&((e=858993459&((e=252645135&((e=16711935&((e=(e-n)*o|0)|e<<8))|e<<4))|e<<2))|e<<1))|(t=1431655765&((t=858993459&((t=252645135&((t=16711935&((t=(t-r)*o|0)|t<<8))|t<<4))|t<<2))|t<<1))<<1}function w(e){var t=e,n=e;do{(t.x<n.x||t.x===n.x&&t.y<n.y)&&(n=t),t=t.next}while(t!==e);return n}function A(e,t,n,r,o,i,a,s){return(o-a)*(t-s)>=(e-a)*(i-s)&&(e-a)*(r-s)>=(n-a)*(t-s)&&(n-a)*(i-s)>=(o-a)*(r-s)}function E(e,t){return e.next.i!==t.i&&e.prev.i!==t.i&&!function(e,t){var n=e;do{if(n.i!==e.i&&n.next.i!==e.i&&n.i!==t.i&&n.next.i!==t.i&&F(n,n.next,e,t))return!0;n=n.next}while(n!==e);return!1}(e,t)&&(S(e,t)&&S(t,e)&&function(e,t){var n=e,r=!1,o=(e.x+t.x)/2,i=(e.y+t.y)/2;do{n.y>i!=n.next.y>i&&n.next.y!==n.y&&o<(n.next.x-n.x)*(i-n.y)/(n.next.y-n.y)+n.x&&(r=!r),n=n.next}while(n!==e);return r}(e,t)&&(Z(e.prev,e,t.prev)||Z(e,t.prev,t))||M(e,t)&&Z(e.prev,e,e.next)>0&&Z(t.prev,t,t.next)>0)}function Z(e,t,n){return(t.y-e.y)*(n.x-t.x)-(t.x-e.x)*(n.y-t.y)}function M(e,t){return e.x===t.x&&e.y===t.y}function F(e,t,n,r){var o=I(Z(e,t,n)),i=I(Z(e,t,r)),a=I(Z(n,r,e)),s=I(Z(n,r,t));return o!==i&&a!==s||(!(0!==o||!T(e,n,t))||(!(0!==i||!T(e,r,t))||(!(0!==a||!T(n,e,r))||!(0!==s||!T(n,t,r)))))}function T(e,t,n){return t.x<=Math.max(e.x,n.x)&&t.x>=Math.min(e.x,n.x)&&t.y<=Math.max(e.y,n.y)&&t.y>=Math.min(e.y,n.y)}function I(e){return e>0?1:e<0?-1:0}function S(e,t){return Z(e.prev,e,e.next)<0?Z(e,t,e.next)>=0&&Z(e,e.prev,t)>=0:Z(e,t,e.prev)<0||Z(e,e.next,t)<0}function U(e,t){var n=new R(e.i,e.x,e.y),r=new R(t.i,t.x,t.y),o=e.next,i=t.prev;return e.next=t,t.prev=e,n.next=o,o.prev=n,r.next=n,n.prev=r,i.next=r,r.prev=i,r}function k(e,t,n,r){var o=new R(e,t,n);return r?(o.next=r.next,o.prev=r,r.next.prev=o,r.next=o):(o.prev=o,o.next=o),o}function z(e){e.next.prev=e.prev,e.prev.next=e.next,e.prevZ&&(e.prevZ.nextZ=e.nextZ),e.nextZ&&(e.nextZ.prevZ=e.prevZ)}function R(e,t,n){this.i=e,this.x=t,this.y=n,this.prev=null,this.next=null,this.z=0,this.prevZ=null,this.nextZ=null,this.steiner=!1}function B(e,t,n,r){for(var o=0,i=t,a=n-r;i<n;i+=r)o+=(e[a]-e[i])*(e[i+1]+e[a+1]),a=i;return o}({get exports(){return u},set exports(e){u=e}}).exports=f,u.default=f,f.deviation=function(e,t,n,r){var o=t&&t.length,i=o?t[0]*n:e.length,a=Math.abs(B(e,0,i,n));if(o)for(var s=0,u=t.length;s<u;s++){var f=t[s]*n,x=s<u-1?t[s+1]*n:e.length;a-=Math.abs(B(e,f,x,n))}var l=0;for(s=0;s<r.length;s+=3){var h=r[s]*n,c=r[s+1]*n,v=r[s+2]*n;l+=Math.abs((e[h]-e[v])*(e[c+1]-e[h+1])-(e[h]-e[c])*(e[v+1]-e[h+1]))}return 0===a&&0===l?0:Math.abs((l-a)/a)},f.flatten=function(e){for(var t=e[0][0].length,n={vertices:[],holes:[],dimensions:t},r=0,o=0;o<e.length;o++){for(var i=0;i<e[o].length;i++)for(var a=0;a<t;a++)n.vertices.push(e[o][i][a]);o>0&&(r+=e[o-1].length,n.holes.push(r))}return n};var N=[],P={vertexPosition:0,indexPosition:0};function C(e,t,n,r,o){e[t+0]=n,e[t+1]=r,e[t+2]=o}function _(e,t,n,r,o,i){var a=3+o,s=e[t+0],u=e[t+1],f=N;f.length=o;for(var n=0;n<f.length;n++)f[n]=e[t+2+n];var x=i?i.vertexPosition:0,l=i?i.indexPosition:0;var h=x/a;return C(n,x,s,u,0),f.length&&n.set(f,x+3),x+=a,C(n,x,s,u,1),f.length&&n.set(f,x+3),x+=a,C(n,x,s,u,2),f.length&&n.set(f,x+3),x+=a,C(n,x,s,u,3),f.length&&n.set(f,x+3),x+=a,r[l++]=h,r[l++]=h+1,r[l++]=h+3,r[l++]=h+1,r[l++]=h+2,r[l++]=h+3,P.vertexPosition=x,P.indexPosition=l,P}function q(e,t,n,r,o,i,s,u,f,x){var l=5+u.length,h=i.length/l,c=[e[t+0],e[t+1]],v=[e[n],e[n+1]],d=a(x,[...c]),y=a(x,[...v]);function p(e,t,n){var r=1e4;return Math.round(1500*t)+Math.round(1500*n)*r+e*r*r}function b(e,t,n){var r=Math.sqrt((t[0]-e[0])*(t[0]-e[0])+(t[1]-e[1])*(t[1]-e[1])),o=[(t[0]-e[0])/r,(t[1]-e[1])/r],i=[-o[1],o[0]],a=Math.sqrt((n[0]-e[0])*(n[0]-e[0])+(n[1]-e[1])*(n[1]-e[1])),s=[(n[0]-e[0])/a,(n[1]-e[1])/a],u=0===r||0===a?0:Math.acos((f=s[0]*o[0]+s[1]*o[1],x=-1,l=1,Math.min(Math.max(f,x),l)));var f,x,l;return s[0]*i[0]+s[1]*i[1]>0?u:2*Math.PI-u}var g=null!==o;var m=0,w=0;if(null!==r){m=b(d,y,a(x,[...[e[r],e[r+1]]]))}if(g){w=b(y,d,a(x,[...[e[o],e[o+1]]]))}i.push(c[0],c[1],v[0],v[1],p(0,m,w)),i.push(...u),i.push(c[0],c[1],v[0],v[1],p(1,m,w)),i.push(...u),i.push(c[0],c[1],v[0],v[1],p(2,m,w)),i.push(...u),i.push(c[0],c[1],v[0],v[1],p(3,m,w)),i.push(...u),s.push(h,h+1,h+2,h+1,h+3,h+2)}function L(e,t,n,r,o){var i=2+o;var a=t;var s=e.slice(a,a+o);a+=o;var f=e[a++];var x=0;var l=new Array(f-1);for(var t=0;t<f;t++)x+=e[a++],t<f-1&&(l[t]=x);var h=e.slice(a,a+2*x),c=u(h,l,2);for(var e=0;e<c.length;e++)r.push(c[e]+n.length/i);for(var e=0;e<h.length;e+=2)n.push(h[e],h[e+1],...s);return a+2*x}var G=self;G.onmessage=r=>{var o=r.data;switch(o.type){case t:{var e=3,t=2,n=o.customAttributesCount,r=t+n,i=new Float32Array(o.renderInstructions),a=i.length/r,s=4*a*(n+e),u=new Uint32Array(6*a),f=new Float32Array(s);var x;for(var e=0;e<i.length;e+=r)x=_(i,e,f,u,n,x);var l=Object.assign({vertexBuffer:f.buffer,indexBuffer:u.buffer,renderInstructions:i.buffer},o);G.postMessage(l,[f.buffer,u.buffer,i.buffer]);break}case n:{var e=[],t=[],n=o.customAttributesCount,r=2,i=new Float32Array(o.renderInstructions);var a=0;var u=o.renderInstructionsTransform,f=[1,0,0,1,0,0];var x,l;for(s(f,u);a<i.length;){l=Array.from(i.slice(a,a+n)),a+=n,x=i[a++];for(var n=0;n<x-1;n++)q(i,a+n*r,a+(n+1)*r,n>0?a+(n-1)*r:null,n<x-2?a+(n+2)*r:null,e,t,l,0,f);a+=x*r}var h=Uint32Array.from(t),c=Float32Array.from(e),v=Object.assign({vertexBuffer:c.buffer,indexBuffer:h.buffer,renderInstructions:i.buffer},o);G.postMessage(v,[c.buffer,h.buffer,i.buffer]);break}case e:{var e=[],t=[],n=o.customAttributesCount,r=new Float32Array(o.renderInstructions);var i=0;for(;i<r.length;)i=L(r,i,e,t,n);var a=Uint32Array.from(t),s=Float32Array.from(e),u=Object.assign({vertexBuffer:s.buffer,indexBuffer:a.buffer,renderInstructions:r.buffer},o);G.postMessage(u,[s.buffer,a.buffer,r.buffer]);break}}};'; return new Worker('undefined'==typeof Blob?'data:application/javascript;base64,'+Buffer.from(t, 'binary').toString('base64'):URL.createObjectURL(new Blob([t], {type: 'application/javascript'})));
  } var mp=/* #__PURE__*/function(_rg2) {
    _inherits(mp, _rg2); var _super121=_createSuper(mp); function mp(t, e) {
      var _this139; _classCallCheck(this, mp); var i=e.uniforms||{}; var n=[1, 0, 0, 1, 0, 0]; i[Nd]=n, _this139=_super121.call(this, t, {uniforms: i, postProcesses: e.postProcesses}), _this139.ready=!1, _this139.sourceRevision_=-1, _this139.verticesBuffer_=new Id(Yu, Hu), _this139.hitVerticesBuffer_=new Id(Yu, Hu), _this139.indicesBuffer_=new Id(Ku, Hu), _this139.vertexShader_=e.vertexShader, _this139.fragmentShader_=e.fragmentShader, _this139.program_, _this139.hitDetectionEnabled_=!(!e.hitFragmentShader||!e.hitVertexShader), _this139.hitVertexShader_=e.hitVertexShader, _this139.hitFragmentShader_=e.hitFragmentShader, _this139.hitProgram_; var r=e.attributes?e.attributes.map(function(t) {
        return {name: 'a_'+t.name, size: 1, type: Xd.FLOAT};
      }):[]; _this139.attributes=[{name: 'a_position', size: 2, type: Xd.FLOAT}, {name: 'a_index', size: 1, type: Xd.FLOAT}].concat(r), _this139.hitDetectionAttributes=[{name: 'a_position', size: 2, type: Xd.FLOAT}, {name: 'a_index', size: 1, type: Xd.FLOAT}, {name: 'a_hitColor', size: 4, type: Xd.FLOAT}, {name: 'a_featureUid', size: 1, type: Xd.FLOAT}].concat(r), _this139.customAttributes=e.attributes?e.attributes:[], _this139.previousExtent_=[1/0, 1/0, -1/0, -1/0], _this139.currentTransform_=n, _this139.renderTransform_=[1, 0, 0, 1, 0, 0], _this139.invertRenderTransform_=[1, 0, 0, 1, 0, 0], _this139.renderInstructions_=new Float32Array(0), _this139.hitRenderInstructions_=new Float32Array(0), _this139.hitRenderTarget_, _this139.generateBuffersRun_=0, _this139.worker_=pp(), _this139.worker_.addEventListener('message', function(t) {
        var e=t.data; if (e.type===Nf) {
          var _i171=e.projectionTransform; e.hitDetection?(_this139.hitVerticesBuffer_.fromArrayBuffer(e.vertexBuffer), _this139.helper.flushBufferData(_this139.hitVerticesBuffer_)):(_this139.verticesBuffer_.fromArrayBuffer(e.vertexBuffer), _this139.helper.flushBufferData(_this139.verticesBuffer_)), _this139.indicesBuffer_.fromArrayBuffer(e.indexBuffer), _this139.helper.flushBufferData(_this139.indicesBuffer_), _this139.renderTransform_=_i171, Yt(_this139.invertRenderTransform_, _this139.renderTransform_), e.hitDetection?_this139.hitRenderInstructions_=new Float32Array(t.data.renderInstructions):(_this139.renderInstructions_=new Float32Array(t.data.renderInstructions), e.generateBuffersRun===_this139.generateBuffersRun_&&(_this139.ready=!0)), _this139.getLayer().changed();
        }
      }), _this139.featureCache_={}, _this139.featureCount_=0; var s=_this139.getLayer().getSource(); _this139.sourceListenKeys_=[N(s, nc, _this139.handleSourceFeatureAdded_, _assertThisInitialized(_this139)), N(s, rc, _this139.handleSourceFeatureChanged_, _assertThisInitialized(_this139)), N(s, oc, _this139.handleSourceFeatureDelete_, _assertThisInitialized(_this139)), N(s, sc, _this139.handleSourceFeatureClear_, _assertThisInitialized(_this139))], s.forEachFeature(function(t) {
        _this139.featureCache_[X(t)]={feature: t, properties: t.getProperties(), geometry: t.getGeometry()}, _this139.featureCount_++;
      }); return _this139;
    }_createClass(mp, [{key: 'afterHelperCreated', value: function afterHelperCreated() {
      this.program_=this.helper.getProgram(this.fragmentShader_, this.vertexShader_), this.hitDetectionEnabled_&&(this.hitProgram_=this.helper.getProgram(this.hitFragmentShader_, this.hitVertexShader_), this.hitRenderTarget_=new Jd(this.helper));
    }}, {key: 'handleSourceFeatureAdded_', value: function handleSourceFeatureAdded_(t) {
      var e=t.feature; this.featureCache_[X(e)]={feature: e, properties: e.getProperties(), geometry: e.getGeometry()}, this.featureCount_++;
    }}, {key: 'handleSourceFeatureChanged_', value: function handleSourceFeatureChanged_(t) {
      var e=t.feature; this.featureCache_[X(e)]={feature: e, properties: e.getProperties(), geometry: e.getGeometry()};
    }}, {key: 'handleSourceFeatureDelete_', value: function handleSourceFeatureDelete_(t) {
      var e=t.feature; delete this.featureCache_[X(e)], this.featureCount_--;
    }}, {key: 'handleSourceFeatureClear_', value: function handleSourceFeatureClear_() {
      this.featureCache_={}, this.featureCount_=0;
    }}, {key: 'renderFrame', value: function renderFrame(t) {
      var e=this.helper.getGL(); this.preRender(e, t); var i=t.viewState.projection; var n=this.getLayer().getSource().getWrapX()&&i.canWrapX(); var r=i.getExtent(); var s=t.extent; var o=n?De(r):null; var a=n?Math.ceil((s[2]-r[2])/o)+1:1; var l=n?Math.floor((s[0]-r[0])/o):0; var h=l; var c=this.indicesBuffer_.getSize(); do {
        this.helper.makeProjectionTransform(t, this.currentTransform_), Wt(this.currentTransform_, h*o, 0), kt(this.currentTransform_, this.invertRenderTransform_), this.helper.applyUniforms(t), this.helper.drawElements(0, c);
      } while (++h<a); this.helper.finalizeDraw(t, this.dispatchPreComposeEvent, this.dispatchPostComposeEvent); var u=this.helper.getCanvas(); return this.hitDetectionEnabled_&&(this.renderHitDetection(t, l, a, o), this.hitRenderTarget_.clearCachedData()), this.postRender(e, t), u;
    }}, {key: 'prepareFrameInternal', value: function prepareFrameInternal(t) {
      var e=this.getLayer(); var i=e.getSource(); var n=t.viewState; var r=!t.viewHints[Wo]&&!t.viewHints[Zo]; var s=!me(this.previousExtent_, t.extent); var o=this.sourceRevision_<i.getRevision(); if (o&&(this.sourceRevision_=i.getRevision()), r&&(s||o)) {
        var _r133=n.projection; var _s98=n.resolution; var _o91=e instanceof Af?e.getRenderBuffer():0; var _a52=re(t.extent, _o91*_s98); i.loadFeatures(_a52, _s98, _r133), this.rebuildBuffers_(t), this.previousExtent_=t.extent.slice();
      } return this.helper.useProgram(this.program_, t), this.helper.prepareDraw(t), this.helper.bindBuffer(this.verticesBuffer_), this.helper.bindBuffer(this.indicesBuffer_), this.helper.enableAttributes(this.attributes), !0;
    }}, {key: 'rebuildBuffers_', value: function rebuildBuffers_(t) {
      var e=[1, 0, 0, 1, 0, 0]; this.helper.makeProjectionTransform(t, e); var i=(2+this.customAttributes.length)*this.featureCount_; if (this.renderInstructions_&&this.renderInstructions_.length===i||(this.renderInstructions_=new Float32Array(i)), this.hitDetectionEnabled_) {
        var _t211=(7+this.customAttributes.length)*this.featureCount_; this.hitRenderInstructions_&&this.hitRenderInstructions_.length===_t211||(this.hitRenderInstructions_=new Float32Array(_t211));
      } var n; var r; var s=[]; var o=[]; var a; var l=0; var h=0; for (var _t212 in this.featureCache_) {
        if (n=this.featureCache_[_t212], r=n.geometry, !r||'Point'!==r.getType()) continue; var _i172=void 0; s[0]=r.getFlatCoordinates()[0], s[1]=r.getFlatCoordinates()[1], zt(e, s), a=gp(h+6, o), this.renderInstructions_[l++]=s[0], this.renderInstructions_[l++]=s[1], this.hitDetectionEnabled_&&(this.hitRenderInstructions_[h++]=s[0], this.hitRenderInstructions_[h++]=s[1], this.hitRenderInstructions_[h++]=a[0], this.hitRenderInstructions_[h++]=a[1], this.hitRenderInstructions_[h++]=a[2], this.hitRenderInstructions_[h++]=a[3], this.hitRenderInstructions_[h++]=Number(_t212)); for (var _t213=0; _t213<this.customAttributes.length; _t213++)_i172=this.customAttributes[_t213].callback(n.feature, n.properties), this.renderInstructions_[l++]=_i172, this.hitDetectionEnabled_&&(this.hitRenderInstructions_[h++]=_i172);
      } var c={id: 0, type: Nf, renderInstructions: this.renderInstructions_.buffer, customAttributesCount: this.customAttributes.length}; if (c.projectionTransform=e, c.generateBuffersRun=++this.generateBuffersRun_, this.ready=!1, this.worker_.postMessage(c, [this.renderInstructions_.buffer]), this.renderInstructions_=null, this.hitDetectionEnabled_) {
        var _t214={id: 0, type: Nf, renderInstructions: this.hitRenderInstructions_.buffer, customAttributesCount: 5+this.customAttributes.length}; _t214.projectionTransform=e, _t214.hitDetection=!0, this.worker_.postMessage(_t214, [this.hitRenderInstructions_.buffer]), this.hitRenderInstructions_=null;
      }
    }}, {key: 'forEachFeatureAtCoordinate', value: function forEachFeatureAtCoordinate(t, e, i, n, r) {
      if (Ft(this.hitDetectionEnabled_, 66), !this.hitRenderInstructions_) return; var s=zt(e.coordinateToPixelTransform, t.slice()); var o=this.hitRenderTarget_.readPixel(s[0]/2, s[1]/2); var a=fp([o[0]/255, o[1]/255, o[2]/255, o[3]/255]); var l=this.hitRenderInstructions_[a]; var h=Math.floor(l).toString(); var c=this.getLayer().getSource().getFeatureByUid(h); return c?n(c, this.getLayer(), null):void 0;
    }}, {key: 'renderHitDetection', value: function renderHitDetection(t, e, i, n) {
      if (!this.hitVerticesBuffer_.getSize()) return; var r=e; this.hitRenderTarget_.setSize([Math.floor(t.size[0]/2), Math.floor(t.size[1]/2)]), this.helper.useProgram(this.hitProgram_, t), this.helper.prepareDrawToRenderTarget(t, this.hitRenderTarget_, !0), this.helper.bindBuffer(this.hitVerticesBuffer_), this.helper.bindBuffer(this.indicesBuffer_), this.helper.enableAttributes(this.hitDetectionAttributes); do {
        this.helper.makeProjectionTransform(t, this.currentTransform_), Wt(this.currentTransform_, r*n, 0), kt(this.currentTransform_, this.invertRenderTransform_), this.helper.applyUniforms(t); var _e207=this.indicesBuffer_.getSize(); this.helper.drawElements(0, _e207);
      } while (++r<i);
    }}, {key: 'disposeInternal', value: function disposeInternal() {
      this.worker_.terminate(), this.layer_=null, this.sourceListenKeys_.forEach(function(t) {
        G(t);
      }), this.sourceListenKeys_=null, _get(_getPrototypeOf(mp.prototype), 'disposeInternal', this).call(this);
    }}]); return mp;
  }(rg); var _p=0; var yp=/* #__PURE__*/function() {
    function yp(t, e, i, n, r) {
      _classCallCheck(this, yp); this.helper_=t, this.worker_=e, this.program_=this.helper_.getProgram(n, i), this.attributes=[], this.customAttributes=r;
    }_createClass(yp, [{key: 'rebuild', value: function rebuild(t, e, i, n) {
      t.renderInstructionsTransform=this.helper_.makeProjectionTransform(e, [1, 0, 0, 1, 0, 0]), this.generateRenderInstructions(t), this.generateBuffers_(t, i, n);
    }}, {key: 'render', value: function render(t, e, i, n) {
      this.helper_.makeProjectionTransform(i, e), Wt(e, n, 0), kt(e, t.invertVerticesBufferTransform), this.helper_.useProgram(this.program_, i), this.helper_.bindBuffer(t.verticesBuffer), this.helper_.bindBuffer(t.indicesBuffer), this.helper_.enableAttributes(this.attributes); var r=t.indicesBuffer.getSize(); this.helper_.drawElements(0, r);
    }}, {key: 'generateRenderInstructions', value: function generateRenderInstructions(t) {
      z();
    }}, {key: 'generateBuffers_', value: function generateBuffers_(t, e, i) {
      var _this140=this; var n=_p++; var r; switch (e) {
        case 'Polygon': r=Of; break; case 'Point': r=Nf; break; case 'LineString': r=Df;
      } var s={id: n, type: r, renderInstructions: t.renderInstructions.buffer, renderInstructionsTransform: t.renderInstructionsTransform, customAttributesCount: this.customAttributes.length}; this.worker_.postMessage(s, [t.renderInstructions.buffer]), t.renderInstructions=null; var o=function o(e) {
        var r=e.data; r.id===n&&(_this140.worker_.removeEventListener('message', o), t.verticesBufferTransform=r.renderInstructionsTransform, Yt(t.invertVerticesBufferTransform, t.verticesBufferTransform), t.verticesBuffer.fromArrayBuffer(r.vertexBuffer), _this140.helper_.flushBufferData(t.verticesBuffer), t.indicesBuffer.fromArrayBuffer(r.indexBuffer), _this140.helper_.flushBufferData(t.indicesBuffer), t.renderInstructions=new Float32Array(r.renderInstructions), i());
      }; this.worker_.addEventListener('message', o);
    }}]); return yp;
  }(); var xp={SEGMENT_START: 'a_segmentStart', SEGMENT_END: 'a_segmentEnd', PARAMETERS: 'a_parameters'}; var vp=/* #__PURE__*/function(_yp) {
    _inherits(vp, _yp); var _super122=_createSuper(vp); function vp(t, e, i, n, r) {
      var _this141; _classCallCheck(this, vp); _this141=_super122.call(this, t, e, i, n, r), _this141.attributes=[{name: xp.SEGMENT_START, size: 2, type: Xd.FLOAT}, {name: xp.SEGMENT_END, size: 2, type: Xd.FLOAT}, {name: xp.PARAMETERS, size: 1, type: Xd.FLOAT}].concat(r.map(function(t) {
        return {name: 'a_'+t.name, size: 1, type: Xd.FLOAT};
      })); return _this141;
    }_createClass(vp, [{key: 'generateRenderInstructions', value: function generateRenderInstructions(t) {
      var e=2*t.verticesCount+(1+this.customAttributes.length)*t.geometriesCount; t.renderInstructions&&t.renderInstructions.length===e||(t.renderInstructions=new Float32Array(e)); var i=[]; var n=0; for (var _e208 in t.entries) {
        var _r134=t.entries[_e208]; for (var _e209=0, _s99=_r134.flatCoordss.length; _e209<_s99; _e209++) {
          i.length=_r134.flatCoordss[_e209].length, Ln(_r134.flatCoordss[_e209], 0, i.length, 2, t.renderInstructionsTransform, i); for (var _e210=0, _i173=this.customAttributes.length; _e210<_i173; _e210++) {
            var _i174=this.customAttributes[_e210].callback(_r134.feature); t.renderInstructions[n++]=_i174;
          }t.renderInstructions[n++]=i.length/2; for (var _e211=0, _r135=i.length; _e211<_r135; _e211+=2)t.renderInstructions[n++]=i[_e211], t.renderInstructions[n++]=i[_e211+1];
        }
      }
    }}]); return vp;
  }(yp); var Sp=/* #__PURE__*/function() {
    function Sp() {
      _classCallCheck(this, Sp); this.polygonBatch={entries: {}, geometriesCount: 0, verticesCount: 0, ringsCount: 0, renderInstructions: new Float32Array(0), verticesBuffer: new Id(Yu, Hu), indicesBuffer: new Id(Ku, Hu), renderInstructionsTransform: [1, 0, 0, 1, 0, 0], verticesBufferTransform: [1, 0, 0, 1, 0, 0], invertVerticesBufferTransform: [1, 0, 0, 1, 0, 0]}, this.pointBatch={entries: {}, geometriesCount: 0, renderInstructions: new Float32Array(0), verticesBuffer: new Id(Yu, Hu), indicesBuffer: new Id(Ku, Hu), renderInstructionsTransform: [1, 0, 0, 1, 0, 0], verticesBufferTransform: [1, 0, 0, 1, 0, 0], invertVerticesBufferTransform: [1, 0, 0, 1, 0, 0]}, this.lineStringBatch={entries: {}, geometriesCount: 0, verticesCount: 0, renderInstructions: new Float32Array(0), verticesBuffer: new Id(Yu, Hu), indicesBuffer: new Id(Ku, Hu), renderInstructionsTransform: [1, 0, 0, 1, 0, 0], verticesBufferTransform: [1, 0, 0, 1, 0, 0], invertVerticesBufferTransform: [1, 0, 0, 1, 0, 0]};
    }_createClass(Sp, [{key: 'addFeatures', value: function addFeatures(t) {
      for (var _e212=0; _e212<t.length; _e212++) this.addFeature(t[_e212]);
    }}, {key: 'addFeature', value: function addFeature(t) {
      var e=t.getGeometry(); e&&this.addGeometry_(e, t);
    }}, {key: 'addFeatureEntryInPointBatch_', value: function addFeatureEntryInPointBatch_(t) {
      var e=X(t); return e in this.pointBatch.entries||(this.pointBatch.entries[e]={feature: t, flatCoordss: []}), this.pointBatch.entries[e];
    }}, {key: 'addFeatureEntryInLineStringBatch_', value: function addFeatureEntryInLineStringBatch_(t) {
      var e=X(t); return e in this.lineStringBatch.entries||(this.lineStringBatch.entries[e]={feature: t, flatCoordss: [], verticesCount: 0}), this.lineStringBatch.entries[e];
    }}, {key: 'addFeatureEntryInPolygonBatch_', value: function addFeatureEntryInPolygonBatch_(t) {
      var e=X(t); return e in this.polygonBatch.entries||(this.polygonBatch.entries[e]={feature: t, flatCoordss: [], verticesCount: 0, ringsCount: 0, ringsVerticesCounts: []}), this.polygonBatch.entries[e];
    }}, {key: 'clearFeatureEntryInPointBatch_', value: function clearFeatureEntryInPointBatch_(t) {
      var e=this.pointBatch.entries[X(t)]; e&&(this.pointBatch.geometriesCount-=e.flatCoordss.length, delete this.pointBatch.entries[X(t)]);
    }}, {key: 'clearFeatureEntryInLineStringBatch_', value: function clearFeatureEntryInLineStringBatch_(t) {
      var e=this.lineStringBatch.entries[X(t)]; e&&(this.lineStringBatch.verticesCount-=e.verticesCount, this.lineStringBatch.geometriesCount-=e.flatCoordss.length, delete this.lineStringBatch.entries[X(t)]);
    }}, {key: 'clearFeatureEntryInPolygonBatch_', value: function clearFeatureEntryInPolygonBatch_(t) {
      var e=this.polygonBatch.entries[X(t)]; e&&(this.polygonBatch.verticesCount-=e.verticesCount, this.polygonBatch.ringsCount-=e.ringsCount, this.polygonBatch.geometriesCount-=e.flatCoordss.length, delete this.polygonBatch.entries[X(t)]);
    }}, {key: 'addGeometry_', value: function addGeometry_(t, e) {
      var _this142=this; var i; var n; var r; switch (t.getType()) {
        case 'GeometryCollection': t.getGeometries().map(function(t) {
          return _this142.addGeometry_(t, e);
        }); break; case 'MultiPolygon': t.getPolygons().map(function(t) {
          return _this142.addGeometry_(t, e);
        }); break; case 'MultiLineString': t.getLineStrings().map(function(t) {
          return _this142.addGeometry_(t, e);
        }); break; case 'MultiPoint': t.getPoints().map(function(t) {
          return _this142.addGeometry_(t, e);
        }); break; case 'Polygon': var _s100=t; r=this.addFeatureEntryInPolygonBatch_(e), i=_s100.getFlatCoordinates(), n=i.length/2; var _o92=_s100.getLinearRingCount(); var _a53=_s100.getEnds().map(function(t, e, i) {
          return e>0?(t-i[e-1])/2:t/2;
        }); this.polygonBatch.verticesCount+=n, this.polygonBatch.ringsCount+=_o92, this.polygonBatch.geometriesCount++, r.flatCoordss.push(i), r.ringsVerticesCounts.push(_a53), r.verticesCount+=n, r.ringsCount+=_o92, _s100.getLinearRings().map(function(t) {
            return _this142.addGeometry_(t, e);
          }); break; case 'Point': var _l35=t; r=this.addFeatureEntryInPointBatch_(e), i=_l35.getFlatCoordinates(), this.pointBatch.geometriesCount++, r.flatCoordss.push(i); break; case 'LineString': case 'LinearRing': var _h35=t; r=this.addFeatureEntryInLineStringBatch_(e), i=_h35.getFlatCoordinates(), n=i.length/2, this.lineStringBatch.verticesCount+=n, this.lineStringBatch.geometriesCount++, r.flatCoordss.push(i), r.verticesCount+=n;
      }
    }}, {key: 'changeFeature', value: function changeFeature(t) {
      this.clearFeatureEntryInPointBatch_(t), this.clearFeatureEntryInPolygonBatch_(t), this.clearFeatureEntryInLineStringBatch_(t); var e=t.getGeometry(); e&&this.addGeometry_(e, t);
    }}, {key: 'removeFeature', value: function removeFeature(t) {
      this.clearFeatureEntryInPointBatch_(t), this.clearFeatureEntryInPolygonBatch_(t), this.clearFeatureEntryInLineStringBatch_(t);
    }}, {key: 'clear', value: function clear() {
      this.polygonBatch.entries={}, this.polygonBatch.geometriesCount=0, this.polygonBatch.verticesCount=0, this.polygonBatch.ringsCount=0, this.lineStringBatch.entries={}, this.lineStringBatch.geometriesCount=0, this.lineStringBatch.verticesCount=0, this.pointBatch.entries={}, this.pointBatch.geometriesCount=0;
    }}]); return Sp;
  }(); var wp={POSITION: 'a_position', INDEX: 'a_index'}; var Tp=/* #__PURE__*/function(_yp2) {
    _inherits(Tp, _yp2); var _super123=_createSuper(Tp); function Tp(t, e, i, n, r) {
      var _this143; _classCallCheck(this, Tp); _this143=_super123.call(this, t, e, i, n, r), _this143.attributes=[{name: wp.POSITION, size: 2, type: Xd.FLOAT}, {name: wp.INDEX, size: 1, type: Xd.FLOAT}].concat(r.map(function(t) {
        return {name: 'a_'+t.name, size: 1, type: Xd.FLOAT};
      })); return _this143;
    }_createClass(Tp, [{key: 'generateRenderInstructions', value: function generateRenderInstructions(t) {
      var e=(2+this.customAttributes.length)*t.geometriesCount; t.renderInstructions&&t.renderInstructions.length===e||(t.renderInstructions=new Float32Array(e)); var i=[]; var n=0; for (var _e213 in t.entries) {
        var _r136=t.entries[_e213]; for (var _e214=0, _s101=_r136.flatCoordss.length; _e214<_s101; _e214++) {
          i[0]=_r136.flatCoordss[_e214][0], i[1]=_r136.flatCoordss[_e214][1], zt(t.renderInstructionsTransform, i), t.renderInstructions[n++]=i[0], t.renderInstructions[n++]=i[1]; for (var _e215=0, _i175=this.customAttributes.length; _e215<_i175; _e215++) {
            var _i176=this.customAttributes[_e215].callback(_r136.feature); t.renderInstructions[n++]=_i176;
          }
        }
      }
    }}]); return Tp;
  }(yp); var Ep={POSITION: 'a_position'}; var Cp=/* #__PURE__*/function(_yp3) {
    _inherits(Cp, _yp3); var _super124=_createSuper(Cp); function Cp(t, e, i, n, r) {
      var _this144; _classCallCheck(this, Cp); _this144=_super124.call(this, t, e, i, n, r), _this144.attributes=[{name: Ep.POSITION, size: 2, type: Xd.FLOAT}].concat(r.map(function(t) {
        return {name: 'a_'+t.name, size: 1, type: Xd.FLOAT};
      })); return _this144;
    }_createClass(Cp, [{key: 'generateRenderInstructions', value: function generateRenderInstructions(t) {
      var e=2*t.verticesCount+(1+this.customAttributes.length)*t.geometriesCount+t.ringsCount; t.renderInstructions&&t.renderInstructions.length===e||(t.renderInstructions=new Float32Array(e)); var i=[]; var n=0; for (var _e216 in t.entries) {
        var _r137=t.entries[_e216]; for (var _e217=0, _s102=_r137.flatCoordss.length; _e217<_s102; _e217++) {
          i.length=_r137.flatCoordss[_e217].length, Ln(_r137.flatCoordss[_e217], 0, i.length, 2, t.renderInstructionsTransform, i); for (var _e218=0, _i177=this.customAttributes.length; _e218<_i177; _e218++) {
            var _i178=this.customAttributes[_e218].callback(_r137.feature); t.renderInstructions[n++]=_i178;
          }t.renderInstructions[n++]=_r137.ringsVerticesCounts[_e217].length; for (var _i179=0, _s103=_r137.ringsVerticesCounts[_e217].length; _i179<_s103; _i179++)t.renderInstructions[n++]=_r137.ringsVerticesCounts[_e217][_i179]; for (var _e219=0, _r138=i.length; _e219<_r138; _e219+=2)t.renderInstructions[n++]=i[_e219], t.renderInstructions[n++]=i[_e219+1];
        }
      }
    }}]); return Cp;
  }(yp); function Rp(t) {
    var e=gs(t); return 256*e[0]*256+256*e[1]+e[2];
  } var bp='vec3(\n  fract(floor(a_color / 256.0 / 256.0) / 256.0),\n  fract(floor(a_color / 256.0) / 256.0),\n  fract(a_color / 256.0)\n);'; var Pp='\n  precision mediump float;\n  uniform mat4 u_projectionMatrix;\n  attribute vec2 a_position;\n  attribute float a_color;\n  attribute float a_opacity;\n  varying vec3 v_color;\n  varying float v_opacity;\n\n  void main(void) {\n    gl_Position = u_projectionMatrix * vec4(a_position, 0.0, 1.0);\n    v_color = '.concat(bp, '\n    v_opacity = a_opacity;\n  }'); var Ip='\n  precision mediump float;\n  varying vec3 v_color;\n  varying float v_opacity;\n\n  void main(void) {\n    gl_FragColor = vec4(v_color, 1.0) * v_opacity;\n  }'; var Lp='\n  precision mediump float;\n  uniform mat4 u_projectionMatrix;\n  uniform vec2 u_sizePx;\n  attribute vec2 a_segmentStart;\n  attribute vec2 a_segmentEnd;\n  attribute float a_parameters;\n  attribute float a_color;\n  attribute float a_opacity;\n  attribute float a_width;\n  varying vec2 v_segmentStart;\n  varying vec2 v_segmentEnd;\n  varying float v_angleStart;\n  varying float v_angleEnd;\n  varying vec3 v_color;\n  varying float v_opacity;\n  varying float v_width;\n\n  vec2 worldToPx(vec2 worldPos) {\n    vec4 screenPos = u_projectionMatrix * vec4(worldPos, 0.0, 1.0);\n    return (0.5 * screenPos.xy + 0.5) * u_sizePx;\n  }\n\n  vec4 pxToScreen(vec2 pxPos) {\n    vec2 screenPos = pxPos * 4.0 / u_sizePx;\n    return vec4(screenPos.xy, 0.0, 0.0);\n  }\n\n  vec2 getOffsetDirection(vec2 normalPx, vec2 tangentPx, float joinAngle) {\n    if (cos(joinAngle) > 0.93) return normalPx - tangentPx;\n    float halfAngle = joinAngle / 2.0;\n    vec2 angleBisectorNormal = vec2(\n      sin(halfAngle) * normalPx.x + cos(halfAngle) * normalPx.y,\n      -cos(halfAngle) * normalPx.x + sin(halfAngle) * normalPx.y\n    );\n    float length = 1.0 / sin(halfAngle);\n    return angleBisectorNormal * length;\n  }\n\n  void main(void) {\n    float anglePrecision = 1500.0;\n    float paramShift = 10000.0;\n    v_angleStart = fract(a_parameters / paramShift) * paramShift / anglePrecision;\n    v_angleEnd = fract(floor(a_parameters / paramShift + 0.5) / paramShift) * paramShift / anglePrecision;\n    float vertexNumber = floor(a_parameters / paramShift / paramShift + 0.0001);\n    vec2 tangentPx = worldToPx(a_segmentEnd) - worldToPx(a_segmentStart);\n    tangentPx = normalize(tangentPx);\n    vec2 normalPx = vec2(-tangentPx.y, tangentPx.x);\n    float normalDir = vertexNumber < 0.5 || (vertexNumber > 1.5 && vertexNumber < 2.5) ? 1.0 : -1.0;\n    float tangentDir = vertexNumber < 1.5 ? 1.0 : -1.0;\n    float angle = vertexNumber < 1.5 ? v_angleStart : v_angleEnd;\n    vec2 offsetPx = getOffsetDirection(normalPx * normalDir, tangentDir * tangentPx, angle) * a_width * 0.5;\n    vec2 position =  vertexNumber < 1.5 ? a_segmentStart : a_segmentEnd;\n    gl_Position = u_projectionMatrix * vec4(position, 0.0, 1.0) + pxToScreen(offsetPx);\n    v_segmentStart = worldToPx(a_segmentStart);\n    v_segmentEnd = worldToPx(a_segmentEnd);\n    v_color = '.concat(bp, '\n    v_opacity = a_opacity;\n    v_width = a_width;\n  }'); var Fp='\n  precision mediump float;\n  uniform float u_pixelRatio;\n  varying vec2 v_segmentStart;\n  varying vec2 v_segmentEnd;\n  varying float v_angleStart;\n  varying float v_angleEnd;\n  varying vec3 v_color;\n  varying float v_opacity;\n  varying float v_width;\n\n  float segmentDistanceField(vec2 point, vec2 start, vec2 end, float radius) {\n    vec2 startToPoint = point - start;\n    vec2 startToEnd = end - start;\n    float ratio = clamp(dot(startToPoint, startToEnd) / dot(startToEnd, startToEnd), 0.0, 1.0);\n    float dist = length(startToPoint - ratio * startToEnd);\n    return 1.0 - smoothstep(radius - 1.0, radius, dist);\n  }\n\n  void main(void) {\n    vec2 v_currentPoint = gl_FragCoord.xy / u_pixelRatio;\n    gl_FragColor = vec4(v_color, 1.0) * v_opacity;\n    gl_FragColor *= segmentDistanceField(v_currentPoint, v_segmentStart, v_segmentEnd, v_width);\n  }'; var Mp='\n  precision mediump float;\n  uniform mat4 u_projectionMatrix;\n  uniform mat4 u_offsetScaleMatrix;\n  attribute vec2 a_position;\n  attribute float a_index;\n  attribute float a_color;\n  attribute float a_opacity;\n  varying vec2 v_texCoord;\n  varying vec3 v_color;\n  varying float v_opacity;\n\n  void main(void) {\n    mat4 offsetMatrix = u_offsetScaleMatrix;\n    float size = 6.0;\n    float offsetX = a_index == 0.0 || a_index == 3.0 ? -size / 2.0 : size / 2.0;\n    float offsetY = a_index == 0.0 || a_index == 1.0 ? -size / 2.0 : size / 2.0;\n    vec4 offsets = offsetMatrix * vec4(offsetX, offsetY, 0.0, 0.0);\n    gl_Position = u_projectionMatrix * vec4(a_position, 0.0, 1.0) + offsets;\n    float u = a_index == 0.0 || a_index == 3.0 ? 0.0 : 1.0;\n    float v = a_index == 0.0 || a_index == 1.0 ? 0.0 : 1.0;\n    v_texCoord = vec2(u, v);\n    v_color = '.concat(bp, '\n    v_opacity = a_opacity;\n  }'); var Ap='\n  precision mediump float;\n  varying vec3 v_color;\n  varying float v_opacity;\n\n  void main(void) {\n      gl_FragColor = vec4(v_color, 1.0) * v_opacity;\n  }'; function Op(t) {
    return Object.keys(t).map(function(e) {
      return {name: e, callback: t[e]};
    });
  } var Np=/* #__PURE__*/function(_rg3) {
    _inherits(Np, _rg3); var _super125=_createSuper(Np); function Np(t, e) {
      var _this145; _classCallCheck(this, Np); var i=e.uniforms||{}; var n=[1, 0, 0, 1, 0, 0]; i[Nd]=n, _this145=_super125.call(this, t, {uniforms: i, postProcesses: e.postProcesses}), _this145.sourceRevision_=-1, _this145.previousExtent_=[1/0, 1/0, -1/0, -1/0], _this145.currentTransform_=n; var r=_objectSpread({color: function color() {
        return Rp('#ddd');
      }, opacity: function opacity() {
        return 1;
      }}, e.fill&&e.fill.attributes); var s=_objectSpread({color: function color() {
        return Rp('#eee');
      }, opacity: function opacity() {
        return 1;
      }, width: function width() {
        return 1.5;
      }}, e.stroke&&e.stroke.attributes); var o=_objectSpread({color: function color() {
        return Rp('#eee');
      }, opacity: function opacity() {
        return 1;
      }}, e.point&&e.point.attributes); _this145.fillVertexShader_=e.fill&&e.fill.vertexShader||Pp, _this145.fillFragmentShader_=e.fill&&e.fill.fragmentShader||Ip, _this145.fillAttributes_=Op(r), _this145.strokeVertexShader_=e.stroke&&e.stroke.vertexShader||Lp, _this145.strokeFragmentShader_=e.stroke&&e.stroke.fragmentShader||Fp, _this145.strokeAttributes_=Op(s), _this145.pointVertexShader_=e.point&&e.point.vertexShader||Mp, _this145.pointFragmentShader_=e.point&&e.point.fragmentShader||Ap, _this145.pointAttributes_=Op(o), _this145.worker_=pp(), _this145.batch_=new Sp(); var a=_this145.getLayer().getSource(); _this145.batch_.addFeatures(a.getFeatures()), _this145.sourceListenKeys_=[N(a, nc, _this145.handleSourceFeatureAdded_, _assertThisInitialized(_this145)), N(a, rc, _this145.handleSourceFeatureChanged_, _assertThisInitialized(_this145)), N(a, oc, _this145.handleSourceFeatureDelete_, _assertThisInitialized(_this145)), N(a, sc, _this145.handleSourceFeatureClear_, _assertThisInitialized(_this145))]; return _this145;
    }_createClass(Np, [{key: 'afterHelperCreated', value: function afterHelperCreated() {
      this.polygonRenderer_=new Cp(this.helper, this.worker_, this.fillVertexShader_, this.fillFragmentShader_, this.fillAttributes_), this.pointRenderer_=new Tp(this.helper, this.worker_, this.pointVertexShader_, this.pointFragmentShader_, this.pointAttributes_), this.lineStringRenderer_=new vp(this.helper, this.worker_, this.strokeVertexShader_, this.strokeFragmentShader_, this.strokeAttributes_);
    }}, {key: 'handleSourceFeatureAdded_', value: function handleSourceFeatureAdded_(t) {
      var e=t.feature; this.batch_.addFeature(e);
    }}, {key: 'handleSourceFeatureChanged_', value: function handleSourceFeatureChanged_(t) {
      var e=t.feature; this.batch_.changeFeature(e);
    }}, {key: 'handleSourceFeatureDelete_', value: function handleSourceFeatureDelete_(t) {
      var e=t.feature; this.batch_.removeFeature(e);
    }}, {key: 'handleSourceFeatureClear_', value: function handleSourceFeatureClear_() {
      this.batch_.clear();
    }}, {key: 'renderFrame', value: function renderFrame(t) {
      var e=this.helper.getGL(); this.preRender(e, t); var i=this.getLayer().getSource(); var n=t.viewState.projection; var r=i.getWrapX()&&n.canWrapX(); var s=n.getExtent(); var o=t.extent; var a=r?De(s):null; var l=r?Math.ceil((o[2]-s[2])/a)+1:1; var h=r?Math.floor((o[0]-s[0])/a):0; do {
        this.polygonRenderer_.render(this.batch_.polygonBatch, this.currentTransform_, t, h*a), this.lineStringRenderer_.render(this.batch_.lineStringBatch, this.currentTransform_, t, h*a), this.pointRenderer_.render(this.batch_.pointBatch, this.currentTransform_, t, h*a);
      } while (++h<l); this.helper.finalizeDraw(t); var c=this.helper.getCanvas(); var u=t.layerStatesArray[t.layerIndex].opacity; return u!==parseFloat(c.style.opacity)&&(c.style.opacity=String(u)), this.postRender(e, t), c;
    }}, {key: 'prepareFrameInternal', value: function prepareFrameInternal(t) {
      var _this146=this; var e=this.getLayer(); var i=e.getSource(); var n=t.viewState; var r=!t.viewHints[Wo]&&!t.viewHints[Zo]; var s=!me(this.previousExtent_, t.extent); var o=this.sourceRevision_<i.getRevision(); if (o&&(this.sourceRevision_=i.getRevision()), r&&(s||o)) {
        var _r139=n.projection; var _s104=n.resolution; var _o93=e instanceof Af?e.getRenderBuffer():0; var _a54=re(t.extent, _o93*_s104); i.loadFeatures(_a54, _s104, _r139), this.ready=!1; var _l36=3; var _h36=function _h36() {
          _l36--, _this146.ready=_l36<=0, _this146.getLayer().changed();
        }; this.polygonRenderer_.rebuild(this.batch_.polygonBatch, t, 'Polygon', _h36), this.lineStringRenderer_.rebuild(this.batch_.lineStringBatch, t, 'LineString', _h36), this.pointRenderer_.rebuild(this.batch_.pointBatch, t, 'Point', _h36), this.previousExtent_=t.extent.slice();
      } return this.helper.makeProjectionTransform(t, this.currentTransform_), this.helper.prepareDraw(t), !0;
    }}, {key: 'forEachFeatureAtCoordinate', value: function forEachFeatureAtCoordinate(t, e, i, n, r) {}}, {key: 'disposeInternal', value: function disposeInternal() {
      this.worker_.terminate(), this.layer_=null, this.sourceListenKeys_.forEach(function(t) {
        G(t);
      }), this.sourceListenKeys_=null, _get(_getPrototypeOf(Np.prototype), 'disposeInternal', this).call(this);
    }}]); return Np;
  }(rg); var Dp=0; var Gp=1; var kp=2; var jp=3; var Bp=4; var zp=5; var Up=6; var Xp=7; var Vp=8; var Wp=9; var Zp=10; var Yp=11; var Kp=12; var qp=[Vp]; var Hp=[Kp]; var $p=[Gp]; var Jp=[jp]; var Qp=/* #__PURE__*/function(_Vl2) {
    _inherits(Qp, _Vl2); var _super126=_createSuper(Qp); function Qp(t, e, i, n) {
      var _this147; _classCallCheck(this, Qp); _this147=_super126.call(this), _this147.tolerance=t, _this147.maxExtent=e, _this147.pixelRatio=n, _this147.maxLineWidth=0, _this147.resolution=i, _this147.beginGeometryInstruction1_=null, _this147.beginGeometryInstruction2_=null, _this147.bufferedMaxExtent_=null, _this147.instructions=[], _this147.coordinates=[], _this147.tmpCoordinate_=[], _this147.hitDetectionInstructions=[], _this147.state={}; return _this147;
    }_createClass(Qp, [{key: 'applyPixelRatio', value: function applyPixelRatio(t) {
      var e=this.pixelRatio; return 1==e?t:t.map(function(t) {
        return t*e;
      });
    }}, {key: 'appendFlatPointCoordinates', value: function appendFlatPointCoordinates(t, e) {
      var i=this.getBufferedMaxExtent(); var n=this.tmpCoordinate_; var r=this.coordinates; var s=r.length; for (var _o94=0, _a55=t.length; _o94<_a55; _o94+=e)n[0]=t[_o94], n[1]=t[_o94+1], ae(i, n)&&(r[s++]=n[0], r[s++]=n[1]); return s;
    }}, {key: 'appendFlatLineCoordinates', value: function appendFlatLineCoordinates(t, e, i, n, r, s) {
      var o=this.coordinates; var a=o.length; var l=this.getBufferedMaxExtent(); s&&(e+=n); var h=t[e]; var c=t[e+1]; var u=this.tmpCoordinate_; var d; var g; var f; var p=!0; for (d=e+n; d<i; d+=n)u[0]=t[d], u[1]=t[d+1], f=ce(l, u), f!==g?(p&&(o[a++]=h, o[a++]=c, p=!1), o[a++]=u[0], o[a++]=u[1]):f===Jt?(o[a++]=u[0], o[a++]=u[1], p=!1):p=!0, h=u[0], c=u[1], g=f; return (r&&p||d===e+n)&&(o[a++]=h, o[a++]=c), a;
    }}, {key: 'drawCustomCoordinates_', value: function drawCustomCoordinates_(t, e, i, n, r) {
      for (var _s105=0, _o95=i.length; _s105<_o95; ++_s105) {
        var _o96=i[_s105]; var _a56=this.appendFlatLineCoordinates(t, e, _o96, n, !1, !1); r.push(_a56), e=_o96;
      } return e;
    }}, {key: 'drawCustom', value: function drawCustom(t, e, i, n) {
      this.beginGeometry(t, e); var r=t.getType(); var s=t.getStride(); var o=this.coordinates.length; var a; var l; var h; var c; var u; switch (r) {
        case 'MultiPolygon': a=t.getOrientedFlatCoordinates(), c=[]; var _e220=t.getEndss(); u=0; for (var _t215=0, _i180=_e220.length; _t215<_i180; ++_t215) {
          var _i181=[]; u=this.drawCustomCoordinates_(a, u, _e220[_t215], s, _i181), c.push(_i181);
        } this.instructions.push([Bp, o, c, t, i, sr]), this.hitDetectionInstructions.push([Bp, o, c, t, n||i, sr]); break; case 'Polygon': case 'MultiLineString': h=[], a='Polygon'==r?t.getOrientedFlatCoordinates():t.getFlatCoordinates(), u=this.drawCustomCoordinates_(a, 0, t.getEnds(), s, h), this.instructions.push([Bp, o, h, t, i, rr]), this.hitDetectionInstructions.push([Bp, o, h, t, n||i, rr]); break; case 'LineString': case 'Circle': a=t.getFlatCoordinates(), l=this.appendFlatLineCoordinates(a, 0, a.length, s, !1, !1), this.instructions.push([Bp, o, l, t, i, nr]), this.hitDetectionInstructions.push([Bp, o, l, t, n||i, nr]); break; case 'MultiPoint': a=t.getFlatCoordinates(), l=this.appendFlatPointCoordinates(a, s), l>o&&(this.instructions.push([Bp, o, l, t, i, nr]), this.hitDetectionInstructions.push([Bp, o, l, t, n||i, nr])); break; case 'Point': a=t.getFlatCoordinates(), this.coordinates.push(a[0], a[1]), l=this.coordinates.length, this.instructions.push([Bp, o, l, t, i]), this.hitDetectionInstructions.push([Bp, o, l, t, n||i]);
      } this.endGeometry(e);
    }}, {key: 'beginGeometry', value: function beginGeometry(t, e) {
      this.beginGeometryInstruction1_=[Dp, e, 0, t], this.instructions.push(this.beginGeometryInstruction1_), this.beginGeometryInstruction2_=[Dp, e, 0, t], this.hitDetectionInstructions.push(this.beginGeometryInstruction2_);
    }}, {key: 'finish', value: function finish() {
      return {instructions: this.instructions, hitDetectionInstructions: this.hitDetectionInstructions, coordinates: this.coordinates};
    }}, {key: 'reverseHitDetectionInstructions', value: function reverseHitDetectionInstructions() {
      var t=this.hitDetectionInstructions; var e; t.reverse(); var i=t.length; var n; var r; var s=-1; for (e=0; e<i; ++e)n=t[e], r=n[0], r==Xp?s=e:r==Dp&&(n[2]=e, c(this.hitDetectionInstructions, s, e), s=-1);
    }}, {key: 'setFillStrokeStyle', value: function setFillStrokeStyle(t, e) {
      var i=this.state; if (t) {
        var _e221=t.getColor(); i.fillStyle=Al(_e221||Js);
      } else i.fillStyle=void 0; if (e) {
        var _t216=e.getColor(); i.strokeStyle=Al(_t216||no); var _n158=e.getLineCap(); i.lineCap=void 0!==_n158?_n158:Qs; var _r140=e.getLineDash(); i.lineDash=_r140?_r140.slice():to; var _s106=e.getLineDashOffset(); i.lineDashOffset=_s106||0; var _o97=e.getLineJoin(); i.lineJoin=void 0!==_o97?_o97:eo; var _a57=e.getWidth(); i.lineWidth=void 0!==_a57?_a57:1; var _l37=e.getMiterLimit(); i.miterLimit=void 0!==_l37?_l37:io, i.lineWidth>this.maxLineWidth&&(this.maxLineWidth=i.lineWidth, this.bufferedMaxExtent_=null);
      } else i.strokeStyle=void 0, i.lineCap=void 0, i.lineDash=null, i.lineDashOffset=void 0, i.lineJoin=void 0, i.lineWidth=void 0, i.miterLimit=void 0;
    }}, {key: 'createFill', value: function createFill(t) {
      var e=t.fillStyle; var i=[Zp, e]; return 'string'!=typeof e&&i.push(!0), i;
    }}, {key: 'applyStroke', value: function applyStroke(t) {
      this.instructions.push(this.createStroke(t));
    }}, {key: 'createStroke', value: function createStroke(t) {
      return [Yp, t.strokeStyle, t.lineWidth*this.pixelRatio, t.lineCap, t.lineJoin, t.miterLimit, this.applyPixelRatio(t.lineDash), t.lineDashOffset*this.pixelRatio];
    }}, {key: 'updateFillStyle', value: function updateFillStyle(t, e) {
      var i=t.fillStyle; 'string'==typeof i&&t.currentFillStyle==i||(void 0!==i&&this.instructions.push(e.call(this, t)), t.currentFillStyle=i);
    }}, {key: 'updateStrokeStyle', value: function updateStrokeStyle(t, e) {
      var i=t.strokeStyle; var n=t.lineCap; var r=t.lineDash; var s=t.lineDashOffset; var o=t.lineJoin; var a=t.lineWidth; var l=t.miterLimit; (t.currentStrokeStyle!=i||t.currentLineCap!=n||r!=t.currentLineDash&&!d(t.currentLineDash, r)||t.currentLineDashOffset!=s||t.currentLineJoin!=o||t.currentLineWidth!=a||t.currentMiterLimit!=l)&&(void 0!==i&&e.call(this, t), t.currentStrokeStyle=i, t.currentLineCap=n, t.currentLineDash=r, t.currentLineDashOffset=s, t.currentLineJoin=o, t.currentLineWidth=a, t.currentMiterLimit=l);
    }}, {key: 'endGeometry', value: function endGeometry(t) {
      this.beginGeometryInstruction1_[2]=this.instructions.length, this.beginGeometryInstruction1_=null, this.beginGeometryInstruction2_[2]=this.hitDetectionInstructions.length, this.beginGeometryInstruction2_=null; var e=[Xp, t]; this.instructions.push(e), this.hitDetectionInstructions.push(e);
    }}, {key: 'getBufferedMaxExtent', value: function getBufferedMaxExtent() {
      if (!this.bufferedMaxExtent_&&(this.bufferedMaxExtent_=se(this.maxExtent), this.maxLineWidth>0)) {
        var _t217=this.resolution*(this.maxLineWidth+1)/2; re(this.bufferedMaxExtent_, _t217, this.bufferedMaxExtent_);
      } return this.bufferedMaxExtent_;
    }}]); return Qp;
  }(Vl); var tm=/* #__PURE__*/function(_Qp) {
    _inherits(tm, _Qp); var _super127=_createSuper(tm); function tm(t, e, i, n) {
      var _this148; _classCallCheck(this, tm); _this148=_super127.call(this, t, e, i, n), _this148.hitDetectionImage_=null, _this148.image_=null, _this148.imagePixelRatio_=void 0, _this148.anchorX_=void 0, _this148.anchorY_=void 0, _this148.height_=void 0, _this148.opacity_=void 0, _this148.originX_=void 0, _this148.originY_=void 0, _this148.rotateWithView_=void 0, _this148.rotation_=void 0, _this148.scale_=void 0, _this148.width_=void 0, _this148.declutterMode_=void 0, _this148.declutterImageWithText_=void 0; return _this148;
    }_createClass(tm, [{key: 'drawPoint', value: function drawPoint(t, e) {
      if (!this.image_) return; this.beginGeometry(t, e); var i=t.getFlatCoordinates(); var n=t.getStride(); var r=this.coordinates.length; var s=this.appendFlatPointCoordinates(i, n); this.instructions.push([Up, r, s, this.image_, this.anchorX_*this.imagePixelRatio_, this.anchorY_*this.imagePixelRatio_, Math.ceil(this.height_*this.imagePixelRatio_), this.opacity_, this.originX_*this.imagePixelRatio_, this.originY_*this.imagePixelRatio_, this.rotateWithView_, this.rotation_, [this.scale_[0]*this.pixelRatio/this.imagePixelRatio_, this.scale_[1]*this.pixelRatio/this.imagePixelRatio_], Math.ceil(this.width_*this.imagePixelRatio_), this.declutterMode_, this.declutterImageWithText_]), this.hitDetectionInstructions.push([Up, r, s, this.hitDetectionImage_, this.anchorX_, this.anchorY_, this.height_, this.opacity_, this.originX_, this.originY_, this.rotateWithView_, this.rotation_, this.scale_, this.width_, this.declutterMode_, this.declutterImageWithText_]), this.endGeometry(e);
    }}, {key: 'drawMultiPoint', value: function drawMultiPoint(t, e) {
      if (!this.image_) return; this.beginGeometry(t, e); var i=t.getFlatCoordinates(); var n=t.getStride(); var r=this.coordinates.length; var s=this.appendFlatPointCoordinates(i, n); this.instructions.push([Up, r, s, this.image_, this.anchorX_*this.imagePixelRatio_, this.anchorY_*this.imagePixelRatio_, Math.ceil(this.height_*this.imagePixelRatio_), this.opacity_, this.originX_*this.imagePixelRatio_, this.originY_*this.imagePixelRatio_, this.rotateWithView_, this.rotation_, [this.scale_[0]*this.pixelRatio/this.imagePixelRatio_, this.scale_[1]*this.pixelRatio/this.imagePixelRatio_], Math.ceil(this.width_*this.imagePixelRatio_), this.declutterMode_, this.declutterImageWithText_]), this.hitDetectionInstructions.push([Up, r, s, this.hitDetectionImage_, this.anchorX_, this.anchorY_, this.height_, this.opacity_, this.originX_, this.originY_, this.rotateWithView_, this.rotation_, this.scale_, this.width_, this.declutterMode_, this.declutterImageWithText_]), this.endGeometry(e);
    }}, {key: 'finish', value: function finish() {
      return this.reverseHitDetectionInstructions(), this.anchorX_=void 0, this.anchorY_=void 0, this.hitDetectionImage_=null, this.image_=null, this.imagePixelRatio_=void 0, this.height_=void 0, this.scale_=void 0, this.opacity_=void 0, this.originX_=void 0, this.originY_=void 0, this.rotateWithView_=void 0, this.rotation_=void 0, this.width_=void 0, _get(_getPrototypeOf(tm.prototype), 'finish', this).call(this);
    }}, {key: 'setImageStyle', value: function setImageStyle(t, e) {
      var i=t.getAnchor(); var n=t.getSize(); var r=t.getOrigin(); this.imagePixelRatio_=t.getPixelRatio(this.pixelRatio), this.anchorX_=i[0], this.anchorY_=i[1], this.hitDetectionImage_=t.getHitDetectionImage(), this.image_=t.getImage(this.pixelRatio), this.height_=n[1], this.opacity_=t.getOpacity(), this.originX_=r[0], this.originY_=r[1], this.rotateWithView_=t.getRotateWithView(), this.rotation_=t.getRotation(), this.scale_=t.getScaleArray(), this.width_=n[0], this.declutterMode_=t.getDeclutterMode(), this.declutterImageWithText_=e;
    }}]); return tm;
  }(Qp); var em=/* #__PURE__*/function(_Qp2) {
    _inherits(em, _Qp2); var _super128=_createSuper(em); function em(t, e, i, n) {
      _classCallCheck(this, em); return _super128.call(this, t, e, i, n);
    }_createClass(em, [{key: 'drawFlatCoordinates_', value: function drawFlatCoordinates_(t, e, i, n) {
      var r=this.coordinates.length; var s=this.appendFlatLineCoordinates(t, e, i, n, !1, !1); var o=[Wp, r, s]; return this.instructions.push(o), this.hitDetectionInstructions.push(o), i;
    }}, {key: 'drawLineString', value: function drawLineString(t, e) {
      var i=this.state; var n=i.strokeStyle; var r=i.lineWidth; if (void 0===n||void 0===r) return; this.updateStrokeStyle(i, this.applyStroke), this.beginGeometry(t, e), this.hitDetectionInstructions.push([Yp, i.strokeStyle, i.lineWidth, i.lineCap, i.lineJoin, i.miterLimit, to, 0], $p); var s=t.getFlatCoordinates(); var o=t.getStride(); this.drawFlatCoordinates_(s, 0, s.length, o), this.hitDetectionInstructions.push(Hp), this.endGeometry(e);
    }}, {key: 'drawMultiLineString', value: function drawMultiLineString(t, e) {
      var i=this.state; var n=i.strokeStyle; var r=i.lineWidth; if (void 0===n||void 0===r) return; this.updateStrokeStyle(i, this.applyStroke), this.beginGeometry(t, e), this.hitDetectionInstructions.push([Yp, i.strokeStyle, i.lineWidth, i.lineCap, i.lineJoin, i.miterLimit, i.lineDash, i.lineDashOffset], $p); var s=t.getEnds(); var o=t.getFlatCoordinates(); var a=t.getStride(); var l=0; for (var _t218=0, _e222=s.length; _t218<_e222; ++_t218)l=this.drawFlatCoordinates_(o, l, s[_t218], a); this.hitDetectionInstructions.push(Hp), this.endGeometry(e);
    }}, {key: 'finish', value: function finish() {
      var t=this.state; return null!=t.lastStroke&&t.lastStroke!=this.coordinates.length&&this.instructions.push(Hp), this.reverseHitDetectionInstructions(), this.state=null, _get(_getPrototypeOf(em.prototype), 'finish', this).call(this);
    }}, {key: 'applyStroke', value: function applyStroke(t) {
      null!=t.lastStroke&&t.lastStroke!=this.coordinates.length&&(this.instructions.push(Hp), t.lastStroke=this.coordinates.length), t.lastStroke=0, _get(_getPrototypeOf(em.prototype), 'applyStroke', this).call(this, t), this.instructions.push($p);
    }}]); return em;
  }(Qp); var im=/* #__PURE__*/function(_Qp3) {
    _inherits(im, _Qp3); var _super129=_createSuper(im); function im(t, e, i, n) {
      _classCallCheck(this, im); return _super129.call(this, t, e, i, n);
    }_createClass(im, [{key: 'drawFlatCoordinatess_', value: function drawFlatCoordinatess_(t, e, i, n) {
      var r=this.state; var s=void 0!==r.fillStyle; var o=void 0!==r.strokeStyle; var a=i.length; this.instructions.push($p), this.hitDetectionInstructions.push($p); for (var _r141=0; _r141<a; ++_r141) {
        var _s107=i[_r141]; var _a58=this.coordinates.length; var _l38=this.appendFlatLineCoordinates(t, e, _s107, n, !0, !o); var _h37=[Wp, _a58, _l38]; this.instructions.push(_h37), this.hitDetectionInstructions.push(_h37), o&&(this.instructions.push(Jp), this.hitDetectionInstructions.push(Jp)), e=_s107;
      } return s&&(this.instructions.push(qp), this.hitDetectionInstructions.push(qp)), o&&(this.instructions.push(Hp), this.hitDetectionInstructions.push(Hp)), e;
    }}, {key: 'drawCircle', value: function drawCircle(t, e) {
      var i=this.state; var n=i.fillStyle; var r=i.strokeStyle; if (void 0===n&&void 0===r) return; this.setFillStrokeStyles_(), this.beginGeometry(t, e), void 0!==i.fillStyle&&this.hitDetectionInstructions.push([Zp, Js]), void 0!==i.strokeStyle&&this.hitDetectionInstructions.push([Yp, i.strokeStyle, i.lineWidth, i.lineCap, i.lineJoin, i.miterLimit, i.lineDash, i.lineDashOffset]); var s=t.getFlatCoordinates(); var o=t.getStride(); var a=this.coordinates.length; this.appendFlatLineCoordinates(s, 0, s.length, o, !1, !1); var l=[kp, a]; this.instructions.push($p, l), this.hitDetectionInstructions.push($p, l), void 0!==i.fillStyle&&(this.instructions.push(qp), this.hitDetectionInstructions.push(qp)), void 0!==i.strokeStyle&&(this.instructions.push(Hp), this.hitDetectionInstructions.push(Hp)), this.endGeometry(e);
    }}, {key: 'drawPolygon', value: function drawPolygon(t, e) {
      var i=this.state; var n=i.fillStyle; var r=i.strokeStyle; if (void 0===n&&void 0===r) return; this.setFillStrokeStyles_(), this.beginGeometry(t, e), void 0!==i.fillStyle&&this.hitDetectionInstructions.push([Zp, Js]), void 0!==i.strokeStyle&&this.hitDetectionInstructions.push([Yp, i.strokeStyle, i.lineWidth, i.lineCap, i.lineJoin, i.miterLimit, i.lineDash, i.lineDashOffset]); var s=t.getEnds(); var o=t.getOrientedFlatCoordinates(); var a=t.getStride(); this.drawFlatCoordinatess_(o, 0, s, a), this.endGeometry(e);
    }}, {key: 'drawMultiPolygon', value: function drawMultiPolygon(t, e) {
      var i=this.state; var n=i.fillStyle; var r=i.strokeStyle; if (void 0===n&&void 0===r) return; this.setFillStrokeStyles_(), this.beginGeometry(t, e), void 0!==i.fillStyle&&this.hitDetectionInstructions.push([Zp, Js]), void 0!==i.strokeStyle&&this.hitDetectionInstructions.push([Yp, i.strokeStyle, i.lineWidth, i.lineCap, i.lineJoin, i.miterLimit, i.lineDash, i.lineDashOffset]); var s=t.getEndss(); var o=t.getOrientedFlatCoordinates(); var a=t.getStride(); var l=0; for (var _t219=0, _e223=s.length; _t219<_e223; ++_t219)l=this.drawFlatCoordinatess_(o, l, s[_t219], a); this.endGeometry(e);
    }}, {key: 'finish', value: function finish() {
      this.reverseHitDetectionInstructions(), this.state=null; var t=this.tolerance; if (0!==t) {
        var _e224=this.coordinates; for (var _i182=0, _n159=_e224.length; _i182<_n159; ++_i182)_e224[_i182]=Qn(_e224[_i182], t);
      } return _get(_getPrototypeOf(im.prototype), 'finish', this).call(this);
    }}, {key: 'setFillStrokeStyles_', value: function setFillStrokeStyles_() {
      var t=this.state; void 0!==t.fillStyle&&this.updateFillStyle(t, this.createFill), void 0!==t.strokeStyle&&this.updateStrokeStyle(t, this.applyStroke);
    }}]); return im;
  }(Qp); function nm(t, e, i, n, r) {
    var s; var o; var a; var l; var h; var c; var u; var d; var g; var f; var p=i; var m=i; var _=0; var y=0; var x=i; for (o=i; o<n; o+=r) {
      var _i183=e[o]; var _n160=e[o+1]; void 0!==h&&(g=_i183-h, f=_n160-c, l=Math.sqrt(g*g+f*f), void 0!==u&&(y+=a, s=Math.acos((u*g+d*f)/(a*l)), s>t&&(y>_&&(_=y, p=x, m=o), y=0, x=o-r)), a=l, u=g, d=f), h=_i183, c=_n160;
    } return y+=l, y>_?[x, o]:[p, m];
  } var rm={left: 0, end: 0, center: .5, right: 1, start: 1, top: 0, middle: .5, hanging: .2, alphabetic: .8, ideographic: .8, bottom: 1}; var sm=/* #__PURE__*/function(_Qp4) {
    _inherits(sm, _Qp4); var _super130=_createSuper(sm); function sm(t, e, i, n) {
      var _this149; _classCallCheck(this, sm); _this149=_super130.call(this, t, e, i, n), _this149.labels_=null, _this149.text_='', _this149.textOffsetX_=0, _this149.textOffsetY_=0, _this149.textRotateWithView_=void 0, _this149.textRotation_=0, _this149.textFillState_=null, _this149.fillStates={}, _this149.textStrokeState_=null, _this149.strokeStates={}, _this149.textState_={}, _this149.textStates={}, _this149.textKey_='', _this149.fillKey_='', _this149.strokeKey_='', _this149.declutterImageWithText_=void 0; return _this149;
    }_createClass(sm, [{key: 'finish', value: function finish() {
      var t=_get(_getPrototypeOf(sm.prototype), 'finish', this).call(this); return t.textStates=this.textStates, t.fillStates=this.fillStates, t.strokeStates=this.strokeStates, t;
    }}, {key: 'drawText', value: function drawText(t, e) {
      var i=this.textFillState_; var n=this.textStrokeState_; var r=this.textState_; if (''===this.text_||!r||!i&&!n) return; var s=this.coordinates; var o=s.length; var a=t.getType(); var l=null; var h=t.getStride(); if ('line'!==r.placement||'LineString'!=a&&'MultiLineString'!=a&&'Polygon'!=a&&'MultiPolygon'!=a) {
        var _i184=r.overflow?null:[]; switch (a) {
          case 'Point': case 'MultiPoint': l=t.getFlatCoordinates(); break; case 'LineString': l=t.getFlatMidpoint(); break; case 'Circle': l=t.getCenter(); break; case 'MultiLineString': l=t.getFlatMidpoints(), h=2; break; case 'Polygon': l=t.getFlatInteriorPoint(), r.overflow||_i184.push(l[2]/this.resolution), h=3; break; case 'MultiPolygon': var _e225=t.getFlatInteriorPoints(); l=[]; for (var _t220=0, _n161=_e225.length; _t220<_n161; _t220+=3)r.overflow||_i184.push(_e225[_t220+2]/this.resolution), l.push(_e225[_t220], _e225[_t220+1]); if (0===l.length) return; h=2;
        } var _n162=this.appendFlatPointCoordinates(l, h); if (_n162===o) return; if (_i184&&(_n162-o)/2!=l.length/h) {
          var _t221=o/2; _i184=_i184.filter(function(e, i) {
            var n=s[2*(_t221+i)]===l[i*h]&&s[2*(_t221+i)+1]===l[i*h+1]; return n||--_t221, n;
          });
        } this.saveTextStates_(), (r.backgroundFill||r.backgroundStroke)&&(this.setFillStrokeStyle(r.backgroundFill, r.backgroundStroke), r.backgroundFill&&(this.updateFillStyle(this.state, this.createFill), this.hitDetectionInstructions.push(this.createFill(this.state))), r.backgroundStroke&&(this.updateStrokeStyle(this.state, this.applyStroke), this.hitDetectionInstructions.push(this.createStroke(this.state)))), this.beginGeometry(t, e); var _c18=r.padding; if (_c18!=oo&&(r.scale[0]<0||r.scale[1]<0)) {
          var _t222=r.padding[0]; var _e226=r.padding[1]; var _i185=r.padding[2]; var _n163=r.padding[3]; r.scale[0]<0&&(_e226=-_e226, _n163=-_n163), r.scale[1]<0&&(_t222=-_t222, _i185=-_i185), _c18=[_t222, _e226, _i185, _n163];
        } var _u21=this.pixelRatio; this.instructions.push([Up, o, _n162, null, NaN, NaN, NaN, 1, 0, 0, this.textRotateWithView_, this.textRotation_, [1, 1], NaN, void 0, this.declutterImageWithText_, _c18==oo?oo:_c18.map(function(t) {
          return t*_u21;
        }), !!r.backgroundFill, !!r.backgroundStroke, this.text_, this.textKey_, this.strokeKey_, this.fillKey_, this.textOffsetX_, this.textOffsetY_, _i184]); var _d21=1/_u21; this.hitDetectionInstructions.push([Up, o, _n162, null, NaN, NaN, NaN, 1, 0, 0, this.textRotateWithView_, this.textRotation_, [_d21, _d21], NaN, void 0, this.declutterImageWithText_, _c18, !!r.backgroundFill, !!r.backgroundStroke, this.text_, this.textKey_, this.strokeKey_, this.fillKey_, this.textOffsetX_, this.textOffsetY_, _i184]), this.endGeometry(e);
      } else {
        if (!Ge(this.getBufferedMaxExtent(), t.getExtent())) return; var _i186; if (l=t.getFlatCoordinates(), 'LineString'==a)_i186=[l.length]; else if ('MultiLineString'==a)_i186=t.getEnds(); else if ('Polygon'==a)_i186=t.getEnds().slice(0, 1); else if ('MultiPolygon'==a) {
          var _e227=t.getEndss(); _i186=[]; for (var _t223=0, _n164=_e227.length; _t223<_n164; ++_t223)_i186.push(_e227[_t223][0]);
        } this.beginGeometry(t, e); var _n165=r.textAlign; var _c19; var _u22=0; for (var _t224=0, _e228=_i186.length; _t224<_e228; ++_t224) {
          if (null==_n165) {
            var _e229=nm(r.maxAngle, l, _u22, _i186[_t224], h); _u22=_e229[0], _c19=_e229[1];
          } else _c19=_i186[_t224]; for (var _t225=_u22; _t225<_c19; _t225+=h)s.push(l[_t225], l[_t225+1]); var _e230=s.length; _u22=_i186[_t224], this.drawChars_(o, _e230), o=_e230;
        } this.endGeometry(e);
      }
    }}, {key: 'saveTextStates_', value: function saveTextStates_() {
      var t=this.textStrokeState_; var e=this.textState_; var i=this.textFillState_; var n=this.strokeKey_; t&&(n in this.strokeStates||(this.strokeStates[n]={strokeStyle: t.strokeStyle, lineCap: t.lineCap, lineDashOffset: t.lineDashOffset, lineWidth: t.lineWidth, lineJoin: t.lineJoin, miterLimit: t.miterLimit, lineDash: t.lineDash})); var r=this.textKey_; r in this.textStates||(this.textStates[r]={font: e.font, textAlign: e.textAlign||ro, justify: e.justify, textBaseline: e.textBaseline||so, scale: e.scale}); var s=this.fillKey_; i&&(s in this.fillStates||(this.fillStates[s]={fillStyle: i.fillStyle}));
    }}, {key: 'drawChars_', value: function drawChars_(t, e) {
      var i=this.textStrokeState_; var n=this.textState_; var r=this.strokeKey_; var s=this.textKey_; var o=this.fillKey_; this.saveTextStates_(); var a=this.pixelRatio; var l=rm[n.textBaseline]; var h=this.textOffsetY_*a; var c=this.text_; var u=i?i.lineWidth*Math.abs(n.scale[0])/2:0; this.instructions.push([zp, t, e, l, n.overflow, o, n.maxAngle, a, h, r, u*a, c, s, 1]), this.hitDetectionInstructions.push([zp, t, e, l, n.overflow, o, n.maxAngle, 1, h, r, u, c, s, 1/a]);
    }}, {key: 'setTextStyle', value: function setTextStyle(t, e) {
      var i; var n; var r; if (t) {
        var _e231=t.getFill(); _e231?(n=this.textFillState_, n||(n={}, this.textFillState_=n), n.fillStyle=Al(_e231.getColor()||Js)):(n=null, this.textFillState_=n); var _s108=t.getStroke(); if (_s108) {
          r=this.textStrokeState_, r||(r={}, this.textStrokeState_=r); var _t226=_s108.getLineDash(); var _e232=_s108.getLineDashOffset(); var _i187=_s108.getWidth(); var _n166=_s108.getMiterLimit(); r.lineCap=_s108.getLineCap()||Qs, r.lineDash=_t226?_t226.slice():to, r.lineDashOffset=void 0===_e232?0:_e232, r.lineJoin=_s108.getLineJoin()||eo, r.lineWidth=void 0===_i187?1:_i187, r.miterLimit=void 0===_n166?io:_n166, r.strokeStyle=Al(_s108.getColor()||no);
        } else r=null, this.textStrokeState_=r; i=this.textState_; var _o98=t.getFont()||$s; uo(_o98); var _a59=t.getScaleArray(); i.overflow=t.getOverflow(), i.font=_o98, i.maxAngle=t.getMaxAngle(), i.placement=t.getPlacement(), i.textAlign=t.getTextAlign(), i.justify=t.getJustify(), i.textBaseline=t.getTextBaseline()||so, i.backgroundFill=t.getBackgroundFill(), i.backgroundStroke=t.getBackgroundStroke(), i.padding=t.getPadding()||oo, i.scale=void 0===_a59?[1, 1]:_a59; var _l39=t.getOffsetX(); var _h38=t.getOffsetY(); var _c20=t.getRotateWithView(); var _u23=t.getRotation(); this.text_=t.getText()||'', this.textOffsetX_=void 0===_l39?0:_l39, this.textOffsetY_=void 0===_h38?0:_h38, this.textRotateWithView_=void 0!==_c20&&_c20, this.textRotation_=void 0===_u23?0:_u23, this.strokeKey_=r?('string'==typeof r.strokeStyle?r.strokeStyle:X(r.strokeStyle))+r.lineCap+r.lineDashOffset+'|'+r.lineWidth+r.lineJoin+r.miterLimit+'['+r.lineDash.join()+']':'', this.textKey_=i.font+i.scale+(i.textAlign||'?')+(i.justify||'?')+(i.textBaseline||'?'), this.fillKey_=n?'string'==typeof n.fillStyle?n.fillStyle:'|'+X(n.fillStyle):'';
      } else this.text_=''; this.declutterImageWithText_=e;
    }}]); return sm;
  }(Qp); var om={Circle: im, Default: Qp, Image: tm, LineString: em, Polygon: im, Text: sm}; var am=/* #__PURE__*/function() {
    function am(t, e, i, n) {
      _classCallCheck(this, am); this.tolerance_=t, this.maxExtent_=e, this.pixelRatio_=n, this.resolution_=i, this.buildersByZIndex_={};
    }_createClass(am, [{key: 'finish', value: function finish() {
      var t={}; for (var _e233 in this.buildersByZIndex_) {
        t[_e233]=t[_e233]||{}; var _i188=this.buildersByZIndex_[_e233]; for (var _n167 in _i188) {
          var _r142=_i188[_n167].finish(); t[_e233][_n167]=_r142;
        }
      } return t;
    }}, {key: 'getBuilder', value: function getBuilder(t, e) {
      var i=void 0!==t?t.toString():'0'; var n=this.buildersByZIndex_[i]; void 0===n&&(n={}, this.buildersByZIndex_[i]=n); var r=n[e]; if (void 0===r) {
        r=new(0, om[e])(this.tolerance_, this.maxExtent_, this.resolution_, this.pixelRatio_), n[e]=r;
      } return r;
    }}]); return am;
  }(); function lm(t, e, i, n, r, s, o, a, l, h, c, u) {
    var d=t[e]; var g=t[e+1]; var f=0; var p=0; var m=0; var _=0; function y() {
      f=d, p=g, d=t[e+=n], g=t[e+1], _+=m, m=Math.sqrt((d-f)*(d-f)+(g-p)*(g-p));
    } do {
      y();
    } while (e<i-n&&_+m<s); var x=0===m?0:(s-_)/m; var v=Ei(f, d, x); var S=Ei(p, g, x); var w=e-n; var T=_; var E=s+a*l(h, r, c); for (;e<i-n&&_+m<E;)y(); x=0===m?0:(E-_)/m; var C=Ei(f, d, x); var R=Ei(p, g, x); var b; if (u) {
      var _t227=[v, S, C, R]; Fn(_t227, 0, 4, 2, u, _t227, _t227), b=_t227[0]>_t227[2];
    } else b=v>C; var P=Math.PI; var I=[]; var L=w+n===e; var F; if (m=0, _=T, d=t[e=w], g=t[e+1], L) {
      y(), F=Math.atan2(g-p, d-f), b&&(F+=F>0?-P:P); var _t228=(C+v)/2; var _e234=(R+S)/2; return I[0]=[_t228, _e234, (E-s)/2, F, r], I;
    } for (var _t229=0, _u24=(r=r.replace(/\n/g, ' ')).length; _t229<_u24;) {
      y(); var _v4=Math.atan2(g-p, d-f); if (b&&(_v4+=_v4>0?-P:P), void 0!==F) {
        var _t230=_v4-F; if (_t230+=_t230>P?-2*P:_t230<-P?2*P:0, Math.abs(_t230)>o) return null;
      }F=_v4; var _S10=_t229; var _w4=0; for (;_t229<_u24; ++_t229) {
        var _o99=a*l(h, r[b?_u24-_t229-1:_t229], c); if (e+n<i&&_+m<s+_w4+_o99/2) break; _w4+=_o99;
      } if (_t229===_S10) continue; var _T4=b?r.substring(_u24-_S10, _u24-_t229):r.substring(_S10, _t229); x=0===m?0:(s+_w4/2-_)/m; var _E3=Ei(f, d, x); var _C3=Ei(p, g, x); I.push([_E3, _C3, _w4/2, _v4, _T4]), s+=_w4;
    } return I;
  } function hm(t, e, i, n) {
    var r=t[e]; var s=t[e+1]; var o=0; for (var _a60=e+n; _a60<i; _a60+=n) {
      var _e235=t[_a60]; var _i189=t[_a60+1]; o+=Math.sqrt((_e235-r)*(_e235-r)+(_i189-s)*(_i189-s)), r=_e235, s=_i189;
    } return o;
  } var cm=[1/0, 1/0, -1/0, -1/0]; var um=[]; var dm=[]; var gm=[]; var fm=[]; function pm(t) {
    return t[3].declutterBox;
  } var mm=new RegExp('['+String.fromCharCode(1425)+'-'+String.fromCharCode(2303)+String.fromCharCode(64285)+'-'+String.fromCharCode(65023)+String.fromCharCode(65136)+'-'+String.fromCharCode(65276)+String.fromCharCode(67584)+'-'+String.fromCharCode(69631)+String.fromCharCode(124928)+'-'+String.fromCharCode(126975)+']'); function _m(t, e) {
    return 'start'!==e&&'end'!==e||mm.test(t)||(e='start'===e?'left':'right'), rm[e];
  } function ym(t, e, i) {
    return i>0&&t.push('\n', ''), t.push(e, ''), t;
  } var xm=/* #__PURE__*/function() {
    function xm(t, e, i, n) {
      _classCallCheck(this, xm); this.overlaps=i, this.pixelRatio=e, this.resolution=t, this.alignFill_, this.instructions=n.instructions, this.coordinates=n.coordinates, this.coordinateCache_={}, this.renderedTransform_=[1, 0, 0, 1, 0, 0], this.hitDetectionInstructions=n.hitDetectionInstructions, this.pixelCoordinates_=null, this.viewRotation_=0, this.fillStates=n.fillStates||{}, this.strokeStates=n.strokeStates||{}, this.textStates=n.textStates||{}, this.widths_={}, this.labels_={};
    }_createClass(xm, [{key: 'createLabel', value: function createLabel(t, e, i, n) {
      var r=t+e+i+n; if (this.labels_[r]) return this.labels_[r]; var s=n?this.strokeStates[n]:null; var o=i?this.fillStates[i]:null; var a=this.textStates[e]; var l=this.pixelRatio; var h=[a.scale[0]*l, a.scale[1]*l]; var c=Array.isArray(t); var u=a.justify?rm[a.justify]:_m(Array.isArray(t)?t[0]:t, a.textAlign||ro); var d=n&&s.lineWidth?s.lineWidth:0; var g=c?t:t.split('\n').reduce(ym, []); var _o100=_o(a, g); var f=_o100.width; var p=_o100.height; var m=_o100.widths; var _=_o100.heights; var y=_o100.lineWidths; var x=f+d; var v=[]; var S=(x+2)*h[0]; var w=(p+d)*h[1]; var T={width: S<0?Math.floor(S):Math.ceil(S), height: w<0?Math.floor(w):Math.ceil(w), contextInstructions: v}; 1==h[0]&&1==h[1]||v.push('scale', h), n&&(v.push('strokeStyle', s.strokeStyle), v.push('lineWidth', d), v.push('lineCap', s.lineCap), v.push('lineJoin', s.lineJoin), v.push('miterLimit', s.miterLimit), v.push('setLineDash', [s.lineDash]), v.push('lineDashOffset', s.lineDashOffset)), i&&v.push('fillStyle', o.fillStyle), v.push('textBaseline', 'middle'), v.push('textAlign', 'center'); var E=.5-u; var C=u*x+E*d; var R=[]; var b=[]; var P; var I=0; var L=0; var F=0; var M=0; for (var _t231=0, _e236=g.length; _t231<_e236; _t231+=2) {
        var _e237=g[_t231]; if ('\n'===_e237) {
          L+=I, I=0, C=u*x+E*d, ++M; continue;
        } var _r143=g[_t231+1]||a.font; _r143!==P&&(n&&R.push('font', _r143), i&&b.push('font', _r143), P=_r143), I=Math.max(I, _[F]); var _s109=[_e237, C+E*m[F]+u*(m[F]-y[M]), .5*(d+I)+L]; C+=m[F], n&&R.push('strokeText', _s109), i&&b.push('fillText', _s109), ++F;
      } return Array.prototype.push.apply(v, R), Array.prototype.push.apply(v, b), this.labels_[r]=T, T;
    }}, {key: 'replayTextBackground_', value: function replayTextBackground_(t, e, i, n, r, s, o) {
      t.beginPath(), t.moveTo.apply(t, e), t.lineTo.apply(t, i), t.lineTo.apply(t, n), t.lineTo.apply(t, r), t.lineTo.apply(t, e), s&&(this.alignFill_=s[2], this.fill_(t)), o&&(this.setStrokeStyle_(t, o), t.stroke());
    }}, {key: 'calculateImageOrLabelDimensions_', value: function calculateImageOrLabelDimensions_(t, e, i, n, r, s, o, a, l, h, c, u, d, g, f, p) {
      var m=i-(o*=u[0]); var _=n-(a*=u[1]); var y=r+l>t?t-l:r; var x=s+h>e?e-h:s; var v=g[3]+y*u[0]+g[1]; var S=g[0]+x*u[1]+g[2]; var w=m-g[3]; var T=_-g[0]; var E; return (f||0!==c)&&(um[0]=w, fm[0]=w, um[1]=T, dm[1]=T, dm[0]=w+v, gm[0]=dm[0], gm[1]=T+S, fm[1]=gm[1]), 0!==c?(E=Zt([1, 0, 0, 1, 0, 0], i, n, 1, 1, c, -i, -n), zt(E, um), zt(E, dm), zt(E, gm), zt(E, fm), de(Math.min(um[0], dm[0], gm[0], fm[0]), Math.min(um[1], dm[1], gm[1], fm[1]), Math.max(um[0], dm[0], gm[0], fm[0]), Math.max(um[1], dm[1], gm[1], fm[1]), cm)):de(Math.min(w, w+v), Math.min(T, T+S), Math.max(w, w+v), Math.max(T, T+S), cm), d&&(m=Math.round(m), _=Math.round(_)), {drawImageX: m, drawImageY: _, drawImageW: y, drawImageH: x, originX: l, originY: h, declutterBox: {minX: cm[0], minY: cm[1], maxX: cm[2], maxY: cm[3], value: p}, canvasTransform: E, scale: u};
    }}, {key: 'replayImageOrLabel_', value: function replayImageOrLabel_(t, e, i, n, r, s, o) {
      var a=!(!s&&!o); var l=n.declutterBox; var h=t.canvas; var c=o?o[2]*n.scale[0]/2:0; return l.minX-c<=h.width/e&&l.maxX+c>=0&&l.minY-c<=h.height/e&&l.maxY+c>=0&&(a&&this.replayTextBackground_(t, um, dm, gm, fm, s, o), yo(t, n.canvasTransform, r, i, n.originX, n.originY, n.drawImageW, n.drawImageH, n.drawImageX, n.drawImageY, n.scale)), !0;
    }}, {key: 'fill_', value: function fill_(t) {
      if (this.alignFill_) {
        var _e238=zt(this.renderedTransform_, [0, 0]); var _i190=512*this.pixelRatio; t.save(), t.translate(_e238[0]%_i190, _e238[1]%_i190), t.rotate(this.viewRotation_);
      }t.fill(), this.alignFill_&&t.restore();
    }}, {key: 'setStrokeStyle_', value: function setStrokeStyle_(t, e) {
      t.strokeStyle=e[1], t.lineWidth=e[2], t.lineCap=e[3], t.lineJoin=e[4], t.miterLimit=e[5], t.lineDashOffset=e[7], t.setLineDash(e[6]);
    }}, {key: 'drawLabelWithPointPlacement_', value: function drawLabelWithPointPlacement_(t, e, i, n) {
      var r=this.textStates[e]; var s=this.createLabel(t, e, n, i); var o=this.strokeStates[i]; var a=this.pixelRatio; var l=_m(Array.isArray(t)?t[0]:t, r.textAlign||ro); var h=rm[r.textBaseline||so]; var c=o&&o.lineWidth?o.lineWidth:0; return {label: s, anchorX: l*(s.width/a-2*r.scale[0])+2*(.5-l)*c, anchorY: h*s.height/a+2*(.5-h)*c};
    }}, {key: 'execute_', value: function execute_(t, e, i, n, r, s, o, a) {
      var l; this.pixelCoordinates_&&d(i, this.renderedTransform_)?l=this.pixelCoordinates_:(this.pixelCoordinates_||(this.pixelCoordinates_=[]), l=Ln(this.coordinates, 0, this.coordinates.length, 2, i, this.pixelCoordinates_), Bt(this.renderedTransform_, i)); var h=0; var c=n.length; var u; var g; var f; var p; var m; var _; var y; var x; var v; var S; var w; var T; var E=0; var C=0; var R=0; var b=null; var P=null; var I=this.coordinateCache_; var L=this.viewRotation_; var F=Math.round(1e12*Math.atan2(-i[1], i[0]))/1e12; var M={context: t, pixelRatio: this.pixelRatio, resolution: this.resolution, rotation: L}; var A=this.instructions!=n||this.overlaps?0:200; var O; var N; var D; var G; for (;h<c;) {
        var _i191=n[h]; switch (_i191[0]) {
          case Dp: O=_i191[1], G=_i191[3], O.getGeometry()?void 0===o||Ge(o, G.getExtent())?++h:h=_i191[2]+1:h=_i191[2]; break; case Gp: C>A&&(this.fill_(t), C=0), R>A&&(t.stroke(), R=0), C||R||(t.beginPath(), p=NaN, m=NaN), ++h; break; case kp: E=_i191[1]; var _n168=l[E]; var _c21=l[E+1]; var _d22=l[E+2]-_n168; var _k=l[E+3]-_c21; var _j=Math.sqrt(_d22*_d22+_k*_k); t.moveTo(_n168+_j, _c21), t.arc(_n168, _c21, _j, 0, 2*Math.PI, !0), ++h; break; case jp: t.closePath(), ++h; break; case Bp: E=_i191[1], u=_i191[2]; var _B3=_i191[3]; var _z=_i191[4]; var _U=6==_i191.length?_i191[5]:void 0; M.geometry=_B3, M.feature=O, h in I||(I[h]=[]); var _X=I[h]; _U?_U(l, E, u, 2, _X):(_X[0]=l[E], _X[1]=l[E+1], _X.length=2), _z(_X, M), ++h; break; case Up: E=_i191[1], u=_i191[2], x=_i191[3], g=_i191[4], f=_i191[5]; var _V=_i191[6]; var _W12=_i191[7]; var _Z=_i191[8]; var _Y=_i191[9]; var _K=_i191[10]; var _q=_i191[11]; var _H=_i191[12]; var _$=_i191[13]; var _J=_i191[14]; var _Q=_i191[15]; if (!x&&_i191.length>=20) {
            v=_i191[19], S=_i191[20], w=_i191[21], T=_i191[22]; var _t232=this.drawLabelWithPointPlacement_(v, S, w, T); x=_t232.label, _i191[3]=x; var _e239=_i191[23]; g=(_t232.anchorX-_e239)*this.pixelRatio, _i191[4]=g; var _n169=_i191[24]; f=(_t232.anchorY-_n169)*this.pixelRatio, _i191[5]=f, _V=x.height, _i191[6]=_V, _$=x.width, _i191[13]=_$;
          } var _tt=void 0; var _et=void 0; var _it=void 0; var _nt=void 0; _i191.length>25&&(_tt=_i191[25]), _i191.length>17?(_et=_i191[16], _it=_i191[17], _nt=_i191[18]):(_et=oo, _it=!1, _nt=!1), _K&&F?_q+=L:_K||F||(_q-=L); var _rt=0; for (;E<u; E+=2) {
              if (_tt&&_tt[_rt++]<_$/this.pixelRatio) continue; var _i192=this.calculateImageOrLabelDimensions_(x.width, x.height, l[E], l[E+1], _$, _V, g, f, _Z, _Y, _q, _H, r, _et, _it||_nt, O); var _n170=[t, e, x, _i192, _W12, _it?b:null, _nt?P:null]; if (a) {
                if ('none'===_J) continue; if ('obstacle'===_J) {
                  a.insert(_i192.declutterBox); continue;
                } {var _t233=void 0; var _e240=void 0; if (_Q) {
                  var _i193=u-E; if (!_Q[_i193]) {
                    _Q[_i193]=_n170; continue;
                  } if (_t233=_Q[_i193], delete _Q[_i193], _e240=pm(_t233), a.collides(_e240)) continue;
                } if (a.collides(_i192.declutterBox)) continue; _t233&&(a.insert(_e240), this.replayImageOrLabel_.apply(this, _t233)), a.insert(_i192.declutterBox);}
              } this.replayImageOrLabel_.apply(this, _n170);
            }++h; break; case zp: var _st=_i191[1]; var _ot7=_i191[2]; var _at=_i191[3]; var _lt=_i191[4]; T=_i191[5]; var _ht=_i191[6]; var _ct=_i191[7]; var _ut=_i191[8]; w=_i191[9]; var _dt=_i191[10]; v=_i191[11], S=_i191[12]; var _gt=[_i191[13], _i191[13]]; var _ft=this.textStates[S]; var _pt=_ft.font; var _mt=[_ft.scale[0]*_ct, _ft.scale[1]*_ct]; var _t234=void 0; _pt in this.widths_?_t234=this.widths_[_pt]:(_t234={}, this.widths_[_pt]=_t234); var _yt=hm(l, _st, _ot7, 2); var _xt=Math.abs(_mt[0])*mo(_pt, v, _t234); if (_lt||_xt<=_yt) {
            var _i194=this.textStates[S].textAlign; var _n171=lm(l, _st, _ot7, 2, v, (_yt-_xt)*rm[_i194], _ht, Math.abs(_mt[0]), mo, _pt, _t234, F?0:this.viewRotation_); t:if (_n171) {
              var _i195=[]; var _r144=void 0; var _s110=void 0; var _o101=void 0; var _l40=void 0; var _h39=void 0; if (w) {
                for (_r144=0, _s110=_n171.length; _r144<_s110; ++_r144) {
                  _h39=_n171[_r144], _o101=_h39[4], _l40=this.createLabel(_o101, S, '', w), g=_h39[2]+(_mt[0]<0?-_dt:_dt), f=_at*_l40.height+2*(.5-_at)*_dt*_mt[1]/_mt[0]-_ut; var _s111=this.calculateImageOrLabelDimensions_(_l40.width, _l40.height, _h39[0], _h39[1], _l40.width, _l40.height, g, f, 0, 0, _h39[3], _gt, !1, oo, !1, O); if (a&&a.collides(_s111.declutterBox)) break t; _i195.push([t, e, _l40, _s111, 1, null, null]);
                }
              } if (T) {
                for (_r144=0, _s110=_n171.length; _r144<_s110; ++_r144) {
                  _h39=_n171[_r144], _o101=_h39[4], _l40=this.createLabel(_o101, S, T, ''), g=_h39[2], f=_at*_l40.height-_ut; var _s112=this.calculateImageOrLabelDimensions_(_l40.width, _l40.height, _h39[0], _h39[1], _l40.width, _l40.height, g, f, 0, 0, _h39[3], _gt, !1, oo, !1, O); if (a&&a.collides(_s112.declutterBox)) break t; _i195.push([t, e, _l40, _s112, 1, null, null]);
                }
              }a&&a.load(_i195.map(pm)); for (var _t235=0, _e241=_i195.length; _t235<_e241; ++_t235) this.replayImageOrLabel_.apply(this, _i195[_t235]);
            }
          }++h; break; case Xp: if (void 0!==s) {
            O=_i191[1]; var _t236=s(O, G); if (_t236) return _t236;
          }++h; break; case Vp: A?C++:this.fill_(t), ++h; break; case Wp: for (E=_i191[1], u=_i191[2], N=l[E], D=l[E+1], _=N+.5|0, y=D+.5|0, _===p&&y===m||(t.moveTo(N, D), p=_, m=y), E+=2; E<u; E+=2)N=l[E], D=l[E+1], _=N+.5|0, y=D+.5|0, E!=u-2&&_===p&&y===m||(t.lineTo(N, D), p=_, m=y); ++h; break; case Zp: b=_i191, this.alignFill_=_i191[2], C&&(this.fill_(t), C=0, R&&(t.stroke(), R=0)), t.fillStyle=_i191[1], ++h; break; case Yp: P=_i191, R&&(t.stroke(), R=0), this.setStrokeStyle_(t, _i191), ++h; break; case Kp: A?R++:t.stroke(), ++h; break; default: ++h;
        }
      }C&&this.fill_(t), R&&t.stroke();
    }}, {key: 'execute', value: function execute(t, e, i, n, r, s) {
      this.viewRotation_=n, this.execute_(t, e, i, this.instructions, r, void 0, void 0, s);
    }}, {key: 'executeHitDetection', value: function executeHitDetection(t, e, i, n, r) {
      return this.viewRotation_=i, this.execute_(t, 1, e, this.hitDetectionInstructions, !0, n, r);
    }}]); return xm;
  }(); var vm=['Polygon', 'Circle', 'LineString', 'Image', 'Text', 'Default']; var Sm={}; function wm(t) {
    if (void 0!==Sm[t]) return Sm[t]; var e=2*t+1; var i=t*t; var n=new Array(i+1); for (var _r145=0; _r145<=t; ++_r145) {
      for (var _s113=0; _s113<=t; ++_s113) {
        var _o102=_r145*_r145+_s113*_s113; if (_o102>i) break; var _a61=n[_o102]; _a61||(_a61=[], n[_o102]=_a61), _a61.push(4*((t+_r145)*e+(t+_s113))+3), _r145>0&&_a61.push(4*((t-_r145)*e+(t+_s113))+3), _s113>0&&(_a61.push(4*((t+_r145)*e+(t-_s113))+3), _r145>0&&_a61.push(4*((t-_r145)*e+(t-_s113))+3));
      }
    } var r=[]; for (var _t237=0, _e242=n.length; _t237<_e242; ++_t237)n[_t237]&&r.push.apply(r, _toConsumableArray(n[_t237])); return Sm[t]=r, r;
  } var Tm=/* #__PURE__*/function() {
    function Tm(t, e, i, n, r, s) {
      _classCallCheck(this, Tm); this.maxExtent_=t, this.overlaps_=n, this.pixelRatio_=i, this.resolution_=e, this.renderBuffer_=s, this.executorsByZIndex_={}, this.hitDetectionContext_=null, this.hitDetectionTransform_=[1, 0, 0, 1, 0, 0], this.createExecutors_(r);
    }_createClass(Tm, [{key: 'clip', value: function clip(t, e) {
      var i=this.getClipCoords(e); t.beginPath(), t.moveTo(i[0], i[1]), t.lineTo(i[2], i[3]), t.lineTo(i[4], i[5]), t.lineTo(i[6], i[7]), t.clip();
    }}, {key: 'createExecutors_', value: function createExecutors_(t) {
      for (var _e243 in t) {
        var _i196=this.executorsByZIndex_[_e243]; void 0===_i196&&(_i196={}, this.executorsByZIndex_[_e243]=_i196); var _n172=t[_e243]; for (var _t238 in _n172) {
          var _e244=_n172[_t238]; _i196[_t238]=new xm(this.resolution_, this.pixelRatio_, this.overlaps_, _e244);
        }
      }
    }}, {key: 'hasExecutors', value: function hasExecutors(t) {
      for (var _e245 in this.executorsByZIndex_) {
        var _i197=this.executorsByZIndex_[_e245]; for (var _e246=0, _n173=t.length; _e246<_n173; ++_e246) if (t[_e246]in _i197) return !0;
      } return !1;
    }}, {key: 'forEachFeatureAtCoordinate', value: function forEachFeatureAtCoordinate(t, e, i, n, r, s) {
      var o=2*(n=Math.round(n))+1; var a=Zt(this.hitDetectionTransform_, n+.5, n+.5, 1/e, -1/e, -i, -t[0], -t[1]); var h=!this.hitDetectionContext_; h&&(this.hitDetectionContext_=_t(o, o, void 0, {willReadFrequently: !0})); var c=this.hitDetectionContext_; var u; c.canvas.width!==o||c.canvas.height!==o?(c.canvas.width=o, c.canvas.height=o):h||c.clearRect(0, 0, o, o), void 0!==this.renderBuffer_&&(u=[1/0, 1/0, -1/0, -1/0], xe(u, t), re(u, e*(this.renderBuffer_+n), u)); var d=wm(n); var g; function f(t, e) {
        var i=c.getImageData(0, 0, o, o).data; for (var _a62=0, _l41=d.length; _a62<_l41; _a62++) {
          if (i[d[_a62]]>0) {
            if (!s||'Image'!==g&&'Text'!==g||s.includes(t)) {
              var _i198=(d[_a62]-3)/4; var _s114=n-_i198%o; var _l42=n-(_i198/o|0); var _h40=r(t, e, _s114*_s114+_l42*_l42); if (_h40) return _h40;
            }c.clearRect(0, 0, o, o); break;
          }
        }
      } var p=Object.keys(this.executorsByZIndex_).map(Number); var m; var _; var y; var x; var v; for (p.sort(l), m=p.length-1; m>=0; --m) {
        var _t239=p[m].toString(); for (y=this.executorsByZIndex_[_t239], _=vm.length-1; _>=0; --_) if (g=vm[_], x=y[g], void 0!==x&&(v=x.executeHitDetection(c, a, i, f, u), v)) return v;
      }
    }}, {key: 'getClipCoords', value: function getClipCoords(t) {
      var e=this.maxExtent_; if (!e) return null; var i=e[0]; var n=e[1]; var r=e[2]; var s=e[3]; var o=[i, n, i, s, r, s, r, n]; return Ln(o, 0, 8, 2, t, o), o;
    }}, {key: 'isEmpty', value: function isEmpty() {
      return v(this.executorsByZIndex_);
    }}, {key: 'execute', value: function execute(t, e, i, n, r, s, o) {
      var a=Object.keys(this.executorsByZIndex_).map(Number); var h; var c; var u; var d; var g; var f; for (a.sort(l), this.maxExtent_&&(t.save(), this.clip(t, i)), s=s||vm, o&&a.reverse(), h=0, c=a.length; h<c; ++h) {
        var _l43=a[h].toString(); for (g=this.executorsByZIndex_[_l43], u=0, d=s.length; u<d; ++u) {
          f=g[s[u]], void 0!==f&&f.execute(t, e, i, n, r, o);
        }
      } this.maxExtent_&&t.restore();
    }}]); return Tm;
  }(); var Em=.5; function Cm(t, e, i, n, r, s, o) {
    var a=_t(t[0]*Em, t[1]*Em); a.imageSmoothingEnabled=!1; var h=a.canvas; var c=new Wl(a, Em, r, null, o); var u=i.length; var d=Math.floor(16777215/u); var g={}; for (var _t240=1; _t240<=u; ++_t240) {
      var _e247=i[_t240-1]; var _o103=_e247.getStyleFunction()||n; if (!n) continue; var _a63=_o103(_e247, s); if (!_a63) continue; Array.isArray(_a63)||(_a63=[_a63]); var _l44=(_t240*d).toString(16).padStart(7, '#00000'); for (var _t241=0, _i199=_a63.length; _t241<_i199; ++_t241) {
        var _i200=_a63[_t241]; var _n174=_i200.getGeometryFunction()(_e247); if (!_n174||!Ge(r, _n174.getExtent())) continue; var _s115=_i200.clone(); var _o104=_s115.getFill(); _o104&&_o104.setColor(_l44); var _h41=_s115.getStroke(); _h41&&(_h41.setColor(_l44), _h41.setLineDash(null)), _s115.setText(void 0); var _c22=_i200.getImage(); if (_c22&&0!==_c22.getOpacity()) {
          var _t242=_c22.getImageSize(); if (!_t242) continue; var _e248=_t(_t242[0], _t242[1], void 0, {alpha: !1}); var _i201=_e248.canvas; _e248.fillStyle=_l44, _e248.fillRect(0, 0, _i201.width, _i201.height), _s115.setImage(new of({img: _i201, imgSize: _t242, anchor: _c22.getAnchor(), anchorXUnits: 'pixels', anchorYUnits: 'pixels', offset: _c22.getOrigin(), opacity: 1, size: _c22.getSize(), scale: _c22.getScale(), rotation: _c22.getRotation(), rotateWithView: _c22.getRotateWithView()}));
        } var _u25=_s115.getZIndex()||0; var _d23=g[_u25]; _d23||(_d23={}, g[_u25]=_d23, _d23.Polygon=[], _d23.Circle=[], _d23.LineString=[], _d23.Point=[]); var _f11=_n174.getType(); if ('GeometryCollection'===_f11) {
          var _t243=_n174.getGeometriesArrayRecursive(); for (var _e249=0, _i202=_t243.length; _e249<_i202; ++_e249) {
            var _i203=_t243[_e249]; _d23[_i203.getType().replace('Multi', '')].push(_i203, _s115);
          }
        } else _d23[_f11.replace('Multi', '')].push(_n174, _s115);
      }
    } var f=Object.keys(g).map(Number).sort(l); for (var _t244=0, _i204=f.length; _t244<_i204; ++_t244) {
      var _i205=g[f[_t244]]; for (var _t245 in _i205) {
        var _n175=_i205[_t245]; for (var _t246=0, _i206=_n175.length; _t246<_i206; _t246+=2) {
          c.setStyle(_n175[_t246+1]); for (var _i207=0, _r146=e.length; _i207<_r146; ++_i207)c.setTransform(e[_i207]), c.drawGeometry(_n175[_t246]);
        }
      }
    } return a.getImageData(0, 0, h.width, h.height);
  } function Rm(t, e, i) {
    var n=[]; if (i) {
      var _r147=Math.floor(Math.round(t[0])*Em); var _s116=Math.floor(Math.round(t[1])*Em); var _o105=4*(_i(_r147, 0, i.width-1)+_i(_s116, 0, i.height-1)*i.width); var _a64=i.data[_o105]; var _l45=i.data[_o105+1]; var _h42=i.data[_o105+2]+256*(_l45+256*_a64); var _c23=Math.floor(16777215/e.length); _h42&&_h42%_c23==0&&n.push(e[_h42/_c23-1]);
    } return n;
  } var bm=/* #__PURE__*/function(_hu3) {
    _inherits(bm, _hu3); var _super131=_createSuper(bm); function bm(t) {
      var _this150; _classCallCheck(this, bm); _this150=_super131.call(this, t), _this150.boundHandleStyleImageChange_=_this150.handleStyleImageChange_.bind(_assertThisInitialized(_this150)), _this150.animatingOrInteracting_, _this150.hitDetectionImageData_=null, _this150.renderedFeatures_=null, _this150.renderedRevision_=-1, _this150.renderedResolution_=NaN, _this150.renderedExtent_=[1/0, 1/0, -1/0, -1/0], _this150.wrappedRenderedExtent_=[1/0, 1/0, -1/0, -1/0], _this150.renderedRotation_, _this150.renderedCenter_=null, _this150.renderedProjection_=null, _this150.renderedRenderOrder_=null, _this150.replayGroup_=null, _this150.replayGroupChanged=!0, _this150.declutterExecutorGroup=null, _this150.clipping=!0, _this150.compositionContext_=null, _this150.opacity_=1; return _this150;
    }_createClass(bm, [{key: 'renderWorlds', value: function renderWorlds(t, e, i) {
      var n=e.extent; var r=e.viewState; var s=r.center; var o=r.resolution; var a=r.projection; var l=r.rotation; var h=a.getExtent(); var c=this.getLayer().getSource(); var u=e.pixelRatio; var d=e.viewHints; var g=!(d[Wo]||d[Zo]); var f=this.compositionContext_; var p=Math.round(e.size[0]*u); var m=Math.round(e.size[1]*u); var _=c.getWrapX()&&a.canWrapX(); var y=_?De(h):null; var x=_?Math.ceil((n[2]-h[2])/y)+1:1; var v=_?Math.floor((n[0]-h[0])/y):0; do {
        var _e250=this.getRenderTransform(s, o, l, u, p, m, v*y); t.execute(f, 1, _e250, l, g, void 0, i);
      } while (++v<x);
    }}, {key: 'setupCompositionContext_', value: function setupCompositionContext_() {
      if (1!==this.opacity_) {
        var _t247=_t(this.context.canvas.width, this.context.canvas.height, au); this.compositionContext_=_t247;
      } else this.compositionContext_=this.context;
    }}, {key: 'releaseCompositionContext_', value: function releaseCompositionContext_() {
      if (1!==this.opacity_) {
        var _t248=this.context.globalAlpha; this.context.globalAlpha=this.opacity_, this.context.drawImage(this.compositionContext_.canvas, 0, 0), this.context.globalAlpha=_t248, yt(this.compositionContext_), au.push(this.compositionContext_.canvas), this.compositionContext_=null;
      }
    }}, {key: 'renderDeclutter', value: function renderDeclutter(t) {
      this.declutterExecutorGroup&&(this.setupCompositionContext_(), this.renderWorlds(this.declutterExecutorGroup, t, t.declutterTree), this.releaseCompositionContext_());
    }}, {key: 'renderFrame', value: function renderFrame(t, e) {
      var i=t.pixelRatio; var n=t.layerStatesArray[t.layerIndex]; Vt(this.pixelTransform, 1/i, 1/i), Yt(this.inversePixelTransform, this.pixelTransform); var r=Ht(this.pixelTransform); this.useContainer(e, r, this.getBackground(t)); var s=this.context; var o=s.canvas; var a=this.replayGroup_; var l=this.declutterExecutorGroup; if ((!a||a.isEmpty())&&(!l||l.isEmpty())) return null; var h=Math.round(t.size[0]*i); var c=Math.round(t.size[1]*i); o.width!=h||o.height!=c?(o.width=h, o.height=c, o.style.transform!==r&&(o.style.transform=r)):this.containerReused||s.clearRect(0, 0, h, c), this.preRender(s, t); var u=t.viewState; var d=u.projection; this.opacity_=n.opacity, this.setupCompositionContext_(); var g=!1; var f=!0; if (n.extent&&this.clipping) {
        var _e251=Cn(n.extent, d); f=Ge(_e251, t.extent), g=f&&!le(_e251, t.extent), g&&this.clipUnrotated(this.compositionContext_, t, _e251);
      } return f&&this.renderWorlds(a, t), g&&this.compositionContext_.restore(), this.releaseCompositionContext_(), this.postRender(s, t), this.renderedRotation_!==u.rotation&&(this.renderedRotation_=u.rotation, this.hitDetectionImageData_=null), this.container;
    }}, {key: 'getFeatures', value: function getFeatures(t) {
      var _this151=this; return new Promise(function(e) {
        if (!_this151.hitDetectionImageData_&&!_this151.animatingOrInteracting_) {
          var _t249=[_this151.context.canvas.width, _this151.context.canvas.height]; zt(_this151.pixelTransform, _t249); var _e252=_this151.renderedCenter_; var _i208=_this151.renderedResolution_; var _n176=_this151.renderedRotation_; var _r148=_this151.renderedProjection_; var _s117=_this151.wrappedRenderedExtent_; var _o106=_this151.getLayer(); var _a65=[]; var _l46=_t249[0]*Em; var _h43=_t249[1]*Em; _a65.push(_this151.getRenderTransform(_e252, _i208, _n176, Em, _l46, _h43, 0).slice()); var _c24=_o106.getSource(); var _u26=_r148.getExtent(); if (_c24.getWrapX()&&_r148.canWrapX()&&!le(_u26, _s117)) {
            var _t250=_s117[0]; var _r149=De(_u26); var _o107; var _c25=0; for (;_t250<_u26[0];)--_c25, _o107=_r149*_c25, _a65.push(_this151.getRenderTransform(_e252, _i208, _n176, Em, _l46, _h43, _o107).slice()), _t250+=_r149; for (_c25=0, _t250=_s117[2]; _t250>_u26[2];)++_c25, _o107=_r149*_c25, _a65.push(_this151.getRenderTransform(_e252, _i208, _n176, Em, _l46, _h43, _o107).slice()), _t250-=_r149;
          }_this151.hitDetectionImageData_=Cm(_t249, _a65, _this151.renderedFeatures_, _o106.getStyleFunction(), _s117, _i208, _n176);
        }e(Rm(t, _this151.renderedFeatures_, _this151.hitDetectionImageData_));
      });
    }}, {key: 'forEachFeatureAtCoordinate', value: function forEachFeatureAtCoordinate(t, e, i, n, r) {
      var _this152=this; if (!this.replayGroup_) return; var s=e.viewState.resolution; var o=e.viewState.rotation; var a=this.getLayer(); var l={}; var h=function h(t, e, i) {
        var s=X(t); var o=l[s]; if (o) {
          if (!0!==o&&i<o.distanceSq) {
            if (0===i) return l[s]=!0, r.splice(r.lastIndexOf(o), 1), n(t, a, e); o.geometry=e, o.distanceSq=i;
          }
        } else {
          if (0===i) return l[s]=!0, n(t, a, e); r.push(l[s]={feature: t, layer: a, geometry: e, distanceSq: i, callback: n});
        }
      }; var c; var u=[this.replayGroup_]; return this.declutterExecutorGroup&&u.push(this.declutterExecutorGroup), u.some(function(n) {
        return c=n.forEachFeatureAtCoordinate(t, s, o, i, h, n===_this152.declutterExecutorGroup&&e.declutterTree?e.declutterTree.all().map(function(t) {
          return t.value;
        }):null);
      }), c;
    }}, {key: 'handleFontsChanged', value: function handleFontsChanged() {
      var t=this.getLayer(); t.getVisible()&&this.replayGroup_&&t.changed();
    }}, {key: 'handleStyleImageChange_', value: function handleStyleImageChange_(t) {
      this.renderIfReadyAndVisible();
    }}, {key: 'prepareFrame', value: function prepareFrame(t) {
      var _this153=this; var e=this.getLayer(); var i=e.getSource(); if (!i) return !1; var n=t.viewHints[Wo]; var r=t.viewHints[Zo]; var s=e.getUpdateWhileAnimating(); var o=e.getUpdateWhileInteracting(); if (this.ready&&!s&&n||!o&&r) return this.animatingOrInteracting_=!0, !0; this.animatingOrInteracting_=!1; var a=t.extent; var l=t.viewState; var h=l.projection; var c=l.resolution; var u=t.pixelRatio; var g=e.getRevision(); var f=e.getRenderBuffer(); var p=e.getRenderOrder(); void 0===p&&(p=Yl); var m=l.center.slice(); var _=re(a, f*c); var y=_.slice(); var x=[_.slice()]; var v=h.getExtent(); if (i.getWrapX()&&h.canWrapX()&&!le(v, t.extent)) {
        var _t251=De(v); var _e253=Math.max(De(_)/2, _t251); _[0]=v[0]-_e253, _[2]=v[2]+_e253, Xi(m, h); var _i209=Xe(x[0], h); _i209[0]<v[0]&&_i209[2]<v[2]?x.push([_i209[0]+_t251, _i209[1], _i209[2]+_t251, _i209[3]]):_i209[0]>v[0]&&_i209[2]>v[2]&&x.push([_i209[0]-_t251, _i209[1], _i209[2]-_t251, _i209[3]]);
      } if (this.ready&&this.renderedResolution_==c&&this.renderedRevision_==g&&this.renderedRenderOrder_==p&&le(this.wrappedRenderedExtent_, _)) return d(this.renderedExtent_, y)||(this.hitDetectionImageData_=null, this.renderedExtent_=y), this.renderedCenter_=m, this.replayGroupChanged=!1, !0; this.replayGroup_=null; var S=new am(ql(c, u), _, c, u); var w; this.getLayer().getDeclutter()&&(w=new am(ql(c, u), _, c, u)); var T=Sn(); var E; if (T) {
        for (var _t252=0, _e254=x.length; _t252<_e254; ++_t252) {
          var _e255=En(x[_t252], h); i.loadFeatures(_e255, Rn(c, h), T);
        }E=pn(T, h);
      } else for (var _t253=0, _e256=x.length; _t253<_e256; ++_t253)i.loadFeatures(x[_t253], c, h); var C=Kl(c, u); var R=!0; var b=function b(t) {
        var i; var n=t.getStyleFunction()||e.getStyleFunction(); if (n&&(i=n(t, c)), i) {
          var _e257=_this153.renderFeature(t, C, i, S, E, w); R=R&&!_e257;
        }
      }; var P=En(_, h); var I=i.getFeaturesInExtent(P); p&&I.sort(p); for (var _t254=0, _e258=I.length; _t254<_e258; ++_t254)b(I[_t254]); this.renderedFeatures_=I, this.ready=R; var L=S.finish(); var F=new Tm(_, c, u, i.getOverlaps(), L, e.getRenderBuffer()); return w&&(this.declutterExecutorGroup=new Tm(_, c, u, i.getOverlaps(), w.finish(), e.getRenderBuffer())), this.renderedResolution_=c, this.renderedRevision_=g, this.renderedRenderOrder_=p, this.renderedExtent_=y, this.wrappedRenderedExtent_=_, this.renderedCenter_=m, this.renderedProjection_=h, this.replayGroup_=F, this.hitDetectionImageData_=null, this.replayGroupChanged=!0, !0;
    }}, {key: 'renderFeature', value: function renderFeature(t, e, i, n, r, s) {
      if (!i) return !1; var o=!1; if (Array.isArray(i)) for (var _a66=0, _l47=i.length; _a66<_l47; ++_a66)o=Hl(n, t, i[_a66], e, this.boundHandleStyleImageChange_, r, s)||o; else o=Hl(n, t, i, e, this.boundHandleStyleImageChange_, r, s); return o;
    }}]); return bm;
  }(hu); var Pm=/* #__PURE__*/function(_cu) {
    _inherits(Pm, _cu); var _super132=_createSuper(Pm); function Pm(t) {
      var _this154; _classCallCheck(this, Pm); _this154=_super132.call(this, t), _this154.vectorRenderer_=new bm(t), _this154.layerImageRatio_=t.getImageRatio(), _this154.coordinateToVectorPixelTransform_=[1, 0, 0, 1, 0, 0], _this154.renderedPixelToCoordinateTransform_=null; return _this154;
    }_createClass(Pm, [{key: 'disposeInternal', value: function disposeInternal() {
      this.vectorRenderer_.dispose(), _get(_getPrototypeOf(Pm.prototype), 'disposeInternal', this).call(this);
    }}, {key: 'getFeatures', value: function getFeatures(t) {
      if (!this.vectorRenderer_) return Promise.resolve([]); var e=zt(this.coordinateToVectorPixelTransform_, zt(this.renderedPixelToCoordinateTransform_, t.slice())); return this.vectorRenderer_.getFeatures(e);
    }}, {key: 'handleFontsChanged', value: function handleFontsChanged() {
      this.vectorRenderer_.handleFontsChanged();
    }}, {key: 'prepareFrame', value: function prepareFrame(t) {
      var _this155=this; var e=t.pixelRatio; var i=t.viewState; var n=i.resolution; var r=t.viewHints; var s=this.vectorRenderer_; var o=t.extent; 1!==this.layerImageRatio_&&(o=o.slice(0), Be(o, this.layerImageRatio_)); var a=De(o)/n; var l=Me(o)/n; if (!r[Wo]&&!r[Zo]&&!ke(o)) {
        s.useContainer(null, null); var _r150=s.context; var _h44=t.layerStatesArray[t.layerIndex]; _r150.globalAlpha=_h44.opacity; var _c26=Object.assign({}, _h44, {opacity: 1}); var _u27=Object.assign({}, t, {declutterTree: new Uh(9), extent: o, size: [a, l], viewState: Object.assign({}, t.viewState, {rotation: 0}), layerStatesArray: [_c26], layerIndex: 0}); var _d24=!0; var _g15=new ss(o, n, e, _r150.canvas, function(t) {
          s.prepareFrame(_u27)&&s.replayGroupChanged&&(s.clipping=!1, s.renderFrame(_u27, null)&&(s.renderDeclutter(_u27), _d24=!1), t());
        }); _g15.addEventListener(w, function() {
          if (_g15.getState()!==ts) return; _this155.image_=_d24?null:_g15; var t=_g15.getResolution(); var n=_g15.getPixelRatio(); var r=t*e/n; _this155.renderedResolution=r, _this155.coordinateToVectorPixelTransform_=Zt(_this155.coordinateToVectorPixelTransform_, a/2, l/2, 1/r, -1/r, 0, -i.center[0], -i.center[1]);
        }), _g15.load();
      } return this.image_&&(this.renderedPixelToCoordinateTransform_=t.pixelToCoordinateTransform.slice()), !!this.image_;
    }}, {key: 'preRender', value: function preRender() {}}, {key: 'postRender', value: function postRender() {}}, {key: 'renderDeclutter', value: function renderDeclutter() {}}, {key: 'forEachFeatureAtCoordinate', value: function forEachFeatureAtCoordinate(t, e, i, n, r) {
      return this.vectorRenderer_?this.vectorRenderer_.forEachFeatureAtCoordinate(t, e, i, n, r):_get(_getPrototypeOf(Pm.prototype), 'forEachFeatureAtCoordinate', this).call(this, t, e, i, n, r);
    }}]); return Pm;
  }(cu); var Im={image: ['Polygon', 'Circle', 'LineString', 'Image', 'Text'], hybrid: ['Polygon', 'LineString'], vector: []}; var Lm={hybrid: ['Image', 'Text', 'Default'], vector: ['Polygon', 'Circle', 'LineString', 'Image', 'Text', 'Default']}; var Fm=/* #__PURE__*/function(_pu) {
    _inherits(Fm, _pu); var _super133=_createSuper(Fm); function Fm(t) {
      var _this156; _classCallCheck(this, Fm); _this156=_super133.call(this, t), _this156.boundHandleStyleImageChange_=_this156.handleStyleImageChange_.bind(_assertThisInitialized(_this156)), _this156.renderedLayerRevision_, _this156.renderedPixelToCoordinateTransform_=null, _this156.renderedRotation_, _this156.tmpTransform_=[1, 0, 0, 1, 0, 0]; return _this156;
    }_createClass(Fm, [{key: 'prepareTile', value: function prepareTile(t, e, i) {
      var n; var r=t.getState(); return r!==Q&&r!==tt||(this.updateExecutorGroup_(t, e, i), this.tileImageNeedsRender_(t)&&(n=!0)), n;
    }}, {key: 'getTile', value: function getTile(t, e, i, n) {
      var r=n.pixelRatio; var s=n.viewState; var o=s.resolution; var a=s.projection; var l=this.getLayer(); var h=l.getSource().getTile(t, e, i, r, a); var c=n.viewHints; var u=!(c[Wo]||c[Zo]); !u&&h.wantedResolution||(h.wantedResolution=o); return this.prepareTile(h, r, a)&&(u||Date.now()-n.time<8)&&'vector'!==l.getRenderMode()&&this.renderTileImage_(h, n), _get(_getPrototypeOf(Fm.prototype), 'getTile', this).call(this, t, e, i, n);
    }}, {key: 'isDrawableTile', value: function isDrawableTile(t) {
      var e=this.getLayer(); return _get(_getPrototypeOf(Fm.prototype), 'isDrawableTile', this).call(this, t)&&('vector'===e.getRenderMode()?X(e)in t.executorGroups:t.hasContext(e));
    }}, {key: 'getTileImage', value: function getTileImage(t) {
      return t.getImage(this.getLayer());
    }}, {key: 'prepareFrame', value: function prepareFrame(t) {
      var e=this.getLayer().getRevision(); return this.renderedLayerRevision_!==e&&(this.renderedLayerRevision_=e, this.renderedTiles.length=0), _get(_getPrototypeOf(Fm.prototype), 'prepareFrame', this).call(this, t);
    }}, {key: 'updateExecutorGroup_', value: function updateExecutorGroup_(t, e, i) {
      var _this157=this; var n=this.getLayer(); var r=n.getRevision(); var s=n.getRenderOrder()||null; var o=t.wantedResolution; var a=t.getReplayState(n); if (!a.dirty&&a.renderedResolution===o&&a.renderedRevision==r&&a.renderedRenderOrder==s) return; var l=n.getSource(); var h=n.getDeclutter(); var c=l.getTileGrid(); var u=l.getTileGridForProjection(i).getTileCoordExtent(t.wrappedTileCoord); var d=l.getSourceTiles(e, i, t); var g=X(n); delete t.hitDetectionImageData[g], t.executorGroups[g]=[], h&&(t.declutterExecutorGroups[g]=[]), a.dirty=!1; var _loop4=function _loop4() {
        var r=d[_i210]; if (r.getState()!=Q) return 'continue'; var f=r.tileCoord; var p=c.getTileCoordExtent(f); var m=Ae(u, p); var _=re(m, n.getRenderBuffer()*o, _this157.tmpExtent); var y=me(p, m)?null:_; var x=new am(0, _, o, e); var v=h?new am(0, m, o, e):void 0; var S=Kl(o, e); var w=function w(t) {
          var e; var i=t.getStyleFunction()||n.getStyleFunction(); if (i&&(e=i(t, o)), e) {
            var _i211=this.renderFeature(t, S, e, x, v); a.dirty=a.dirty||_i211;
          }
        }; var T=r.getFeatures(); s&&s!==a.renderedRenderOrder&&T.sort(s); for (var _t255=0, _e259=T.length; _t255<_e259; ++_t255) {
          var _e260=T[_t255]; y&&!Ge(y, _e260.getGeometry().getExtent())||w.call(_this157, _e260);
        } var E=x.finish(); var C='vector'!==n.getRenderMode()&&h&&1===d.length?null:m; var R=new Tm(C, o, e, l.getOverlaps(), E, n.getRenderBuffer()); if (t.executorGroups[g].push(R), v) {
          var _i212=new Tm(null, o, e, l.getOverlaps(), v.finish(), n.getRenderBuffer()); t.declutterExecutorGroups[g].push(_i212);
        }
      }; for (var _i210=0, _r151=d.length; _i210<_r151; ++_i210) {
        var _ret=_loop4(); if (_ret==='continue') continue;
      }a.renderedRevision=r, a.renderedRenderOrder=s, a.renderedResolution=o;
    }}, {key: 'forEachFeatureAtCoordinate', value: function forEachFeatureAtCoordinate(t, e, i, n, r) {
      var s=e.viewState.resolution; var o=e.viewState.rotation; i=null==i?0:i; var a=this.getLayer(); var l=a.getSource().getTileGridForProjection(e.viewState.projection); var h=ne([t]); re(h, s*i, h); var c={}; var u=function u(t, e, i) {
        var s=t.getId(); void 0===s&&(s=X(t)); var o=c[s]; if (o) {
          if (!0!==o&&i<o.distanceSq) {
            if (0===i) return c[s]=!0, r.splice(r.lastIndexOf(o), 1), n(t, a, e); o.geometry=e, o.distanceSq=i;
          }
        } else {
          if (0===i) return c[s]=!0, n(t, a, e); r.push(c[s]={feature: t, layer: a, geometry: e, distanceSq: i, callback: n});
        }
      }; var d=this.renderedTiles; var g; var _loop5=function _loop5() {
        var r=d[_n177]; if (!Ge(l.getTileCoordExtent(r.wrappedTileCoord), h)) return 'continue'; var c=X(a); var f=[r.executorGroups[c]]; var p=r.declutterExecutorGroups[c]; p&&f.push(p), f.some(function(n) {
          var r=n===p?e.declutterTree.all().map(function(t) {
            return t.value;
          }):null; for (var _e261=0, _a67=n.length; _e261<_a67; ++_e261) {
            var _a68=n[_e261]; if (g=_a68.forEachFeatureAtCoordinate(t, s, o, i, u, r), g) return !0;
          }
        });
      }; for (var _n177=0, _r152=d.length; !g&&_n177<_r152; ++_n177) {
        var _ret2=_loop5(); if (_ret2==='continue') continue;
      } return g;
    }}, {key: 'getFeatures', value: function getFeatures(t) {
      var _this158=this; return new Promise(function(e, i) {
        var n=_this158.getLayer(); var r=X(n); var s=n.getSource(); var o=_this158.renderedProjection; var a=o.getExtent(); var l=_this158.renderedResolution; var h=s.getTileGridForProjection(o); var c=zt(_this158.renderedPixelToCoordinateTransform_, t.slice()); var u=h.getTileCoordForCoordAndResolution(c, l); var d; for (var _t256=0, _e262=_this158.renderedTiles.length; _t256<_e262; ++_t256) {
          if (u.toString()===_this158.renderedTiles[_t256].tileCoord.toString()) {
            if (d=_this158.renderedTiles[_t256], d.getState()===Q) {
              var _t257=h.getTileCoordExtent(d.tileCoord); s.getWrapX()&&o.canWrapX()&&!le(a, _t257)&&Xi(c, o); break;
            }d=void 0;
          }
        } if (!d||d.loadingSourceTiles>0) return void e([]); var g=Oe(h.getTileCoordExtent(d.wrappedTileCoord)); var f=[(c[0]-g[0])/l, (g[1]-c[1])/l]; var p=d.getSourceTiles().reduce(function(t, e) {
          return t.concat(e.getFeatures());
        }, []); var m=d.hitDetectionImageData[r]; if (!m) {
          var _t258=ll(h.getTileSize(h.getZForResolution(l, s.zDirection))); var _e263=_this158.renderedRotation_; m=Cm(_t258, [_this158.getRenderTransform(h.getTileCoordCenter(d.wrappedTileCoord), l, 0, Em, _t258[0]*Em, _t258[1]*Em, 0)], p, n.getStyleFunction(), h.getTileCoordExtent(d.wrappedTileCoord), d.getReplayState(n).renderedResolution, _e263), d.hitDetectionImageData[r]=m;
        }e(Rm(f, p, m));
      });
    }}, {key: 'handleFontsChanged', value: function handleFontsChanged() {
      var t=this.getLayer(); t.getVisible()&&void 0!==this.renderedLayerRevision_&&t.changed();
    }}, {key: 'handleStyleImageChange_', value: function handleStyleImageChange_(t) {
      this.renderIfReadyAndVisible();
    }}, {key: 'renderDeclutter', value: function renderDeclutter(t) {
      var e=this.context; var i=e.globalAlpha; e.globalAlpha=this.getLayer().getOpacity(); var n=t.viewHints; var r=!(n[Wo]||n[Zo]); var s=this.renderedTiles; for (var _e264=0, _i213=s.length; _e264<_i213; ++_e264) {
        var _i214=s[_e264]; var _n178=_i214.declutterExecutorGroups[X(this.getLayer())]; if (_n178) for (var _e265=_n178.length-1; _e265>=0; --_e265)_n178[_e265].execute(this.context, 1, this.getTileRenderTransform(_i214, t), t.viewState.rotation, r, void 0, t.declutterTree);
      }e.globalAlpha=i;
    }}, {key: 'getTileRenderTransform', value: function getTileRenderTransform(t, e) {
      var i=e.pixelRatio; var n=e.viewState; var r=n.center; var s=n.resolution; var o=n.rotation; var a=e.size; var l=Math.round(a[0]*i); var h=Math.round(a[1]*i); var c=this.getLayer().getSource().getTileGridForProjection(e.viewState.projection); var u=t.tileCoord; var d=c.getTileCoordExtent(t.wrappedTileCoord); var g=c.getTileCoordExtent(u, this.tmpExtent)[0]-d[0]; return kt(Xt(this.inversePixelTransform.slice(), 1/i, 1/i), this.getRenderTransform(r, s, o, i, l, h, g));
    }}, {key: 'postRender', value: function postRender(t, e) {
      var i=e.viewHints; var n=!(i[Wo]||i[Zo]); this.renderedPixelToCoordinateTransform_=e.pixelToCoordinateTransform.slice(), this.renderedRotation_=e.viewState.rotation; var r=this.getLayer(); var s=r.getRenderMode(); var o=t.globalAlpha; t.globalAlpha=r.getOpacity(); var a=Lm[s]; var l=e.viewState; var h=l.rotation; var c=r.getSource(); var u=c.getTileGridForProjection(l.projection).getZForResolution(l.resolution, c.zDirection); var d=this.renderedTiles; var g=[]; var f=[]; var p=!0; for (var _i215=d.length-1; _i215>=0; --_i215) {
        var _s118=d[_i215]; p=p&&!_s118.getReplayState(r).dirty; var _o108=_s118.executorGroups[X(r)].filter(function(t) {
          return t.hasExecutors(a);
        }); if (0===_o108.length) continue; var _l48=this.getTileRenderTransform(_s118, e); var _c27=_s118.tileCoord[0]; var _m8=!1; var _6=_o108[0].getClipCoords(_l48); if (_6) {
          for (var _e266=0, _i216=g.length; _e266<_i216; ++_e266) {
            if (u!==_c27&&_c27<f[_e266]) {
              var _i217=g[_e266]; Ge([_6[0], _6[3], _6[4], _6[7]], [_i217[0], _i217[3], _i217[4], _i217[7]])&&(_m8||(t.save(), _m8=!0), t.beginPath(), t.moveTo(_6[0], _6[1]), t.lineTo(_6[2], _6[3]), t.lineTo(_6[4], _6[5]), t.lineTo(_6[6], _6[7]), t.moveTo(_i217[6], _i217[7]), t.lineTo(_i217[4], _i217[5]), t.lineTo(_i217[2], _i217[3]), t.lineTo(_i217[0], _i217[1]), t.clip());
            }
          }g.push(_6), f.push(_c27);
        } for (var _e267=0, _i218=_o108.length; _e267<_i218; ++_e267) {
          _o108[_e267].execute(t, 1, _l48, h, n, a);
        }_m8&&t.restore();
      }t.globalAlpha=o, this.ready=p, _get(_getPrototypeOf(Fm.prototype), 'postRender', this).call(this, t, e);
    }}, {key: 'renderFeature', value: function renderFeature(t, e, i, n, r) {
      if (!i) return !1; var s=!1; if (Array.isArray(i)) for (var _o109=0, _a69=i.length; _o109<_a69; ++_o109)s=Hl(n, t, i[_o109], e, this.boundHandleStyleImageChange_, void 0, r)||s; else s=Hl(n, t, i, e, this.boundHandleStyleImageChange_, void 0, r); return s;
    }}, {key: 'tileImageNeedsRender_', value: function tileImageNeedsRender_(t) {
      var e=this.getLayer(); if ('vector'===e.getRenderMode()) return !1; var i=t.getReplayState(e); var n=e.getRevision(); var r=t.wantedResolution; return i.renderedTileResolution!==r||i.renderedTileRevision!==n;
    }}, {key: 'renderTileImage_', value: function renderTileImage_(t, e) {
      var i=this.getLayer(); var n=t.getReplayState(i); var r=i.getRevision(); var s=t.executorGroups[X(i)]; n.renderedTileRevision=r; var o=t.wrappedTileCoord; var a=o[0]; var l=i.getSource(); var h=e.pixelRatio; var c=e.viewState.projection; var u=l.getTileGridForProjection(c); var d=u.getResolution(t.tileCoord[0]); var g=e.pixelRatio/t.wantedResolution*d; var f=u.getResolution(a); var p=t.getContext(i); h=Math.round(Math.max(h, g/h)); var m=l.getTilePixelSize(a, h, c); p.canvas.width=m[0], p.canvas.height=m[1]; var _=h/g; if (1!==_) {
        var _t259=Gt(this.tmpTransform_); Xt(_t259, _, _), p.setTransform.apply(p, _t259);
      } var y=u.getTileCoordExtent(o, this.tmpExtent); var x=g/f; var v=Gt(this.tmpTransform_); Xt(v, x, -x), Wt(v, -y[0], -y[3]); for (var _t260=0, _e268=s.length; _t260<_e268; ++_t260) {
        s[_t260].execute(p, _, v, 0, !0, Im[i.getRenderMode()]);
      }n.renderedTileResolution=t.wantedResolution;
    }}]); return Fm;
  }(pu); var Mm=/* #__PURE__*/function(_kn4) {
    _inherits(Mm, _kn4); var _super134=_createSuper(Mm); function Mm(t, e, i) {
      var _this159; _classCallCheck(this, Mm); _this159=_super134.call(this), void 0!==i&&void 0===e?_this159.setFlatCoordinates(i, t):(e=e||0, _this159.setCenterAndRadius(t, e, i)); return _this159;
    }_createClass(Mm, [{key: 'clone', value: function clone() {
      var t=new Mm(this.flatCoordinates.slice(), void 0, this.layout); return t.applyProperties(this), t;
    }}, {key: 'closestPointXY', value: function closestPointXY(t, e, i, n) {
      var r=this.flatCoordinates; var s=t-r[0]; var o=e-r[1]; var a=s*s+o*o; if (a<n) {
        if (0===a) for (var _t261=0; _t261<this.stride; ++_t261)i[_t261]=r[_t261]; else {
          var _t262=this.getRadius()/Math.sqrt(a); i[0]=r[0]+_t262*s, i[1]=r[1]+_t262*o; for (var _t263=2; _t263<this.stride; ++_t263)i[_t263]=r[_t263];
        } return i.length=this.stride, a;
      } return n;
    }}, {key: 'containsXY', value: function containsXY(t, e) {
      var i=this.flatCoordinates; var n=t-i[0]; var r=e-i[1]; return n*n+r*r<=this.getRadiusSquared_();
    }}, {key: 'getCenter', value: function getCenter() {
      return this.flatCoordinates.slice(0, this.stride);
    }}, {key: 'computeExtent', value: function computeExtent(t) {
      var e=this.flatCoordinates; var i=e[this.stride]-e[0]; return de(e[0]-i, e[1]-i, e[0]+i, e[1]+i, t);
    }}, {key: 'getRadius', value: function getRadius() {
      return Math.sqrt(this.getRadiusSquared_());
    }}, {key: 'getRadiusSquared_', value: function getRadiusSquared_() {
      var t=this.flatCoordinates[this.stride]-this.flatCoordinates[0]; var e=this.flatCoordinates[this.stride+1]-this.flatCoordinates[1]; return t*t+e*e;
    }}, {key: 'getType', value: function getType() {
      return 'Circle';
    }}, {key: 'intersectsExtent', value: function intersectsExtent(t) {
      if (Ge(t, this.getExtent())) {
        var _e269=this.getCenter(); return t[0]<=_e269[0]&&t[2]>=_e269[0]||t[1]<=_e269[1]&&t[3]>=_e269[1]||Ee(t, this.intersectsCoordinate.bind(this));
      } return !1;
    }}, {key: 'setCenter', value: function setCenter(t) {
      var e=this.stride; var i=this.flatCoordinates[e]-this.flatCoordinates[0]; var n=t.slice(); n[e]=n[0]+i; for (var _i219=1; _i219<e; ++_i219)n[e+_i219]=t[_i219]; this.setFlatCoordinates(this.layout, n), this.changed();
    }}, {key: 'setCenterAndRadius', value: function setCenterAndRadius(t, e, i) {
      this.setLayout(i, t, 0), this.flatCoordinates||(this.flatCoordinates=[]); var n=this.flatCoordinates; var r=Zn(n, 0, t, this.stride); n[r++]=n[0]+e; for (var _t264=1, _e270=this.stride; _t264<_e270; ++_t264)n[r++]=n[_t264]; n.length=r, this.changed();
    }}, {key: 'getCoordinates', value: function getCoordinates() {
      return null;
    }}, {key: 'setCoordinates', value: function setCoordinates(t, e) {}}, {key: 'setRadius', value: function setRadius(t) {
      this.flatCoordinates[this.stride]=this.flatCoordinates[0]+t, this.changed();
    }}, {key: 'rotate', value: function rotate(t, e) {
      var i=this.getCenter(); var n=this.getStride(); this.setCenter(Fn(i, 0, i.length, n, t, e, i)), this.changed();
    }}, {key: 'translate', value: function translate(t, e) {
      var i=this.getCenter(); var n=this.getStride(); this.setCenter(An(i, 0, i.length, n, t, e, i)), this.changed();
    }}]); return Mm;
  }(kn); Mm.prototype.transform; var Am=Mm; var Om=/* #__PURE__*/function(_Nn2) {
    _inherits(Om, _Nn2); var _super135=_createSuper(Om); function Om(t) {
      var _this160; _classCallCheck(this, Om); _this160=_super135.call(this), _this160.geometries_=t||null, _this160.changeEventsKeys_=[], _this160.listenGeometriesChange_(); return _this160;
    }_createClass(Om, [{key: 'unlistenGeometriesChange_', value: function unlistenGeometriesChange_() {
      this.changeEventsKeys_.forEach(G), this.changeEventsKeys_.length=0;
    }}, {key: 'listenGeometriesChange_', value: function listenGeometriesChange_() {
      if (this.geometries_) for (var _t265=0, _e271=this.geometries_.length; _t265<_e271; ++_t265) this.changeEventsKeys_.push(N(this.geometries_[_t265], w, this.changed, this));
    }}, {key: 'clone', value: function clone() {
      var t=new Om(null); return t.setGeometries(this.geometries_), t.applyProperties(this), t;
    }}, {key: 'closestPointXY', value: function closestPointXY(t, e, i, n) {
      if (n<oe(this.getExtent(), t, e)) return n; var r=this.geometries_; for (var _s119=0, _o110=r.length; _s119<_o110; ++_s119)n=r[_s119].closestPointXY(t, e, i, n); return n;
    }}, {key: 'containsXY', value: function containsXY(t, e) {
      var i=this.geometries_; for (var _n179=0, _r153=i.length; _n179<_r153; ++_n179) if (i[_n179].containsXY(t, e)) return !0; return !1;
    }}, {key: 'computeExtent', value: function computeExtent(t) {
      ge(t); var e=this.geometries_; for (var _i220=0, _n180=e.length; _i220<_n180; ++_i220)ye(t, e[_i220].getExtent()); return t;
    }}, {key: 'getGeometries', value: function getGeometries() {
      return Nm(this.geometries_);
    }}, {key: 'getGeometriesArray', value: function getGeometriesArray() {
      return this.geometries_;
    }}, {key: 'getGeometriesArrayRecursive', value: function getGeometriesArrayRecursive() {
      var t=[]; var e=this.geometries_; for (var _i221=0, _n181=e.length; _i221<_n181; ++_i221)e[_i221].getType()===this.getType()?t=t.concat(e[_i221].getGeometriesArrayRecursive()):t.push(e[_i221]); return t;
    }}, {key: 'getSimplifiedGeometry', value: function getSimplifiedGeometry(t) {
      if (this.simplifiedGeometryRevision!==this.getRevision()&&(this.simplifiedGeometryMaxMinSquaredTolerance=0, this.simplifiedGeometryRevision=this.getRevision()), t<0||0!==this.simplifiedGeometryMaxMinSquaredTolerance&&t<this.simplifiedGeometryMaxMinSquaredTolerance) return this; var e=[]; var i=this.geometries_; var n=!1; for (var _r154=0, _s120=i.length; _r154<_s120; ++_r154) {
        var _s121=i[_r154]; var _o111=_s121.getSimplifiedGeometry(t); e.push(_o111), _o111!==_s121&&(n=!0);
      } if (n) {
        var _t266=new Om(null); return _t266.setGeometriesArray(e), _t266;
      } return this.simplifiedGeometryMaxMinSquaredTolerance=t, this;
    }}, {key: 'getType', value: function getType() {
      return 'GeometryCollection';
    }}, {key: 'intersectsExtent', value: function intersectsExtent(t) {
      var e=this.geometries_; for (var _i222=0, _n182=e.length; _i222<_n182; ++_i222) if (e[_i222].intersectsExtent(t)) return !0; return !1;
    }}, {key: 'isEmpty', value: function isEmpty() {
      return 0===this.geometries_.length;
    }}, {key: 'rotate', value: function rotate(t, e) {
      var i=this.geometries_; for (var _n183=0, _r155=i.length; _n183<_r155; ++_n183)i[_n183].rotate(t, e); this.changed();
    }}, {key: 'scale', value: function scale(t, e, i) {
      i||(i=Pe(this.getExtent())); var n=this.geometries_; for (var _r156=0, _s122=n.length; _r156<_s122; ++_r156)n[_r156].scale(t, e, i); this.changed();
    }}, {key: 'setGeometries', value: function setGeometries(t) {
      this.setGeometriesArray(Nm(t));
    }}, {key: 'setGeometriesArray', value: function setGeometriesArray(t) {
      this.unlistenGeometriesChange_(), this.geometries_=t, this.listenGeometriesChange_(), this.changed();
    }}, {key: 'applyTransform', value: function applyTransform(t) {
      var e=this.geometries_; for (var _i223=0, _n184=e.length; _i223<_n184; ++_i223)e[_i223].applyTransform(t); this.changed();
    }}, {key: 'translate', value: function translate(t, e) {
      var i=this.geometries_; for (var _n185=0, _r157=i.length; _n185<_r157; ++_n185)i[_n185].translate(t, e); this.changed();
    }}, {key: 'disposeInternal', value: function disposeInternal() {
      this.unlistenGeometriesChange_(), _get(_getPrototypeOf(Om.prototype), 'disposeInternal', this).call(this);
    }}]); return Om;
  }(Nn); function Nm(t) {
    var e=[]; for (var _i224=0, _n186=t.length; _i224<_n186; ++_i224)e.push(t[_i224].clone()); return e;
  } var Dm=Om; function Gm(t, e, i, n, r, s, o) {
    var l; var h; var c=(i-e)/n; if (1===c)l=e; else if (2===c)l=e, h=r; else if (0!==c) {
      var _s123=t[e]; var _o112=t[e+1]; var _c28=0; var _u28=[0]; for (var _r158=e+n; _r158<i; _r158+=n) {
        var _e272=t[_r158]; var _i225=t[_r158+1]; _c28+=Math.sqrt((_e272-_s123)*(_e272-_s123)+(_i225-_o112)*(_i225-_o112)), _u28.push(_c28), _s123=_e272, _o112=_i225;
      } var _d25=r*_c28; var _g16=a(_u28, _d25); _g16<0?(h=(_d25-_u28[-_g16-2])/(_u28[-_g16-1]-_u28[-_g16-2]), l=e+(-_g16-2)*n):l=e+_g16*n;
    }o=o>1?o:2, s=s||new Array(o); for (var _e273=0; _e273<o; ++_e273)s[_e273]=void 0===l?NaN:void 0===h?t[l+_e273]:Ei(t[l+_e273], t[l+n+_e273], h); return s;
  } function km(t, e, i, n, r, s) {
    if (i==e) return null; var o; if (r<t[e+n-1]) return s?(o=t.slice(e, e+n), o[n-1]=r, o):null; if (t[i-1]<r) return s?(o=t.slice(i-n, i), o[n-1]=r, o):null; if (r==t[e+n-1]) return t.slice(e, e+n); var a=e/n; var l=i/n; for (;a<l;) {
      var _e274=a+l>>1; r<t[(_e274+1)*n-1]?l=_e274:a=_e274+1;
    } var h=t[a*n-1]; if (r==h) return t.slice((a-1)*n, (a-1)*n+n); var c=(r-h)/(t[(a+1)*n-1]-h); o=[]; for (var _e275=0; _e275<n-1; ++_e275)o.push(Ei(t[(a-1)*n+_e275], t[a*n+_e275], c)); return o.push(r), o;
  } function jm(t, e, i, n, r, s, o) {
    if (o) return km(t, e, i[i.length-1], n, r, s); var a; if (r<t[n-1]) return s?(a=t.slice(0, n), a[n-1]=r, a):null; if (t[t.length-1]<r) return s?(a=t.slice(t.length-n), a[n-1]=r, a):null; for (var _s124=0, _o113=i.length; _s124<_o113; ++_s124) {
      var _o114=i[_s124]; if (e!=_o114) {
        if (r<t[e+n-1]) return null; if (r<=t[_o114-1]) return km(t, e, _o114, n, r, !1); e=_o114;
      }
    } return null;
  } var Bm=/* #__PURE__*/function(_kn5) {
    _inherits(Bm, _kn5); var _super136=_createSuper(Bm); function Bm(t, e) {
      var _this161; _classCallCheck(this, Bm); _this161=_super136.call(this), _this161.flatMidpoint_=null, _this161.flatMidpointRevision_=-1, _this161.maxDelta_=-1, _this161.maxDeltaRevision_=-1, void 0===e||Array.isArray(t[0])?_this161.setCoordinates(t, e):_this161.setFlatCoordinates(e, t); return _this161;
    }_createClass(Bm, [{key: 'appendCoordinate', value: function appendCoordinate(t) {
this.flatCoordinates?u(this.flatCoordinates, t):this.flatCoordinates=t.slice(), this.changed();
    }}, {key: 'clone', value: function clone() {
      var t=new Bm(this.flatCoordinates.slice(), this.layout); return t.applyProperties(this), t;
    }}, {key: 'closestPointXY', value: function closestPointXY(t, e, i, n) {
      return n<oe(this.getExtent(), t, e)?n:(this.maxDeltaRevision_!=this.getRevision()&&(this.maxDelta_=Math.sqrt(Bn(this.flatCoordinates, 0, this.flatCoordinates.length, this.stride, 0)), this.maxDeltaRevision_=this.getRevision()), Xn(this.flatCoordinates, 0, this.flatCoordinates.length, this.stride, this.maxDelta_, !1, t, e, i, n));
    }}, {key: 'forEachSegment', value: function forEachSegment(t) {
      return xr(this.flatCoordinates, 0, this.flatCoordinates.length, this.stride, t);
    }}, {key: 'getCoordinateAtM', value: function getCoordinateAtM(t, e) {
      return 'XYM'!=this.layout&&'XYZM'!=this.layout?null:(e=void 0!==e&&e, km(this.flatCoordinates, 0, this.flatCoordinates.length, this.stride, t, e));
    }}, {key: 'getCoordinates', value: function getCoordinates() {
      return nr(this.flatCoordinates, 0, this.flatCoordinates.length, this.stride);
    }}, {key: 'getCoordinateAt', value: function getCoordinateAt(t, e) {
      return Gm(this.flatCoordinates, 0, this.flatCoordinates.length, this.stride, t, e, this.stride);
    }}, {key: 'getLength', value: function getLength() {
      return hm(this.flatCoordinates, 0, this.flatCoordinates.length, this.stride);
    }}, {key: 'getFlatMidpoint', value: function getFlatMidpoint() {
      return this.flatMidpointRevision_!=this.getRevision()&&(this.flatMidpoint_=this.getCoordinateAt(.5, this.flatMidpoint_), this.flatMidpointRevision_=this.getRevision()), this.flatMidpoint_;
    }}, {key: 'getSimplifiedGeometryInternal', value: function getSimplifiedGeometryInternal(t) {
      var e=[]; return e.length=Hn(this.flatCoordinates, 0, this.flatCoordinates.length, this.stride, t, e, 0), new Bm(e, 'XY');
    }}, {key: 'getType', value: function getType() {
      return 'LineString';
    }}, {key: 'intersectsExtent', value: function intersectsExtent(t) {
      return vr(this.flatCoordinates, 0, this.flatCoordinates.length, this.stride, t);
    }}, {key: 'setCoordinates', value: function setCoordinates(t, e) {
      this.setLayout(e, t, 1), this.flatCoordinates||(this.flatCoordinates=[]), this.flatCoordinates.length=Yn(this.flatCoordinates, 0, t, this.stride), this.changed();
    }}]); return Bm;
  }(kn); var zm=Bm; var Um=/* #__PURE__*/function(_kn6) {
    _inherits(Um, _kn6); var _super137=_createSuper(Um); function Um(t, e, i) {
      var _this162; _classCallCheck(this, Um); if (_this162=_super137.call(this), _this162.ends_=[], _this162.maxDelta_=-1, _this162.maxDeltaRevision_=-1, Array.isArray(t[0]))_this162.setCoordinates(t, e); else if (void 0!==e&&i)_this162.setFlatCoordinates(e, t), _this162.ends_=i; else {
        var _e276=_this162.getLayout(); var _i226=t; var _n187=[]; var _r159=[]; for (var _t267=0, _s125=_i226.length; _t267<_s125; ++_t267) {
          var _s126=_i226[_t267]; 0===_t267&&(_e276=_s126.getLayout()), u(_n187, _s126.getFlatCoordinates()), _r159.push(_n187.length);
        }_this162.setFlatCoordinates(_e276, _n187), _this162.ends_=_r159;
      } return _possibleConstructorReturn(_this162);
    }_createClass(Um, [{key: 'appendLineString', value: function appendLineString(t) {
this.flatCoordinates?u(this.flatCoordinates, t.getFlatCoordinates().slice()):this.flatCoordinates=t.getFlatCoordinates().slice(), this.ends_.push(this.flatCoordinates.length), this.changed();
    }}, {key: 'clone', value: function clone() {
      var t=new Um(this.flatCoordinates.slice(), this.layout, this.ends_.slice()); return t.applyProperties(this), t;
    }}, {key: 'closestPointXY', value: function closestPointXY(t, e, i, n) {
      return n<oe(this.getExtent(), t, e)?n:(this.maxDeltaRevision_!=this.getRevision()&&(this.maxDelta_=Math.sqrt(zn(this.flatCoordinates, 0, this.ends_, this.stride, 0)), this.maxDeltaRevision_=this.getRevision()), Vn(this.flatCoordinates, 0, this.ends_, this.stride, this.maxDelta_, !1, t, e, i, n));
    }}, {key: 'getCoordinateAtM', value: function getCoordinateAtM(t, e, i) {
      return 'XYM'!=this.layout&&'XYZM'!=this.layout||0===this.flatCoordinates.length?null:(e=void 0!==e&&e, i=void 0!==i&&i, jm(this.flatCoordinates, 0, this.ends_, this.stride, t, e, i));
    }}, {key: 'getCoordinates', value: function getCoordinates() {
      return rr(this.flatCoordinates, 0, this.ends_, this.stride);
    }}, {key: 'getEnds', value: function getEnds() {
      return this.ends_;
    }}, {key: 'getLineString', value: function getLineString(t) {
      return t<0||this.ends_.length<=t?null:new zm(this.flatCoordinates.slice(0===t?0:this.ends_[t-1], this.ends_[t]), this.layout);
    }}, {key: 'getLineStrings', value: function getLineStrings() {
      var t=this.flatCoordinates; var e=this.ends_; var i=this.layout; var n=[]; var r=0; for (var _s127=0, _o115=e.length; _s127<_o115; ++_s127) {
        var _o116=e[_s127]; var _a70=new zm(t.slice(r, _o116), i); n.push(_a70), r=_o116;
      } return n;
    }}, {key: 'getFlatMidpoints', value: function getFlatMidpoints() {
      var t=[]; var e=this.flatCoordinates; var i=0; var n=this.ends_; var r=this.stride; for (var _s128=0, _o117=n.length; _s128<_o117; ++_s128) {
        var _o118=n[_s128]; u(t, Gm(e, i, _o118, r, .5)), i=_o118;
      } return t;
    }}, {key: 'getSimplifiedGeometryInternal', value: function getSimplifiedGeometryInternal(t) {
      var e=[]; var i=[]; return e.length=$n(this.flatCoordinates, 0, this.ends_, this.stride, t, e, 0, i), new Um(e, 'XY', i);
    }}, {key: 'getType', value: function getType() {
      return 'MultiLineString';
    }}, {key: 'intersectsExtent', value: function intersectsExtent(t) {
      return Sr(this.flatCoordinates, 0, this.ends_, this.stride, t);
    }}, {key: 'setCoordinates', value: function setCoordinates(t, e) {
      this.setLayout(e, t, 2), this.flatCoordinates||(this.flatCoordinates=[]); var i=Kn(this.flatCoordinates, 0, t, this.stride, this.ends_); this.flatCoordinates.length=0===i.length?0:i[i.length-1], this.changed();
    }}]); return Um;
  }(kn); var Xm=Um; var Vm=/* #__PURE__*/function(_kn7) {
    _inherits(Vm, _kn7); var _super138=_createSuper(Vm); function Vm(t, e) {
      var _this163; _classCallCheck(this, Vm); _this163=_super138.call(this), e&&!Array.isArray(t[0])?_this163.setFlatCoordinates(e, t):_this163.setCoordinates(t, e); return _this163;
    }_createClass(Vm, [{key: 'appendPoint', value: function appendPoint(t) {
this.flatCoordinates?u(this.flatCoordinates, t.getFlatCoordinates()):this.flatCoordinates=t.getFlatCoordinates().slice(), this.changed();
    }}, {key: 'clone', value: function clone() {
      var t=new Vm(this.flatCoordinates.slice(), this.layout); return t.applyProperties(this), t;
    }}, {key: 'closestPointXY', value: function closestPointXY(t, e, i, n) {
      if (n<oe(this.getExtent(), t, e)) return n; var r=this.flatCoordinates; var s=this.stride; for (var _o119=0, _a71=r.length; _o119<_a71; _o119+=s) {
        var _a72=xi(t, e, r[_o119], r[_o119+1]); if (_a72<n) {
          n=_a72; for (var _t268=0; _t268<s; ++_t268)i[_t268]=r[_o119+_t268]; i.length=s;
        }
      } return n;
    }}, {key: 'getCoordinates', value: function getCoordinates() {
      return nr(this.flatCoordinates, 0, this.flatCoordinates.length, this.stride);
    }}, {key: 'getPoint', value: function getPoint(t) {
      var e=this.flatCoordinates?this.flatCoordinates.length/this.stride:0; return t<0||e<=t?null:new dr(this.flatCoordinates.slice(t*this.stride, (t+1)*this.stride), this.layout);
    }}, {key: 'getPoints', value: function getPoints() {
      var t=this.flatCoordinates; var e=this.layout; var i=this.stride; var n=[]; for (var _r160=0, _s129=t.length; _r160<_s129; _r160+=i) {
        var _s130=new dr(t.slice(_r160, _r160+i), e); n.push(_s130);
      } return n;
    }}, {key: 'getType', value: function getType() {
      return 'MultiPoint';
    }}, {key: 'intersectsExtent', value: function intersectsExtent(t) {
      var e=this.flatCoordinates; var i=this.stride; for (var _n188=0, _r161=e.length; _n188<_r161; _n188+=i) {
        if (he(t, e[_n188], e[_n188+1])) return !0;
      } return !1;
    }}, {key: 'setCoordinates', value: function setCoordinates(t, e) {
      this.setLayout(e, t, 1), this.flatCoordinates||(this.flatCoordinates=[]), this.flatCoordinates.length=Yn(this.flatCoordinates, 0, t, this.stride), this.changed();
    }}]); return Vm;
  }(kn); var Wm=Vm; function Zm(t, e, i, n) {
    var r=[]; var s=[1/0, 1/0, -1/0, -1/0]; for (var _o120=0, _a73=i.length; _o120<_a73; ++_o120) {
      var _a74=i[_o120]; s=pe(t, e, _a74[0], n), r.push((s[0]+s[2])/2, (s[1]+s[3])/2), e=_a74[_a74.length-1];
    } return r;
  } var Ym=/* #__PURE__*/function(_kn8) {
    _inherits(Ym, _kn8); var _super139=_createSuper(Ym); function Ym(t, e, i) {
      var _this164; _classCallCheck(this, Ym); if (_this164=_super139.call(this), _this164.endss_=[], _this164.flatInteriorPointsRevision_=-1, _this164.flatInteriorPoints_=null, _this164.maxDelta_=-1, _this164.maxDeltaRevision_=-1, _this164.orientedRevision_=-1, _this164.orientedFlatCoordinates_=null, !i&&!Array.isArray(t[0])) {
        var _n189=_this164.getLayout(); var _r162=t; var _s131=[]; var _o121=[]; for (var _t269=0, _e277=_r162.length; _t269<_e277; ++_t269) {
          var _e278=_r162[_t269]; 0===_t269&&(_n189=_e278.getLayout()); var _i227=_s131.length; var _a75=_e278.getEnds(); for (var _t270=0, _e279=_a75.length; _t270<_e279; ++_t270)_a75[_t270]+=_i227; u(_s131, _e278.getFlatCoordinates()), _o121.push(_a75);
        }e=_n189, t=_s131, i=_o121;
      } void 0!==e&&i?(_this164.setFlatCoordinates(e, t), _this164.endss_=i):_this164.setCoordinates(t, e); return _possibleConstructorReturn(_this164);
    }_createClass(Ym, [{key: 'appendPolygon', value: function appendPolygon(t) {
      var e; if (this.flatCoordinates) {
        var _i228=this.flatCoordinates.length; u(this.flatCoordinates, t.getFlatCoordinates()), e=t.getEnds().slice(); for (var _t271=0, _n190=e.length; _t271<_n190; ++_t271)e[_t271]+=_i228;
      } else this.flatCoordinates=t.getFlatCoordinates().slice(), e=t.getEnds().slice(), this.endss_.push(); this.endss_.push(e), this.changed();
    }}, {key: 'clone', value: function clone() {
      var t=this.endss_.length; var e=new Array(t); for (var _i229=0; _i229<t; ++_i229)e[_i229]=this.endss_[_i229].slice(); var i=new Ym(this.flatCoordinates.slice(), this.layout, e); return i.applyProperties(this), i;
    }}, {key: 'closestPointXY', value: function closestPointXY(t, e, i, n) {
      return n<oe(this.getExtent(), t, e)?n:(this.maxDeltaRevision_!=this.getRevision()&&(this.maxDelta_=Math.sqrt(Un(this.flatCoordinates, 0, this.endss_, this.stride, 0)), this.maxDeltaRevision_=this.getRevision()), Wn(this.getOrientedFlatCoordinates(), 0, this.endss_, this.stride, this.maxDelta_, !0, t, e, i, n));
    }}, {key: 'containsXY', value: function containsXY(t, e) {
      return mr(this.getOrientedFlatCoordinates(), 0, this.endss_, this.stride, t, e);
    }}, {key: 'getArea', value: function getArea() {
      return lr(this.getOrientedFlatCoordinates(), 0, this.endss_, this.stride);
    }}, {key: 'getCoordinates', value: function getCoordinates(t) {
      var e; return void 0!==t?(e=this.getOrientedFlatCoordinates().slice(), Lr(e, 0, this.endss_, this.stride, t)):e=this.flatCoordinates, sr(e, 0, this.endss_, this.stride);
    }}, {key: 'getEndss', value: function getEndss() {
      return this.endss_;
    }}, {key: 'getFlatInteriorPoints', value: function getFlatInteriorPoints() {
      if (this.flatInteriorPointsRevision_!=this.getRevision()) {
        var _t272=Zm(this.flatCoordinates, 0, this.endss_, this.stride); this.flatInteriorPoints_=yr(this.getOrientedFlatCoordinates(), 0, this.endss_, this.stride, _t272), this.flatInteriorPointsRevision_=this.getRevision();
      } return this.flatInteriorPoints_;
    }}, {key: 'getInteriorPoints', value: function getInteriorPoints() {
      return new Wm(this.getFlatInteriorPoints().slice(), 'XYM');
    }}, {key: 'getOrientedFlatCoordinates', value: function getOrientedFlatCoordinates() {
      if (this.orientedRevision_!=this.getRevision()) {
        var _t273=this.flatCoordinates; Pr(_t273, 0, this.endss_, this.stride)?this.orientedFlatCoordinates_=_t273:(this.orientedFlatCoordinates_=_t273.slice(), this.orientedFlatCoordinates_.length=Lr(this.orientedFlatCoordinates_, 0, this.endss_, this.stride)), this.orientedRevision_=this.getRevision();
      } return this.orientedFlatCoordinates_;
    }}, {key: 'getSimplifiedGeometryInternal', value: function getSimplifiedGeometryInternal(t) {
      var e=[]; var i=[]; return e.length=ir(this.flatCoordinates, 0, this.endss_, this.stride, Math.sqrt(t), e, 0, i), new Ym(e, 'XY', i);
    }}, {key: 'getPolygon', value: function getPolygon(t) {
      if (t<0||this.endss_.length<=t) return null; var e; if (0===t)e=0; else {
        var _i230=this.endss_[t-1]; e=_i230[_i230.length-1];
      } var i=this.endss_[t].slice(); var n=i[i.length-1]; if (0!==e) for (var _t274=0, _n191=i.length; _t274<_n191; ++_t274)i[_t274]-=e; return new Ar(this.flatCoordinates.slice(e, n), this.layout, i);
    }}, {key: 'getPolygons', value: function getPolygons() {
      var t=this.layout; var e=this.flatCoordinates; var i=this.endss_; var n=[]; var r=0; for (var _s132=0, _o122=i.length; _s132<_o122; ++_s132) {
        var _o123=i[_s132].slice(); var _a76=_o123[_o123.length-1]; if (0!==r) for (var _t275=0, _e280=_o123.length; _t275<_e280; ++_t275)_o123[_t275]-=r; var _l49=new Ar(e.slice(r, _a76), t, _o123); n.push(_l49), r=_a76;
      } return n;
    }}, {key: 'getType', value: function getType() {
      return 'MultiPolygon';
    }}, {key: 'intersectsExtent', value: function intersectsExtent(t) {
      return Er(this.getOrientedFlatCoordinates(), 0, this.endss_, this.stride, t);
    }}, {key: 'setCoordinates', value: function setCoordinates(t, e) {
      this.setLayout(e, t, 3), this.flatCoordinates||(this.flatCoordinates=[]); var i=qn(this.flatCoordinates, 0, t, this.stride, this.endss_); if (0===i.length) this.flatCoordinates.length=0; else {
        var _t276=i[i.length-1]; this.flatCoordinates.length=0===_t276.length?0:_t276[_t276.length-1];
      } this.changed();
    }}]); return Ym;
  }(kn); var Km=Ym; var qm=[1, 0, 0, 1, 0, 0]; var Hm=/* #__PURE__*/function() {
    function Hm(t, e, i, n, r) {
      _classCallCheck(this, Hm); this.styleFunction, this.extent_, this.id_=r, this.type_=t, this.flatCoordinates_=e, this.flatInteriorPoints_=null, this.flatMidpoints_=null, this.ends_=i, this.properties_=n;
    }_createClass(Hm, [{key: 'get', value: function get(t) {
      return this.properties_[t];
    }}, {key: 'getExtent', value: function getExtent() {
      return this.extent_||(this.extent_='Point'===this.type_?fe(this.flatCoordinates_):pe(this.flatCoordinates_, 0, this.flatCoordinates_.length, 2)), this.extent_;
    }}, {key: 'getFlatInteriorPoint', value: function getFlatInteriorPoint() {
      if (!this.flatInteriorPoints_) {
        var _t277=Pe(this.getExtent()); this.flatInteriorPoints_=_r(this.flatCoordinates_, 0, this.ends_, 2, _t277, 0);
      } return this.flatInteriorPoints_;
    }}, {key: 'getFlatInteriorPoints', value: function getFlatInteriorPoints() {
      if (!this.flatInteriorPoints_) {
        var _t278=Zm(this.flatCoordinates_, 0, this.ends_, 2); this.flatInteriorPoints_=yr(this.flatCoordinates_, 0, this.ends_, 2, _t278);
      } return this.flatInteriorPoints_;
    }}, {key: 'getFlatMidpoint', value: function getFlatMidpoint() {
      return this.flatMidpoints_||(this.flatMidpoints_=Gm(this.flatCoordinates_, 0, this.flatCoordinates_.length, 2, .5)), this.flatMidpoints_;
    }}, {key: 'getFlatMidpoints', value: function getFlatMidpoints() {
      if (!this.flatMidpoints_) {
        this.flatMidpoints_=[]; var _t279=this.flatCoordinates_; var _e281=0; var _i231=this.ends_; for (var _n192=0, _r163=_i231.length; _n192<_r163; ++_n192) {
          var _r164=_i231[_n192]; var _s133=Gm(_t279, _e281, _r164, 2, .5); u(this.flatMidpoints_, _s133), _e281=_r164;
        }
      } return this.flatMidpoints_;
    }}, {key: 'getId', value: function getId() {
      return this.id_;
    }}, {key: 'getOrientedFlatCoordinates', value: function getOrientedFlatCoordinates() {
      return this.flatCoordinates_;
    }}, {key: 'getGeometry', value: function getGeometry() {
      return this;
    }}, {key: 'getSimplifiedGeometry', value: function getSimplifiedGeometry(t) {
      return this;
    }}, {key: 'simplifyTransformed', value: function simplifyTransformed(t, e) {
      return this;
    }}, {key: 'getProperties', value: function getProperties() {
      return this.properties_;
    }}, {key: 'getStride', value: function getStride() {
      return 2;
    }}, {key: 'getStyleFunction', value: function getStyleFunction() {
      return this.styleFunction;
    }}, {key: 'getType', value: function getType() {
      return this.type_;
    }}, {key: 'transform', value: function transform(t) {
      var e=(t=an(t)).getExtent(); var i=t.getWorldExtent(); if (e&&i) {
        var _t280=Me(i)/Me(e); Zt(qm, i[0], i[3], _t280, -_t280, 0, 0, 0), Ln(this.flatCoordinates_, 0, this.flatCoordinates_.length, 2, qm, this.flatCoordinates_);
      }
    }}, {key: 'getEnds', value: function getEnds() {
      return this.ends_;
    }}]); return Hm;
  }(); function $m(t) {
    var e=t.getType(); switch (e) {
      case 'Point': return new dr(t.getFlatCoordinates()); case 'MultiPoint': return new Wm(t.getFlatCoordinates(), 'XY'); case 'LineString': return new zm(t.getFlatCoordinates(), 'XY'); case 'MultiLineString': return new Xm(t.getFlatCoordinates(), 'XY', t.getEnds()); case 'Polygon': var _i232=t.getFlatCoordinates(); var _n193=t.getEnds(); var _r165=Fr(_i232, _n193); return _r165.length>1?new Km(_i232, 'XY', _r165):new Ar(_i232, 'XY', _n193); default: throw new Error('Invalid geometry type:'+e);
    }
  }Hm.prototype.getEndss=Hm.prototype.getEnds, Hm.prototype.getFlatCoordinates=Hm.prototype.getOrientedFlatCoordinates; var Jm=Hm; var Qm=null; function t_(t) {
    Qm=t; var e=Object.keys(t.defs); var i=e.length; var n; var r; for (n=0; n<i; ++n) {
      var _i233=e[n]; if (!an(_i233)) {
        var _e282=t.defs(_i233); var _n194=_e282.units; _n194||'longlat'!==_e282.projName||(_n194='degrees'), sn(new Ke({code: _i233, axisOrientation: _e282.axis, metersPerUnit: _e282.to_meter, units: _n194}));
      }
    } for (n=0; n<i; ++n) {
      var _s134=e[n]; var _o124=an(_s134); for (r=0; r<i; ++r) {
        var _i234=e[r]; var _n195=an(_i234); if (!mi(_s134, _i234)) {
          if (t.defs[_s134]===t.defs[_i234])hn([_o124, _n195]); else {
            var _e283=t(_s134, _i234); gn(_o124, _n195, Pn(_o124, _n195, _e283.forward), Pn(_n195, _o124, _e283.inverse));
          }
        }
      }
    }
  } var e_=/* #__PURE__*/function() {
    var _ref2=_asyncToGenerator(/* #__PURE__*/_regeneratorRuntime().mark(function _callee(t) {
      var e; return _regeneratorRuntime().wrap(function _callee$(_context) {
        while (1) {
          switch (_context.prev=_context.next) {
            case 0: _context.next=2; return fetch('https://epsg.io/'.concat(t, '.proj4')); case 2: e=_context.sent; if (e.ok) {
              _context.next=5; break;
            } throw new Error('Unexpected response from epsg.io: '.concat(e.status)); case 5: return _context.abrupt('return', e.text()); case 6: case 'end': return _context.stop();
          }
        }
      }, _callee);
    })); return function e_(_x4) {
      return _ref2.apply(this, arguments);
    };
  }(); var i_=/* #__PURE__*/function(_Af) {
    _inherits(i_, _Af); var _super140=_createSuper(i_); function i_(t) {
      _classCallCheck(this, i_); return _super140.call(this, t);
    }_createClass(i_, [{key: 'createRenderer', value: function createRenderer() {
      return new bm(this);
    }}]); return i_;
  }(Af); function n_(t, e, i) {
    var n=[]; var r=t(0); var s=t(1); var o=e(r); var a=e(s); var l=[s, r]; var h=[a, o]; var c=[1, 0]; var u={}; var d; var g; var f; var p; var m; var _; var y=1e5; for (;--y>0&&c.length>0;)f=c.pop(), r=l.pop(), o=h.pop(), _=f.toString(), _ in u||(n.push(o[0], o[1]), u[_]=!0), p=c.pop(), s=l.pop(), a=h.pop(), m=(f+p)/2, d=t(m), g=e(d), yi(g[0], g[1], o[0], o[1], a[0], a[1])<i?(n.push(a[0], a[1]), _=p.toString(), u[_]=!0):(c.push(p, m, m, f), h.push(a, g, g, o), l.push(s, d, d, r)); return n;
  } function r_(t, e, i, n, r) {
    return n_(function(n) {
      return [t, e+(i-e)*n];
    }, mn(an('EPSG:4326'), n), r);
  } function s_(t, e, i, n, r) {
    return n_(function(n) {
      return [e+(i-e)*n, t];
    }, mn(an('EPSG:4326'), n), r);
  } var o_=new lf({color: 'rgba(0,0,0,0.2)'}); var a_=[90, 45, 30, 20, 10, 5, 2, 1, .5, 20/60, 10/60, 5/60, 2/60, 1/60, 30/3600, 20/3600, 10/3600, 5/3600, 2/3600, 1/3600]; var l_=/* #__PURE__*/function(_i_) {
    _inherits(l_, _i_); var _super141=_createSuper(l_); function l_(t) {
      var _this165; _classCallCheck(this, l_); t=t||{}; var e=Object.assign({updateWhileAnimating: !0, updateWhileInteracting: !0, renderBuffer: 0}, t); delete e.maxLines, delete e.strokeStyle, delete e.targetSize, delete e.showLabels, delete e.lonLabelFormatter, delete e.latLabelFormatter, delete e.lonLabelPosition, delete e.latLabelPosition, delete e.lonLabelStyle, delete e.latLabelStyle, delete e.intervals, _this165=_super141.call(this, e), _this165.projection_=null, _this165.maxLat_=1/0, _this165.maxLon_=1/0, _this165.minLat_=-1/0, _this165.minLon_=-1/0, _this165.maxX_=1/0, _this165.maxY_=1/0, _this165.minX_=-1/0, _this165.minY_=-1/0, _this165.targetSize_=void 0!==t.targetSize?t.targetSize:100, _this165.maxLines_=void 0!==t.maxLines?t.maxLines:100, _this165.meridians_=[], _this165.parallels_=[], _this165.strokeStyle_=void 0!==t.strokeStyle?t.strokeStyle:o_, _this165.fromLonLatTransform_=void 0, _this165.toLonLatTransform_=void 0, _this165.projectionCenterLonLat_=null, _this165.bottomLeft_=null, _this165.bottomRight_=null, _this165.topLeft_=null, _this165.topRight_=null, _this165.meridiansLabels_=null, _this165.parallelsLabels_=null, t.showLabels&&(_this165.lonLabelFormatter_=null==t.lonLabelFormatter?Oi.bind(_assertThisInitialized(_this165), 'EW'):t.lonLabelFormatter, _this165.latLabelFormatter_=null==t.latLabelFormatter?Oi.bind(_assertThisInitialized(_this165), 'NS'):t.latLabelFormatter, _this165.lonLabelPosition_=null==t.lonLabelPosition?0:t.lonLabelPosition, _this165.latLabelPosition_=null==t.latLabelPosition?1:t.latLabelPosition, _this165.lonLabelStyleBase_=new pf({text: void 0!==t.lonLabelStyle?t.lonLabelStyle.clone():new _f({font: '12px Calibri,sans-serif', textBaseline: 'bottom', fill: new Qg({color: 'rgba(0,0,0,1)'}), stroke: new lf({color: 'rgba(255,255,255,1)', width: 3})})}), _this165.lonLabelStyle_=function(t) {
        var e=t.get('graticule_label'); return _this165.lonLabelStyleBase_.getText().setText(e), _this165.lonLabelStyleBase_;
      }, _this165.latLabelStyleBase_=new pf({text: void 0!==t.latLabelStyle?t.latLabelStyle.clone():new _f({font: '12px Calibri,sans-serif', textAlign: 'right', fill: new Qg({color: 'rgba(0,0,0,1)'}), stroke: new lf({color: 'rgba(255,255,255,1)', width: 3})})}), _this165.latLabelStyle_=function(t) {
        var e=t.get('graticule_label'); return _this165.latLabelStyleBase_.getText().setText(e), _this165.latLabelStyleBase_;
      }, _this165.meridiansLabels_=[], _this165.parallelsLabels_=[], _this165.addEventListener(As, _this165.drawLabels_.bind(_assertThisInitialized(_this165)))), _this165.intervals_=void 0!==t.intervals?t.intervals:a_, _this165.setSource(new uc({loader: _this165.loaderFunction.bind(_assertThisInitialized(_this165)), strategy: _this165.strategyFunction.bind(_assertThisInitialized(_this165)), features: new H(), overlaps: !1, useSpatialIndex: !1, wrapX: t.wrapX})), _this165.featurePool_=[], _this165.lineStyle_=new pf({stroke: _this165.strokeStyle_}), _this165.loadedExtent_=null, _this165.renderedExtent_=null, _this165.renderedResolution_=null, _this165.setRenderOrder(null); return _this165;
    }_createClass(l_, [{key: 'strategyFunction', value: function strategyFunction(t, e) {
      var i=t.slice(); return this.projection_&&this.getSource().getWrapX()&&Xe(i, this.projection_), this.loadedExtent_&&(_e(this.loadedExtent_, i, e)?i=this.loadedExtent_.slice():this.getSource().removeLoadedExtent(this.loadedExtent_)), [i];
    }}, {key: 'loaderFunction', value: function loaderFunction(t, e, i) {
      this.loadedExtent_=t; var n=this.getSource(); var r=Ae(this.getExtent()||[-1/0, -1/0, 1/0, 1/0], t); if (this.renderedExtent_&&me(this.renderedExtent_, r)&&this.renderedResolution_===e) return; if (this.renderedExtent_=r, this.renderedResolution_=e, ke(r)) return; var s=Pe(r); var o=e*e/4; (!this.projection_||!fn(this.projection_, i))&&this.updateProjectionInfo_(i), this.createGraticule_(r, s, e, o); var a; var l=this.meridians_.length+this.parallels_.length; for (this.meridiansLabels_&&(l+=this.meridians_.length), this.parallelsLabels_&&(l+=this.parallels_.length); l>this.featurePool_.length;)a=new Ot(), this.featurePool_.push(a); var h=n.getFeaturesCollection(); h.clear(); var c; var u; var d=0; for (c=0, u=this.meridians_.length; c<u; ++c)a=this.featurePool_[d++], a.setGeometry(this.meridians_[c]), a.setStyle(this.lineStyle_), h.push(a); for (c=0, u=this.parallels_.length; c<u; ++c)a=this.featurePool_[d++], a.setGeometry(this.parallels_[c]), a.setStyle(this.lineStyle_), h.push(a);
    }}, {key: 'addMeridian_', value: function addMeridian_(t, e, i, n, r, s) {
      var o=this.getMeridian_(t, e, i, n, s); if (Ge(o.getExtent(), r)) {
        if (this.meridiansLabels_) {
          var _e284=this.lonLabelFormatter_(t); s in this.meridiansLabels_?this.meridiansLabels_[s].text=_e284:this.meridiansLabels_[s]={geom: new dr([]), text: _e284};
        } this.meridians_[s++]=o;
      } return s;
    }}, {key: 'addParallel_', value: function addParallel_(t, e, i, n, r, s) {
      var o=this.getParallel_(t, e, i, n, s); if (Ge(o.getExtent(), r)) {
        if (this.parallelsLabels_) {
          var _e285=this.latLabelFormatter_(t); s in this.parallelsLabels_?this.parallelsLabels_[s].text=_e285:this.parallelsLabels_[s]={geom: new dr([]), text: _e285};
        } this.parallels_[s++]=o;
      } return s;
    }}, {key: 'drawLabels_', value: function drawLabels_(t) {
      var e=t.frameState.viewState.rotation; var i=t.frameState.viewState.resolution; var n=t.frameState.size; var r=t.frameState.extent; var s=Pe(r); var o=r; if (e) {
        var _t281=n[0]*i; var _e286=n[1]*i; o=[s[0]-_t281/2, s[1]-_e286/2, s[0]+_t281/2, s[1]+_e286/2];
      } var a=0; var l=0; var h=this.latLabelPosition_<.5; var c=this.projection_.getExtent(); var u=De(c); if (this.getSource().getWrapX()&&this.projection_.canWrapX()&&!le(c, r)) {
        a=Math.floor((r[0]-c[0])/u), l=Math.ceil((r[2]-c[2])/u); h=h!==Math.abs(e)>Math.PI/2;
      } var d=Jl(t); for (var _t282=a; _t282<=l; ++_t282) {
        var _i235=void 0; var _n196=void 0; var _c29=void 0; var _g17=void 0; var _f12=this.meridians_.length+this.parallels_.length; if (this.meridiansLabels_) {
          for (_n196=0, _c29=this.meridiansLabels_.length; _n196<_c29; ++_n196) {
            var _a77=this.meridians_[_n196]; if (e||0!==_t282) {
              var _i236=_a77.clone(); _i236.translate(_t282*u, 0), _i236.rotate(-e, s), _g17=this.getMeridianPoint_(_i236, o, _n196), _g17.rotate(e, s);
            } else _g17=this.getMeridianPoint_(_a77, r, _n196); _i235=this.featurePool_[_f12++], _i235.setGeometry(_g17), _i235.set('graticule_label', this.meridiansLabels_[_n196].text), d.drawFeature(_i235, this.lonLabelStyle_(_i235));
          }
        } if (this.parallelsLabels_&&(_t282===a&&h||_t282===l&&!h)) {
          for (_n196=0, _c29=this.parallels_.length; _n196<_c29; ++_n196) {
            var _a78=this.parallels_[_n196]; if (e||0!==_t282) {
              var _i237=_a78.clone(); _i237.translate(_t282*u, 0), _i237.rotate(-e, s), _g17=this.getParallelPoint_(_i237, o, _n196), _g17.rotate(e, s);
            } else _g17=this.getParallelPoint_(_a78, r, _n196); _i235=this.featurePool_[_f12++], _i235.setGeometry(_g17), _i235.set('graticule_label', this.parallelsLabels_[_n196].text), d.drawFeature(_i235, this.latLabelStyle_(_i235));
          }
        }
      }
    }}, {key: 'createGraticule_', value: function createGraticule_(t, e, i, n) {
      var r=this.getInterval_(i); if (-1==r) return this.meridians_.length=0, this.parallels_.length=0, this.meridiansLabels_&&(this.meridiansLabels_.length=0), void(this.parallelsLabels_&&(this.parallelsLabels_.length=0)); var s=!1; var o=this.projection_.getExtent(); var a=De(o); this.getSource().getWrapX()&&this.projection_.canWrapX()&&!le(o, t)&&(De(t)>=a?(t[0]=o[0], t[2]=o[2]):s=!0); var l=[_i(e[0], this.minX_, this.maxX_), _i(e[1], this.minY_, this.maxY_)]; var h=this.toLonLatTransform_(l); isNaN(h[1])&&(h[1]=Math.abs(this.maxLat_)>=Math.abs(this.minLat_)?this.maxLat_:this.minLat_); var c=_i(h[0], this.minLon_, this.maxLon_); var u=_i(h[1], this.minLat_, this.maxLat_); var d=this.maxLines_; var g; var f; var p; var m; var _=t; s||(_=[_i(t[0], this.minX_, this.maxX_), _i(t[1], this.minY_, this.maxY_), _i(t[2], this.minX_, this.maxX_), _i(t[3], this.minY_, this.maxY_)]); var y=Ue(_, this.toLonLatTransform_, void 0, 8); var x=y[3]; var v=y[2]; var S=y[1]; var w=y[0]; if (s||(ae(_, this.bottomLeft_)&&(w=this.minLon_, S=this.minLat_), ae(_, this.bottomRight_)&&(v=this.maxLon_, S=this.minLat_), ae(_, this.topLeft_)&&(w=this.minLon_, x=this.maxLat_), ae(_, this.topRight_)&&(v=this.maxLon_, x=this.maxLat_), x=_i(x, u, this.maxLat_), v=_i(v, c, this.maxLon_), S=_i(S, this.minLat_, u), w=_i(w, this.minLon_, c)), c=Math.floor(c/r)*r, m=_i(c, this.minLon_, this.maxLon_), f=this.addMeridian_(m, S, x, n, t, 0), g=0, s) for (;(m-=r)>=w&&g++<d;)f=this.addMeridian_(m, S, x, n, t, f); else for (;m!=this.minLon_&&g++<d;)m=Math.max(m-r, this.minLon_), f=this.addMeridian_(m, S, x, n, t, f); if (m=_i(c, this.minLon_, this.maxLon_), g=0, s) for (;(m+=r)<=v&&g++<d;)f=this.addMeridian_(m, S, x, n, t, f); else for (;m!=this.maxLon_&&g++<d;)m=Math.min(m+r, this.maxLon_), f=this.addMeridian_(m, S, x, n, t, f); for (this.meridians_.length=f, this.meridiansLabels_&&(this.meridiansLabels_.length=f), u=Math.floor(u/r)*r, p=_i(u, this.minLat_, this.maxLat_), f=this.addParallel_(p, w, v, n, t, 0), g=0; p!=this.minLat_&&g++<d;)p=Math.max(p-r, this.minLat_), f=this.addParallel_(p, w, v, n, t, f); for (p=_i(u, this.minLat_, this.maxLat_), g=0; p!=this.maxLat_&&g++<d;)p=Math.min(p+r, this.maxLat_), f=this.addParallel_(p, w, v, n, t, f); this.parallels_.length=f, this.parallelsLabels_&&(this.parallelsLabels_.length=f);
    }}, {key: 'getInterval_', value: function getInterval_(t) {
      var e=this.projectionCenterLonLat_[0]; var i=this.projectionCenterLonLat_[1]; var n=-1; var r=Math.pow(this.targetSize_*t, 2); var s=[]; var o=[]; for (var _t283=0, _a79=this.intervals_.length; _t283<_a79; ++_t283) {
        var _a80=_i(this.intervals_[_t283]/2, 0, 90); var _l50=_i(i, -90+_a80, 90-_a80); s[0]=e-_a80, s[1]=_l50-_a80, o[0]=e+_a80, o[1]=_l50+_a80, this.fromLonLatTransform_(s, s), this.fromLonLatTransform_(o, o); if (Math.pow(o[0]-s[0], 2)+Math.pow(o[1]-s[1], 2)<=r) break; n=this.intervals_[_t283];
      } return n;
    }}, {key: 'getMeridian_', value: function getMeridian_(t, e, i, n, r) {
      var s=r_(t, e, i, this.projection_, n); var o=this.meridians_[r]; return o?(o.setFlatCoordinates('XY', s), o.changed()):(o=new zm(s, 'XY'), this.meridians_[r]=o), o;
    }}, {key: 'getMeridianPoint_', value: function getMeridianPoint_(t, e, i) {
      var n=t.getFlatCoordinates(); var r=1; var s=n.length-1; n[r]>n[s]&&(r=s, s=1); var o=Math.max(e[1], n[r]); var a=Math.min(e[3], n[s]); var l=_i(e[1]+Math.abs(e[1]-e[3])*this.lonLabelPosition_, o, a); var h=[n[r-1]+(n[s-1]-n[r-1])*(l-n[r])/(n[s]-n[r]), l]; var c=this.meridiansLabels_[i].geom; return c.setCoordinates(h), c;
    }}, {key: 'getMeridians', value: function getMeridians() {
      return this.meridians_;
    }}, {key: 'getParallel_', value: function getParallel_(t, e, i, n, r) {
      var s=s_(t, e, i, this.projection_, n); var o=this.parallels_[r]; return o?(o.setFlatCoordinates('XY', s), o.changed()):o=new zm(s, 'XY'), o;
    }}, {key: 'getParallelPoint_', value: function getParallelPoint_(t, e, i) {
      var n=t.getFlatCoordinates(); var r=0; var s=n.length-2; n[r]>n[s]&&(r=s, s=0); var o=Math.max(e[0], n[r]); var a=Math.min(e[2], n[s]); var l=_i(e[0]+Math.abs(e[0]-e[2])*this.latLabelPosition_, o, a); var h=[l, n[r+1]+(n[s+1]-n[r+1])*(l-n[r])/(n[s]-n[r])]; var c=this.parallelsLabels_[i].geom; return c.setCoordinates(h), c;
    }}, {key: 'getParallels', value: function getParallels() {
      return this.parallels_;
    }}, {key: 'updateProjectionInfo_', value: function updateProjectionInfo_(t) {
      var e=an('EPSG:4326'); var i=t.getWorldExtent(); this.maxLat_=i[3], this.maxLon_=i[2], this.minLat_=i[1], this.minLon_=i[0]; var n=mn(t, e); if (this.minLon_<this.maxLon_) this.toLonLatTransform_=n; else {
        var _t284=this.minLon_+this.maxLon_/2; this.maxLon_+=360, this.toLonLatTransform_=function(e, i, r) {
          var s=n(e, i, r=r||2); for (var _e287=0, _i238=s.length; _e287<_i238; _e287+=r)s[_e287]<_t284&&(s[_e287]+=360); return s;
        };
      } this.fromLonLatTransform_=mn(e, t); var r=Ue([this.minLon_, this.minLat_, this.maxLon_, this.maxLat_], this.fromLonLatTransform_, void 0, 8); this.minX_=r[0], this.maxX_=r[2], this.minY_=r[1], this.maxY_=r[3], this.bottomLeft_=this.fromLonLatTransform_([this.minLon_, this.minLat_]), this.bottomRight_=this.fromLonLatTransform_([this.maxLon_, this.minLat_]), this.topLeft_=this.fromLonLatTransform_([this.minLon_, this.maxLat_]), this.topRight_=this.fromLonLatTransform_([this.maxLon_, this.maxLat_]), this.projectionCenterLonLat_=this.toLonLatTransform_(Pe(t.getExtent())), isNaN(this.projectionCenterLonLat_[1])&&(this.projectionCenterLonLat_[1]=Math.abs(this.maxLat_)>=Math.abs(this.minLat_)?this.maxLat_:this.minLat_), this.projection_=t;
    }}]); return l_;
  }(i_); var h_='blur'; var c_='gradient'; var u_='radius'; var d_=['#00f', '#0ff', '#0f0', '#ff0', '#f00']; var g_=/* #__PURE__*/function(_Af2) {
    _inherits(g_, _Af2); var _super142=_createSuper(g_); function g_(t) {
      var _this166; _classCallCheck(this, g_); t=t||{}; var e=Object.assign({}, t); delete e.gradient, delete e.radius, delete e.blur, delete e.weight, _this166=_super142.call(this, e), _this166.gradient_=null, _this166.addChangeListener(c_, _this166.handleGradientChanged_), _this166.setGradient(t.gradient?t.gradient:d_), _this166.setBlur(void 0!==t.blur?t.blur:15), _this166.setRadius(void 0!==t.radius?t.radius:8); var i=t.weight?t.weight:'weight'; _this166.weightFunction_='string'==typeof i?function(t) {
        return t.get(i);
      }:i, _this166.setRenderOrder(null); return _this166;
    }_createClass(g_, [{key: 'getBlur', value: function getBlur() {
      return this.get(h_);
    }}, {key: 'getGradient', value: function getGradient() {
      return this.get(c_);
    }}, {key: 'getRadius', value: function getRadius() {
      return this.get(u_);
    }}, {key: 'handleGradientChanged_', value: function handleGradientChanged_() {
      this.gradient_=function(t) {
        var e=1; var i=256; var n=_t(e, i); var r=n.createLinearGradient(0, 0, e, i); var s=1/(t.length-1); for (var _e288=0, _i239=t.length; _e288<_i239; ++_e288)r.addColorStop(_e288*s, t[_e288]); return n.fillStyle=r, n.fillRect(0, 0, e, i), n.canvas;
      }(this.getGradient());
    }}, {key: 'setBlur', value: function setBlur(t) {
      this.set(h_, t);
    }}, {key: 'setGradient', value: function setGradient(t) {
      this.set(c_, t);
    }}, {key: 'setRadius', value: function setRadius(t) {
      this.set(u_, t);
    }}, {key: 'createRenderer', value: function createRenderer() {
      var _this167=this; return new mp(this, {className: this.getClassName(), attributes: [{name: 'weight', callback: function callback(t) {
        var e=_this167.weightFunction_(t); return void 0!==e?_i(e, 0, 1):1;
      }}], vertexShader: '\n        precision mediump float;\n        uniform mat4 u_projectionMatrix;\n        uniform mat4 u_offsetScaleMatrix;\n        uniform float u_size;\n        attribute vec2 a_position;\n        attribute float a_index;\n        attribute float a_weight;\n\n        varying vec2 v_texCoord;\n        varying float v_weight;\n\n        void main(void) {\n          mat4 offsetMatrix = u_offsetScaleMatrix;\n          float offsetX = a_index == 0.0 || a_index == 3.0 ? -u_size / 2.0 : u_size / 2.0;\n          float offsetY = a_index == 0.0 || a_index == 1.0 ? -u_size / 2.0 : u_size / 2.0;\n          vec4 offsets = offsetMatrix * vec4(offsetX, offsetY, 0.0, 0.0);\n          gl_Position = u_projectionMatrix * vec4(a_position, 0.0, 1.0) + offsets;\n          float u = a_index == 0.0 || a_index == 3.0 ? 0.0 : 1.0;\n          float v = a_index == 0.0 || a_index == 1.0 ? 0.0 : 1.0;\n          v_texCoord = vec2(u, v);\n          v_weight = a_weight;\n        }', fragmentShader: '\n        precision mediump float;\n        uniform float u_blurSlope;\n\n        varying vec2 v_texCoord;\n        varying float v_weight;\n\n        void main(void) {\n          vec2 texCoord = v_texCoord * 2.0 - vec2(1.0, 1.0);\n          float sqRadius = texCoord.x * texCoord.x + texCoord.y * texCoord.y;\n          float value = (1.0 - sqrt(sqRadius)) * u_blurSlope;\n          float alpha = smoothstep(0.0, 1.0, value) * v_weight;\n          gl_FragColor = vec4(alpha, alpha, alpha, alpha);\n        }', hitVertexShader: '\n        precision mediump float;\n        uniform mat4 u_projectionMatrix;\n        uniform mat4 u_offsetScaleMatrix;\n        uniform float u_size;\n        attribute vec2 a_position;\n        attribute float a_index;\n        attribute float a_weight;\n        attribute vec4 a_hitColor;\n\n        varying vec2 v_texCoord;\n        varying float v_weight;\n        varying vec4 v_hitColor;\n\n        void main(void) {\n          mat4 offsetMatrix = u_offsetScaleMatrix;\n          float offsetX = a_index == 0.0 || a_index == 3.0 ? -u_size / 2.0 : u_size / 2.0;\n          float offsetY = a_index == 0.0 || a_index == 1.0 ? -u_size / 2.0 : u_size / 2.0;\n          vec4 offsets = offsetMatrix * vec4(offsetX, offsetY, 0.0, 0.0);\n          gl_Position = u_projectionMatrix * vec4(a_position, 0.0, 1.0) + offsets;\n          float u = a_index == 0.0 || a_index == 3.0 ? 0.0 : 1.0;\n          float v = a_index == 0.0 || a_index == 1.0 ? 0.0 : 1.0;\n          v_texCoord = vec2(u, v);\n          v_hitColor = a_hitColor;\n          v_weight = a_weight;\n        }', hitFragmentShader: '\n        precision mediump float;\n        uniform float u_blurSlope;\n\n        varying vec2 v_texCoord;\n        varying float v_weight;\n        varying vec4 v_hitColor;\n\n        void main(void) {\n          vec2 texCoord = v_texCoord * 2.0 - vec2(1.0, 1.0);\n          float sqRadius = texCoord.x * texCoord.x + texCoord.y * texCoord.y;\n          float value = (1.0 - sqrt(sqRadius)) * u_blurSlope;\n          float alpha = smoothstep(0.0, 1.0, value) * v_weight;\n          if (alpha < 0.05) {\n            discard;\n          }\n\n          gl_FragColor = v_hitColor;\n        }', uniforms: {u_size: function u_size() {
        return 2*(_this167.get(u_)+_this167.get(h_));
      }, u_blurSlope: function u_blurSlope() {
        return _this167.get(u_)/Math.max(1, _this167.get(h_));
      }}, postProcesses: [{fragmentShader: '\n            precision mediump float;\n\n            uniform sampler2D u_image;\n            uniform sampler2D u_gradientTexture;\n            uniform float u_opacity;\n\n            varying vec2 v_texCoord;\n\n            void main() {\n              vec4 color = texture2D(u_image, v_texCoord);\n              gl_FragColor.a = color.a * u_opacity;\n              gl_FragColor.rgb = texture2D(u_gradientTexture, vec2(0.5, color.a)).rgb;\n              gl_FragColor.rgb *= gl_FragColor.a;\n            }', uniforms: {u_gradientTexture: function u_gradientTexture() {
        return _this167.gradient_;
      }, u_opacity: function u_opacity() {
        return _this167.getOpacity();
      }}}]});
    }}, {key: 'renderDeclutter', value: function renderDeclutter() {}}]); return g_;
  }(Af); var f_=/* #__PURE__*/function() {
    function f_() {
      _classCallCheck(this, f_); this.dataProjection=void 0, this.defaultFeatureProjection=void 0, this.supportedMediaTypes=null;
    }_createClass(f_, [{key: 'getReadOptions', value: function getReadOptions(t, e) {
      if (e) {
        var _i240=e.dataProjection?an(e.dataProjection):this.readProjection(t); e.extent&&_i240&&'tile-pixels'===_i240.getUnits()&&(_i240=an(_i240), _i240.setWorldExtent(e.extent)), e={dataProjection: _i240, featureProjection: e.featureProjection};
      } return this.adaptOptions(e);
    }}, {key: 'adaptOptions', value: function adaptOptions(t) {
      return Object.assign({dataProjection: this.dataProjection, featureProjection: this.defaultFeatureProjection}, t);
    }}, {key: 'getType', value: function getType() {
      return z();
    }}, {key: 'readFeature', value: function readFeature(t, e) {
      return z();
    }}, {key: 'readFeatures', value: function readFeatures(t, e) {
      return z();
    }}, {key: 'readGeometry', value: function readGeometry(t, e) {
      return z();
    }}, {key: 'readProjection', value: function readProjection(t) {
      return z();
    }}, {key: 'writeFeature', value: function writeFeature(t, e) {
      return z();
    }}, {key: 'writeFeatures', value: function writeFeatures(t, e) {
      return z();
    }}, {key: 'writeGeometry', value: function writeGeometry(t, e) {
      return z();
    }}]); return f_;
  }(); function p_(t, e, i) {
    var n=i?an(i.featureProjection):null; var r=i?an(i.dataProjection):null; var s; if (s=n&&r&&!fn(n, r)?(e?t.clone():t).transform(e?n:r, e?r:n):t, e&&i&&void 0!==i.decimals) {
      var _e289=Math.pow(10, i.decimals); var _n197=function _n197(t) {
        for (var _i241=0, _n198=t.length; _i241<_n198; ++_i241)t[_i241]=Math.round(t[_i241]*_e289)/_e289; return t;
      }; s===t&&(s=t.clone()), s.applyTransform(_n197);
    } return s;
  } function m_(t, e) {
    var i=e?an(e.featureProjection):null; var n=e?an(e.dataProjection):null; return i&&n&&!fn(i, n)?yn(t, n, i):t;
  } var __={/* ! ieee754. BSD-3-Clause License. Feross Aboukhadijeh <https://feross.org/opensource> */read: function read(t, e, i, n, r) {
    var s; var o; var a=8*r-n-1; var l=(1<<a)-1; var h=l>>1; var c=-7; var u=i?r-1:0; var d=i?-1:1; var g=t[e+u]; for (u+=d, s=g&(1<<-c)-1, g>>=-c, c+=a; c>0; s=256*s+t[e+u], u+=d, c-=8);for (o=s&(1<<-c)-1, s>>=-c, c+=n; c>0; o=256*o+t[e+u], u+=d, c-=8);if (0===s)s=1-h; else {
      if (s===l) return o?NaN:1/0*(g?-1:1); o+=Math.pow(2, n), s-=h;
    } return (g?-1:1)*o*Math.pow(2, s-n);
  }, write: function write(t, e, i, n, r, s) {
    var o; var a; var l; var h=8*s-r-1; var c=(1<<h)-1; var u=c>>1; var d=23===r?Math.pow(2, -24)-Math.pow(2, -77):0; var g=n?0:s-1; var f=n?1:-1; var p=e<0||0===e&&1/e<0?1:0; for (e=Math.abs(e), isNaN(e)||e===1/0?(a=isNaN(e)?1:0, o=c):(o=Math.floor(Math.log(e)/Math.LN2), e*(l=Math.pow(2, -o))<1&&(o--, l*=2), (e+=o+u>=1?d/l:d*Math.pow(2, 1-u))*l>=2&&(o++, l/=2), o+u>=c?(a=0, o=c):o+u>=1?(a=(e*l-1)*Math.pow(2, r), o+=u):(a=e*Math.pow(2, u-1)*Math.pow(2, r), o=0)); r>=8; t[i+g]=255&a, g+=f, a/=256, r-=8);for (o=o<<r|a, h+=r; h>0; t[i+g]=255&o, g+=f, o/=256, h-=8);t[i+g-f]|=128*p;
  }}; var y_=v_; var x_=__; function v_(t) {
    this.buf=ArrayBuffer.isView&&ArrayBuffer.isView(t)?t:new Uint8Array(t||0), this.pos=0, this.type=0, this.length=this.buf.length;
  }v_.Varint=0, v_.Fixed64=1, v_.Bytes=2, v_.Fixed32=5; var S_=4294967296; var w_=1/S_; var T_='undefined'==typeof TextDecoder?null:new TextDecoder('utf8'); function E_(t) {
    return t.type===v_.Bytes?t.readVarint()+t.pos:t.pos+1;
  } function C_(t, e, i) {
    return i?4294967296*e+(t>>>0):4294967296*(e>>>0)+(t>>>0);
  } function R_(t, e, i) {
    var n=e<=16383?1:e<=2097151?2:e<=268435455?3:Math.floor(Math.log(e)/(7*Math.LN2)); i.realloc(n); for (var r=i.pos-1; r>=t; r--)i.buf[r+n]=i.buf[r];
  } function b_(t, e) {
    for (var i=0; i<t.length; i++)e.writeVarint(t[i]);
  } function P_(t, e) {
    for (var i=0; i<t.length; i++)e.writeSVarint(t[i]);
  } function I_(t, e) {
    for (var i=0; i<t.length; i++)e.writeFloat(t[i]);
  } function L_(t, e) {
    for (var i=0; i<t.length; i++)e.writeDouble(t[i]);
  } function F_(t, e) {
    for (var i=0; i<t.length; i++)e.writeBoolean(t[i]);
  } function M_(t, e) {
    for (var i=0; i<t.length; i++)e.writeFixed32(t[i]);
  } function A_(t, e) {
    for (var i=0; i<t.length; i++)e.writeSFixed32(t[i]);
  } function O_(t, e) {
    for (var i=0; i<t.length; i++)e.writeFixed64(t[i]);
  } function N_(t, e) {
    for (var i=0; i<t.length; i++)e.writeSFixed64(t[i]);
  } function D_(t, e) {
    return (t[e]|t[e+1]<<8|t[e+2]<<16)+16777216*t[e+3];
  } function G_(t, e, i) {
    t[i]=e, t[i+1]=e>>>8, t[i+2]=e>>>16, t[i+3]=e>>>24;
  } function k_(t, e) {
    return (t[e]|t[e+1]<<8|t[e+2]<<16)+(t[e+3]<<24);
  }v_.prototype={destroy: function destroy() {
    this.buf=null;
  }, readFields: function readFields(t, e, i) {
    for (i=i||this.length; this.pos<i;) {
      var n=this.readVarint(); var r=n>>3; var s=this.pos; this.type=7&n, t(r, e, this), this.pos===s&&this.skip(n);
    } return e;
  }, readMessage: function readMessage(t, e) {
    return this.readFields(t, e, this.readVarint()+this.pos);
  }, readFixed32: function readFixed32() {
    var t=D_(this.buf, this.pos); return this.pos+=4, t;
  }, readSFixed32: function readSFixed32() {
    var t=k_(this.buf, this.pos); return this.pos+=4, t;
  }, readFixed64: function readFixed64() {
    var t=D_(this.buf, this.pos)+D_(this.buf, this.pos+4)*S_; return this.pos+=8, t;
  }, readSFixed64: function readSFixed64() {
    var t=D_(this.buf, this.pos)+k_(this.buf, this.pos+4)*S_; return this.pos+=8, t;
  }, readFloat: function readFloat() {
    var t=x_.read(this.buf, this.pos, !0, 23, 4); return this.pos+=4, t;
  }, readDouble: function readDouble() {
    var t=x_.read(this.buf, this.pos, !0, 52, 8); return this.pos+=8, t;
  }, readVarint: function readVarint(t) {
    var e; var i; var n=this.buf; return e=127&(i=n[this.pos++]), i<128?e:(e|=(127&(i=n[this.pos++]))<<7, i<128?e:(e|=(127&(i=n[this.pos++]))<<14, i<128?e:(e|=(127&(i=n[this.pos++]))<<21, i<128?e:function(t, e, i) {
      var n; var r; var s=i.buf; if (r=s[i.pos++], n=(112&r)>>4, r<128) return C_(t, n, e); if (r=s[i.pos++], n|=(127&r)<<3, r<128) return C_(t, n, e); if (r=s[i.pos++], n|=(127&r)<<10, r<128) return C_(t, n, e); if (r=s[i.pos++], n|=(127&r)<<17, r<128) return C_(t, n, e); if (r=s[i.pos++], n|=(127&r)<<24, r<128) return C_(t, n, e); if (r=s[i.pos++], n|=(1&r)<<31, r<128) return C_(t, n, e); throw new Error('Expected varint not more than 10 bytes');
    }(e|=(15&(i=n[this.pos]))<<28, t, this))));
  }, readVarint64: function readVarint64() {
    return this.readVarint(!0);
  }, readSVarint: function readSVarint() {
    var t=this.readVarint(); return t%2==1?(t+1)/-2:t/2;
  }, readBoolean: function readBoolean() {
    return Boolean(this.readVarint());
  }, readString: function readString() {
    var t=this.readVarint()+this.pos; var e=this.pos; return this.pos=t, t-e>=12&&T_?function(t, e, i) {
      return T_.decode(t.subarray(e, i));
    }(this.buf, e, t):function(t, e, i) {
      var n=''; var r=e; for (;r<i;) {
        var s; var o; var a; var l=t[r]; var h=null; var c=l>239?4:l>223?3:l>191?2:1; if (r+c>i) break; 1===c?l<128&&(h=l):2===c?128==(192&(s=t[r+1]))&&(h=(31&l)<<6|63&s)<=127&&(h=null):3===c?(s=t[r+1], o=t[r+2], 128==(192&s)&&128==(192&o)&&((h=(15&l)<<12|(63&s)<<6|63&o)<=2047||h>=55296&&h<=57343)&&(h=null)):4===c&&(s=t[r+1], o=t[r+2], a=t[r+3], 128==(192&s)&&128==(192&o)&&128==(192&a)&&((h=(15&l)<<18|(63&s)<<12|(63&o)<<6|63&a)<=65535||h>=1114112)&&(h=null)), null===h?(h=65533, c=1):h>65535&&(h-=65536, n+=String.fromCharCode(h>>>10&1023|55296), h=56320|1023&h), n+=String.fromCharCode(h), r+=c;
      } return n;
    }(this.buf, e, t);
  }, readBytes: function readBytes() {
    var t=this.readVarint()+this.pos; var e=this.buf.subarray(this.pos, t); return this.pos=t, e;
  }, readPackedVarint: function readPackedVarint(t, e) {
    if (this.type!==v_.Bytes) return t.push(this.readVarint(e)); var i=E_(this); for (t=t||[]; this.pos<i;)t.push(this.readVarint(e)); return t;
  }, readPackedSVarint: function readPackedSVarint(t) {
    if (this.type!==v_.Bytes) return t.push(this.readSVarint()); var e=E_(this); for (t=t||[]; this.pos<e;)t.push(this.readSVarint()); return t;
  }, readPackedBoolean: function readPackedBoolean(t) {
    if (this.type!==v_.Bytes) return t.push(this.readBoolean()); var e=E_(this); for (t=t||[]; this.pos<e;)t.push(this.readBoolean()); return t;
  }, readPackedFloat: function readPackedFloat(t) {
    if (this.type!==v_.Bytes) return t.push(this.readFloat()); var e=E_(this); for (t=t||[]; this.pos<e;)t.push(this.readFloat()); return t;
  }, readPackedDouble: function readPackedDouble(t) {
    if (this.type!==v_.Bytes) return t.push(this.readDouble()); var e=E_(this); for (t=t||[]; this.pos<e;)t.push(this.readDouble()); return t;
  }, readPackedFixed32: function readPackedFixed32(t) {
    if (this.type!==v_.Bytes) return t.push(this.readFixed32()); var e=E_(this); for (t=t||[]; this.pos<e;)t.push(this.readFixed32()); return t;
  }, readPackedSFixed32: function readPackedSFixed32(t) {
    if (this.type!==v_.Bytes) return t.push(this.readSFixed32()); var e=E_(this); for (t=t||[]; this.pos<e;)t.push(this.readSFixed32()); return t;
  }, readPackedFixed64: function readPackedFixed64(t) {
    if (this.type!==v_.Bytes) return t.push(this.readFixed64()); var e=E_(this); for (t=t||[]; this.pos<e;)t.push(this.readFixed64()); return t;
  }, readPackedSFixed64: function readPackedSFixed64(t) {
    if (this.type!==v_.Bytes) return t.push(this.readSFixed64()); var e=E_(this); for (t=t||[]; this.pos<e;)t.push(this.readSFixed64()); return t;
  }, skip: function skip(t) {
    var e=7&t; if (e===v_.Varint) for (;this.buf[this.pos++]>127;);else if (e===v_.Bytes) this.pos=this.readVarint()+this.pos; else if (e===v_.Fixed32) this.pos+=4; else {
      if (e!==v_.Fixed64) throw new Error('Unimplemented type: '+e); this.pos+=8;
    }
  }, writeTag: function writeTag(t, e) {
    this.writeVarint(t<<3|e);
  }, realloc: function realloc(t) {
    for (var e=this.length||16; e<this.pos+t;)e*=2; if (e!==this.length) {
      var i=new Uint8Array(e); i.set(this.buf), this.buf=i, this.length=e;
    }
  }, finish: function finish() {
    return this.length=this.pos, this.pos=0, this.buf.subarray(0, this.length);
  }, writeFixed32: function writeFixed32(t) {
    this.realloc(4), G_(this.buf, t, this.pos), this.pos+=4;
  }, writeSFixed32: function writeSFixed32(t) {
    this.realloc(4), G_(this.buf, t, this.pos), this.pos+=4;
  }, writeFixed64: function writeFixed64(t) {
    this.realloc(8), G_(this.buf, -1&t, this.pos), G_(this.buf, Math.floor(t*w_), this.pos+4), this.pos+=8;
  }, writeSFixed64: function writeSFixed64(t) {
    this.realloc(8), G_(this.buf, -1&t, this.pos), G_(this.buf, Math.floor(t*w_), this.pos+4), this.pos+=8;
  }, writeVarint: function writeVarint(t) {
(t=+t||0)>268435455||t<0?function(t, e) {
  var i; var n; t>=0?(i=t%4294967296|0, n=t/4294967296|0):(n=~(-t/4294967296), 4294967295^(i=~(-t%4294967296))?i=i+1|0:(i=0, n=n+1|0)); if (t>=0x10000000000000000||t<-0x10000000000000000) throw new Error('Given varint doesn\'t fit into 10 bytes'); e.realloc(10), function(t, e, i) {
    i.buf[i.pos++]=127&t|128, t>>>=7, i.buf[i.pos++]=127&t|128, t>>>=7, i.buf[i.pos++]=127&t|128, t>>>=7, i.buf[i.pos++]=127&t|128, t>>>=7, i.buf[i.pos]=127&t;
  }(i, 0, e), function(t, e) {
    var i=(7&t)<<4; if (e.buf[e.pos++]|=i|((t>>>=3)?128:0), !t) return; if (e.buf[e.pos++]=127&t|((t>>>=7)?128:0), !t) return; if (e.buf[e.pos++]=127&t|((t>>>=7)?128:0), !t) return; if (e.buf[e.pos++]=127&t|((t>>>=7)?128:0), !t) return; if (e.buf[e.pos++]=127&t|((t>>>=7)?128:0), !t) return; e.buf[e.pos++]=127&t;
  }(n, e);
}(t, this):(this.realloc(4), this.buf[this.pos++]=127&t|(t>127?128:0), t<=127||(this.buf[this.pos++]=127&(t>>>=7)|(t>127?128:0), t<=127||(this.buf[this.pos++]=127&(t>>>=7)|(t>127?128:0), t<=127||(this.buf[this.pos++]=t>>>7&127))));
  }, writeSVarint: function writeSVarint(t) {
    this.writeVarint(t<0?2*-t-1:2*t);
  }, writeBoolean: function writeBoolean(t) {
    this.writeVarint(Boolean(t));
  }, writeString: function writeString(t) {
    t=String(t), this.realloc(4*t.length), this.pos++; var e=this.pos; this.pos=function(t, e, i) {
      for (var n, r, s=0; s<e.length; s++) {
        if ((n=e.charCodeAt(s))>55295&&n<57344) {
          if (!r) {
n>56319||s+1===e.length?(t[i++]=239, t[i++]=191, t[i++]=189):r=n; continue;
          } if (n<56320) {
            t[i++]=239, t[i++]=191, t[i++]=189, r=n; continue;
          }n=r-55296<<10|n-56320|65536, r=null;
        } else r&&(t[i++]=239, t[i++]=191, t[i++]=189, r=null); n<128?t[i++]=n:(n<2048?t[i++]=n>>6|192:(n<65536?t[i++]=n>>12|224:(t[i++]=n>>18|240, t[i++]=n>>12&63|128), t[i++]=n>>6&63|128), t[i++]=63&n|128);
      } return i;
    }(this.buf, t, this.pos); var i=this.pos-e; i>=128&&R_(e, i, this), this.pos=e-1, this.writeVarint(i), this.pos+=i;
  }, writeFloat: function writeFloat(t) {
    this.realloc(4), x_.write(this.buf, t, this.pos, !0, 23, 4), this.pos+=4;
  }, writeDouble: function writeDouble(t) {
    this.realloc(8), x_.write(this.buf, t, this.pos, !0, 52, 8), this.pos+=8;
  }, writeBytes: function writeBytes(t) {
    var e=t.length; this.writeVarint(e), this.realloc(e); for (var i=0; i<e; i++) this.buf[this.pos++]=t[i];
  }, writeRawMessage: function writeRawMessage(t, e) {
    this.pos++; var i=this.pos; t(e, this); var n=this.pos-i; n>=128&&R_(i, n, this), this.pos=i-1, this.writeVarint(n), this.pos+=n;
  }, writeMessage: function writeMessage(t, e, i) {
    this.writeTag(t, v_.Bytes), this.writeRawMessage(e, i);
  }, writePackedVarint: function writePackedVarint(t, e) {
    e.length&&this.writeMessage(t, b_, e);
  }, writePackedSVarint: function writePackedSVarint(t, e) {
    e.length&&this.writeMessage(t, P_, e);
  }, writePackedBoolean: function writePackedBoolean(t, e) {
    e.length&&this.writeMessage(t, F_, e);
  }, writePackedFloat: function writePackedFloat(t, e) {
    e.length&&this.writeMessage(t, I_, e);
  }, writePackedDouble: function writePackedDouble(t, e) {
    e.length&&this.writeMessage(t, L_, e);
  }, writePackedFixed32: function writePackedFixed32(t, e) {
    e.length&&this.writeMessage(t, M_, e);
  }, writePackedSFixed32: function writePackedSFixed32(t, e) {
    e.length&&this.writeMessage(t, A_, e);
  }, writePackedFixed64: function writePackedFixed64(t, e) {
    e.length&&this.writeMessage(t, O_, e);
  }, writePackedSFixed64: function writePackedSFixed64(t, e) {
    e.length&&this.writeMessage(t, N_, e);
  }, writeBytesField: function writeBytesField(t, e) {
    this.writeTag(t, v_.Bytes), this.writeBytes(e);
  }, writeFixed32Field: function writeFixed32Field(t, e) {
    this.writeTag(t, v_.Fixed32), this.writeFixed32(e);
  }, writeSFixed32Field: function writeSFixed32Field(t, e) {
    this.writeTag(t, v_.Fixed32), this.writeSFixed32(e);
  }, writeFixed64Field: function writeFixed64Field(t, e) {
    this.writeTag(t, v_.Fixed64), this.writeFixed64(e);
  }, writeSFixed64Field: function writeSFixed64Field(t, e) {
    this.writeTag(t, v_.Fixed64), this.writeSFixed64(e);
  }, writeVarintField: function writeVarintField(t, e) {
    this.writeTag(t, v_.Varint), this.writeVarint(e);
  }, writeSVarintField: function writeSVarintField(t, e) {
    this.writeTag(t, v_.Varint), this.writeSVarint(e);
  }, writeStringField: function writeStringField(t, e) {
    this.writeTag(t, v_.Bytes), this.writeString(e);
  }, writeFloatField: function writeFloatField(t, e) {
    this.writeTag(t, v_.Fixed32), this.writeFloat(e);
  }, writeDoubleField: function writeDoubleField(t, e) {
    this.writeTag(t, v_.Fixed64), this.writeDouble(e);
  }, writeBooleanField: function writeBooleanField(t, e) {
    this.writeVarintField(t, Boolean(e));
  }}; function j_(t, e, i) {
    if (3===t) {
      var _t285={keys: [], values: [], features: []}; var _n199=i.readVarint()+i.pos; i.readFields(B_, _t285, _n199), _t285.length=_t285.features.length, _t285.length&&(e[_t285.name]=_t285);
    }
  } function B_(t, e, i) {
    if (15===t)e.version=i.readVarint(); else if (1===t)e.name=i.readString(); else if (5===t)e.extent=i.readVarint(); else if (2===t)e.features.push(i.pos); else if (3===t)e.keys.push(i.readString()); else if (4===t) {
      var _n200=null; var _r166=i.readVarint()+i.pos; for (;i.pos<_r166;)_n200=1===(t=i.readVarint()>>3)?i.readString():2===t?i.readFloat():3===t?i.readDouble():4===t?i.readVarint64():5===t?i.readVarint():6===t?i.readSVarint():7===t?i.readBoolean():null; e.values.push(_n200);
    }
  } function z_(t, e, i) {
    if (1==t)e.id=i.readVarint(); else if (2==t) {
      var _t286=i.readVarint()+i.pos; for (;i.pos<_t286;) {
        var _t287=e.layer.keys[i.readVarint()]; var _n201=e.layer.values[i.readVarint()]; e.properties[_t287]=_n201;
      }
    } else 3==t?e.type=i.readVarint():4==t&&(e.geometry=i.pos);
  } function U_(t, e, i) {
    t.pos=e.features[i]; var n=t.readVarint()+t.pos; var r={layer: e, type: 0, properties: {}}; return t.readFields(z_, r, n), r;
  } var X_=/* #__PURE__*/function(_f_) {
    _inherits(X_, _f_); var _super143=_createSuper(X_); function X_(t) {
      var _this168; _classCallCheck(this, X_); _this168=_super143.call(this), t=t||{}, _this168.dataProjection=new Ke({code: '', units: 'tile-pixels'}), _this168.featureClass_=t.featureClass?t.featureClass:Jm, _this168.geometryName_=t.geometryName, _this168.layerName_=t.layerName?t.layerName:'layer', _this168.layers_=t.layers?t.layers:null, _this168.idProperty_=t.idProperty, _this168.supportedMediaTypes=['application/vnd.mapbox-vector-tile', 'application/x-protobuf']; return _this168;
    }_createClass(X_, [{key: 'readRawGeometry_', value: function readRawGeometry_(t, e, i, n) {
      t.pos=e.geometry; var r=t.readVarint()+t.pos; var s=1; var o=0; var a=0; var l=0; var h=0; var c=0; for (;t.pos<r;) {
        if (!o) {
          var _e290=t.readVarint(); s=7&_e290, o=_e290>>3;
        }o--, 1===s||2===s?(a+=t.readSVarint(), l+=t.readSVarint(), 1===s&&h>c&&(n.push(h), c=h), i.push(a, l), h+=2):7===s?h>c&&(i.push(i[c], i[c+1]), h+=2):Ft(!1, 59);
      }h>c&&(n.push(h), c=h);
    }}, {key: 'createFeature_', value: function createFeature_(t, e, i) {
      var n=e.type; if (0===n) return null; var r; var s=e.properties; var o; this.idProperty_?(o=s[this.idProperty_], delete s[this.idProperty_]):o=e.id, s[this.layerName_]=e.layer.name; var a=[]; var l=[]; this.readRawGeometry_(t, e, a, l); var h=function(t, e) {
        var i; 1===t?i=1===e?'Point':'MultiPoint':2===t?i=1===e?'LineString':'MultiLineString':3===t&&(i='Polygon'); return i;
      }(n, l.length); if (this.featureClass_===Jm)r=new this.featureClass_(h, a, l, s, o), r.transform(i.dataProjection); else {
        var _t288; if ('Polygon'==h) {
          var _e291=Fr(a, l); _t288=_e291.length>1?new Km(a, 'XY', _e291):new Ar(a, 'XY', l);
        } else _t288='Point'===h?new dr(a, 'XY'):'LineString'===h?new zm(a, 'XY'):'MultiPoint'===h?new Wm(a, 'XY'):'MultiLineString'===h?new Xm(a, 'XY', l):null; r=new(0, this.featureClass_)(), this.geometryName_&&r.setGeometryName(this.geometryName_); var _e292=p_(_t288, !1, i); r.setGeometry(_e292), void 0!==o&&r.setId(o), r.setProperties(s, !0);
      } return r;
    }}, {key: 'getType', value: function getType() {
      return 'arraybuffer';
    }}, {key: 'readFeatures', value: function readFeatures(t, e) {
      var i=this.layers_; var n=an((e=this.adaptOptions(e)).dataProjection); n.setWorldExtent(e.extent), e.dataProjection=n; var r=new y_(t); var s=r.readFields(j_, {}); var o=[]; for (var _t289 in s) {
        if (i&&!i.includes(_t289)) continue; var _a81=s[_t289]; var _l51=_a81?[0, 0, _a81.extent, _a81.extent]:null; n.setExtent(_l51); for (var _t290=0, _i242=_a81.length; _t290<_i242; ++_t290) {
          var _i243=U_(r, _a81, _t290); var _n202=this.createFeature_(r, _i243, e); null!==_n202&&o.push(_n202);
        }
      } return o;
    }}, {key: 'readProjection', value: function readProjection(t) {
      return this.dataProjection;
    }}, {key: 'setLayers', value: function setLayers(t) {
      this.layers_=t;
    }}]); return X_;
  }(f_); var V_=/* #__PURE__*/function(_Af3) {
    _inherits(V_, _Af3); var _super144=_createSuper(V_); function V_(t) {
      var _this169; _classCallCheck(this, V_); t=t||{}; var e=Object.assign({}, t); delete e.preload, delete e.useInterimTilesOnError, _this169=_super144.call(this, e), _this169.on, _this169.once, _this169.un; var i=t.renderMode||'hybrid'; Ft('hybrid'==i||'vector'==i, 28), _this169.renderMode_=i, _this169.setPreload(t.preload?t.preload:0), _this169.setUseInterimTilesOnError(void 0===t.useInterimTilesOnError||t.useInterimTilesOnError), _this169.getBackground, _this169.setBackground; return _this169;
    }_createClass(V_, [{key: 'createRenderer', value: function createRenderer() {
      return new Fm(this);
    }}, {key: 'getFeatures', value: function getFeatures(t) {
      return _get(_getPrototypeOf(V_.prototype), 'getFeatures', this).call(this, t);
    }}, {key: 'getRenderMode', value: function getRenderMode() {
      return this.renderMode_;
    }}, {key: 'getPreload', value: function getPreload() {
      return this.get(du);
    }}, {key: 'getUseInterimTilesOnError', value: function getUseInterimTilesOnError() {
      return this.get(gu);
    }}, {key: 'setPreload', value: function setPreload(t) {
      this.set(du, t);
    }}, {key: 'setUseInterimTilesOnError', value: function setUseInterimTilesOnError(t) {
      this.set(gu, t);
    }}]); return V_;
  }(Af); var W_=/* #__PURE__*/function(_r167) {
    _inherits(W_, _r167); var _super145=_createSuper(W_); function W_(t) {
      var _this170; _classCallCheck(this, W_); _this170=_super145.call(this, T), _this170.error=t; return _this170;
    } return _createClass(W_);
  }(r); var Z_=/* #__PURE__*/function(_V_) {
    _inherits(Z_, _V_); var _super146=_createSuper(Z_); function Z_(t) {
      var _this171; _classCallCheck(this, Z_); var e=!('declutter'in t)||t.declutter; var i=new zu({state: 'loading', format: new X_()}); _this171=_super146.call(this, {source: i, background: t.background, declutter: e, className: t.className, opacity: t.opacity, visible: t.visible, zIndex: t.zIndex, minResolution: t.minResolution, maxResolution: t.maxResolution, minZoom: t.minZoom, maxZoom: t.maxZoom, renderOrder: t.renderOrder, renderBuffer: t.renderBuffer, renderMode: t.renderMode, map: t.map, updateWhileAnimating: t.updateWhileAnimating, updateWhileInteracting: t.updateWhileInteracting, preload: t.preload, useInterimTilesOnError: t.useInterimTilesOnError, properties: t.properties}), t.accessToken&&(_this171.accessToken=t.accessToken); var n=t.styleUrl; olms.applyStyle(_assertThisInitialized(_this171), n, t.layers||t.source, {accessToken: _this171.accessToken}).then(function() {
        i.setState('ready');
      })['catch'](function(t) {
        _this171.dispatchEvent(new W_(t)); _this171.getSource().setState('error');
      }), void 0===_this171.getBackground()&&olms.applyBackground(_assertThisInitialized(_this171), t.styleUrl, {accessToken: _this171.accessToken}); return _this171;
    } return _createClass(Z_);
  }(V_); var Y_=/* #__PURE__*/function(_Af4) {
    _inherits(Y_, _Af4); var _super147=_createSuper(Y_); function Y_(t) {
      var _this172; _classCallCheck(this, Y_); t=t||{}; var e=Object.assign({}, t); delete e.imageRatio, _this172=_super147.call(this, e), _this172.imageRatio_=void 0!==t.imageRatio?t.imageRatio:1; return _this172;
    }_createClass(Y_, [{key: 'getImageRatio', value: function getImageRatio() {
      return this.imageRatio_;
    }}, {key: 'createRenderer', value: function createRenderer() {
      return new Pm(this);
    }}]); return Y_;
  }(Af); var K_=/* #__PURE__*/function(_ks4) {
    _inherits(K_, _ks4); var _super148=_createSuper(K_); function K_(t) {
      var _this173; _classCallCheck(this, K_); _this173=_super148.call(this, Object.assign({}, t)), _this173.parseResult_=Wg(t.style), _this173.styleVariables_=t.style.variables||{}, _this173.hitDetectionDisabled_=!!t.disableHitDetection; return _this173;
    }_createClass(K_, [{key: 'createRenderer', value: function createRenderer() {
      return new mp(this, {vertexShader: this.parseResult_.builder.getSymbolVertexShader(), fragmentShader: this.parseResult_.builder.getSymbolFragmentShader(), hitVertexShader: !this.hitDetectionDisabled_&&this.parseResult_.builder.getSymbolVertexShader(!0), hitFragmentShader: !this.hitDetectionDisabled_&&this.parseResult_.builder.getSymbolFragmentShader(!0), uniforms: this.parseResult_.uniforms, attributes: this.parseResult_.attributes});
    }}, {key: 'updateStyleVariables', value: function updateStyleVariables(t) {
      Object.assign(this.styleVariables_, t), this.changed();
    }}]); return K_;
  }(ks); function q_(t, e) {
    var i='\n    attribute vec2 '.concat(og.TEXTURE_COORD, ';\n    uniform mat4 ').concat(sg.TILE_TRANSFORM, ';\n    uniform float ').concat(sg.TEXTURE_PIXEL_WIDTH, ';\n    uniform float ').concat(sg.TEXTURE_PIXEL_HEIGHT, ';\n    uniform float ').concat(sg.TEXTURE_RESOLUTION, ';\n    uniform float ').concat(sg.TEXTURE_ORIGIN_X, ';\n    uniform float ').concat(sg.TEXTURE_ORIGIN_Y, ';\n    uniform float ').concat(sg.DEPTH, ';\n\n    varying vec2 v_textureCoord;\n    varying vec2 v_mapCoord;\n\n    void main() {\n      v_textureCoord = ').concat(og.TEXTURE_COORD, ';\n      v_mapCoord = vec2(\n        ').concat(sg.TEXTURE_ORIGIN_X, ' + ').concat(sg.TEXTURE_RESOLUTION, ' * ').concat(sg.TEXTURE_PIXEL_WIDTH, ' * v_textureCoord[0],\n        ').concat(sg.TEXTURE_ORIGIN_Y, ' - ').concat(sg.TEXTURE_RESOLUTION, ' * ').concat(sg.TEXTURE_PIXEL_HEIGHT, ' * v_textureCoord[1]\n      );\n      gl_Position = ').concat(sg.TILE_TRANSFORM, ' * vec4(').concat(og.TEXTURE_COORD, ', ').concat(sg.DEPTH, ', 1.0);\n    }\n  '); var n={inFragmentShader: !0, variables: [], attributes: [], stringLiteralsMap: {}, functions: {}, bandCount: e}; var r=[]; if (void 0!==t.color) {
      var _e293=Ig(n, t.color, mg); r.push('color = '.concat(_e293, ';'));
    } if (void 0!==t.contrast) {
      var _e294=Ig(n, t.contrast, fg); r.push('color.rgb = clamp(('.concat(_e294, ' + 1.0) * color.rgb - (').concat(_e294, ' / 2.0), vec3(0.0, 0.0, 0.0), vec3(1.0, 1.0, 1.0));'));
    } if (void 0!==t.exposure) {
      var _e295=Ig(n, t.exposure, fg); r.push('color.rgb = clamp(('.concat(_e295, ' + 1.0) * color.rgb, vec3(0.0, 0.0, 0.0), vec3(1.0, 1.0, 1.0));'));
    } if (void 0!==t.saturation) {
      var _e296=Ig(n, t.saturation, fg); r.push('\n      float saturation = '.concat(_e296, ' + 1.0;\n      float sr = (1.0 - saturation) * 0.2126;\n      float sg = (1.0 - saturation) * 0.7152;\n      float sb = (1.0 - saturation) * 0.0722;\n      mat3 saturationMatrix = mat3(\n        sr + saturation, sr, sr,\n        sg, sg + saturation, sg,\n        sb, sb, sb + saturation\n      );\n      color.rgb = clamp(saturationMatrix * color.rgb, vec3(0.0, 0.0, 0.0), vec3(1.0, 1.0, 1.0));\n    '));
    } if (void 0!==t.gamma) {
      var _e297=Ig(n, t.gamma, fg); r.push('color.rgb = pow(color.rgb, vec3(1.0 / '.concat(_e297, '));'));
    } if (void 0!==t.brightness) {
      var _e298=Ig(n, t.brightness, fg); r.push('color.rgb = clamp(color.rgb + '.concat(_e298, ', vec3(0.0, 0.0, 0.0), vec3(1.0, 1.0, 1.0));'));
    } var s={}; var o=n.variables.length; if (o>1&&!t.variables) throw new Error('Missing variables in style (expected '.concat(n.variables, ')')); var _loop6=function _loop6() {
      var i=n.variables[_e299]; if (!(i in t.variables)) throw new Error('Missing \''.concat(i, '\' in style variables')); s[jg(i)]=function() {
        var e=t.variables[i]; return 'string'==typeof e&&(e=bg(n, e)), void 0!==e?e:-9999999;
      };
    }; for (var _e299=0; _e299<o; ++_e299) {
      _loop6();
    } var a=Object.keys(s).map(function(t) {
      return 'uniform float '.concat(t, ';');
    }); var l=Math.ceil(e/4); a.push('uniform sampler2D '.concat(sg.TILE_TEXTURE_ARRAY, '[').concat(l, '];')), n.paletteTextures&&a.push('uniform sampler2D u_paletteTextures['.concat(n.paletteTextures.length, '];')); var h=Object.keys(n.functions).map(function(t) {
      return n.functions[t];
    }); return {vertexShader: i, fragmentShader: '\n    #ifdef GL_FRAGMENT_PRECISION_HIGH\n    precision highp float;\n    #else\n    precision mediump float;\n    #endif\n\n    varying vec2 v_textureCoord;\n    varying vec2 v_mapCoord;\n    uniform vec4 '.concat(sg.RENDER_EXTENT, ';\n    uniform float ').concat(sg.TRANSITION_ALPHA, ';\n    uniform float ').concat(sg.TEXTURE_PIXEL_WIDTH, ';\n    uniform float ').concat(sg.TEXTURE_PIXEL_HEIGHT, ';\n    uniform float ').concat(sg.RESOLUTION, ';\n    uniform float ').concat(sg.ZOOM, ';\n\n    ').concat(a.join('\n'), '\n\n    ').concat(h.join('\n'), '\n\n    void main() {\n      if (\n        v_mapCoord[0] < ').concat(sg.RENDER_EXTENT, '[0] ||\n        v_mapCoord[1] < ').concat(sg.RENDER_EXTENT, '[1] ||\n        v_mapCoord[0] > ').concat(sg.RENDER_EXTENT, '[2] ||\n        v_mapCoord[1] > ').concat(sg.RENDER_EXTENT, '[3]\n      ) {\n        discard;\n      }\n\n      vec4 color = texture2D(').concat(sg.TILE_TEXTURE_ARRAY, '[0],  v_textureCoord);\n\n      ').concat(r.join('\n'), '\n\n      if (color.a == 0.0) {\n        discard;\n      }\n\n      gl_FragColor = color;\n      gl_FragColor.rgb *= gl_FragColor.a;\n      gl_FragColor *= ').concat(sg.TRANSITION_ALPHA, ';\n    }'), uniforms: s, paletteTextures: n.paletteTextures};
  } var H_=/* #__PURE__*/function(_fu2) {
    _inherits(H_, _fu2); var _super149=_createSuper(H_); function H_(t) {
      var _this174; _classCallCheck(this, H_); var e=(t=t?Object.assign({}, t):{}).style||{}; delete t.style; var i=t.cacheSize; delete t.cacheSize, _this174=_super149.call(this, t), _this174.sources_=t.sources, _this174.renderedSource_=null, _this174.renderedResolution_=NaN, _this174.style_=e, _this174.cacheSize_=i, _this174.styleVariables_=_this174.style_.variables||{}, _this174.addChangeListener(Is, _this174.handleSourceUpdate_); return _this174;
    }_createClass(H_, [{key: 'getSources', value: function getSources(t, e) {
      var i=this.getSource(); return this.sources_?'function'==typeof this.sources_?this.sources_(t, e):this.sources_:i?[i]:[];
    }}, {key: 'getRenderSource', value: function getRenderSource() {
      return this.renderedSource_||this.getSource();
    }}, {key: 'getSourceState', value: function getSourceState() {
      var t=this.getRenderSource(); return t?t.getState():'undefined';
    }}, {key: 'handleSourceUpdate_', value: function handleSourceUpdate_() {
      this.hasRenderer()&&this.getRenderer().clearCache(), this.getSource()&&this.setStyle(this.style_);
    }}, {key: 'getSourceBandCount_', value: function getSourceBandCount_() {
      var t=Number.MAX_SAFE_INTEGER; var e=this.getSources([-t, -t, t, t], t); return e&&e.length&&'bandCount'in e[0]?e[0].bandCount:4;
    }}, {key: 'createRenderer', value: function createRenderer() {
      var t=q_(this.style_, this.getSourceBandCount_()); return new gg(this, {vertexShader: t.vertexShader, fragmentShader: t.fragmentShader, uniforms: t.uniforms, cacheSize: this.cacheSize_, paletteTextures: t.paletteTextures});
    }}, {key: 'renderSources', value: function renderSources(t, e) {
      var i=this.getRenderer(); var n; for (var _r168=0, _s135=e.length; _r168<_s135; ++_r168) this.renderedSource_=e[_r168], i.prepareFrame(t)&&(n=i.renderFrame(t)); return n;
    }}, {key: 'render', value: function render(t, e) {
      var _this175=this; this.rendered=!0; var i=t.viewState; var n=this.getSources(t.extent, i.resolution); var r=!0; var _loop7=function _loop7() {
        var e=n[_t291]; var i=e.getState(); if ('loading'==i) {
          var _t292=function _t292() {
            'ready'==e.getState()&&(e.removeEventListener('change', _t292), _this175.changed());
          }; e.addEventListener('change', _t292);
        }r=r&&'ready'==i;
      }; for (var _t291=0, _e300=n.length; _t291<_e300; ++_t291) {
        _loop7();
      } var s=this.renderSources(t, n); if (this.getRenderer().renderComplete&&r) return this.renderedResolution_=i.resolution, s; if (this.renderedResolution_>.5*i.resolution) {
        var _e301=this.getSources(t.extent, this.renderedResolution_).filter(function(t) {
          return !n.includes(t);
        }); if (_e301.length>0) return this.renderSources(t, _e301);
      } return s;
    }}, {key: 'setStyle', value: function setStyle(t) {
      this.styleVariables_=t.variables||{}, this.style_=t; var e=q_(this.style_, this.getSourceBandCount_()); this.getRenderer().reset({vertexShader: e.vertexShader, fragmentShader: e.fragmentShader, uniforms: e.uniforms, paletteTextures: e.paletteTextures}), this.changed();
    }}, {key: 'updateStyleVariables', value: function updateStyleVariables(t) {
      Object.assign(this.styleVariables_, t), this.changed();
    }}]); return H_;
  }(fu); H_.prototype.dispose; var $_=H_; var J_='addfeatures'; var Q_=/* #__PURE__*/function(_r169) {
    _inherits(Q_, _r169); var _super150=_createSuper(Q_); function Q_(t, e, i, n) {
      var _this176; _classCallCheck(this, Q_); _this176=_super150.call(this, t), _this176.features=i, _this176.file=e, _this176.projection=n; return _this176;
    } return _createClass(Q_);
  }(r); var ty=/* #__PURE__*/function(_Sa6) {
    _inherits(ty, _Sa6); var _super151=_createSuper(ty); function ty(t) {
      var _this177; _classCallCheck(this, ty); t=t||{}, _this177=_super151.call(this, {handleEvent: f}), _this177.on, _this177.once, _this177.un, _this177.readAsBuffer_=!1, _this177.formats_=[]; var e=t.formatConstructors?t.formatConstructors:[]; for (var _t293=0, _i244=e.length; _t293<_i244; ++_t293) {
        var _i245=e[_t293]; 'function'==typeof _i245&&(_i245=new _i245()), _this177.formats_.push(_i245), _this177.readAsBuffer_=_this177.readAsBuffer_||'arraybuffer'===_i245.getType();
      }_this177.projection_=t.projection?an(t.projection):null, _this177.dropListenKeys_=null, _this177.source_=t.source||null, _this177.target=t.target?t.target:null; return _this177;
    }_createClass(ty, [{key: 'handleResult_', value: function handleResult_(t, e) {
      var i=e.target.result; var n=this.getMap(); var r; var s=this.projection_; if (!s&&(s=Sn(), !s)) {
        s=n.getView().getProjection();
      } var o=this.formats_; for (var _e302=0, _n203=o.length; _e302<_n203; ++_e302) {
        var _n204=o[_e302]; var _a82=i; this.readAsBuffer_&&'arraybuffer'!==_n204.getType()&&(void 0===r&&(r=new TextDecoder().decode(i)), _a82=r); var _l52=this.tryReadFeatures_(_n204, _a82, {featureProjection: s}); if (_l52&&_l52.length>0) {
          this.source_&&(this.source_.clear(), this.source_.addFeatures(_l52)), this.dispatchEvent(new Q_(J_, t, _l52, s)); break;
        }
      }
    }}, {key: 'registerListeners_', value: function registerListeners_() {
      var t=this.getMap(); if (t) {
        var _e303=this.target?this.target:t.getViewport(); this.dropListenKeys_=[N(_e303, I, this.handleDrop, this), N(_e303, b, this.handleStop, this), N(_e303, P, this.handleStop, this), N(_e303, I, this.handleStop, this)];
      }
    }}, {key: 'setActive', value: function setActive(t) {
      !this.getActive()&&t&&this.registerListeners_(), this.getActive()&&!t&&this.unregisterListeners_(), _get(_getPrototypeOf(ty.prototype), 'setActive', this).call(this, t);
    }}, {key: 'setMap', value: function setMap(t) {
      this.unregisterListeners_(), _get(_getPrototypeOf(ty.prototype), 'setMap', this).call(this, t), this.getActive()&&this.registerListeners_();
    }}, {key: 'tryReadFeatures_', value: function tryReadFeatures_(t, e, i) {
      try {
        return t.readFeatures(e, i);
      } catch (t) {
        return null;
      }
    }}, {key: 'unregisterListeners_', value: function unregisterListeners_() {
      this.dropListenKeys_&&(this.dropListenKeys_.forEach(G), this.dropListenKeys_=null);
    }}, {key: 'handleDrop', value: function handleDrop(t) {
      var e=t.dataTransfer.files; for (var _t294=0, _i246=e.length; _t294<_i246; ++_t294) {
        var _i247=e.item(_t294); var _n205=new FileReader(); _n205.addEventListener(M, this.handleResult_.bind(this, _i247)), this.readAsBuffer_?_n205.readAsArrayBuffer(_i247):_n205.readAsText(_i247);
      }
    }}, {key: 'handleStop', value: function handleStop(t) {
      t.stopPropagation(), t.preventDefault(), t.dataTransfer.dropEffect='copy';
    }}]); return ty;
  }(Sa); var ey=/* #__PURE__*/function(_Ea6) {
    _inherits(ey, _Ea6); var _super152=_createSuper(ey); function ey(t) {
      var _this178; _classCallCheck(this, ey); _this178=_super152.call(this, t=t||{}), _this178.condition_=t.condition?t.condition:Na, _this178.lastAngle_=void 0, _this178.lastMagnitude_=void 0, _this178.lastScaleDelta_=0, _this178.duration_=void 0!==t.duration?t.duration:400; return _this178;
    }_createClass(ey, [{key: 'handleDragEvent', value: function handleDragEvent(t) {
      if (!Ga(t)) return; var e=t.map; var i=e.getSize(); var n=t.pixel; var r=n[0]-i[0]/2; var s=i[1]/2-n[1]; var o=Math.atan2(s, r); var a=Math.sqrt(r*r+s*s); var l=e.getView(); if (void 0!==this.lastAngle_) {
        var _t295=this.lastAngle_-o; l.adjustRotationInternal(_t295);
      } this.lastAngle_=o, void 0!==this.lastMagnitude_&&l.adjustResolutionInternal(this.lastMagnitude_/a), void 0!==this.lastMagnitude_&&(this.lastScaleDelta_=this.lastMagnitude_/a), this.lastMagnitude_=a;
    }}, {key: 'handleUpEvent', value: function handleUpEvent(t) {
      if (!Ga(t)) return !0; var e=t.map.getView(); var i=this.lastScaleDelta_>1?1:-1; return e.endInteraction(this.duration_, i), this.lastScaleDelta_=0, !1;
    }}, {key: 'handleDownEvent', value: function handleDownEvent(t) {
      return !!Ga(t)&&!!this.condition_(t)&&(t.map.getView().beginInteraction(), this.lastAngle_=void 0, this.lastMagnitude_=void 0, !0);
    }}]); return ey;
  }(Ea); var iy='drawstart'; var ny='drawend'; var ry='drawabort'; var sy=/* #__PURE__*/function(_r170) {
    _inherits(sy, _r170); var _super153=_createSuper(sy); function sy(t, e) {
      var _this179; _classCallCheck(this, sy); _this179=_super153.call(this, t), _this179.feature=e; return _this179;
    } return _createClass(sy);
  }(r); function oy(t, e) {
    return xi(t[0], t[1], e[0], e[1]);
  } function ay(t, e) {
    var i=t.length; return e<0?t[e+i]:e>=i?t[e-i]:t[e];
  } function ly(t, e, i) {
    var n; var r; e<i?(n=e, r=i):(n=i, r=e); var s=Math.ceil(n); var o=Math.floor(r); if (s>o) {
      return oy(fy(t, n), fy(t, r));
    } var a=0; if (n<s) {
      a+=oy(fy(t, n), ay(t, s));
    } if (o<r) {
      a+=oy(ay(t, o), fy(t, r));
    } for (var _e304=s; _e304<o-1; ++_e304) {
      a+=oy(ay(t, _e304), ay(t, _e304+1));
    } return a;
  } function hy(t, e, i) {
    if (e instanceof zm)uy(t, e.getCoordinates(), !1, i); else if (e instanceof Xm) {
      var _n206=e.getCoordinates(); for (var _e305=0, _r171=_n206.length; _e305<_r171; ++_e305)uy(t, _n206[_e305], !1, i);
    } else if (e instanceof Ar) {
      var _n207=e.getCoordinates(); for (var _e306=0, _r172=_n207.length; _e306<_r172; ++_e306)uy(t, _n207[_e306], !0, i);
    } else if (e instanceof Km) {
      var _n208=e.getCoordinates(); for (var _e307=0, _r173=_n208.length; _e307<_r173; ++_e307) {
        var _r174=_n208[_e307]; for (var _e308=0, _n209=_r174.length; _e308<_n209; ++_e308)uy(t, _r174[_e308], !0, i);
      }
    } else if (e instanceof Dm) {
      var _n210=e.getGeometries(); for (var _e309=0; _e309<_n210.length; ++_e309)hy(t, _n210[_e309], i);
    } else;
  } var cy={index: -1, endIndex: NaN}; function uy(t, e, i, n) {
    var r=t[0]; var s=t[1]; for (var _t296=0, _o125=e.length-1; _t296<_o125; ++_t296) {
      var _o126=gy(r, s, e[_t296], e[_t296+1]); if (0===_o126.squaredDistance) {
        var _r175=_t296+_o126.along; return void n.push({coordinates: e, ring: i, startIndex: _r175, endIndex: _r175});
      }
    }
  } var dy={along: 0, squaredDistance: 0}; function gy(t, e, i, n) {
    var r=i[0]; var s=i[1]; var o=n[0]-r; var a=n[1]-s; var l=0; var h=r; var c=s; return 0===o&&0===a||(l=_i(((t-r)*o+(e-s)*a)/(o*o+a*a), 0, 1), h+=o*l, c+=a*l), dy.along=l, dy.squaredDistance=Ci(xi(t, e, h, c), 10), dy;
  } function fy(t, e) {
    var i=t.length; var n=Math.floor(e); var r=e-n; n>=i?n-=i:n<0&&(n+=i); var s=n+1; s>=i&&(s-=i); var o=t[n]; var a=o[0]; var l=o[1]; var h=t[s]; return [a+(h[0]-a)*r, l+(h[1]-l)*r];
  } function py() {
    var t=gf(); return function(e, i) {
      return t[e.getGeometry().getType()];
    };
  } var my=/* #__PURE__*/function(_Ea7) {
    _inherits(my, _Ea7); var _super154=_createSuper(my); function my(t) {
      var _this180; _classCallCheck(this, my); var e=t; e.stopDown||(e.stopDown=p), _this180=_super154.call(this, e), _this180.on, _this180.once, _this180.un, _this180.shouldHandle_=!1, _this180.downPx_=null, _this180.downTimeout_, _this180.lastDragTime_, _this180.pointerType_, _this180.freehand_=!1, _this180.source_=t.source?t.source:null, _this180.features_=t.features?t.features:null, _this180.snapTolerance_=t.snapTolerance?t.snapTolerance:12, _this180.type_=t.type, _this180.mode_=function(t) {
        switch (t) {
          case 'Point': case 'MultiPoint': return 'Point'; case 'LineString': case 'MultiLineString': return 'LineString'; case 'Polygon': case 'MultiPolygon': return 'Polygon'; case 'Circle': return 'Circle'; default: throw new Error('Invalid type: '+t);
        }
      }(_this180.type_), _this180.stopClick_=!!t.stopClick, _this180.minPoints_=t.minPoints?t.minPoints:'Polygon'===_this180.mode_?3:2, _this180.maxPoints_='Circle'===_this180.mode_?2:t.maxPoints?t.maxPoints:1/0, _this180.finishCondition_=t.finishCondition?t.finishCondition:f, _this180.geometryLayout_=t.geometryLayout?t.geometryLayout:'XY'; var i=t.geometryFunction; if (!i) {
        var _t297=_this180.mode_; if ('Circle'===_t297) {
          i=function i(t, e, _i248) {
            var n=e||new Am([NaN, NaN]); var r=Tn(t[0], _i248); var s=ji(r, Tn(t[t.length-1], _i248)); n.setCenterAndRadius(r, Math.sqrt(s), this.geometryLayout_); var o=Sn(); return o&&n.transform(_i248, o), n;
          };
        } else {
          var _e310; 'Point'===_t297?_e310=dr:'LineString'===_t297?_e310=zm:'Polygon'===_t297&&(_e310=Ar), i=function i(_i249, n, r) {
            return n?'Polygon'===_t297?_i249[0].length?n.setCoordinates([_i249[0].concat([_i249[0][0]])], this.geometryLayout_):n.setCoordinates([], this.geometryLayout_):n.setCoordinates(_i249, this.geometryLayout_):n=new _e310(_i249, this.geometryLayout_), n;
          };
        }
      }_this180.geometryFunction_=i, _this180.dragVertexDelay_=void 0!==t.dragVertexDelay?t.dragVertexDelay:500, _this180.finishCoordinate_=null, _this180.sketchFeature_=null, _this180.sketchPoint_=null, _this180.sketchCoords_=null, _this180.sketchLine_=null, _this180.sketchLineCoords_=null, _this180.squaredClickTolerance_=t.clickTolerance?t.clickTolerance*t.clickTolerance:36, _this180.overlay_=new i_({source: new uc({useSpatialIndex: !1, wrapX: !!t.wrapX&&t.wrapX}), style: t.style?t.style:py(), updateWhileInteracting: !0}), _this180.geometryName_=t.geometryName, _this180.condition_=t.condition?t.condition:Oa, _this180.freehandCondition_, t.freehand?_this180.freehandCondition_=La:_this180.freehandCondition_=t.freehandCondition?t.freehandCondition:Na, _this180.traceCondition_, _this180.setTrace(t.trace||!1), _this180.traceState_={active: !1}, _this180.traceSource_=t.traceSource||t.source||null, _this180.addChangeListener(ya, _this180.updateState_); return _this180;
    }_createClass(my, [{key: 'setTrace', value: function setTrace(t) {
      var e; e=t?!0===t?La:t:Ma, this.traceCondition_=e;
    }}, {key: 'setMap', value: function setMap(t) {
      _get(_getPrototypeOf(my.prototype), 'setMap', this).call(this, t), this.updateState_();
    }}, {key: 'getOverlay', value: function getOverlay() {
      return this.overlay_;
    }}, {key: 'handleEvent', value: function handleEvent(t) {
      t.originalEvent.type===E&&t.originalEvent.preventDefault(), this.freehand_='Point'!==this.mode_&&this.freehandCondition_(t); var e=t.type===Ro.POINTERMOVE; var i=!0; if (!this.freehand_&&this.lastDragTime_&&t.type===Ro.POINTERDRAG) {
Date.now()-this.lastDragTime_>=this.dragVertexDelay_?(this.downPx_=t.pixel, this.shouldHandle_=!this.freehand_, e=!0):this.lastDragTime_=void 0, this.shouldHandle_&&void 0!==this.downTimeout_&&(clearTimeout(this.downTimeout_), this.downTimeout_=void 0);
      } return this.freehand_&&t.type===Ro.POINTERDRAG&&null!==this.sketchFeature_?(this.addToDrawing_(t.coordinate), i=!1):this.freehand_&&t.type===Ro.POINTERDOWN?i=!1:e&&this.getPointerCount()<2?(i=t.type===Ro.POINTERMOVE, i&&this.freehand_?(this.handlePointerMove_(t), this.shouldHandle_&&t.originalEvent.preventDefault()):('mouse'===t.originalEvent.pointerType||t.type===Ro.POINTERDRAG&&void 0===this.downTimeout_)&&this.handlePointerMove_(t)):t.type===Ro.DBLCLICK&&(i=!1), _get(_getPrototypeOf(my.prototype), 'handleEvent', this).call(this, t)&&i;
    }}, {key: 'handleDownEvent', value: function handleDownEvent(t) {
      var _this181=this; return this.shouldHandle_=!this.freehand_, this.freehand_?(this.downPx_=t.pixel, this.finishCoordinate_||this.startDrawing_(t.coordinate), !0):this.condition_(t)?(this.lastDragTime_=Date.now(), this.downTimeout_=setTimeout(function() {
        _this181.handlePointerMove_(new Co(Ro.POINTERMOVE, t.map, t.originalEvent, !1, t.frameState));
      }, this.dragVertexDelay_), this.downPx_=t.pixel, !0):(this.lastDragTime_=void 0, !1);
    }}, {key: 'deactivateTrace_', value: function deactivateTrace_() {
      this.traceState_={active: !1};
    }}, {key: 'toggleTraceState_', value: function toggleTraceState_(t) {
      if (!this.traceSource_||!this.traceCondition_(t)) return; if (this.traceState_.active) return void this.deactivateTrace_(); var e=this.getMap(); var i=ne([e.getCoordinateFromPixel([t.pixel[0]-this.snapTolerance_, t.pixel[1]+this.snapTolerance_]), e.getCoordinateFromPixel([t.pixel[0]+this.snapTolerance_, t.pixel[1]-this.snapTolerance_])]); var n=this.traceSource_.getFeaturesInExtent(i); if (0===n.length) return; var r=function(t, e) {
        var i=[]; for (var _n211=0; _n211<e.length; ++_n211)hy(t, e[_n211].getGeometry(), i); return i;
      }(t.coordinate, n); r.length&&(this.traceState_={active: !0, startPx: t.pixel.slice(), targets: r, targetIndex: -1});
    }}, {key: 'addOrRemoveTracedCoordinates_', value: function addOrRemoveTracedCoordinates_(t, e) {
      var i=t.startIndex<=t.endIndex; i===t.startIndex<=e?i&&e>t.endIndex||!i&&e<t.endIndex?this.addTracedCoordinates_(t, t.endIndex, e):(i&&e<t.endIndex||!i&&e>t.endIndex)&&this.removeTracedCoordinates_(e, t.endIndex):(this.removeTracedCoordinates_(t.startIndex, t.endIndex), this.addTracedCoordinates_(t, t.startIndex, e));
    }}, {key: 'removeTracedCoordinates_', value: function removeTracedCoordinates_(t, e) {
      if (t===e) return; var i=0; if (t<e) {
        var _n212=Math.ceil(t); var _r176=Math.floor(e); _r176===e&&(_r176-=1), i=_r176-_n212+1;
      } else {
        var _n213=Math.floor(t); var _r177=Math.ceil(e); _r177===e&&(_r177+=1), i=_n213-_r177+1;
      }i>0&&this.removeLastPoints_(i);
    }}, {key: 'addTracedCoordinates_', value: function addTracedCoordinates_(t, e, i) {
      if (e===i) return; var n=[]; if (e<i) {
        var _r178=Math.ceil(e); var _s136=Math.floor(i); _s136===i&&(_s136-=1); for (var _e311=_r178; _e311<=_s136; ++_e311)n.push(ay(t.coordinates, _e311));
      } else {
        var _r179=Math.floor(e); var _s137=Math.ceil(i); _s137===i&&(_s137+=1); for (var _e312=_r179; _e312>=_s137; --_e312)n.push(ay(t.coordinates, _e312));
      }n.length&&this.appendCoordinates(n);
    }}, {key: 'updateTrace_', value: function updateTrace_(t) {
      var e=this.traceState_; if (!e.active) return; if (-1===e.targetIndex&&Bi(e.startPx, t.pixel)<this.snapTolerance_) return; var i=function(t, e, i, n) {
        var r=t[0]; var s=t[1]; var o=1/0; var a=-1; var l=NaN; for (var _t298=0; _t298<e.targets.length; ++_t298) {
          var _i250=e.targets[_t298]; var _n214=_i250.coordinates; var _h45=void 0; var _c30=1/0; for (var _t299=0; _t299<_n214.length-1; ++_t299) {
            var _e313=gy(r, s, _n214[_t299], _n214[_t299+1]); _e313.squaredDistance<_c30&&(_c30=_e313.squaredDistance, _h45=_t299+_e313.along);
          }_c30<o&&(o=_c30, _i250.ring&&e.targetIndex===_t298&&(_i250.endIndex>_i250.startIndex?_h45<_i250.startIndex&&(_h45+=_n214.length):_i250.endIndex<_i250.startIndex&&_h45>_i250.startIndex&&(_h45-=_n214.length)), l=_h45, a=_t298);
        } var h=e.targets[a]; var c=h.ring; if (e.targetIndex===a&&c) {
          var _t300=fy(h.coordinates, l); Bi(i.getPixelFromCoordinate(_t300), e.startPx)>n&&(c=!1);
        } if (c) {
          var _t301=h.coordinates; var _e314=_t301.length; var _i251=h.startIndex; var _n215=l; if (_i251<_n215) {
            var _r180=ly(_t301, _i251, _n215); ly(_t301, _i251, _n215-_e314)<_r180&&(l-=_e314);
          } else {
            var _r181=ly(_t301, _i251, _n215); ly(_t301, _i251, _n215+_e314)<_r181&&(l+=_e314);
          }
        } return cy.index=a, cy.endIndex=l, cy;
      }(t.coordinate, e, this.getMap(), this.snapTolerance_); if (e.targetIndex!==i.index) {
        if (-1!==e.targetIndex) {
          var _t302=e.targets[e.targetIndex]; this.removeTracedCoordinates_(_t302.startIndex, _t302.endIndex);
        } var _t303=e.targets[i.index]; this.addTracedCoordinates_(_t303, _t303.startIndex, i.endIndex);
      } else {
        var _t304=e.targets[e.targetIndex]; this.addOrRemoveTracedCoordinates_(_t304, i.endIndex);
      }e.targetIndex=i.index; var n=e.targets[e.targetIndex]; n.endIndex=i.endIndex; var r=fy(n.coordinates, n.endIndex); var s=this.getMap().getPixelFromCoordinate(r); t.coordinate=r, t.pixel=[Math.round(s[0]), Math.round(s[1])];
    }}, {key: 'handleUpEvent', value: function handleUpEvent(t) {
      var e=!0; if (0===this.getPointerCount()) {
        this.downTimeout_&&(clearTimeout(this.downTimeout_), this.downTimeout_=void 0), this.handlePointerMove_(t); var _i252=this.traceState_.active; if (this.toggleTraceState_(t), this.shouldHandle_) {
          var _n216=!this.finishCoordinate_; _n216&&this.startDrawing_(t.coordinate), !_n216&&this.freehand_?this.finishDrawing():this.freehand_||_n216&&'Point'!==this.mode_||(this.atFinish_(t.pixel, _i252)?this.finishCondition_(t)&&this.finishDrawing():this.addToDrawing_(t.coordinate)), e=!1;
        } else this.freehand_&&this.abortDrawing();
      } return !e&&this.stopClick_&&t.preventDefault(), e;
    }}, {key: 'handlePointerMove_', value: function handlePointerMove_(t) {
      if (this.pointerType_=t.originalEvent.pointerType, this.downPx_&&(!this.freehand_&&this.shouldHandle_||this.freehand_&&!this.shouldHandle_)) {
        var _e315=this.downPx_; var _i253=t.pixel; var _n217=_e315[0]-_i253[0]; var _r182=_e315[1]-_i253[1]; var _s138=_n217*_n217+_r182*_r182; if (this.shouldHandle_=this.freehand_?_s138>this.squaredClickTolerance_:_s138<=this.squaredClickTolerance_, !this.shouldHandle_) return;
      } this.finishCoordinate_?(this.updateTrace_(t), this.modifyDrawing_(t.coordinate)):this.createOrUpdateSketchPoint_(t.coordinate.slice());
    }}, {key: 'atFinish_', value: function atFinish_(t, e) {
      var i=!1; if (this.sketchFeature_) {
        var _n218=!1; var _r183=[this.finishCoordinate_]; var _s139=this.mode_; if ('Point'===_s139)i=!0; else if ('Circle'===_s139)i=2===this.sketchCoords_.length; else if ('LineString'===_s139)_n218=!e&&this.sketchCoords_.length>this.minPoints_; else if ('Polygon'===_s139) {
          var _t305=this.sketchCoords_; _n218=_t305[0].length>this.minPoints_, _r183=[_t305[0][0], _t305[0][_t305[0].length-2]], _r183=e?[_t305[0][0]]:[_t305[0][0], _t305[0][_t305[0].length-2]];
        } if (_n218) {
          var _e316=this.getMap(); for (var _n219=0, _s140=_r183.length; _n219<_s140; _n219++) {
            var _s141=_r183[_n219]; var _o127=_e316.getPixelFromCoordinate(_s141); var _a83=t[0]-_o127[0]; var _l53=t[1]-_o127[1]; var _h46=this.freehand_?1:this.snapTolerance_; if (i=Math.sqrt(_a83*_a83+_l53*_l53)<=_h46, i) {
              this.finishCoordinate_=_s141; break;
            }
          }
        }
      } return i;
    }}, {key: 'createOrUpdateSketchPoint_', value: function createOrUpdateSketchPoint_(t) {
      if (this.sketchPoint_) {
        this.sketchPoint_.getGeometry().setCoordinates(t);
      } else this.sketchPoint_=new Ot(new dr(t)), this.updateSketchFeatures_();
    }}, {key: 'createOrUpdateCustomSketchLine_', value: function createOrUpdateCustomSketchLine_(t) {
      this.sketchLine_||(this.sketchLine_=new Ot()); var e=t.getLinearRing(0); var i=this.sketchLine_.getGeometry(); i?(i.setFlatCoordinates(e.getLayout(), e.getFlatCoordinates()), i.changed()):(i=new zm(e.getFlatCoordinates(), e.getLayout()), this.sketchLine_.setGeometry(i));
    }}, {key: 'startDrawing_', value: function startDrawing_(t) {
      var e=this.getMap().getView().getProjection(); var i=Dn(this.geometryLayout_); for (;t.length<i;)t.push(0); this.finishCoordinate_=t, 'Point'===this.mode_?this.sketchCoords_=t.slice():'Polygon'===this.mode_?(this.sketchCoords_=[[t.slice(), t.slice()]], this.sketchLineCoords_=this.sketchCoords_[0]):this.sketchCoords_=[t.slice(), t.slice()], this.sketchLineCoords_&&(this.sketchLine_=new Ot(new zm(this.sketchLineCoords_))); var n=this.geometryFunction_(this.sketchCoords_, void 0, e); this.sketchFeature_=new Ot(), this.geometryName_&&this.sketchFeature_.setGeometryName(this.geometryName_), this.sketchFeature_.setGeometry(n), this.updateSketchFeatures_(), this.dispatchEvent(new sy(iy, this.sketchFeature_));
    }}, {key: 'modifyDrawing_', value: function modifyDrawing_(t) {
      var e=this.getMap(); var i=this.sketchFeature_.getGeometry(); var n=e.getView().getProjection(); var r=Dn(this.geometryLayout_); var s; var o; for (;t.length<r;)t.push(0); if ('Point'===this.mode_?o=this.sketchCoords_:'Polygon'===this.mode_?(s=this.sketchCoords_[0], o=s[s.length-1], this.atFinish_(e.getPixelFromCoordinate(t))&&(t=this.finishCoordinate_.slice())):(s=this.sketchCoords_, o=s[s.length-1]), o[0]=t[0], o[1]=t[1], this.geometryFunction_(this.sketchCoords_, i, n), this.sketchPoint_) {
        this.sketchPoint_.getGeometry().setCoordinates(t);
      } if ('Polygon'===i.getType()&&'Polygon'!==this.mode_) this.createOrUpdateCustomSketchLine_(i); else if (this.sketchLineCoords_) {
        this.sketchLine_.getGeometry().setCoordinates(this.sketchLineCoords_);
      } this.updateSketchFeatures_();
    }}, {key: 'addToDrawing_', value: function addToDrawing_(t) {
      var e=this.sketchFeature_.getGeometry(); var i=this.getMap().getView().getProjection(); var n; var r; var s=this.mode_; 'LineString'===s||'Circle'===s?(this.finishCoordinate_=t.slice(), r=this.sketchCoords_, r.length>=this.maxPoints_&&(this.freehand_?r.pop():n=!0), r.push(t.slice()), this.geometryFunction_(r, e, i)):'Polygon'===s&&(r=this.sketchCoords_[0], r.length>=this.maxPoints_&&(this.freehand_?r.pop():n=!0), r.push(t.slice()), n&&(this.finishCoordinate_=r[0]), this.geometryFunction_(this.sketchCoords_, e, i)), this.createOrUpdateSketchPoint_(t.slice()), this.updateSketchFeatures_(), n&&this.finishDrawing();
    }}, {key: 'removeLastPoints_', value: function removeLastPoints_(t) {
      if (!this.sketchFeature_) return; var e=this.sketchFeature_.getGeometry(); var i=this.getMap().getView().getProjection(); var n=this.mode_; for (var _r184=0; _r184<t; ++_r184) {
        var _t306=void 0; if ('LineString'===n||'Circle'===n) {
          if (_t306=this.sketchCoords_, _t306.splice(-2, 1), _t306.length>=2) {
            this.finishCoordinate_=_t306[_t306.length-2].slice(); var _e317=this.finishCoordinate_.slice(); _t306[_t306.length-1]=_e317, this.createOrUpdateSketchPoint_(_e317);
          } this.geometryFunction_(_t306, e, i), 'Polygon'===e.getType()&&this.sketchLine_&&this.createOrUpdateCustomSketchLine_(e);
        } else if ('Polygon'===n) {
          _t306=this.sketchCoords_[0], _t306.splice(-2, 1); var _n220=this.sketchLine_.getGeometry(); if (_t306.length>=2) {
            var _e318=_t306[_t306.length-2].slice(); _t306[_t306.length-1]=_e318, this.createOrUpdateSketchPoint_(_e318);
          }_n220.setCoordinates(_t306), this.geometryFunction_(this.sketchCoords_, e, i);
        } if (1===_t306.length) {
          this.abortDrawing(); break;
        }
      } this.updateSketchFeatures_();
    }}, {key: 'removeLastPoint', value: function removeLastPoint() {
      this.removeLastPoints_(1);
    }}, {key: 'finishDrawing', value: function finishDrawing() {
      var t=this.abortDrawing_(); if (!t) return; var e=this.sketchCoords_; var i=t.getGeometry(); var n=this.getMap().getView().getProjection(); 'LineString'===this.mode_?(e.pop(), this.geometryFunction_(e, i, n)):'Polygon'===this.mode_&&(e[0].pop(), this.geometryFunction_(e, i, n), e=i.getCoordinates()), 'MultiPoint'===this.type_?t.setGeometry(new Wm([e])):'MultiLineString'===this.type_?t.setGeometry(new Xm([e])):'MultiPolygon'===this.type_&&t.setGeometry(new Km([e])), this.dispatchEvent(new sy(ny, t)), this.features_&&this.features_.push(t), this.source_&&this.source_.addFeature(t);
    }}, {key: 'abortDrawing_', value: function abortDrawing_() {
      this.finishCoordinate_=null; var t=this.sketchFeature_; return this.sketchFeature_=null, this.sketchPoint_=null, this.sketchLine_=null, this.overlay_.getSource().clear(!0), this.deactivateTrace_(), t;
    }}, {key: 'abortDrawing', value: function abortDrawing() {
      var t=this.abortDrawing_(); t&&this.dispatchEvent(new sy(ry, t));
    }}, {key: 'appendCoordinates', value: function appendCoordinates(t) {
      var e=this.mode_; var i=!this.sketchFeature_; var n; if (i&&this.startDrawing_(t[0]), 'LineString'===e||'Circle'===e)n=this.sketchCoords_; else {
        if ('Polygon'!==e) return; n=this.sketchCoords_&&this.sketchCoords_.length?this.sketchCoords_[0]:[];
      }i&&n.shift(), n.pop(); for (var _e319=0; _e319<t.length; _e319++) this.addToDrawing_(t[_e319]); var r=t[t.length-1]; this.addToDrawing_(r), this.modifyDrawing_(r);
    }}, {key: 'extend', value: function extend(t) {
      var e=t.getGeometry(); this.sketchFeature_=t, this.sketchCoords_=e.getCoordinates(); var i=this.sketchCoords_[this.sketchCoords_.length-1]; this.finishCoordinate_=i.slice(), this.sketchCoords_.push(i.slice()), this.sketchPoint_=new Ot(new dr(i)), this.updateSketchFeatures_(), this.dispatchEvent(new sy(iy, this.sketchFeature_));
    }}, {key: 'updateSketchFeatures_', value: function updateSketchFeatures_() {
      var t=[]; this.sketchFeature_&&t.push(this.sketchFeature_), this.sketchLine_&&t.push(this.sketchLine_), this.sketchPoint_&&t.push(this.sketchPoint_); var e=this.overlay_.getSource(); e.clear(!0), e.addFeatures(t);
    }}, {key: 'updateState_', value: function updateState_() {
      var t=this.getMap(); var e=this.getActive(); t&&e||this.abortDrawing(), this.overlay_.setMap(e?t:null);
    }}]); return my;
  }(Ea); var _y='extentchanged'; var yy=/* #__PURE__*/function(_r185) {
    _inherits(yy, _r185); var _super155=_createSuper(yy); function yy(t) {
      var _this182; _classCallCheck(this, yy); _this182=_super155.call(this, _y), _this182.extent=t; return _this182;
    } return _createClass(yy);
  }(r); function xy() {
    var t=gf(); return function(e, i) {
      return t.Polygon;
    };
  } function vy() {
    var t=gf(); return function(e, i) {
      return t.Point;
    };
  } function Sy(t) {
    return function(e) {
      return ne([t, e]);
    };
  } function wy(t, e) {
    return t[0]==e[0]?function(i) {
      return ne([t, [i[0], e[1]]]);
    }:t[1]==e[1]?function(i) {
      return ne([t, [e[0], i[1]]]);
    }:null;
  } var Ty=/* #__PURE__*/function(_Ea8) {
    _inherits(Ty, _Ea8); var _super156=_createSuper(Ty); function Ty(t) {
      var _this183; _classCallCheck(this, Ty); _this183=_super156.call(this, t=t||{}), _this183.on, _this183.once, _this183.un, _this183.condition_=t.condition?t.condition:La, _this183.extent_=null, _this183.pointerHandler_=null, _this183.pixelTolerance_=void 0!==t.pixelTolerance?t.pixelTolerance:10, _this183.snappedToVertex_=!1, _this183.extentFeature_=null, _this183.vertexFeature_=null, t||(t={}), _this183.extentOverlay_=new i_({source: new uc({useSpatialIndex: !1, wrapX: !!t.wrapX}), style: t.boxStyle?t.boxStyle:xy(), updateWhileAnimating: !0, updateWhileInteracting: !0}), _this183.vertexOverlay_=new i_({source: new uc({useSpatialIndex: !1, wrapX: !!t.wrapX}), style: t.pointerStyle?t.pointerStyle:vy(), updateWhileAnimating: !0, updateWhileInteracting: !0}), t.extent&&_this183.setExtent(t.extent); return _this183;
    }_createClass(Ty, [{key: 'snapToVertex_', value: function snapToVertex_(t, e) {
      var i=e.getCoordinateFromPixelInternal(t); var n=function n(t, e) {
        return zi(i, t)-zi(i, e);
      }; var r=this.getExtentInternal(); if (r) {
        var _s142=function(t) {
          return [[[t[0], t[1]], [t[0], t[3]]], [[t[0], t[3]], [t[2], t[3]]], [[t[2], t[3]], [t[2], t[1]]], [[t[2], t[1]], [t[0], t[1]]]];
        }(r); _s142.sort(n); var _o128=_s142[0]; var _a84=Ai(i, _o128); var _l54=e.getPixelFromCoordinateInternal(_a84); if (Bi(t, _l54)<=this.pixelTolerance_) {
          var _t307=e.getPixelFromCoordinateInternal(_o128[0]); var _i254=e.getPixelFromCoordinateInternal(_o128[1]); var _n221=ji(_l54, _t307); var _r186=ji(_l54, _i254); var _s143=Math.sqrt(Math.min(_n221, _r186)); return this.snappedToVertex_=_s143<=this.pixelTolerance_, this.snappedToVertex_&&(_a84=_n221>_r186?_o128[1]:_o128[0]), _a84;
        }
      } return null;
    }}, {key: 'handlePointerMove_', value: function handlePointerMove_(t) {
      var e=t.pixel; var i=t.map; var n=this.snapToVertex_(e, i); n||(n=i.getCoordinateFromPixelInternal(e)), this.createOrUpdatePointerFeature_(n);
    }}, {key: 'createOrUpdateExtentFeature_', value: function createOrUpdateExtentFeature_(t) {
      var e=this.extentFeature_; return e?t?e.setGeometry(Nr(t)):e.setGeometry(void 0):(e=new Ot(t?Nr(t):{}), this.extentFeature_=e, this.extentOverlay_.getSource().addFeature(e)), e;
    }}, {key: 'createOrUpdatePointerFeature_', value: function createOrUpdatePointerFeature_(t) {
      var e=this.vertexFeature_; if (e) {
        e.getGeometry().setCoordinates(t);
      } else e=new Ot(new dr(t)), this.vertexFeature_=e, this.vertexOverlay_.getSource().addFeature(e); return e;
    }}, {key: 'handleEvent', value: function handleEvent(t) {
      return !t.originalEvent||!this.condition_(t)||(t.type!=Ro.POINTERMOVE||this.handlingDownUpSequence||this.handlePointerMove_(t), _get(_getPrototypeOf(Ty.prototype), 'handleEvent', this).call(this, t), !1);
    }}, {key: 'handleDownEvent', value: function handleDownEvent(t) {
      var e=t.pixel; var i=t.map; var n=this.getExtentInternal(); var r=this.snapToVertex_(e, i); var s=function s(t) {
        var e=null; var i=null; return t[0]==n[0]?e=n[2]:t[0]==n[2]&&(e=n[0]), t[1]==n[1]?i=n[3]:t[1]==n[3]&&(i=n[1]), null!==e&&null!==i?[e, i]:null;
      }; if (r&&n) {
        var _t308=r[0]==n[0]||r[0]==n[2]?r[0]:null; var _e320=r[1]==n[1]||r[1]==n[3]?r[1]:null; null!==_t308&&null!==_e320?this.pointerHandler_=Sy(s(r)):null!==_t308?this.pointerHandler_=wy(s([_t308, n[1]]), s([_t308, n[3]])):null!==_e320&&(this.pointerHandler_=wy(s([n[0], _e320]), s([n[2], _e320])));
      } else r=i.getCoordinateFromPixelInternal(e), this.setExtent([r[0], r[1], r[0], r[1]]), this.pointerHandler_=Sy(r); return !0;
    }}, {key: 'handleDragEvent', value: function handleDragEvent(t) {
      if (this.pointerHandler_) {
        var _e321=t.coordinate; this.setExtent(this.pointerHandler_(_e321)), this.createOrUpdatePointerFeature_(_e321);
      }
    }}, {key: 'handleUpEvent', value: function handleUpEvent(t) {
      this.pointerHandler_=null; var e=this.getExtentInternal(); return e&&0!==Ce(e)||this.setExtent(null), !1;
    }}, {key: 'setMap', value: function setMap(t) {
      this.extentOverlay_.setMap(t), this.vertexOverlay_.setMap(t), _get(_getPrototypeOf(Ty.prototype), 'setMap', this).call(this, t);
    }}, {key: 'getExtent', value: function getExtent() {
      return En(this.getExtentInternal(), this.getMap().getView().getProjection());
    }}, {key: 'getExtentInternal', value: function getExtentInternal() {
      return this.extent_;
    }}, {key: 'setExtent', value: function setExtent(t) {
      this.extent_=t||null, this.createOrUpdateExtentFeature_(t), this.dispatchEvent(new yy(this.extent_));
    }}]); return Ty;
  }(Ea); function Ey(t) {
    return parseFloat(t);
  } function Cy(t) {
    return function(t) {
      return Ci(t, 5);
    }(t).toString();
  } function Ry(t, e) {
    return !isNaN(t)&&t!==Ey(Cy(e));
  } var by=/* #__PURE__*/function(_Sa7) {
    _inherits(by, _Sa7); var _super157=_createSuper(by); function by(t) {
      var _this184; _classCallCheck(this, by); var e; _this184=_super157.call(this), e=!0===(t=Object.assign({animate: !0, params: ['x', 'y', 'z', 'r', 'l'], replace: !1, prefix: ''}, t||{})).animate?{duration: 250}:t.animate?t.animate:null, _this184.animationOptions_=e, _this184.params_=t.params.reduce(function(t, e) {
        return t[e]=!0, t;
      }, {}), _this184.replace_=t.replace, _this184.prefix_=t.prefix, _this184.listenerKeys_=[], _this184.initial_=!0, _this184.updateState_=_this184.updateState_.bind(_assertThisInitialized(_this184)); return _this184;
    }_createClass(by, [{key: 'getParamName_', value: function getParamName_(t) {
      return this.prefix_?this.prefix_+t:t;
    }}, {key: 'get_', value: function get_(t, e) {
      return t.get(this.getParamName_(e));
    }}, {key: 'set_', value: function set_(t, e, i) {
      e in this.params_&&t.set(this.getParamName_(e), i);
    }}, {key: 'delete_', value: function delete_(t, e) {
      e in this.params_&&t['delete'](this.getParamName_(e));
    }}, {key: 'setMap', value: function setMap(t) {
      var e=this.getMap(); _get(_getPrototypeOf(by.prototype), 'setMap', this).call(this, t), t!==e&&(e&&this.unregisterListeners_(e), t&&(this.initial_=!0, this.updateState_(), this.registerListeners_(t)));
    }}, {key: 'registerListeners_', value: function registerListeners_(t) {
      this.listenerKeys_.push(N(t, Oo, this.updateUrl_, this), N(t.getLayerGroup(), w, this.updateUrl_, this), N(t, 'change:layergroup', this.handleChangeLayerGroup_, this)), this.replace_||addEventListener('popstate', this.updateState_);
    }}, {key: 'unregisterListeners_', value: function unregisterListeners_(t) {
      for (var _t309=0, _e322=this.listenerKeys_.length; _t309<_e322; ++_t309)G(this.listenerKeys_[_t309]); this.listenerKeys_.length=0, this.replace_||removeEventListener('popstate', this.updateState_); var e=new URL(window.location.href); var i=e.searchParams; this.delete_(i, 'x'), this.delete_(i, 'y'), this.delete_(i, 'z'), this.delete_(i, 'r'), this.delete_(i, 'l'), window.history.replaceState(null, '', e);
    }}, {key: 'handleChangeLayerGroup_', value: function handleChangeLayerGroup_() {
      var t=this.getMap(); t&&(this.unregisterListeners_(t), this.registerListeners_(t), this.initial_=!0, this.updateUrl_());
    }}, {key: 'updateState_', value: function updateState_() {
      var t=this.getMap(); if (!t) return; var e=t.getView(); if (!e) return; var i=new URL(window.location.href).searchParams; var n=!1; var r={}; var s=Ey(this.get_(i, 'z')); 'z'in this.params_&&Ry(s, e.getZoom())&&(n=!0, r.zoom=s); var o=Ey(this.get_(i, 'r')); 'r'in this.params_&&Ry(o, e.getRotation())&&(n=!0, r.rotation=o); var a=[Ey(this.get_(i, 'x')), Ey(this.get_(i, 'y'))]; var l; var h; ('x'in this.params_||'y'in this.params_)&&(l=a, h=e.getCenter(), Ry(l[0], h[0])||Ry(l[1], h[1]))&&(n=!0, r.center=a), n&&(!this.initial_&&this.animationOptions_?e.animate(Object.assign(r, this.animationOptions_)):(r.center&&e.setCenter(r.center), 'zoom'in r&&e.setZoom(r.zoom), 'rotation'in r&&e.setRotation(r.rotation))); var c=t.getAllLayers(); var u=this.get_(i, 'l'); if ('l'in this.params_&&u&&u.length===c.length) {
        for (var _t310=0, _e323=c.length; _t310<_e323; ++_t310) {
          var _e324=parseInt(u[_t310]); if (!isNaN(_e324)) {
            var _i255=Boolean(_e324); var _n222=c[_t310]; _n222.getVisible()!==_i255&&_n222.setVisible(_i255);
          }
        }
      }
    }}, {key: 'updateUrl_', value: function updateUrl_() {
      var t=this.getMap(); if (!t) return; var e=t.getView(); if (!e) return; var i=this.initial_; this.initial_=!1; var n=e.getCenter(); var r=e.getZoom(); var s=e.getRotation(); var o=t.getAllLayers(); var a=new Array(o.length); for (var _t311=0, _e325=o.length; _t311<_e325; ++_t311)a[_t311]=o[_t311].getVisible()?'1':'0'; var l=new URL(window.location.href); var h=l.searchParams; this.set_(h, 'x', Cy(n[0])), this.set_(h, 'y', Cy(n[1])), this.set_(h, 'z', Cy(r)), this.set_(h, 'r', Cy(s)), this.set_(h, 'l', a.join('')), l.href!==window.location.href&&(i||this.replace_?window.history.replaceState(history.state, '', l):window.history.pushState(null, '', l));
    }}]); return by;
  }(Sa); var Py=[0, 0, 0, 0]; var Iy=[]; var Ly='modifystart'; var Fy='modifyend'; var My=/* #__PURE__*/function(_r187) {
    _inherits(My, _r187); var _super158=_createSuper(My); function My(t, e, i) {
      var _this185; _classCallCheck(this, My); _this185=_super158.call(this, t), _this185.features=e, _this185.mapBrowserEvent=i; return _this185;
    } return _createClass(My);
  }(r); function Ay(t, e) {
    return t.index-e.index;
  } function Oy(t, e, i) {
    var n=e.geometry; if ('Circle'===n.getType()) {
      var _r188=n; if (1===e.index) {
        var _e326=Sn(); _e326&&(_r188=_r188.clone().transform(_e326, i)); var _n223=ji(_r188.getCenter(), Tn(t, i)); var _s144=Math.sqrt(_n223)-_r188.getRadius(); return _s144*_s144;
      }
    } var r=Tn(t, i); return Iy[0]=Tn(e.segment[0], i), Iy[1]=Tn(e.segment[1], i), zi(r, Iy);
  } function Ny(t, e, i) {
    var n=e.geometry; if ('Circle'===n.getType()&&1===e.index) {
      var _e327=n; var _r189=Sn(); return _r189&&(_e327=_e327.clone().transform(_r189, i)), wn(_e327.getClosestPoint(Tn(t, i)), i);
    } var r=Tn(t, i); return Iy[0]=Tn(e.segment[0], i), Iy[1]=Tn(e.segment[1], i), wn(Ai(r, Iy), i);
  } function Dy() {
    var t=gf(); return function(e, i) {
      return t.Point;
    };
  } var Gy=/* #__PURE__*/function(_Ea9) {
    _inherits(Gy, _Ea9); var _super159=_createSuper(Gy); function Gy(t) {
      var _this186; _classCallCheck(this, Gy); var e; if (_this186=_super159.call(this, t), _this186.on, _this186.once, _this186.un, _this186.boundHandleFeatureChange_=_this186.handleFeatureChange_.bind(_assertThisInitialized(_this186)), _this186.condition_=t.condition?t.condition:ka, _this186.defaultDeleteCondition_=function(t) {
        return Ra(t)&&Aa(t);
      }, _this186.deleteCondition_=t.deleteCondition?t.deleteCondition:_this186.defaultDeleteCondition_, _this186.insertVertexCondition_=t.insertVertexCondition?t.insertVertexCondition:La, _this186.vertexFeature_=null, _this186.vertexSegments_=null, _this186.lastPixel_=[0, 0], _this186.ignoreNextSingleClick_=!1, _this186.featuresBeingModified_=null, _this186.rBush_=new ic(), _this186.pixelTolerance_=void 0!==t.pixelTolerance?t.pixelTolerance:10, _this186.snappedToVertex_=!1, _this186.changingFeature_=!1, _this186.dragSegments_=[], _this186.overlay_=new i_({source: new uc({useSpatialIndex: !1, wrapX: !!t.wrapX}), style: t.style?t.style:Dy(), updateWhileAnimating: !0, updateWhileInteracting: !0}), _this186.SEGMENT_WRITERS_={Point: _this186.writePointGeometry_.bind(_assertThisInitialized(_this186)), LineString: _this186.writeLineStringGeometry_.bind(_assertThisInitialized(_this186)), LinearRing: _this186.writeLineStringGeometry_.bind(_assertThisInitialized(_this186)), Polygon: _this186.writePolygonGeometry_.bind(_assertThisInitialized(_this186)), MultiPoint: _this186.writeMultiPointGeometry_.bind(_assertThisInitialized(_this186)), MultiLineString: _this186.writeMultiLineStringGeometry_.bind(_assertThisInitialized(_this186)), MultiPolygon: _this186.writeMultiPolygonGeometry_.bind(_assertThisInitialized(_this186)), Circle: _this186.writeCircleGeometry_.bind(_assertThisInitialized(_this186)), GeometryCollection: _this186.writeGeometryCollectionGeometry_.bind(_assertThisInitialized(_this186))}, _this186.source_=null, _this186.hitDetection_=null, t.features?e=t.features:t.source&&(_this186.source_=t.source, e=new H(_this186.source_.getFeatures()), _this186.source_.addEventListener(nc, _this186.handleSourceAdd_.bind(_assertThisInitialized(_this186))), _this186.source_.addEventListener(oc, _this186.handleSourceRemove_.bind(_assertThisInitialized(_this186)))), !e) throw new Error('The modify interaction requires features, a source or a layer'); t.hitDetection&&(_this186.hitDetection_=t.hitDetection), _this186.features_=e, _this186.features_.forEach(_this186.addFeature_.bind(_assertThisInitialized(_this186))), _this186.features_.addEventListener(Z, _this186.handleFeatureAdd_.bind(_assertThisInitialized(_this186))), _this186.features_.addEventListener(Y, _this186.handleFeatureRemove_.bind(_assertThisInitialized(_this186))), _this186.lastPointerEvent_=null, _this186.delta_=[0, 0], _this186.snapToPointer_=void 0===t.snapToPointer?!_this186.hitDetection_:t.snapToPointer; return _possibleConstructorReturn(_this186);
    }_createClass(Gy, [{key: 'addFeature_', value: function addFeature_(t) {
      var e=t.getGeometry(); if (e) {
        var _i256=this.SEGMENT_WRITERS_[e.getType()]; _i256&&_i256(t, e);
      } var i=this.getMap(); i&&i.isRendered()&&this.getActive()&&this.handlePointerAtPixel_(this.lastPixel_, i), t.addEventListener(w, this.boundHandleFeatureChange_);
    }}, {key: 'willModifyFeatures_', value: function willModifyFeatures_(t, e) {
      if (!this.featuresBeingModified_) {
        this.featuresBeingModified_=new H(); var _i257=this.featuresBeingModified_.getArray(); for (var _t312=0, _n224=e.length; _t312<_n224; ++_t312) {
          var _n225=e[_t312]; for (var _t313=0, _e328=_n225.length; _t313<_e328; ++_t313) {
            var _e329=_n225[_t313].feature; _e329&&!_i257.includes(_e329)&&this.featuresBeingModified_.push(_e329);
          }
        }0===this.featuresBeingModified_.getLength()?this.featuresBeingModified_=null:this.dispatchEvent(new My(Ly, this.featuresBeingModified_, t));
      }
    }}, {key: 'removeFeature_', value: function removeFeature_(t) {
      this.removeFeatureSegmentData_(t), this.vertexFeature_&&0===this.features_.getLength()&&(this.overlay_.getSource().removeFeature(this.vertexFeature_), this.vertexFeature_=null), t.removeEventListener(w, this.boundHandleFeatureChange_);
    }}, {key: 'removeFeatureSegmentData_', value: function removeFeatureSegmentData_(t) {
      var e=this.rBush_; var i=[]; e.forEach(function(e) {
        t===e.feature&&i.push(e);
      }); for (var _t314=i.length-1; _t314>=0; --_t314) {
        var _n226=i[_t314]; for (var _t315=this.dragSegments_.length-1; _t315>=0; --_t315) this.dragSegments_[_t315][0]===_n226&&this.dragSegments_.splice(_t315, 1); e.remove(_n226);
      }
    }}, {key: 'setActive', value: function setActive(t) {
      this.vertexFeature_&&!t&&(this.overlay_.getSource().removeFeature(this.vertexFeature_), this.vertexFeature_=null), _get(_getPrototypeOf(Gy.prototype), 'setActive', this).call(this, t);
    }}, {key: 'setMap', value: function setMap(t) {
      this.overlay_.setMap(t), _get(_getPrototypeOf(Gy.prototype), 'setMap', this).call(this, t);
    }}, {key: 'getOverlay', value: function getOverlay() {
      return this.overlay_;
    }}, {key: 'handleSourceAdd_', value: function handleSourceAdd_(t) {
      t.feature&&this.features_.push(t.feature);
    }}, {key: 'handleSourceRemove_', value: function handleSourceRemove_(t) {
      t.feature&&this.features_.remove(t.feature);
    }}, {key: 'handleFeatureAdd_', value: function handleFeatureAdd_(t) {
      this.addFeature_(t.element);
    }}, {key: 'handleFeatureChange_', value: function handleFeatureChange_(t) {
      if (!this.changingFeature_) {
        var _e330=t.target; this.removeFeature_(_e330), this.addFeature_(_e330);
      }
    }}, {key: 'handleFeatureRemove_', value: function handleFeatureRemove_(t) {
      this.removeFeature_(t.element);
    }}, {key: 'writePointGeometry_', value: function writePointGeometry_(t, e) {
      var i=e.getCoordinates(); var n={feature: t, geometry: e, segment: [i, i]}; this.rBush_.insert(e.getExtent(), n);
    }}, {key: 'writeMultiPointGeometry_', value: function writeMultiPointGeometry_(t, e) {
      var i=e.getCoordinates(); for (var _n227=0, _r190=i.length; _n227<_r190; ++_n227) {
        var _r191=i[_n227]; var _s145={feature: t, geometry: e, depth: [_n227], index: _n227, segment: [_r191, _r191]}; this.rBush_.insert(e.getExtent(), _s145);
      }
    }}, {key: 'writeLineStringGeometry_', value: function writeLineStringGeometry_(t, e) {
      var i=e.getCoordinates(); for (var _n228=0, _r192=i.length-1; _n228<_r192; ++_n228) {
        var _r193=i.slice(_n228, _n228+2); var _s146={feature: t, geometry: e, index: _n228, segment: _r193}; this.rBush_.insert(ne(_r193), _s146);
      }
    }}, {key: 'writeMultiLineStringGeometry_', value: function writeMultiLineStringGeometry_(t, e) {
      var i=e.getCoordinates(); for (var _n229=0, _r194=i.length; _n229<_r194; ++_n229) {
        var _r195=i[_n229]; for (var _i258=0, _s147=_r195.length-1; _i258<_s147; ++_i258) {
          var _s148=_r195.slice(_i258, _i258+2); var _o129={feature: t, geometry: e, depth: [_n229], index: _i258, segment: _s148}; this.rBush_.insert(ne(_s148), _o129);
        }
      }
    }}, {key: 'writePolygonGeometry_', value: function writePolygonGeometry_(t, e) {
      var i=e.getCoordinates(); for (var _n230=0, _r196=i.length; _n230<_r196; ++_n230) {
        var _r197=i[_n230]; for (var _i259=0, _s149=_r197.length-1; _i259<_s149; ++_i259) {
          var _s150=_r197.slice(_i259, _i259+2); var _o130={feature: t, geometry: e, depth: [_n230], index: _i259, segment: _s150}; this.rBush_.insert(ne(_s150), _o130);
        }
      }
    }}, {key: 'writeMultiPolygonGeometry_', value: function writeMultiPolygonGeometry_(t, e) {
      var i=e.getCoordinates(); for (var _n231=0, _r198=i.length; _n231<_r198; ++_n231) {
        var _r199=i[_n231]; for (var _i260=0, _s151=_r199.length; _i260<_s151; ++_i260) {
          var _s152=_r199[_i260]; for (var _r200=0, _o131=_s152.length-1; _r200<_o131; ++_r200) {
            var _o132=_s152.slice(_r200, _r200+2); var _a85={feature: t, geometry: e, depth: [_i260, _n231], index: _r200, segment: _o132}; this.rBush_.insert(ne(_o132), _a85);
          }
        }
      }
    }}, {key: 'writeCircleGeometry_', value: function writeCircleGeometry_(t, e) {
      var i=e.getCenter(); var n={feature: t, geometry: e, index: 0, segment: [i, i]}; var r={feature: t, geometry: e, index: 1, segment: [i, i]}; var s=[n, r]; n.featureSegments=s, r.featureSegments=s, this.rBush_.insert(fe(i), n); var o=e; var a=Sn(); if (a&&this.getMap()) {
        var _t316=this.getMap().getView().getProjection(); o=o.clone().transform(a, _t316), o=Dr(o).transform(_t316, a);
      } this.rBush_.insert(o.getExtent(), r);
    }}, {key: 'writeGeometryCollectionGeometry_', value: function writeGeometryCollectionGeometry_(t, e) {
      var i=e.getGeometriesArray(); for (var _e331=0; _e331<i.length; ++_e331) {
        var _n232=i[_e331]; (0, this.SEGMENT_WRITERS_[_n232.getType()])(t, _n232);
      }
    }}, {key: 'createOrUpdateVertexFeature_', value: function createOrUpdateVertexFeature_(t, e, i) {
      var n=this.vertexFeature_; if (n) {
        n.getGeometry().setCoordinates(t);
      } else n=new Ot(new dr(t)), this.vertexFeature_=n, this.overlay_.getSource().addFeature(n); return n.set('features', e), n.set('geometries', i), n;
    }}, {key: 'handleEvent', value: function handleEvent(t) {
      if (!t.originalEvent) return !0; var e; return this.lastPointerEvent_=t, t.map.getView().getInteracting()||t.type!=Ro.POINTERMOVE||this.handlingDownUpSequence||this.handlePointerMove_(t), this.vertexFeature_&&this.deleteCondition_(t)&&(e=!(t.type!=Ro.SINGLECLICK||!this.ignoreNextSingleClick_)||this.removePoint()), t.type==Ro.SINGLECLICK&&(this.ignoreNextSingleClick_=!1), _get(_getPrototypeOf(Gy.prototype), 'handleEvent', this).call(this, t)&&!e;
    }}, {key: 'handleDragEvent', value: function handleDragEvent(t) {
      this.ignoreNextSingleClick_=!1, this.willModifyFeatures_(t, this.dragSegments_); var e=[t.coordinate[0]+this.delta_[0], t.coordinate[1]+this.delta_[1]]; var i=[]; var n=[]; for (var _r201=0, _s153=this.dragSegments_.length; _r201<_s153; ++_r201) {
        var _s154=this.dragSegments_[_r201]; var _o133=_s154[0]; var _a86=_o133.feature; i.includes(_a86)||i.push(_a86); var _l55=_o133.geometry; n.includes(_l55)||n.push(_l55); var _h47=_o133.depth; var _c31=void 0; var _u29=_o133.segment; var _d26=_s154[1]; for (;e.length<_l55.getStride();)e.push(_u29[_d26][e.length]); switch (_l55.getType()) {
          case 'Point': _c31=e, _u29[0]=e, _u29[1]=e; break; case 'MultiPoint': _c31=_l55.getCoordinates(), _c31[_o133.index]=e, _u29[0]=e, _u29[1]=e; break; case 'LineString': _c31=_l55.getCoordinates(), _c31[_o133.index+_d26]=e, _u29[_d26]=e; break; case 'MultiLineString': case 'Polygon': _c31=_l55.getCoordinates(), _c31[_h47[0]][_o133.index+_d26]=e, _u29[_d26]=e; break; case 'MultiPolygon': _c31=_l55.getCoordinates(), _c31[_h47[1]][_h47[0]][_o133.index+_d26]=e, _u29[_d26]=e; break; case 'Circle': if (_u29[0]=e, _u29[1]=e, 0===_o133.index) this.changingFeature_=!0, _l55.setCenter(e), this.changingFeature_=!1; else {
            this.changingFeature_=!0; var _i261=t.map.getView().getProjection(); var _n233=Bi(Tn(_l55.getCenter(), _i261), Tn(e, _i261)); var _r202=Sn(); if (_r202) {
              var _t317=_l55.clone().transform(_r202, _i261); _t317.setRadius(_n233), _n233=_t317.transform(_i261, _r202).getRadius();
            }_l55.setRadius(_n233), this.changingFeature_=!1;
          }
        }_c31&&this.setGeometryCoordinates_(_l55, _c31);
      } this.createOrUpdateVertexFeature_(e, i, n);
    }}, {key: 'handleDownEvent', value: function handleDownEvent(t) {
      if (!this.condition_(t)) return !1; var e=t.coordinate; this.handlePointerAtPixel_(t.pixel, t.map, e), this.dragSegments_.length=0, this.featuresBeingModified_=null; var i=this.vertexFeature_; if (i) {
        var _n234=t.map.getView().getProjection(); var _r203=[]; var _s155=i.getGeometry().getCoordinates(); var _o134=ne([_s155]); var _a87=this.rBush_.getInExtent(_o134); var _l56={}; _a87.sort(Ay); for (var _i262=0, _o135=_a87.length; _i262<_o135; ++_i262) {
          var _o136=_a87[_i262]; var _h48=_o136.segment; var _c32=X(_o136.geometry); var _u30=_o136.depth; if (_u30&&(_c32+='-'+_u30.join('-')), _l56[_c32]||(_l56[_c32]=new Array(2)), 'Circle'!==_o136.geometry.getType()||1!==_o136.index) {
            if (!Di(_h48[0], _s155)||_l56[_c32][0]) {
              if (!Di(_h48[1], _s155)||_l56[_c32][1])X(_h48)in this.vertexSegments_&&!_l56[_c32][0]&&!_l56[_c32][1]&&this.insertVertexCondition_(t)&&_r203.push(_o136); else {
                if (_l56[_c32][0]&&0===_l56[_c32][0].index) {
                  var _t318=_o136.geometry.getCoordinates(); switch (_o136.geometry.getType()) {
                    case 'LineString': case 'MultiLineString': continue; case 'MultiPolygon': _t318=_t318[_u30[1]]; case 'Polygon': if (_o136.index!==_t318[_u30[0]].length-2) continue;
                  }
                } this.dragSegments_.push([_o136, 1]), _l56[_c32][1]=_o136;
              }
            } else this.dragSegments_.push([_o136, 0]), _l56[_c32][0]=_o136;
          } else {
            Di(Ny(e, _o136, _n234), _s155)&&!_l56[_c32][0]&&(this.dragSegments_.push([_o136, 0]), _l56[_c32][0]=_o136);
          }
        }_r203.length&&this.willModifyFeatures_(t, [_r203]); for (var _t319=_r203.length-1; _t319>=0; --_t319) this.insertVertex_(_r203[_t319], _s155);
      } return !!this.vertexFeature_;
    }}, {key: 'handleUpEvent', value: function handleUpEvent(t) {
      for (var _e332=this.dragSegments_.length-1; _e332>=0; --_e332) {
        var _i263=this.dragSegments_[_e332][0]; var _n235=_i263.geometry; if ('Circle'===_n235.getType()) {
          var _e333=_n235.getCenter(); var _r204=_i263.featureSegments[0]; var _s156=_i263.featureSegments[1]; _r204.segment[0]=_e333, _r204.segment[1]=_e333, _s156.segment[0]=_e333, _s156.segment[1]=_e333, this.rBush_.update(fe(_e333), _r204); var _o137=_n235; var _a88=Sn(); if (_a88) {
            var _e334=t.map.getView().getProjection(); _o137=_o137.clone().transform(_a88, _e334), _o137=Dr(_o137).transform(_e334, _a88);
          } this.rBush_.update(_o137.getExtent(), _s156);
        } else this.rBush_.update(ne(_i263.segment), _i263);
      } return this.featuresBeingModified_&&(this.dispatchEvent(new My(Fy, this.featuresBeingModified_, t)), this.featuresBeingModified_=null), !1;
    }}, {key: 'handlePointerMove_', value: function handlePointerMove_(t) {
      this.lastPixel_=t.pixel, this.handlePointerAtPixel_(t.pixel, t.map, t.coordinate);
    }}, {key: 'handlePointerAtPixel_', value: function handlePointerAtPixel_(t, e, i) {
      var _this187=this; var n=i||e.getCoordinateFromPixel(t); var r=e.getView().getProjection(); var s=function s(t, e) {
        return Oy(n, t, r)-Oy(n, e, r);
      }; var o; var a; if (this.hitDetection_) {
        var _i264='object'==_typeof(this.hitDetection_)?function(t) {
          return t===_this187.hitDetection_;
        }:void 0; e.forEachFeatureAtPixel(t, function(t, e, i) {
          var n=i||t.getGeometry(); if ('Point'===n.getType()&&t instanceof Ot&&_this187.features_.getArray().includes(t)) {
            a=n; var _e335=a.getFlatCoordinates().slice(0, 2); o=[{feature: t, geometry: a, segment: [_e335, _e335]}];
          } return !0;
        }, {layerFilter: _i264});
      } if (!o) {
        var _t320=En(re(Cn(fe(n, Py), r), e.getView().getResolution()*this.pixelTolerance_, Py), r); o=this.rBush_.getInExtent(_t320);
      } if (o&&o.length>0) {
        var _i265=o.sort(s)[0]; var _l57=_i265.segment; var _h49=Ny(n, _i265, r); var _c33=e.getPixelFromCoordinate(_h49); var _u31=Bi(t, _c33); if (a||_u31<=this.pixelTolerance_) {
          var _t321={}; if (_t321[X(_l57)]=!0, this.snapToPointer_||(this.delta_[0]=_h49[0]-n[0], this.delta_[1]=_h49[1]-n[1]), 'Circle'===_i265.geometry.getType()&&1===_i265.index) this.snappedToVertex_=!0, this.createOrUpdateVertexFeature_(_h49, [_i265.feature], [_i265.geometry]); else {
            var _n236=e.getPixelFromCoordinate(_l57[0]); var _r205=e.getPixelFromCoordinate(_l57[1]); var _s157=ji(_c33, _n236); var _a89=ji(_c33, _r205); _u31=Math.sqrt(Math.min(_s157, _a89)), this.snappedToVertex_=_u31<=this.pixelTolerance_, this.snappedToVertex_&&(_h49=_s157>_a89?_l57[1]:_l57[0]), this.createOrUpdateVertexFeature_(_h49, [_i265.feature], [_i265.geometry]); var _d27={}; _d27[X(_i265.geometry)]=!0; for (var _e336=1, _i266=o.length; _e336<_i266; ++_e336) {
              var _i267=o[_e336].segment; if (!(Di(_l57[0], _i267[0])&&Di(_l57[1], _i267[1])||Di(_l57[0], _i267[1])&&Di(_l57[1], _i267[0]))) break; {var _n237=X(o[_e336].geometry); _n237 in _d27||(_d27[_n237]=!0, _t321[X(_i267)]=!0);}
            }
          } return void(this.vertexSegments_=_t321);
        }
      } this.vertexFeature_&&(this.overlay_.getSource().removeFeature(this.vertexFeature_), this.vertexFeature_=null);
    }}, {key: 'insertVertex_', value: function insertVertex_(t, e) {
      var i=t.segment; var n=t.feature; var r=t.geometry; var s=t.depth; var o=t.index; var a; for (;e.length<r.getStride();)e.push(0); switch (r.getType()) {
        case 'MultiLineString': case 'Polygon': a=r.getCoordinates(), a[s[0]].splice(o+1, 0, e); break; case 'MultiPolygon': a=r.getCoordinates(), a[s[1]][s[0]].splice(o+1, 0, e); break; case 'LineString': a=r.getCoordinates(), a.splice(o+1, 0, e); break; default: return;
      } this.setGeometryCoordinates_(r, a); var l=this.rBush_; l.remove(t), this.updateSegmentIndices_(r, o, s, 1); var h={segment: [i[0], e], feature: n, geometry: r, depth: s, index: o}; l.insert(ne(h.segment), h), this.dragSegments_.push([h, 1]); var c={segment: [e, i[1]], feature: n, geometry: r, depth: s, index: o+1}; l.insert(ne(c.segment), c), this.dragSegments_.push([c, 0]), this.ignoreNextSingleClick_=!0;
    }}, {key: 'removePoint', value: function removePoint() {
      if (this.lastPointerEvent_&&this.lastPointerEvent_.type!=Ro.POINTERDRAG) {
        var _t322=this.lastPointerEvent_; this.willModifyFeatures_(_t322, this.dragSegments_); var _e337=this.removeVertex_(); return this.featuresBeingModified_&&this.dispatchEvent(new My(Fy, this.featuresBeingModified_, _t322)), this.featuresBeingModified_=null, _e337;
      } return !1;
    }}, {key: 'removeVertex_', value: function removeVertex_() {
      var t=this.dragSegments_; var e={}; var i; var n; var r; var s; var o; var a; var l; var h; var c; var u; var d; var g=!1; for (o=t.length-1; o>=0; --o)r=t[o], u=r[0], d=X(u.feature), u.depth&&(d+='-'+u.depth.join('-')), d in e||(e[d]={}), 0===r[1]?(e[d].right=u, e[d].index=u.index):1==r[1]&&(e[d].left=u, e[d].index=u.index+1); for (d in e) {
        switch (c=e[d].right, l=e[d].left, a=e[d].index, h=a-1, u=void 0!==l?l:c, h<0&&(h=0), s=u.geometry, n=s.getCoordinates(), i=n, g=!1, s.getType()) {
          case 'MultiLineString': n[u.depth[0]].length>2&&(n[u.depth[0]].splice(a, 1), g=!0); break; case 'LineString': n.length>2&&(n.splice(a, 1), g=!0); break; case 'MultiPolygon': i=i[u.depth[1]]; case 'Polygon': i=i[u.depth[0]], i.length>4&&(a==i.length-1&&(a=0), i.splice(a, 1), g=!0, 0===a&&(i.pop(), i.push(i[0]), h=i.length-1));
        } if (g) {
          this.setGeometryCoordinates_(s, n); var _e338=[]; if (void 0!==l&&(this.rBush_.remove(l), _e338.push(l.segment[0])), void 0!==c&&(this.rBush_.remove(c), _e338.push(c.segment[1])), void 0!==l&&void 0!==c) {
            var _t323={depth: u.depth, feature: u.feature, geometry: u.geometry, index: h, segment: _e338}; this.rBush_.insert(ne(_t323.segment), _t323);
          } this.updateSegmentIndices_(s, a, u.depth, -1), this.vertexFeature_&&(this.overlay_.getSource().removeFeature(this.vertexFeature_), this.vertexFeature_=null), t.length=0;
        }
      } return g;
    }}, {key: 'setGeometryCoordinates_', value: function setGeometryCoordinates_(t, e) {
      this.changingFeature_=!0, t.setCoordinates(e), this.changingFeature_=!1;
    }}, {key: 'updateSegmentIndices_', value: function updateSegmentIndices_(t, e, i, n) {
      this.rBush_.forEachInExtent(t.getExtent(), function(r) {
        r.geometry===t&&(void 0===i||void 0===r.depth||d(r.depth, i))&&r.index>e&&(r.index+=n);
      });
    }}]); return Gy;
  }(Ea); var ky='select'; var jy=/* #__PURE__*/function(_r206) {
    _inherits(jy, _r206); var _super160=_createSuper(jy); function jy(t, e, i, n) {
      var _this188; _classCallCheck(this, jy); _this188=_super160.call(this, t), _this188.selected=e, _this188.deselected=i, _this188.mapBrowserEvent=n; return _this188;
    } return _createClass(jy);
  }(r); var By={}; var zy=/* #__PURE__*/function(_Sa8) {
    _inherits(zy, _Sa8); var _super161=_createSuper(zy); function zy(t) {
      var _this189; _classCallCheck(this, zy); var e; if (_this189=_super161.call(this), _this189.on, _this189.once, _this189.un, t=t||{}, _this189.boundAddFeature_=_this189.addFeature_.bind(_assertThisInitialized(_this189)), _this189.boundRemoveFeature_=_this189.removeFeature_.bind(_assertThisInitialized(_this189)), _this189.condition_=t.condition?t.condition:Aa, _this189.addCondition_=t.addCondition?t.addCondition:Ma, _this189.removeCondition_=t.removeCondition?t.removeCondition:Ma, _this189.toggleCondition_=t.toggleCondition?t.toggleCondition:Na, _this189.multi_=!!t.multi&&t.multi, _this189.filter_=t.filter?t.filter:f, _this189.hitTolerance_=t.hitTolerance?t.hitTolerance:0, _this189.style_=void 0!==t.style?t.style:function() {
        var t=gf(); return u(t.Polygon, t.LineString), u(t.GeometryCollection, t.LineString), function(e) {
          return e.getGeometry()?t[e.getGeometry().getType()]:null;
        };
      }(), _this189.features_=t.features||new H(), t.layers) {
        if ('function'==typeof t.layers)e=t.layers; else {
          var _i268=t.layers; e=function e(t) {
            return _i268.includes(t);
          };
        }
      } else e=f; _this189.layerFilter_=e, _this189.featureLayerAssociation_={}; return _possibleConstructorReturn(_this189);
    }_createClass(zy, [{key: 'addFeatureLayerAssociation_', value: function addFeatureLayerAssociation_(t, e) {
      this.featureLayerAssociation_[X(t)]=e;
    }}, {key: 'getFeatures', value: function getFeatures() {
      return this.features_;
    }}, {key: 'getHitTolerance', value: function getHitTolerance() {
      return this.hitTolerance_;
    }}, {key: 'getLayer', value: function getLayer(t) {
      return this.featureLayerAssociation_[X(t)];
    }}, {key: 'setHitTolerance', value: function setHitTolerance(t) {
      this.hitTolerance_=t;
    }}, {key: 'setMap', value: function setMap(t) {
      this.getMap()&&this.style_&&this.features_.forEach(this.restorePreviousStyle_.bind(this)), _get(_getPrototypeOf(zy.prototype), 'setMap', this).call(this, t), t?(this.features_.addEventListener(Z, this.boundAddFeature_), this.features_.addEventListener(Y, this.boundRemoveFeature_), this.style_&&this.features_.forEach(this.applySelectedStyle_.bind(this))):(this.features_.removeEventListener(Z, this.boundAddFeature_), this.features_.removeEventListener(Y, this.boundRemoveFeature_));
    }}, {key: 'addFeature_', value: function addFeature_(t) {
      var e=t.element; if (this.style_&&this.applySelectedStyle_(e), !this.getLayer(e)) {
        var _t324=this.getMap().getAllLayers().find(function(t) {
          if (t instanceof i_&&t.getSource()&&t.getSource().hasFeature(e)) return t;
        }); _t324&&this.addFeatureLayerAssociation_(e, _t324);
      }
    }}, {key: 'removeFeature_', value: function removeFeature_(t) {
      this.style_&&this.restorePreviousStyle_(t.element);
    }}, {key: 'getStyle', value: function getStyle() {
      return this.style_;
    }}, {key: 'applySelectedStyle_', value: function applySelectedStyle_(t) {
      var e=X(t); e in By||(By[e]=t.getStyle()), t.setStyle(this.style_);
    }}, {key: 'restorePreviousStyle_', value: function restorePreviousStyle_(t) {
      var e=this.getMap().getInteractions().getArray(); for (var _i269=e.length-1; _i269>=0; --_i269) {
        var _n238=e[_i269]; if (_n238!==this&&_n238 instanceof zy&&_n238.getStyle()&&-1!==_n238.getFeatures().getArray().lastIndexOf(t)) return void t.setStyle(_n238.getStyle());
      } var i=X(t); t.setStyle(By[i]), delete By[i];
    }}, {key: 'removeFeatureLayerAssociation_', value: function removeFeatureLayerAssociation_(t) {
      delete this.featureLayerAssociation_[X(t)];
    }}, {key: 'handleEvent', value: function handleEvent(t) {
      var _this190=this; if (!this.condition_(t)) return !0; var e=this.addCondition_(t); var i=this.removeCondition_(t); var n=this.toggleCondition_(t); var r=!e&&!i&&!n; var s=t.map; var o=this.getFeatures(); var a=[]; var l=[]; if (r) {
        x(this.featureLayerAssociation_), s.forEachFeatureAtPixel(t.pixel, function(t, e) {
          if (t instanceof Ot&&_this190.filter_(t, e)) return _this190.addFeatureLayerAssociation_(t, e), l.push(t), !_this190.multi_;
        }, {layerFilter: this.layerFilter_, hitTolerance: this.hitTolerance_}); for (var _t325=o.getLength()-1; _t325>=0; --_t325) {
          var _e339=o.item(_t325); var _i270=l.indexOf(_e339); _i270>-1?l.splice(_i270, 1):(o.remove(_e339), a.push(_e339));
        }0!==l.length&&o.extend(l);
      } else {
        s.forEachFeatureAtPixel(t.pixel, function(t, r) {
          if (t instanceof Ot&&_this190.filter_(t, r)) return !e&&!n||o.getArray().includes(t)?(i||n)&&o.getArray().includes(t)&&(a.push(t), _this190.removeFeatureLayerAssociation_(t)):(_this190.addFeatureLayerAssociation_(t, r), l.push(t)), !_this190.multi_;
        }, {layerFilter: this.layerFilter_, hitTolerance: this.hitTolerance_}); for (var _t326=a.length-1; _t326>=0; --_t326)o.remove(a[_t326]); o.extend(l);
      } return (l.length>0||a.length>0)&&this.dispatchEvent(new jy(ky, l, a, t)), !0;
    }}]); return zy;
  }(Sa); var Uy=zy; function Xy(t) {
    return t.feature?t.feature:t.element?t.element:void 0;
  } var Vy=[]; var Wy=/* #__PURE__*/function(_Ea10) {
    _inherits(Wy, _Ea10); var _super162=_createSuper(Wy); function Wy(t) {
      var _this191; _classCallCheck(this, Wy); var e=t=t||{}; e.handleDownEvent||(e.handleDownEvent=f), e.stopDown||(e.stopDown=p), _this191=_super162.call(this, e), _this191.source_=t.source?t.source:null, _this191.vertex_=void 0===t.vertex||t.vertex, _this191.edge_=void 0===t.edge||t.edge, _this191.features_=t.features?t.features:null, _this191.featuresListenerKeys_=[], _this191.featureChangeListenerKeys_={}, _this191.indexedFeaturesExtents_={}, _this191.pendingFeatures_={}, _this191.pixelTolerance_=void 0!==t.pixelTolerance?t.pixelTolerance:10, _this191.rBush_=new ic(), _this191.GEOMETRY_SEGMENTERS_={Point: _this191.segmentPointGeometry_.bind(_assertThisInitialized(_this191)), LineString: _this191.segmentLineStringGeometry_.bind(_assertThisInitialized(_this191)), LinearRing: _this191.segmentLineStringGeometry_.bind(_assertThisInitialized(_this191)), Polygon: _this191.segmentPolygonGeometry_.bind(_assertThisInitialized(_this191)), MultiPoint: _this191.segmentMultiPointGeometry_.bind(_assertThisInitialized(_this191)), MultiLineString: _this191.segmentMultiLineStringGeometry_.bind(_assertThisInitialized(_this191)), MultiPolygon: _this191.segmentMultiPolygonGeometry_.bind(_assertThisInitialized(_this191)), GeometryCollection: _this191.segmentGeometryCollectionGeometry_.bind(_assertThisInitialized(_this191)), Circle: _this191.segmentCircleGeometry_.bind(_assertThisInitialized(_this191))}; return _this191;
    }_createClass(Wy, [{key: 'addFeature', value: function addFeature(t, e) {
      e=void 0===e||e; var i=X(t); var n=t.getGeometry(); if (n) {
        var _e340=this.GEOMETRY_SEGMENTERS_[n.getType()]; if (_e340) {
          this.indexedFeaturesExtents_[i]=n.getExtent([1/0, 1/0, -1/0, -1/0]); var _r207=[]; if (_e340(_r207, n), 1===_r207.length) this.rBush_.insert(ne(_r207[0]), {feature: t, segment: _r207[0]}); else if (_r207.length>1) {
            var _e341=_r207.map(function(t) {
              return ne(t);
            }); var _i271=_r207.map(function(e) {
              return {feature: t, segment: e};
            }); this.rBush_.load(_e341, _i271);
          }
        }
      }e&&(this.featureChangeListenerKeys_[i]=N(t, w, this.handleFeatureChange_, this));
    }}, {key: 'forEachFeatureAdd_', value: function forEachFeatureAdd_(t) {
      this.addFeature(t);
    }}, {key: 'forEachFeatureRemove_', value: function forEachFeatureRemove_(t) {
      this.removeFeature(t);
    }}, {key: 'getFeatures_', value: function getFeatures_() {
      var t; return this.features_?t=this.features_:this.source_&&(t=this.source_.getFeatures()), t;
    }}, {key: 'handleEvent', value: function handleEvent(t) {
      var e=this.snapTo(t.pixel, t.coordinate, t.map); return e&&(t.coordinate=e.vertex.slice(0, 2), t.pixel=e.vertexPixel), _get(_getPrototypeOf(Wy.prototype), 'handleEvent', this).call(this, t);
    }}, {key: 'handleFeatureAdd_', value: function handleFeatureAdd_(t) {
      var e=Xy(t); this.addFeature(e);
    }}, {key: 'handleFeatureRemove_', value: function handleFeatureRemove_(t) {
      var e=Xy(t); this.removeFeature(e);
    }}, {key: 'handleFeatureChange_', value: function handleFeatureChange_(t) {
      var e=t.target; if (this.handlingDownUpSequence) {
        var _t327=X(e); _t327 in this.pendingFeatures_||(this.pendingFeatures_[_t327]=e);
      } else this.updateFeature_(e);
    }}, {key: 'handleUpEvent', value: function handleUpEvent(t) {
      var e=Object.values(this.pendingFeatures_); return e.length&&(e.forEach(this.updateFeature_.bind(this)), this.pendingFeatures_={}), !1;
    }}, {key: 'removeFeature', value: function removeFeature(t, e) {
      var i=void 0===e||e; var n=X(t); var r=this.indexedFeaturesExtents_[n]; if (r) {
        var _e342=this.rBush_; var _i272=[]; _e342.forEachInExtent(r, function(e) {
          t===e.feature&&_i272.push(e);
        }); for (var _t328=_i272.length-1; _t328>=0; --_t328)_e342.remove(_i272[_t328]);
      }i&&(G(this.featureChangeListenerKeys_[n]), delete this.featureChangeListenerKeys_[n]);
    }}, {key: 'setMap', value: function setMap(t) {
      var e=this.getMap(); var i=this.featuresListenerKeys_; var n=this.getFeatures_(); e&&(i.forEach(G), i.length=0, n.forEach(this.forEachFeatureRemove_.bind(this))), _get(_getPrototypeOf(Wy.prototype), 'setMap', this).call(this, t), t&&(this.features_?i.push(N(this.features_, Z, this.handleFeatureAdd_, this), N(this.features_, Y, this.handleFeatureRemove_, this)):this.source_&&i.push(N(this.source_, nc, this.handleFeatureAdd_, this), N(this.source_, oc, this.handleFeatureRemove_, this)), n.forEach(this.forEachFeatureAdd_.bind(this)));
    }}, {key: 'snapTo', value: function snapTo(t, e, i) {
      var n=i.getView().getProjection(); var r=Tn(e, n); var s=En(re(ne([r]), i.getView().getResolution()*this.pixelTolerance_), n); var o=this.rBush_.getInExtent(s); var a=o.length; if (0===a) return null; var l; var h=1/0; var c=this.pixelTolerance_*this.pixelTolerance_; var u=function u() {
        if (l) {
          var _e343=i.getPixelFromCoordinate(l); if (ji(t, _e343)<=c) return {vertex: l, vertexPixel: [Math.round(_e343[0]), Math.round(_e343[1])]};
        } return null;
      }; if (this.vertex_) {
        for (var _t329=0; _t329<a; ++_t329) {
          var _e344=o[_t329]; 'Circle'!==_e344.feature.getGeometry().getType()&&_e344.segment.forEach(function(t) {
            var e=Tn(t, n); var i=ji(r, e); i<h&&(l=t, h=i);
          });
        } var _t330=u(); if (_t330) return _t330;
      } if (this.edge_) {
        for (var _t331=0; _t331<a; ++_t331) {
          var _e345=null; var _i273=o[_t331]; if ('Circle'===_i273.feature.getGeometry().getType()) {
            var _t332=_i273.feature.getGeometry(); var _s158=Sn(); _s158&&(_t332=_t332.clone().transform(_s158, n)), _e345=Mi(r, _t332);
          } else {
            var _i273$segment=_slicedToArray(_i273.segment, 2); var _t333=_i273$segment[0]; var _s159=_i273$segment[1]; _s159&&(Vy[0]=Tn(_t333, n), Vy[1]=Tn(_s159, n), _e345=Ai(r, Vy));
          } if (_e345) {
            var _t334=ji(r, _e345); _t334<h&&(l=wn(_e345, n), h=_t334);
          }
        } var _t335=u(); if (_t335) return _t335;
      } return null;
    }}, {key: 'updateFeature_', value: function updateFeature_(t) {
      this.removeFeature(t, !1), this.addFeature(t, !1);
    }}, {key: 'segmentCircleGeometry_', value: function segmentCircleGeometry_(t, e) {
      var i=this.getMap().getView().getProjection(); var n=e; var r=Sn(); r&&(n=n.clone().transform(r, i)); var s=Dr(n); r&&s.transform(i, r); var o=s.getCoordinates()[0]; for (var _e346=0, _i274=o.length-1; _e346<_i274; ++_e346)t.push(o.slice(_e346, _e346+2));
    }}, {key: 'segmentGeometryCollectionGeometry_', value: function segmentGeometryCollectionGeometry_(t, e) {
      var i=e.getGeometriesArray(); for (var _e347=0; _e347<i.length; ++_e347) {
        var _n239=this.GEOMETRY_SEGMENTERS_[i[_e347].getType()]; _n239&&_n239(t, i[_e347]);
      }
    }}, {key: 'segmentLineStringGeometry_', value: function segmentLineStringGeometry_(t, e) {
      var i=e.getCoordinates(); for (var _e348=0, _n240=i.length-1; _e348<_n240; ++_e348)t.push(i.slice(_e348, _e348+2));
    }}, {key: 'segmentMultiLineStringGeometry_', value: function segmentMultiLineStringGeometry_(t, e) {
      var i=e.getCoordinates(); for (var _e349=0, _n241=i.length; _e349<_n241; ++_e349) {
        var _n242=i[_e349]; for (var _e350=0, _i275=_n242.length-1; _e350<_i275; ++_e350)t.push(_n242.slice(_e350, _e350+2));
      }
    }}, {key: 'segmentMultiPointGeometry_', value: function segmentMultiPointGeometry_(t, e) {
      e.getCoordinates().forEach(function(e) {
        t.push([e]);
      });
    }}, {key: 'segmentMultiPolygonGeometry_', value: function segmentMultiPolygonGeometry_(t, e) {
      var i=e.getCoordinates(); for (var _e351=0, _n243=i.length; _e351<_n243; ++_e351) {
        var _n244=i[_e351]; for (var _e352=0, _i276=_n244.length; _e352<_i276; ++_e352) {
          var _i277=_n244[_e352]; for (var _e353=0, _n245=_i277.length-1; _e353<_n245; ++_e353)t.push(_i277.slice(_e353, _e353+2));
        }
      }
    }}, {key: 'segmentPointGeometry_', value: function segmentPointGeometry_(t, e) {
      t.push([e.getCoordinates()]);
    }}, {key: 'segmentPolygonGeometry_', value: function segmentPolygonGeometry_(t, e) {
      var i=e.getCoordinates(); for (var _e354=0, _n246=i.length; _e354<_n246; ++_e354) {
        var _n247=i[_e354]; for (var _e355=0, _i278=_n247.length-1; _e355<_i278; ++_e355)t.push(_n247.slice(_e355, _e355+2));
      }
    }}]); return Wy;
  }(Ea); var Zy='translatestart'; var Yy='translating'; var Ky='translateend'; var qy=/* #__PURE__*/function(_r208) {
    _inherits(qy, _r208); var _super163=_createSuper(qy); function qy(t, e, i, n, r) {
      var _this192; _classCallCheck(this, qy); _this192=_super163.call(this, t), _this192.features=e, _this192.coordinate=i, _this192.startCoordinate=n, _this192.mapBrowserEvent=r; return _this192;
    } return _createClass(qy);
  }(r); var Hy=/* #__PURE__*/function(_Ea11) {
    _inherits(Hy, _Ea11); var _super164=_createSuper(Hy); function Hy(t) {
      var _this193; _classCallCheck(this, Hy); var e; if (_this193=_super164.call(this, t=t||{}), _this193.on, _this193.once, _this193.un, _this193.lastCoordinate_=null, _this193.startCoordinate_=null, _this193.features_=void 0!==t.features?t.features:null, t.layers&&!_this193.features_) {
        if ('function'==typeof t.layers)e=t.layers; else {
          var _i279=t.layers; e=function e(t) {
            return _i279.includes(t);
          };
        }
      } else e=f; _this193.layerFilter_=e, _this193.filter_=t.filter&&!_this193.features_?t.filter:f, _this193.hitTolerance_=t.hitTolerance?t.hitTolerance:0, _this193.condition_=t.condition?t.condition:La, _this193.lastFeature_=null, _this193.addChangeListener(ya, _this193.handleActiveChanged_); return _possibleConstructorReturn(_this193);
    }_createClass(Hy, [{key: 'handleDownEvent', value: function handleDownEvent(t) {
      if (!t.originalEvent||!this.condition_(t)) return !1; if (this.lastFeature_=this.featuresAtPixel_(t.pixel, t.map), !this.lastCoordinate_&&this.lastFeature_) {
        this.startCoordinate_=t.coordinate, this.lastCoordinate_=t.coordinate, this.handleMoveEvent(t); var _e356=this.features_||new H([this.lastFeature_]); return this.dispatchEvent(new qy(Zy, _e356, t.coordinate, this.startCoordinate_, t)), !0;
      } return !1;
    }}, {key: 'handleUpEvent', value: function handleUpEvent(t) {
      if (this.lastCoordinate_) {
        this.lastCoordinate_=null, this.handleMoveEvent(t); var _e357=this.features_||new H([this.lastFeature_]); return this.dispatchEvent(new qy(Ky, _e357, t.coordinate, this.startCoordinate_, t)), this.startCoordinate_=null, !0;
      } return !1;
    }}, {key: 'handleDragEvent', value: function handleDragEvent(t) {
      if (this.lastCoordinate_) {
        var _e358=t.coordinate; var _i280=_e358[0]-this.lastCoordinate_[0]; var _n248=_e358[1]-this.lastCoordinate_[1]; var _r209=this.features_||new H([this.lastFeature_]); _r209.forEach(function(t) {
          var e=t.getGeometry(); e.translate(_i280, _n248), t.setGeometry(e);
        }), this.lastCoordinate_=_e358, this.dispatchEvent(new qy(Yy, _r209, _e358, this.startCoordinate_, t));
      }
    }}, {key: 'handleMoveEvent', value: function handleMoveEvent(t) {
      var e=t.map.getViewport(); this.featuresAtPixel_(t.pixel, t.map)?(e.classList.remove(this.lastCoordinate_?'ol-grab':'ol-grabbing'), e.classList.add(this.lastCoordinate_?'ol-grabbing':'ol-grab')):e.classList.remove('ol-grab', 'ol-grabbing');
    }}, {key: 'featuresAtPixel_', value: function featuresAtPixel_(t, e) {
      var _this194=this; return e.forEachFeatureAtPixel(t, function(t, e) {
        if (t instanceof Ot&&_this194.filter_(t, e)&&(!_this194.features_||_this194.features_.getArray().includes(t))) return t;
      }, {layerFilter: this.layerFilter_, hitTolerance: this.hitTolerance_});
    }}, {key: 'getHitTolerance', value: function getHitTolerance() {
      return this.hitTolerance_;
    }}, {key: 'setHitTolerance', value: function setHitTolerance(t) {
      this.hitTolerance_=t;
    }}, {key: 'setMap', value: function setMap(t) {
      var e=this.getMap(); _get(_getPrototypeOf(Hy.prototype), 'setMap', this).call(this, t), this.updateState_(e);
    }}, {key: 'handleActiveChanged_', value: function handleActiveChanged_() {
      this.updateState_(null);
    }}, {key: 'updateState_', value: function updateState_(t) {
      var e=this.getMap(); var i=this.getActive(); if ((!e||!i)&&(e=e||t, e)) {
        e.getViewport().classList.remove('ol-grab', 'ol-grabbing');
      }
    }}]); return Hy;
  }(Ea); function $y(t, e, i, n, r, s) {
void 0!==r?s=void 0!==s?s:0:(r=[], s=0); var o=e; for (;o<i;) {
  var _e359=t[o++]; r[s++]=t[o++], r[s++]=_e359; for (var _e360=2; _e360<n; ++_e360)r[s++]=t[o++];
} return r.length=s, r;
  } function Jy(t) {
    if ('string'==typeof t) {
      var _e361=JSON.parse(t); return _e361||null;
    } return null!==t?t:null;
  } var Qy=/* #__PURE__*/function(_f_2) {
    _inherits(Qy, _f_2); var _super165=_createSuper(Qy); function Qy() {
      _classCallCheck(this, Qy); return _super165.call(this);
    }_createClass(Qy, [{key: 'getType', value: function getType() {
      return 'json';
    }}, {key: 'readFeature', value: function readFeature(t, e) {
      return this.readFeatureFromObject(Jy(t), this.getReadOptions(t, e));
    }}, {key: 'readFeatures', value: function readFeatures(t, e) {
      return this.readFeaturesFromObject(Jy(t), this.getReadOptions(t, e));
    }}, {key: 'readFeatureFromObject', value: function readFeatureFromObject(t, e) {
      return z();
    }}, {key: 'readFeaturesFromObject', value: function readFeaturesFromObject(t, e) {
      return z();
    }}, {key: 'readGeometry', value: function readGeometry(t, e) {
      return this.readGeometryFromObject(Jy(t), this.getReadOptions(t, e));
    }}, {key: 'readGeometryFromObject', value: function readGeometryFromObject(t, e) {
      return z();
    }}, {key: 'readProjection', value: function readProjection(t) {
      return this.readProjectionFromObject(Jy(t));
    }}, {key: 'readProjectionFromObject', value: function readProjectionFromObject(t) {
      return z();
    }}, {key: 'writeFeature', value: function writeFeature(t, e) {
      return JSON.stringify(this.writeFeatureObject(t, e));
    }}, {key: 'writeFeatureObject', value: function writeFeatureObject(t, e) {
      return z();
    }}, {key: 'writeFeatures', value: function writeFeatures(t, e) {
      return JSON.stringify(this.writeFeaturesObject(t, e));
    }}, {key: 'writeFeaturesObject', value: function writeFeaturesObject(t, e) {
      return z();
    }}, {key: 'writeGeometry', value: function writeGeometry(t, e) {
      return JSON.stringify(this.writeGeometryObject(t, e));
    }}, {key: 'writeGeometryObject', value: function writeGeometryObject(t, e) {
      return z();
    }}]); return Qy;
  }(f_); var tx={Point: function Point(t) {
    var e; e=void 0!==t.m&&void 0!==t.z?new dr([t.x, t.y, t.z, t.m], 'XYZM'):void 0!==t.z?new dr([t.x, t.y, t.z], 'XYZ'):void 0!==t.m?new dr([t.x, t.y, t.m], 'XYM'):new dr([t.x, t.y]); return e;
  }, LineString: function LineString(t) {
    var e=nx(t); return new zm(t.paths[0], e);
  }, Polygon: function Polygon(t) {
    var e=nx(t); return new Ar(t.rings, e);
  }, MultiPoint: function MultiPoint(t) {
    var e=nx(t); return new Wm(t.points, e);
  }, MultiLineString: function MultiLineString(t) {
    var e=nx(t); return new Xm(t.paths, e);
  }, MultiPolygon: function MultiPolygon(t) {
    var e=nx(t); return new Km(t.rings, e);
  }}; var ex={Point: function Point(t, e) {
    var i=t.getCoordinates(); var n; var r=t.getLayout(); 'XYZ'===r?n={x: i[0], y: i[1], z: i[2]}:'XYM'===r?n={x: i[0], y: i[1], m: i[2]}:'XYZM'===r?n={x: i[0], y: i[1], z: i[2], m: i[3]}:'XY'===r?n={x: i[0], y: i[1]}:Ft(!1, 34); return n;
  }, LineString: function LineString(t, e) {
    var i=rx(t); return {hasZ: i.hasZ, hasM: i.hasM, paths: [t.getCoordinates()]};
  }, Polygon: function Polygon(t, e) {
    var i=rx(t); return {hasZ: i.hasZ, hasM: i.hasM, rings: t.getCoordinates(!1)};
  }, MultiPoint: function MultiPoint(t, e) {
    var i=rx(t); return {hasZ: i.hasZ, hasM: i.hasM, points: t.getCoordinates()};
  }, MultiLineString: function MultiLineString(t, e) {
    var i=rx(t); return {hasZ: i.hasZ, hasM: i.hasM, paths: t.getCoordinates()};
  }, MultiPolygon: function MultiPolygon(t, e) {
    var i=rx(t); var n=t.getCoordinates(!1); var r=[]; for (var _t336=0; _t336<n.length; _t336++) for (var _e362=n[_t336].length-1; _e362>=0; _e362--)r.push(n[_t336][_e362]); return {hasZ: i.hasZ, hasM: i.hasM, rings: r};
  }}; function ix(t, e) {
    if (!t) return null; var i; if ('number'==typeof t.x&&'number'==typeof t.y)i='Point'; else if (t.points)i='MultiPoint'; else if (t.paths) {
      i=1===t.paths.length?'LineString':'MultiLineString';
    } else if (t.rings) {
      var _e363=t; var _n249=nx(_e363); var _r210=function(t, e) {
        var i=[]; var n=[]; var r=[]; var s; var o; for (s=0, o=t.length; s<o; ++s) {
          i.length=0, Yn(i, 0, t[s], e.length); Rr(i, 0, i.length, e.length)?n.push([t[s]]):r.push(t[s]);
        } for (;r.length;) {
          var _t337=r.shift(); var _e364=!1; for (s=n.length-1; s>=0; s--) {
            var _i281=n[s][0]; if (le(new cr(_i281).getExtent(), new cr(_t337).getExtent())) {
              n[s].push(_t337), _e364=!0; break;
            }
          }_e364||n.push([_t337.reverse()]);
        } return n;
      }(_e363.rings, _n249); 1===_r210.length?(i='Polygon', t=Object.assign({}, t, {rings: _r210[0]})):(i='MultiPolygon', t=Object.assign({}, t, {rings: _r210}));
    } return p_((0, tx[i])(t), !1, e);
  } function nx(t) {
    var e='XY'; return !0===t.hasZ&&!0===t.hasM?e='XYZM':!0===t.hasZ?e='XYZ':!0===t.hasM&&(e='XYM'), e;
  } function rx(t) {
    var e=t.getLayout(); return {hasZ: 'XYZ'===e||'XYZM'===e, hasM: 'XYM'===e||'XYZM'===e};
  } function sx(t, e) {
    return (0, ex[t.getType()])(p_(t, !0, e), e);
  } var ox=/* #__PURE__*/function(_Qy) {
    _inherits(ox, _Qy); var _super166=_createSuper(ox); function ox(t) {
      var _this195; _classCallCheck(this, ox); t=t||{}, _this195=_super166.call(this), _this195.geometryName_=t.geometryName; return _this195;
    }_createClass(ox, [{key: 'readFeatureFromObject', value: function readFeatureFromObject(t, e, i) {
      var n=t; var r=ix(n.geometry, e); var s=new Ot(); if (this.geometryName_&&s.setGeometryName(this.geometryName_), s.setGeometry(r), n.attributes) {
        s.setProperties(n.attributes, !0); var _t338=n.attributes[i]; void 0!==_t338&&s.setId(_t338);
      } return s;
    }}, {key: 'readFeaturesFromObject', value: function readFeaturesFromObject(t, e) {
      if (e=e||{}, t.features) {
        var _i282=[]; var _n250=t.features; for (var _r211=0, _s160=_n250.length; _r211<_s160; ++_r211)_i282.push(this.readFeatureFromObject(_n250[_r211], e, t.objectIdFieldName)); return _i282;
      } return [this.readFeatureFromObject(t, e)];
    }}, {key: 'readGeometryFromObject', value: function readGeometryFromObject(t, e) {
      return ix(t, e);
    }}, {key: 'readProjectionFromObject', value: function readProjectionFromObject(t) {
      if (t.spatialReference&&void 0!==t.spatialReference.wkid) {
        return an('EPSG:'+t.spatialReference.wkid);
      } return null;
    }}, {key: 'writeGeometryObject', value: function writeGeometryObject(t, e) {
      return sx(t, this.adaptOptions(e));
    }}, {key: 'writeFeatureObject', value: function writeFeatureObject(t, e) {
      e=this.adaptOptions(e); var i={}; if (!t.hasProperties()) return i.attributes={}, i; var n=t.getProperties(); var r=t.getGeometry(); if (r) {
        i.geometry=sx(r, e); var _s161=e&&(e.dataProjection||e.featureProjection); _s161&&(i.geometry.spatialReference={wkid: Number(an(_s161).getCode().split(':').pop())}), delete n[t.getGeometryName()];
      } return v(n)?i.attributes={}:i.attributes=n, i;
    }}, {key: 'writeFeaturesObject', value: function writeFeaturesObject(t, e) {
      e=this.adaptOptions(e); var i=[]; for (var _n251=0, _r212=t.length; _n251<_r212; ++_n251)i.push(this.writeFeatureObject(t[_n251], e)); return {features: i};
    }}]); return ox;
  }(Qy); var ax=/* #__PURE__*/function(_f_3) {
    _inherits(ax, _f_3); var _super167=_createSuper(ax); function ax() {
      var _this196; _classCallCheck(this, ax); _this196=_super167.call(this), _this196.xmlSerializer_=Cd(); return _this196;
    }_createClass(ax, [{key: 'getType', value: function getType() {
      return 'xml';
    }}, {key: 'readFeature', value: function readFeature(t, e) {
      if (!t) return null; if ('string'==typeof t) {
        var _i283=ad(t); return this.readFeatureFromDocument(_i283, e);
      } return sd(t)?this.readFeatureFromDocument(t, e):this.readFeatureFromNode(t, e);
    }}, {key: 'readFeatureFromDocument', value: function readFeatureFromDocument(t, e) {
      var i=this.readFeaturesFromDocument(t, e); return i.length>0?i[0]:null;
    }}, {key: 'readFeatureFromNode', value: function readFeatureFromNode(t, e) {
      return null;
    }}, {key: 'readFeatures', value: function readFeatures(t, e) {
      if (!t) return []; if ('string'==typeof t) {
        var _i284=ad(t); return this.readFeaturesFromDocument(_i284, e);
      } return sd(t)?this.readFeaturesFromDocument(t, e):this.readFeaturesFromNode(t, e);
    }}, {key: 'readFeaturesFromDocument', value: function readFeaturesFromDocument(t, e) {
      var i=[]; for (var _n252=t.firstChild; _n252; _n252=_n252.nextSibling)_n252.nodeType==Node.ELEMENT_NODE&&u(i, this.readFeaturesFromNode(_n252, e)); return i;
    }}, {key: 'readFeaturesFromNode', value: function readFeaturesFromNode(t, e) {
      return z();
    }}, {key: 'readGeometry', value: function readGeometry(t, e) {
      if (!t) return null; if ('string'==typeof t) {
        var _i285=ad(t); return this.readGeometryFromDocument(_i285, e);
      } return sd(t)?this.readGeometryFromDocument(t, e):this.readGeometryFromNode(t, e);
    }}, {key: 'readGeometryFromDocument', value: function readGeometryFromDocument(t, e) {
      return null;
    }}, {key: 'readGeometryFromNode', value: function readGeometryFromNode(t, e) {
      return null;
    }}, {key: 'readProjection', value: function readProjection(t) {
      if (!t) return null; if ('string'==typeof t) {
        var _e365=ad(t); return this.readProjectionFromDocument(_e365);
      } return sd(t)?this.readProjectionFromDocument(t):this.readProjectionFromNode(t);
    }}, {key: 'readProjectionFromDocument', value: function readProjectionFromDocument(t) {
      return this.dataProjection;
    }}, {key: 'readProjectionFromNode', value: function readProjectionFromNode(t) {
      return this.dataProjection;
    }}, {key: 'writeFeature', value: function writeFeature(t, e) {
      var i=this.writeFeatureNode(t, e); return this.xmlSerializer_.serializeToString(i);
    }}, {key: 'writeFeatureNode', value: function writeFeatureNode(t, e) {
      return null;
    }}, {key: 'writeFeatures', value: function writeFeatures(t, e) {
      var i=this.writeFeaturesNode(t, e); return this.xmlSerializer_.serializeToString(i);
    }}, {key: 'writeFeaturesNode', value: function writeFeaturesNode(t, e) {
      return null;
    }}, {key: 'writeGeometry', value: function writeGeometry(t, e) {
      var i=this.writeGeometryNode(t, e); return this.xmlSerializer_.serializeToString(i);
    }}, {key: 'writeGeometryNode', value: function writeGeometryNode(t, e) {
      return null;
    }}]); return ax;
  }(f_); var lx='http://www.opengis.net/gml'; var hx=/^\s*$/; var cx=/* #__PURE__*/function(_ax) {
    _inherits(cx, _ax); var _super168=_createSuper(cx); function cx(t) {
      var _this197; _classCallCheck(this, cx); _this197=_super168.call(this), t=t||{}, _this197.featureType=t.featureType, _this197.featureNS=t.featureNS, _this197.srsName=t.srsName, _this197.schemaLocation='', _this197.FEATURE_COLLECTION_PARSERS={}, _this197.FEATURE_COLLECTION_PARSERS[_this197.namespace]={featureMember: hd(_this197.readFeaturesInternal), featureMembers: cd(_this197.readFeaturesInternal)}, _this197.supportedMediaTypes=['application/gml+xml']; return _this197;
    }_createClass(cx, [{key: 'readFeaturesInternal', value: function readFeaturesInternal(t, e) {
      var i=t.localName; var n=null; if ('FeatureCollection'==i)n=vd([], this.FEATURE_COLLECTION_PARSERS, t, e, this); else if ('featureMembers'==i||'featureMember'==i||'member'==i) {
        var _r213=e[0]; var _s162=_r213.featureType; var _o138=_r213.featureNS; var _a90='p'; var _l58='p0'; if (!_s162&&t.childNodes) {
          _s162=[], _o138={}; for (var _e366=0, _i286=t.childNodes.length; _e366<_i286; ++_e366) {
            var _i287=t.childNodes[_e366]; if (1===_i287.nodeType) {
              var _t339=_i287.nodeName.split(':').pop(); if (!_s162.includes(_t339)) {
                var _e367=''; var _n253=0; var _r214=_i287.namespaceURI; for (var _t340 in _o138) {
                  if (_o138[_t340]===_r214) {
                    _e367=_t340; break;
                  }++_n253;
                }_e367||(_e367=_a90+_n253, _o138[_e367]=_r214), _s162.push(_e367+':'+_t339);
              }
            }
          }'featureMember'!=i&&(_r213.featureType=_s162, _r213.featureNS=_o138);
        } if ('string'==typeof _o138) {
          var _t341=_o138; _o138={}, _o138[_l58]=_t341;
        } var _h50={}; var _c34=Array.isArray(_s162)?_s162:[_s162]; for (var _t342 in _o138) {
          var _e368={}; for (var _n254=0, _r215=_c34.length; _n254<_r215; ++_n254) {
            (_c34[_n254].includes(':')?_c34[_n254].split(':')[0]:_l58)===_t342&&(_e368[_c34[_n254].split(':').pop()]='featureMembers'==i?hd(this.readFeatureElement, this):cd(this.readFeatureElement, this));
          }_h50[_o138[_t342]]=_e368;
        }n=vd('featureMember'==i||'member'==i?void 0:[], _h50, t, e);
      } return null===n&&(n=[]), n;
    }}, {key: 'readGeometryOrExtent', value: function readGeometryOrExtent(t, e) {
      var i=e[0]; return i.srsName=t.firstElementChild.getAttribute('srsName'), i.srsDimension=t.firstElementChild.getAttribute('srsDimension'), vd(null, this.GEOMETRY_PARSERS, t, e, this);
    }}, {key: 'readExtentElement', value: function readExtentElement(t, e) {
      var i=e[0]; var n=this.readGeometryOrExtent(t, e); return n?m_(n, i):void 0;
    }}, {key: 'readGeometryElement', value: function readGeometryElement(t, e) {
      var i=e[0]; var n=this.readGeometryOrExtent(t, e); return n?p_(n, !1, i):void 0;
    }}, {key: 'readFeatureElementInternal', value: function readFeatureElementInternal(t, e, i) {
      var n; var r={}; for (var _s163=t.firstElementChild; _s163; _s163=_s163.nextElementSibling) {
        var _t343=void 0; var _o139=_s163.localName; 0===_s163.childNodes.length||1===_s163.childNodes.length&&(3===_s163.firstChild.nodeType||4===_s163.firstChild.nodeType)?(_t343=nd(_s163, !1), hx.test(_t343)&&(_t343=void 0)):(i&&(_t343='boundedBy'===_o139?this.readExtentElement(_s163, e):this.readGeometryElement(_s163, e)), _t343?'boundedBy'!==_o139&&(n=_o139):_t343=this.readFeatureElementInternal(_s163, e, !1)); var _a91=_s163.attributes.length; if (_a91>0) {
          _t343={_content_: _t343}; for (var _e369=0; _e369<_a91; _e369++) {
            _t343[_s163.attributes[_e369].name]=_s163.attributes[_e369].value;
          }
        }r[_o139]?(r[_o139]instanceof Array||(r[_o139]=[r[_o139]]), r[_o139].push(_t343)):r[_o139]=_t343;
      } if (!i) return r; var s=new Ot(r); n&&s.setGeometryName(n); var o=t.getAttribute('fid')||od(t, this.namespace, 'id'); return o&&s.setId(o), s;
    }}, {key: 'readFeatureElement', value: function readFeatureElement(t, e) {
      return this.readFeatureElementInternal(t, e, !0);
    }}, {key: 'readPoint', value: function readPoint(t, e) {
      var i=this.readFlatCoordinatesFromNode(t, e); if (i) return new dr(i, 'XYZ');
    }}, {key: 'readMultiPoint', value: function readMultiPoint(t, e) {
      var i=vd([], this.MULTIPOINT_PARSERS, t, e, this); if (i) return new Wm(i);
    }}, {key: 'readMultiLineString', value: function readMultiLineString(t, e) {
      var i=vd([], this.MULTILINESTRING_PARSERS, t, e, this); if (i) return new Xm(i);
    }}, {key: 'readMultiPolygon', value: function readMultiPolygon(t, e) {
      var i=vd([], this.MULTIPOLYGON_PARSERS, t, e, this); if (i) return new Km(i);
    }}, {key: 'pointMemberParser', value: function pointMemberParser(t, e) {
      xd(this.POINTMEMBER_PARSERS, t, e, this);
    }}, {key: 'lineStringMemberParser', value: function lineStringMemberParser(t, e) {
      xd(this.LINESTRINGMEMBER_PARSERS, t, e, this);
    }}, {key: 'polygonMemberParser', value: function polygonMemberParser(t, e) {
      xd(this.POLYGONMEMBER_PARSERS, t, e, this);
    }}, {key: 'readLineString', value: function readLineString(t, e) {
      var i=this.readFlatCoordinatesFromNode(t, e); if (i) {
        return new zm(i, 'XYZ');
      }
    }}, {key: 'readFlatLinearRing', value: function readFlatLinearRing(t, e) {
      var i=vd(null, this.GEOMETRY_FLAT_COORDINATES_PARSERS, t, e, this); if (i) return i;
    }}, {key: 'readLinearRing', value: function readLinearRing(t, e) {
      var i=this.readFlatCoordinatesFromNode(t, e); if (i) return new cr(i, 'XYZ');
    }}, {key: 'readPolygon', value: function readPolygon(t, e) {
      var i=vd([null], this.FLAT_LINEAR_RINGS_PARSERS, t, e, this); if (i&&i[0]) {
        var _t344=i[0]; var _e370=[_t344.length]; var _n255; var _r216; for (_n255=1, _r216=i.length; _n255<_r216; ++_n255)u(_t344, i[_n255]), _e370.push(_t344.length); return new Ar(_t344, 'XYZ', _e370);
      }
    }}, {key: 'readFlatCoordinatesFromNode', value: function readFlatCoordinatesFromNode(t, e) {
      return vd(null, this.GEOMETRY_FLAT_COORDINATES_PARSERS, t, e, this);
    }}, {key: 'readGeometryFromNode', value: function readGeometryFromNode(t, e) {
      var i=this.readGeometryElement(t, [this.getReadOptions(t, e||{})]); return i||null;
    }}, {key: 'readFeaturesFromNode', value: function readFeaturesFromNode(t, e) {
      var i={featureType: this.featureType, featureNS: this.featureNS}; i&&Object.assign(i, this.getReadOptions(t, e)); return this.readFeaturesInternal(t, [i])||[];
    }}, {key: 'readProjectionFromNode', value: function readProjectionFromNode(t) {
      return an(this.srsName?this.srsName:t.firstElementChild.getAttribute('srsName'));
    }}]); return cx;
  }(ax); cx.prototype.namespace=lx, cx.prototype.FLAT_LINEAR_RINGS_PARSERS={'http://www.opengis.net/gml': {}}, cx.prototype.GEOMETRY_FLAT_COORDINATES_PARSERS={'http://www.opengis.net/gml': {}}, cx.prototype.GEOMETRY_PARSERS={'http://www.opengis.net/gml': {}}, cx.prototype.MULTIPOINT_PARSERS={'http://www.opengis.net/gml': {pointMember: hd(cx.prototype.pointMemberParser), pointMembers: hd(cx.prototype.pointMemberParser)}}, cx.prototype.MULTILINESTRING_PARSERS={'http://www.opengis.net/gml': {lineStringMember: hd(cx.prototype.lineStringMemberParser), lineStringMembers: hd(cx.prototype.lineStringMemberParser)}}, cx.prototype.MULTIPOLYGON_PARSERS={'http://www.opengis.net/gml': {polygonMember: hd(cx.prototype.polygonMemberParser), polygonMembers: hd(cx.prototype.polygonMemberParser)}}, cx.prototype.POINTMEMBER_PARSERS={'http://www.opengis.net/gml': {Point: hd(cx.prototype.readFlatCoordinatesFromNode)}}, cx.prototype.LINESTRINGMEMBER_PARSERS={'http://www.opengis.net/gml': {LineString: hd(cx.prototype.readLineString)}}, cx.prototype.POLYGONMEMBER_PARSERS={'http://www.opengis.net/gml': {Polygon: hd(cx.prototype.readPolygon)}}, cx.prototype.RING_PARSERS={'http://www.opengis.net/gml': {LinearRing: cd(cx.prototype.readFlatLinearRing)}}; var ux=cx; function dx(t) {
    return gx(nd(t, !1));
  } function gx(t) {
    var e=/^\s*(true|1)|(false|0)\s*$/.exec(t); if (e) return void 0!==e[1]||!1;
  } function fx(t) {
    var e=nd(t, !1); var i=Date.parse(e); return isNaN(i)?void 0:i/1e3;
  } function px(t) {
    return mx(nd(t, !1));
  } function mx(t) {
    var e=/^\s*([+\-]?\d*\.?\d+(?:e[+\-]?\d+)?)\s*$/i.exec(t); if (e) return parseFloat(e[1]);
  } function _x(t) {
    return yx(nd(t, !1));
  } function yx(t) {
    var e=/^\s*(\d+)\s*$/.exec(t); if (e) return parseInt(e[1], 10);
  } function xx(t) {
    return nd(t, !1).trim();
  } function vx(t, e) {
    Cx(t, e?'1':'0');
  } function Sx(t, e) {
    t.appendChild(Rd().createCDATASection(e));
  } function wx(t, e) {
    var i=new Date(1e3*e); var n=i.getUTCFullYear()+'-'+Ii(i.getUTCMonth()+1, 2)+'-'+Ii(i.getUTCDate(), 2)+'T'+Ii(i.getUTCHours(), 2)+':'+Ii(i.getUTCMinutes(), 2)+':'+Ii(i.getUTCSeconds(), 2)+'Z'; t.appendChild(Rd().createTextNode(n));
  } function Tx(t, e) {
    var i=e.toPrecision(); t.appendChild(Rd().createTextNode(i));
  } function Ex(t, e) {
    var i=e.toString(); t.appendChild(Rd().createTextNode(i));
  } function Cx(t, e) {
    t.appendChild(Rd().createTextNode(e));
  } var Rx={MultiLineString: 'lineStringMember', MultiCurve: 'curveMember', MultiPolygon: 'polygonMember', MultiSurface: 'surfaceMember'}; var bx=/* #__PURE__*/function(_ux) {
    _inherits(bx, _ux); var _super169=_createSuper(bx); function bx(t) {
      var _this198; _classCallCheck(this, bx); _this198=_super169.call(this, t=t||{}), _this198.FEATURE_COLLECTION_PARSERS[lx].featureMember=hd(_this198.readFeaturesInternal), _this198.schemaLocation=t.schemaLocation?t.schemaLocation:'http://www.opengis.net/gml http://schemas.opengis.net/gml/2.1.2/feature.xsd'; return _this198;
    }_createClass(bx, [{key: 'readFlatCoordinates', value: function readFlatCoordinates(t, e) {
      var i=nd(t, !1).replace(/^\s*|\s*$/g, ''); var n=e[0].srsName; var r='enu'; if (n) {
        var _t345=an(n); _t345&&(r=_t345.getAxisOrientation());
      } var s=i.trim().split(/\s+/); var o=[]; for (var _t346=0, _e371=s.length; _t346<_e371; _t346++) {
        var _e372=s[_t346].split(/,+/); var _i288=parseFloat(_e372[0]); var _n256=parseFloat(_e372[1]); var _a92=3===_e372.length?parseFloat(_e372[2]):0; 'en'===r.substr(0, 2)?o.push(_i288, _n256, _a92):o.push(_n256, _i288, _a92);
      } return o;
    }}, {key: 'readBox', value: function readBox(t, e) {
      var i=vd([null], this.BOX_PARSERS_, t, e, this); return de(i[1][0], i[1][1], i[1][3], i[1][4]);
    }}, {key: 'innerBoundaryIsParser', value: function innerBoundaryIsParser(t, e) {
      var i=vd(void 0, this.RING_PARSERS, t, e, this); if (i) {
        e[e.length-1].push(i);
      }
    }}, {key: 'outerBoundaryIsParser', value: function outerBoundaryIsParser(t, e) {
      var i=vd(void 0, this.RING_PARSERS, t, e, this); if (i) {
        e[e.length-1][0]=i;
      }
    }}, {key: 'GEOMETRY_NODE_FACTORY_', value: function GEOMETRY_NODE_FACTORY_(t, e, i) {
      var n=e[e.length-1]; var r=n.multiSurface; var s=n.surface; var o=n.multiCurve; return Array.isArray(t)?i='Envelope':'MultiPolygon'===(i=t.getType())&&!0===r?i='MultiSurface':'Polygon'===i&&!0===s?i='Surface':'MultiLineString'===i&&!0===o&&(i='MultiCurve'), id('http://www.opengis.net/gml', i);
    }}, {key: 'writeFeatureElement', value: function writeFeatureElement(t, e, i) {
      var n=e.getId(); n&&t.setAttribute('fid', n); var r=i[i.length-1]; var s=r.featureNS; var o=e.getGeometryName(); r.serializers||(r.serializers={}, r.serializers[s]={}); var a=[]; var l=[]; if (e.hasProperties()) {
        var _t347=e.getProperties(); for (var _e373 in _t347) {
          var _i289=_t347[_e373]; null!==_i289&&(a.push(_e373), l.push(_i289), _e373==o||'function'==typeof _i289.getSimplifiedGeometry?_e373 in r.serializers[s]||(r.serializers[s][_e373]=gd(this.writeGeometryElement, this)):_e373 in r.serializers[s]||(r.serializers[s][_e373]=gd(Cx)));
        }
      } var h=Object.assign({}, r); h.node=t, wd(h, r.serializers, pd(void 0, s), l, i, a);
    }}, {key: 'writeCurveOrLineString', value: function writeCurveOrLineString(t, e, i) {
      var n=i[i.length-1].srsName; if ('LineStringSegment'!==t.nodeName&&n&&t.setAttribute('srsName', n), 'LineString'===t.nodeName||'LineStringSegment'===t.nodeName) {
        var _n257=this.createCoordinatesNode_(t.namespaceURI); t.appendChild(_n257), this.writeCoordinates_(_n257, e, i);
      } else if ('Curve'===t.nodeName) {
        var _n258=id(t.namespaceURI, 'segments'); t.appendChild(_n258), this.writeCurveSegments_(_n258, e, i);
      }
    }}, {key: 'writeLineStringOrCurveMember', value: function writeLineStringOrCurveMember(t, e, i) {
      var n=this.GEOMETRY_NODE_FACTORY_(e, i); n&&(t.appendChild(n), this.writeCurveOrLineString(n, e, i));
    }}, {key: 'writeMultiCurveOrLineString', value: function writeMultiCurveOrLineString(t, e, i) {
      var n=i[i.length-1]; var r=n.hasZ; var s=n.srsName; var o=n.curve; s&&t.setAttribute('srsName', s); var a=e.getLineStrings(); wd({node: t, hasZ: r, srsName: s, curve: o}, this.LINESTRINGORCURVEMEMBER_SERIALIZERS, this.MULTIGEOMETRY_MEMBER_NODE_FACTORY_, a, i, void 0, this);
    }}, {key: 'writeGeometryElement', value: function writeGeometryElement(t, e, i) {
      var n=i[i.length-1]; var r=Object.assign({}, n); var s; r.node=t, s=Array.isArray(e)?m_(e, n):p_(e, !0, n), wd(r, this.GEOMETRY_SERIALIZERS, this.GEOMETRY_NODE_FACTORY_, [s], i, void 0, this);
    }}, {key: 'createCoordinatesNode_', value: function createCoordinatesNode_(t) {
      var e=id(t, 'coordinates'); return e.setAttribute('decimal', '.'), e.setAttribute('cs', ','), e.setAttribute('ts', ' '), e;
    }}, {key: 'writeCoordinates_', value: function writeCoordinates_(t, e, i) {
      var n=i[i.length-1]; var r=n.hasZ; var s=n.srsName; var o=e.getCoordinates(); var a=o.length; var l=new Array(a); for (var _t348=0; _t348<a; ++_t348) {
        var _e374=o[_t348]; l[_t348]=this.getCoords_(_e374, s, r);
      }Cx(t, l.join(' '));
    }}, {key: 'writeCurveSegments_', value: function writeCurveSegments_(t, e, i) {
      var n=id(t.namespaceURI, 'LineStringSegment'); t.appendChild(n), this.writeCurveOrLineString(n, e, i);
    }}, {key: 'writeSurfaceOrPolygon', value: function writeSurfaceOrPolygon(t, e, i) {
      var n=i[i.length-1]; var r=n.hasZ; var s=n.srsName; if ('PolygonPatch'!==t.nodeName&&s&&t.setAttribute('srsName', s), 'Polygon'===t.nodeName||'PolygonPatch'===t.nodeName) {
        var _n259=e.getLinearRings(); wd({node: t, hasZ: r, srsName: s}, this.RING_SERIALIZERS, this.RING_NODE_FACTORY_, _n259, i, void 0, this);
      } else if ('Surface'===t.nodeName) {
        var _n260=id(t.namespaceURI, 'patches'); t.appendChild(_n260), this.writeSurfacePatches_(_n260, e, i);
      }
    }}, {key: 'RING_NODE_FACTORY_', value: function RING_NODE_FACTORY_(t, e, i) {
      var n=e[e.length-1]; var r=n.node; var s=n.exteriorWritten; return void 0===s&&(n.exteriorWritten=!0), id(r.namespaceURI, void 0!==s?'innerBoundaryIs':'outerBoundaryIs');
    }}, {key: 'writeSurfacePatches_', value: function writeSurfacePatches_(t, e, i) {
      var n=id(t.namespaceURI, 'PolygonPatch'); t.appendChild(n), this.writeSurfaceOrPolygon(n, e, i);
    }}, {key: 'writeRing', value: function writeRing(t, e, i) {
      var n=id(t.namespaceURI, 'LinearRing'); t.appendChild(n), this.writeLinearRing(n, e, i);
    }}, {key: 'getCoords_', value: function getCoords_(t, e, i) {
      var n='enu'; e&&(n=an(e).getAxisOrientation()); var r='en'===n.substr(0, 2)?t[0]+','+t[1]:t[1]+','+t[0]; if (i) {
        r+=','+(t[2]||0);
      } return r;
    }}, {key: 'writePoint', value: function writePoint(t, e, i) {
      var n=i[i.length-1]; var r=n.hasZ; var s=n.srsName; s&&t.setAttribute('srsName', s); var o=this.createCoordinatesNode_(t.namespaceURI); t.appendChild(o); var a=e.getCoordinates(); Cx(o, this.getCoords_(a, s, r));
    }}, {key: 'writeMultiPoint', value: function writeMultiPoint(t, e, i) {
      var n=i[i.length-1]; var r=n.hasZ; var s=n.srsName; s&&t.setAttribute('srsName', s); var o=e.getPoints(); wd({node: t, hasZ: r, srsName: s}, this.POINTMEMBER_SERIALIZERS, pd('pointMember'), o, i, void 0, this);
    }}, {key: 'writePointMember', value: function writePointMember(t, e, i) {
      var n=id(t.namespaceURI, 'Point'); t.appendChild(n), this.writePoint(n, e, i);
    }}, {key: 'writeLinearRing', value: function writeLinearRing(t, e, i) {
      var n=i[i.length-1].srsName; n&&t.setAttribute('srsName', n); var r=this.createCoordinatesNode_(t.namespaceURI); t.appendChild(r), this.writeCoordinates_(r, e, i);
    }}, {key: 'writeMultiSurfaceOrPolygon', value: function writeMultiSurfaceOrPolygon(t, e, i) {
      var n=i[i.length-1]; var r=n.hasZ; var s=n.srsName; var o=n.surface; s&&t.setAttribute('srsName', s); var a=e.getPolygons(); wd({node: t, hasZ: r, srsName: s, surface: o}, this.SURFACEORPOLYGONMEMBER_SERIALIZERS, this.MULTIGEOMETRY_MEMBER_NODE_FACTORY_, a, i, void 0, this);
    }}, {key: 'writeSurfaceOrPolygonMember', value: function writeSurfaceOrPolygonMember(t, e, i) {
      var n=this.GEOMETRY_NODE_FACTORY_(e, i); n&&(t.appendChild(n), this.writeSurfaceOrPolygon(n, e, i));
    }}, {key: 'writeEnvelope', value: function writeEnvelope(t, e, i) {
      var n=i[i.length-1].srsName; n&&t.setAttribute('srsName', n); var r=[e[0]+' '+e[1], e[2]+' '+e[3]]; wd({node: t}, this.ENVELOPE_SERIALIZERS, md, r, i, ['lowerCorner', 'upperCorner'], this);
    }}, {key: 'MULTIGEOMETRY_MEMBER_NODE_FACTORY_', value: function MULTIGEOMETRY_MEMBER_NODE_FACTORY_(t, e, i) {
      var n=e[e.length-1].node; return id('http://www.opengis.net/gml', Rx[n.nodeName]);
    }}]); return bx;
  }(ux); bx.prototype.GEOMETRY_FLAT_COORDINATES_PARSERS={'http://www.opengis.net/gml': {coordinates: cd(bx.prototype.readFlatCoordinates)}}, bx.prototype.FLAT_LINEAR_RINGS_PARSERS={'http://www.opengis.net/gml': {innerBoundaryIs: bx.prototype.innerBoundaryIsParser, outerBoundaryIs: bx.prototype.outerBoundaryIsParser}}, bx.prototype.BOX_PARSERS_={'http://www.opengis.net/gml': {coordinates: hd(bx.prototype.readFlatCoordinates)}}, bx.prototype.GEOMETRY_PARSERS={'http://www.opengis.net/gml': {Point: cd(ux.prototype.readPoint), MultiPoint: cd(ux.prototype.readMultiPoint), LineString: cd(ux.prototype.readLineString), MultiLineString: cd(ux.prototype.readMultiLineString), LinearRing: cd(ux.prototype.readLinearRing), Polygon: cd(ux.prototype.readPolygon), MultiPolygon: cd(ux.prototype.readMultiPolygon), Box: cd(bx.prototype.readBox)}}, bx.prototype.GEOMETRY_SERIALIZERS={'http://www.opengis.net/gml': {Curve: gd(bx.prototype.writeCurveOrLineString), MultiCurve: gd(bx.prototype.writeMultiCurveOrLineString), Point: gd(bx.prototype.writePoint), MultiPoint: gd(bx.prototype.writeMultiPoint), LineString: gd(bx.prototype.writeCurveOrLineString), MultiLineString: gd(bx.prototype.writeMultiCurveOrLineString), LinearRing: gd(bx.prototype.writeLinearRing), Polygon: gd(bx.prototype.writeSurfaceOrPolygon), MultiPolygon: gd(bx.prototype.writeMultiSurfaceOrPolygon), Surface: gd(bx.prototype.writeSurfaceOrPolygon), MultiSurface: gd(bx.prototype.writeMultiSurfaceOrPolygon), Envelope: gd(bx.prototype.writeEnvelope)}}, bx.prototype.LINESTRINGORCURVEMEMBER_SERIALIZERS={'http://www.opengis.net/gml': {lineStringMember: gd(bx.prototype.writeLineStringOrCurveMember), curveMember: gd(bx.prototype.writeLineStringOrCurveMember)}}, bx.prototype.RING_SERIALIZERS={'http://www.opengis.net/gml': {outerBoundaryIs: gd(bx.prototype.writeRing), innerBoundaryIs: gd(bx.prototype.writeRing)}}, bx.prototype.POINTMEMBER_SERIALIZERS={'http://www.opengis.net/gml': {pointMember: gd(bx.prototype.writePointMember)}}, bx.prototype.SURFACEORPOLYGONMEMBER_SERIALIZERS={'http://www.opengis.net/gml': {surfaceMember: gd(bx.prototype.writeSurfaceOrPolygonMember), polygonMember: gd(bx.prototype.writeSurfaceOrPolygonMember)}}, bx.prototype.ENVELOPE_SERIALIZERS={'http://www.opengis.net/gml': {lowerCorner: gd(Cx), upperCorner: gd(Cx)}}; var Px=bx; var Ix={MultiLineString: 'lineStringMember', MultiCurve: 'curveMember', MultiPolygon: 'polygonMember', MultiSurface: 'surfaceMember'}; var Lx=/* #__PURE__*/function(_ux2) {
    _inherits(Lx, _ux2); var _super170=_createSuper(Lx); function Lx(t) {
      var _this199; _classCallCheck(this, Lx); _this199=_super170.call(this, t=t||{}), _this199.surface_=void 0!==t.surface&&t.surface, _this199.curve_=void 0!==t.curve&&t.curve, _this199.multiCurve_=void 0===t.multiCurve||t.multiCurve, _this199.multiSurface_=void 0===t.multiSurface||t.multiSurface, _this199.schemaLocation=t.schemaLocation?t.schemaLocation:'http://www.opengis.net/gml http://schemas.opengis.net/gml/3.1.1/profiles/gmlsfProfile/1.0.0/gmlsf.xsd', _this199.hasZ=void 0!==t.hasZ&&t.hasZ; return _this199;
    }_createClass(Lx, [{key: 'readMultiCurve', value: function readMultiCurve(t, e) {
      var i=vd([], this.MULTICURVE_PARSERS, t, e, this); if (i) {
        return new Xm(i);
      }
    }}, {key: 'readFlatCurveRing', value: function readFlatCurveRing(t, e) {
      var i=vd([], this.MULTICURVE_PARSERS, t, e, this); var n=[]; for (var _t349=0, _e375=i.length; _t349<_e375; ++_t349)u(n, i[_t349].getFlatCoordinates()); return n;
    }}, {key: 'readMultiSurface', value: function readMultiSurface(t, e) {
      var i=vd([], this.MULTISURFACE_PARSERS, t, e, this); if (i) return new Km(i);
    }}, {key: 'curveMemberParser', value: function curveMemberParser(t, e) {
      xd(this.CURVEMEMBER_PARSERS, t, e, this);
    }}, {key: 'surfaceMemberParser', value: function surfaceMemberParser(t, e) {
      xd(this.SURFACEMEMBER_PARSERS, t, e, this);
    }}, {key: 'readPatch', value: function readPatch(t, e) {
      return vd([null], this.PATCHES_PARSERS, t, e, this);
    }}, {key: 'readSegment', value: function readSegment(t, e) {
      return vd([], this.SEGMENTS_PARSERS, t, e, this);
    }}, {key: 'readPolygonPatch', value: function readPolygonPatch(t, e) {
      return vd([null], this.FLAT_LINEAR_RINGS_PARSERS, t, e, this);
    }}, {key: 'readLineStringSegment', value: function readLineStringSegment(t, e) {
      return vd([null], this.GEOMETRY_FLAT_COORDINATES_PARSERS, t, e, this);
    }}, {key: 'interiorParser', value: function interiorParser(t, e) {
      var i=vd(void 0, this.RING_PARSERS, t, e, this); if (i) {
        e[e.length-1].push(i);
      }
    }}, {key: 'exteriorParser', value: function exteriorParser(t, e) {
      var i=vd(void 0, this.RING_PARSERS, t, e, this); if (i) {
        e[e.length-1][0]=i;
      }
    }}, {key: 'readSurface', value: function readSurface(t, e) {
      var i=vd([null], this.SURFACE_PARSERS, t, e, this); if (i&&i[0]) {
        var _t350=i[0]; var _e376=[_t350.length]; var _n261; var _r217; for (_n261=1, _r217=i.length; _n261<_r217; ++_n261)u(_t350, i[_n261]), _e376.push(_t350.length); return new Ar(_t350, 'XYZ', _e376);
      }
    }}, {key: 'readCurve', value: function readCurve(t, e) {
      var i=vd([null], this.CURVE_PARSERS, t, e, this); if (i) {
        return new zm(i, 'XYZ');
      }
    }}, {key: 'readEnvelope', value: function readEnvelope(t, e) {
      var i=vd([null], this.ENVELOPE_PARSERS, t, e, this); return de(i[1][0], i[1][1], i[2][0], i[2][1]);
    }}, {key: 'readFlatPos', value: function readFlatPos(t, e) {
      var i=nd(t, !1); var n=/^\s*([+\-]?\d*\.?\d+(?:[eE][+\-]?\d+)?)\s*/; var r=[]; var s; for (;s=n.exec(i);)r.push(parseFloat(s[1])), i=i.substr(s[0].length); if (''!==i) return; var o=e[0].srsName; var a='enu'; if (o) {
        a=an(o).getAxisOrientation();
      } if ('neu'===a) {
        var _t351; var _e377; for (_t351=0, _e377=r.length; _t351<_e377; _t351+=3) {
          var _e378=r[_t351]; var _i290=r[_t351+1]; r[_t351]=_i290, r[_t351+1]=_e378;
        }
      } var l=r.length; return 2==l&&r.push(0), 0!==l?r:void 0;
    }}, {key: 'readFlatPosList', value: function readFlatPosList(t, e) {
      var i=nd(t, !1).replace(/^\s*|\s*$/g, ''); var n=e[0]; var r=n.srsName; var s=n.srsDimension; var o='enu'; if (r) {
        o=an(r).getAxisOrientation();
      } var a=i.split(/\s+/); var l; var h; var c; var u=2; t.getAttribute('srsDimension')?u=yx(t.getAttribute('srsDimension')):t.getAttribute('dimension')?u=yx(t.getAttribute('dimension')):t.parentNode.getAttribute('srsDimension')?u=yx(t.parentNode.getAttribute('srsDimension')):s&&(u=yx(s)); var d=[]; for (var _t352=0, _e379=a.length; _t352<_e379; _t352+=u)l=parseFloat(a[_t352]), h=parseFloat(a[_t352+1]), c=3===u?parseFloat(a[_t352+2]):0, 'en'===o.substr(0, 2)?d.push(l, h, c):d.push(h, l, c); return d;
    }}, {key: 'writePos_', value: function writePos_(t, e, i) {
      var n=i[i.length-1]; var r=n.hasZ; var s=r?'3':'2'; t.setAttribute('srsDimension', s); var o=n.srsName; var a='enu'; o&&(a=an(o).getAxisOrientation()); var l=e.getCoordinates(); var h; if (h='en'===a.substr(0, 2)?l[0]+' '+l[1]:l[1]+' '+l[0], r) {
        h+=' '+(l[2]||0);
      }Cx(t, h);
    }}, {key: 'getCoords_', value: function getCoords_(t, e, i) {
      var n='enu'; e&&(n=an(e).getAxisOrientation()); var r='en'===n.substr(0, 2)?t[0]+' '+t[1]:t[1]+' '+t[0]; if (i) {
        r+=' '+(t[2]||0);
      } return r;
    }}, {key: 'writePosList_', value: function writePosList_(t, e, i) {
      var n=i[i.length-1]; var r=n.hasZ; var s=r?'3':'2'; t.setAttribute('srsDimension', s); var o=n.srsName; var a=e.getCoordinates(); var l=a.length; var h=new Array(l); var c; for (var _t353=0; _t353<l; ++_t353)c=a[_t353], h[_t353]=this.getCoords_(c, o, r); Cx(t, h.join(' '));
    }}, {key: 'writePoint', value: function writePoint(t, e, i) {
      var n=i[i.length-1].srsName; n&&t.setAttribute('srsName', n); var r=id(t.namespaceURI, 'pos'); t.appendChild(r), this.writePos_(r, e, i);
    }}, {key: 'writeEnvelope', value: function writeEnvelope(t, e, i) {
      var n=i[i.length-1].srsName; n&&t.setAttribute('srsName', n); var r=[e[0]+' '+e[1], e[2]+' '+e[3]]; wd({node: t}, this.ENVELOPE_SERIALIZERS, md, r, i, ['lowerCorner', 'upperCorner'], this);
    }}, {key: 'writeLinearRing', value: function writeLinearRing(t, e, i) {
      var n=i[i.length-1].srsName; n&&t.setAttribute('srsName', n); var r=id(t.namespaceURI, 'posList'); t.appendChild(r), this.writePosList_(r, e, i);
    }}, {key: 'RING_NODE_FACTORY_', value: function RING_NODE_FACTORY_(t, e, i) {
      var n=e[e.length-1]; var r=n.node; var s=n.exteriorWritten; return void 0===s&&(n.exteriorWritten=!0), id(r.namespaceURI, void 0!==s?'interior':'exterior');
    }}, {key: 'writeSurfaceOrPolygon', value: function writeSurfaceOrPolygon(t, e, i) {
      var n=i[i.length-1]; var r=n.hasZ; var s=n.srsName; if ('PolygonPatch'!==t.nodeName&&s&&t.setAttribute('srsName', s), 'Polygon'===t.nodeName||'PolygonPatch'===t.nodeName) {
        var _n262=e.getLinearRings(); wd({node: t, hasZ: r, srsName: s}, this.RING_SERIALIZERS, this.RING_NODE_FACTORY_, _n262, i, void 0, this);
      } else if ('Surface'===t.nodeName) {
        var _n263=id(t.namespaceURI, 'patches'); t.appendChild(_n263), this.writeSurfacePatches_(_n263, e, i);
      }
    }}, {key: 'writeCurveOrLineString', value: function writeCurveOrLineString(t, e, i) {
      var n=i[i.length-1].srsName; if ('LineStringSegment'!==t.nodeName&&n&&t.setAttribute('srsName', n), 'LineString'===t.nodeName||'LineStringSegment'===t.nodeName) {
        var _n264=id(t.namespaceURI, 'posList'); t.appendChild(_n264), this.writePosList_(_n264, e, i);
      } else if ('Curve'===t.nodeName) {
        var _n265=id(t.namespaceURI, 'segments'); t.appendChild(_n265), this.writeCurveSegments_(_n265, e, i);
      }
    }}, {key: 'writeMultiSurfaceOrPolygon', value: function writeMultiSurfaceOrPolygon(t, e, i) {
      var n=i[i.length-1]; var r=n.hasZ; var s=n.srsName; var o=n.surface; s&&t.setAttribute('srsName', s); var a=e.getPolygons(); wd({node: t, hasZ: r, srsName: s, surface: o}, this.SURFACEORPOLYGONMEMBER_SERIALIZERS, this.MULTIGEOMETRY_MEMBER_NODE_FACTORY_, a, i, void 0, this);
    }}, {key: 'writeMultiPoint', value: function writeMultiPoint(t, e, i) {
      var n=i[i.length-1]; var r=n.srsName; var s=n.hasZ; r&&t.setAttribute('srsName', r); var o=e.getPoints(); wd({node: t, hasZ: s, srsName: r}, this.POINTMEMBER_SERIALIZERS, pd('pointMember'), o, i, void 0, this);
    }}, {key: 'writeMultiCurveOrLineString', value: function writeMultiCurveOrLineString(t, e, i) {
      var n=i[i.length-1]; var r=n.hasZ; var s=n.srsName; var o=n.curve; s&&t.setAttribute('srsName', s); var a=e.getLineStrings(); wd({node: t, hasZ: r, srsName: s, curve: o}, this.LINESTRINGORCURVEMEMBER_SERIALIZERS, this.MULTIGEOMETRY_MEMBER_NODE_FACTORY_, a, i, void 0, this);
    }}, {key: 'writeRing', value: function writeRing(t, e, i) {
      var n=id(t.namespaceURI, 'LinearRing'); t.appendChild(n), this.writeLinearRing(n, e, i);
    }}, {key: 'writeSurfaceOrPolygonMember', value: function writeSurfaceOrPolygonMember(t, e, i) {
      var n=this.GEOMETRY_NODE_FACTORY_(e, i); n&&(t.appendChild(n), this.writeSurfaceOrPolygon(n, e, i));
    }}, {key: 'writePointMember', value: function writePointMember(t, e, i) {
      var n=id(t.namespaceURI, 'Point'); t.appendChild(n), this.writePoint(n, e, i);
    }}, {key: 'writeLineStringOrCurveMember', value: function writeLineStringOrCurveMember(t, e, i) {
      var n=this.GEOMETRY_NODE_FACTORY_(e, i); n&&(t.appendChild(n), this.writeCurveOrLineString(n, e, i));
    }}, {key: 'writeSurfacePatches_', value: function writeSurfacePatches_(t, e, i) {
      var n=id(t.namespaceURI, 'PolygonPatch'); t.appendChild(n), this.writeSurfaceOrPolygon(n, e, i);
    }}, {key: 'writeCurveSegments_', value: function writeCurveSegments_(t, e, i) {
      var n=id(t.namespaceURI, 'LineStringSegment'); t.appendChild(n), this.writeCurveOrLineString(n, e, i);
    }}, {key: 'writeGeometryElement', value: function writeGeometryElement(t, e, i) {
      var n=i[i.length-1]; var r=Object.assign({}, n); var s; r.node=t, s=Array.isArray(e)?m_(e, n):p_(e, !0, n), wd(r, this.GEOMETRY_SERIALIZERS, this.GEOMETRY_NODE_FACTORY_, [s], i, void 0, this);
    }}, {key: 'writeFeatureElement', value: function writeFeatureElement(t, e, i) {
      var n=e.getId(); n&&t.setAttribute('fid', n); var r=i[i.length-1]; var s=r.featureNS; var o=e.getGeometryName(); r.serializers||(r.serializers={}, r.serializers[s]={}); var a=[]; var l=[]; if (e.hasProperties()) {
        var _t354=e.getProperties(); for (var _e380 in _t354) {
          var _i291=_t354[_e380]; null!==_i291&&(a.push(_e380), l.push(_i291), _e380==o||'function'==typeof _i291.getSimplifiedGeometry?_e380 in r.serializers[s]||(r.serializers[s][_e380]=gd(this.writeGeometryElement, this)):_e380 in r.serializers[s]||(r.serializers[s][_e380]=gd(Cx)));
        }
      } var h=Object.assign({}, r); h.node=t, wd(h, r.serializers, pd(void 0, s), l, i, a);
    }}, {key: 'writeFeatureMembers_', value: function writeFeatureMembers_(t, e, i) {
      var n=i[i.length-1]; var r=n.featureType; var s=n.featureNS; var o={}; o[s]={}, o[s][r]=gd(this.writeFeatureElement, this); var a=Object.assign({}, n); a.node=t, wd(a, o, pd(r, s), e, i);
    }}, {key: 'MULTIGEOMETRY_MEMBER_NODE_FACTORY_', value: function MULTIGEOMETRY_MEMBER_NODE_FACTORY_(t, e, i) {
      var n=e[e.length-1].node; return id(this.namespace, Ix[n.nodeName]);
    }}, {key: 'GEOMETRY_NODE_FACTORY_', value: function GEOMETRY_NODE_FACTORY_(t, e, i) {
      var n=e[e.length-1]; var r=n.multiSurface; var s=n.surface; var o=n.curve; var a=n.multiCurve; return Array.isArray(t)?i='Envelope':'MultiPolygon'===(i=t.getType())&&!0===r?i='MultiSurface':'Polygon'===i&&!0===s?i='Surface':'LineString'===i&&!0===o?i='Curve':'MultiLineString'===i&&!0===a&&(i='MultiCurve'), id(this.namespace, i);
    }}, {key: 'writeGeometryNode', value: function writeGeometryNode(t, e) {
      e=this.adaptOptions(e); var i=id(this.namespace, 'geom'); var n={node: i, hasZ: this.hasZ, srsName: this.srsName, curve: this.curve_, surface: this.surface_, multiSurface: this.multiSurface_, multiCurve: this.multiCurve_}; return e&&Object.assign(n, e), this.writeGeometryElement(i, t, [n]), i;
    }}, {key: 'writeFeaturesNode', value: function writeFeaturesNode(t, e) {
      e=this.adaptOptions(e); var i=id(this.namespace, 'featureMembers'); i.setAttributeNS(ed, 'xsi:schemaLocation', this.schemaLocation); var n={srsName: this.srsName, hasZ: this.hasZ, curve: this.curve_, surface: this.surface_, multiSurface: this.multiSurface_, multiCurve: this.multiCurve_, featureNS: this.featureNS, featureType: this.featureType}; return e&&Object.assign(n, e), this.writeFeatureMembers_(i, t, [n]), i;
    }}]); return Lx;
  }(ux); Lx.prototype.GEOMETRY_FLAT_COORDINATES_PARSERS={'http://www.opengis.net/gml': {pos: cd(Lx.prototype.readFlatPos), posList: cd(Lx.prototype.readFlatPosList), coordinates: cd(Px.prototype.readFlatCoordinates)}}, Lx.prototype.FLAT_LINEAR_RINGS_PARSERS={'http://www.opengis.net/gml': {interior: Lx.prototype.interiorParser, exterior: Lx.prototype.exteriorParser}}, Lx.prototype.GEOMETRY_PARSERS={'http://www.opengis.net/gml': {Point: cd(ux.prototype.readPoint), MultiPoint: cd(ux.prototype.readMultiPoint), LineString: cd(ux.prototype.readLineString), MultiLineString: cd(ux.prototype.readMultiLineString), LinearRing: cd(ux.prototype.readLinearRing), Polygon: cd(ux.prototype.readPolygon), MultiPolygon: cd(ux.prototype.readMultiPolygon), Surface: cd(Lx.prototype.readSurface), MultiSurface: cd(Lx.prototype.readMultiSurface), Curve: cd(Lx.prototype.readCurve), MultiCurve: cd(Lx.prototype.readMultiCurve), Envelope: cd(Lx.prototype.readEnvelope)}}, Lx.prototype.MULTICURVE_PARSERS={'http://www.opengis.net/gml': {curveMember: hd(Lx.prototype.curveMemberParser), curveMembers: hd(Lx.prototype.curveMemberParser)}}, Lx.prototype.MULTISURFACE_PARSERS={'http://www.opengis.net/gml': {surfaceMember: hd(Lx.prototype.surfaceMemberParser), surfaceMembers: hd(Lx.prototype.surfaceMemberParser)}}, Lx.prototype.CURVEMEMBER_PARSERS={'http://www.opengis.net/gml': {LineString: hd(ux.prototype.readLineString), Curve: hd(Lx.prototype.readCurve)}}, Lx.prototype.SURFACEMEMBER_PARSERS={'http://www.opengis.net/gml': {Polygon: hd(ux.prototype.readPolygon), Surface: hd(Lx.prototype.readSurface)}}, Lx.prototype.SURFACE_PARSERS={'http://www.opengis.net/gml': {patches: cd(Lx.prototype.readPatch)}}, Lx.prototype.CURVE_PARSERS={'http://www.opengis.net/gml': {segments: cd(Lx.prototype.readSegment)}}, Lx.prototype.ENVELOPE_PARSERS={'http://www.opengis.net/gml': {lowerCorner: hd(Lx.prototype.readFlatPosList), upperCorner: hd(Lx.prototype.readFlatPosList)}}, Lx.prototype.PATCHES_PARSERS={'http://www.opengis.net/gml': {PolygonPatch: cd(Lx.prototype.readPolygonPatch)}}, Lx.prototype.SEGMENTS_PARSERS={'http://www.opengis.net/gml': {LineStringSegment: ld(Lx.prototype.readLineStringSegment)}}, ux.prototype.RING_PARSERS={'http://www.opengis.net/gml': {LinearRing: cd(ux.prototype.readFlatLinearRing), Ring: cd(Lx.prototype.readFlatCurveRing)}}, Lx.prototype.writeFeatures, Lx.prototype.RING_SERIALIZERS={'http://www.opengis.net/gml': {exterior: gd(Lx.prototype.writeRing), interior: gd(Lx.prototype.writeRing)}}, Lx.prototype.ENVELOPE_SERIALIZERS={'http://www.opengis.net/gml': {lowerCorner: gd(Cx), upperCorner: gd(Cx)}}, Lx.prototype.SURFACEORPOLYGONMEMBER_SERIALIZERS={'http://www.opengis.net/gml': {surfaceMember: gd(Lx.prototype.writeSurfaceOrPolygonMember), polygonMember: gd(Lx.prototype.writeSurfaceOrPolygonMember)}}, Lx.prototype.POINTMEMBER_SERIALIZERS={'http://www.opengis.net/gml': {pointMember: gd(Lx.prototype.writePointMember)}}, Lx.prototype.LINESTRINGORCURVEMEMBER_SERIALIZERS={'http://www.opengis.net/gml': {lineStringMember: gd(Lx.prototype.writeLineStringOrCurveMember), curveMember: gd(Lx.prototype.writeLineStringOrCurveMember)}}, Lx.prototype.GEOMETRY_SERIALIZERS={'http://www.opengis.net/gml': {Curve: gd(Lx.prototype.writeCurveOrLineString), MultiCurve: gd(Lx.prototype.writeMultiCurveOrLineString), Point: gd(Lx.prototype.writePoint), MultiPoint: gd(Lx.prototype.writeMultiPoint), LineString: gd(Lx.prototype.writeCurveOrLineString), MultiLineString: gd(Lx.prototype.writeMultiCurveOrLineString), LinearRing: gd(Lx.prototype.writeLinearRing), Polygon: gd(Lx.prototype.writeSurfaceOrPolygon), MultiPolygon: gd(Lx.prototype.writeMultiSurfaceOrPolygon), Surface: gd(Lx.prototype.writeSurfaceOrPolygon), MultiSurface: gd(Lx.prototype.writeMultiSurfaceOrPolygon), Envelope: gd(Lx.prototype.writeEnvelope)}}; var Fx=Lx; var Mx=Fx; Mx.prototype.writeFeatures, Mx.prototype.writeFeaturesNode; var Ax=Mx; var Ox=/* #__PURE__*/function(_Fx) {
    _inherits(Ox, _Fx); var _super171=_createSuper(Ox); function Ox(t) {
      var _this200; _classCallCheck(this, Ox); _this200=_super171.call(this, t=t||{}), _this200.schemaLocation=t.schemaLocation?t.schemaLocation:_this200.namespace+' http://schemas.opengis.net/gml/3.2.1/gml.xsd'; return _this200;
    } return _createClass(Ox);
  }(Fx); Ox.prototype.namespace='http://www.opengis.net/gml/3.2', Ox.prototype.GEOMETRY_FLAT_COORDINATES_PARSERS={'http://www.opengis.net/gml/3.2': {pos: cd(Fx.prototype.readFlatPos), posList: cd(Fx.prototype.readFlatPosList), coordinates: cd(Px.prototype.readFlatCoordinates)}}, Ox.prototype.FLAT_LINEAR_RINGS_PARSERS={'http://www.opengis.net/gml/3.2': {interior: Fx.prototype.interiorParser, exterior: Fx.prototype.exteriorParser}}, Ox.prototype.GEOMETRY_PARSERS={'http://www.opengis.net/gml/3.2': {Point: cd(ux.prototype.readPoint), MultiPoint: cd(ux.prototype.readMultiPoint), LineString: cd(ux.prototype.readLineString), MultiLineString: cd(ux.prototype.readMultiLineString), LinearRing: cd(ux.prototype.readLinearRing), Polygon: cd(ux.prototype.readPolygon), MultiPolygon: cd(ux.prototype.readMultiPolygon), Surface: cd(Ox.prototype.readSurface), MultiSurface: cd(Fx.prototype.readMultiSurface), Curve: cd(Ox.prototype.readCurve), MultiCurve: cd(Fx.prototype.readMultiCurve), Envelope: cd(Ox.prototype.readEnvelope)}}, Ox.prototype.MULTICURVE_PARSERS={'http://www.opengis.net/gml/3.2': {curveMember: hd(Fx.prototype.curveMemberParser), curveMembers: hd(Fx.prototype.curveMemberParser)}}, Ox.prototype.MULTISURFACE_PARSERS={'http://www.opengis.net/gml/3.2': {surfaceMember: hd(Fx.prototype.surfaceMemberParser), surfaceMembers: hd(Fx.prototype.surfaceMemberParser)}}, Ox.prototype.CURVEMEMBER_PARSERS={'http://www.opengis.net/gml/3.2': {LineString: hd(ux.prototype.readLineString), Curve: hd(Fx.prototype.readCurve)}}, Ox.prototype.SURFACEMEMBER_PARSERS={'http://www.opengis.net/gml/3.2': {Polygon: hd(ux.prototype.readPolygon), Surface: hd(Fx.prototype.readSurface)}}, Ox.prototype.SURFACE_PARSERS={'http://www.opengis.net/gml/3.2': {patches: cd(Fx.prototype.readPatch)}}, Ox.prototype.CURVE_PARSERS={'http://www.opengis.net/gml/3.2': {segments: cd(Fx.prototype.readSegment)}}, Ox.prototype.ENVELOPE_PARSERS={'http://www.opengis.net/gml/3.2': {lowerCorner: hd(Fx.prototype.readFlatPosList), upperCorner: hd(Fx.prototype.readFlatPosList)}}, Ox.prototype.PATCHES_PARSERS={'http://www.opengis.net/gml/3.2': {PolygonPatch: cd(Fx.prototype.readPolygonPatch)}}, Ox.prototype.SEGMENTS_PARSERS={'http://www.opengis.net/gml/3.2': {LineStringSegment: ld(Fx.prototype.readLineStringSegment)}}, Ox.prototype.MULTIPOINT_PARSERS={'http://www.opengis.net/gml/3.2': {pointMember: hd(ux.prototype.pointMemberParser), pointMembers: hd(ux.prototype.pointMemberParser)}}, Ox.prototype.MULTILINESTRING_PARSERS={'http://www.opengis.net/gml/3.2': {lineStringMember: hd(ux.prototype.lineStringMemberParser), lineStringMembers: hd(ux.prototype.lineStringMemberParser)}}, Ox.prototype.MULTIPOLYGON_PARSERS={'http://www.opengis.net/gml/3.2': {polygonMember: hd(ux.prototype.polygonMemberParser), polygonMembers: hd(ux.prototype.polygonMemberParser)}}, Ox.prototype.POINTMEMBER_PARSERS={'http://www.opengis.net/gml/3.2': {Point: hd(ux.prototype.readFlatCoordinatesFromNode)}}, Ox.prototype.LINESTRINGMEMBER_PARSERS={'http://www.opengis.net/gml/3.2': {LineString: hd(ux.prototype.readLineString)}}, Ox.prototype.POLYGONMEMBER_PARSERS={'http://www.opengis.net/gml/3.2': {Polygon: hd(ux.prototype.readPolygon)}}, Ox.prototype.RING_PARSERS={'http://www.opengis.net/gml/3.2': {LinearRing: cd(ux.prototype.readFlatLinearRing), Ring: cd(Ox.prototype.readFlatCurveRing)}}, Ox.prototype.RING_SERIALIZERS={'http://www.opengis.net/gml/3.2': {exterior: gd(Fx.prototype.writeRing), interior: gd(Fx.prototype.writeRing)}}, Ox.prototype.ENVELOPE_SERIALIZERS={'http://www.opengis.net/gml/3.2': {lowerCorner: gd(Cx), upperCorner: gd(Cx)}}, Ox.prototype.SURFACEORPOLYGONMEMBER_SERIALIZERS={'http://www.opengis.net/gml/3.2': {surfaceMember: gd(Fx.prototype.writeSurfaceOrPolygonMember), polygonMember: gd(Fx.prototype.writeSurfaceOrPolygonMember)}}, Ox.prototype.POINTMEMBER_SERIALIZERS={'http://www.opengis.net/gml/3.2': {pointMember: gd(Fx.prototype.writePointMember)}}, Ox.prototype.LINESTRINGORCURVEMEMBER_SERIALIZERS={'http://www.opengis.net/gml/3.2': {lineStringMember: gd(Fx.prototype.writeLineStringOrCurveMember), curveMember: gd(Fx.prototype.writeLineStringOrCurveMember)}}, Ox.prototype.GEOMETRY_SERIALIZERS={'http://www.opengis.net/gml/3.2': {Curve: gd(Fx.prototype.writeCurveOrLineString), MultiCurve: gd(Fx.prototype.writeMultiCurveOrLineString), Point: gd(Ox.prototype.writePoint), MultiPoint: gd(Fx.prototype.writeMultiPoint), LineString: gd(Fx.prototype.writeCurveOrLineString), MultiLineString: gd(Fx.prototype.writeMultiCurveOrLineString), LinearRing: gd(Fx.prototype.writeLinearRing), Polygon: gd(Fx.prototype.writeSurfaceOrPolygon), MultiPolygon: gd(Fx.prototype.writeMultiSurfaceOrPolygon), Surface: gd(Fx.prototype.writeSurfaceOrPolygon), MultiSurface: gd(Fx.prototype.writeMultiSurfaceOrPolygon), Envelope: gd(Fx.prototype.writeEnvelope)}}; var Nx=Ox; var Dx=[null, 'http://www.topografix.com/GPX/1/0', 'http://www.topografix.com/GPX/1/1']; var Gx={rte: cv, trk: uv, wpt: dv}; var kx=yd(Dx, {rte: hd(cv), trk: hd(uv), wpt: hd(dv)}); var jx=yd(Dx, {text: dd(xx, 'linkText'), type: dd(xx, 'linkType')}); var Bx=yd(Dx, {rte: gd(function(t, e, i) {
    var n=i[0]; var r=e.getProperties(); var s={node: t}; s.properties=r; var o=e.getGeometry(); if ('LineString'==o.getType()) {
      var _t355=p_(o, !0, n); s.geometryLayout=_t355.getLayout(), r.rtept=_t355.getCoordinates();
    } var a=i[i.length-1].node; var l=qx[a.namespaceURI]; var h=_d(r, l); wd(s, Hx, md, h, i, l);
  }), trk: gd(function(t, e, i) {
    var n=i[0]; var r=e.getProperties(); var s={node: t}; s.properties=r; var o=e.getGeometry(); if ('MultiLineString'==o.getType()) {
      var _t356=p_(o, !0, n); r.trkseg=_t356.getLineStrings();
    } var a=i[i.length-1].node; var l=Jx[a.namespaceURI]; var h=_d(r, l); wd(s, Qx, md, h, i, l);
  }), wpt: gd(function(t, e, i) {
    var n=i[0]; var r=i[i.length-1]; r.properties=e.getProperties(); var s=e.getGeometry(); if ('Point'==s.getType()) {
      var _e381=p_(s, !0, n); r.geometryLayout=_e381.getLayout(), fv(t, _e381.getCoordinates(), i);
    }
  })}); var zx=yd(Dx, {name: dd(xx), cmt: dd(xx), desc: dd(xx), src: dd(xx), link: lv, number: dd(_x), extensions: hv, type: dd(xx), rtept: function rtept(t, e) {
    var i=vd({}, Ux, t, e); if (i) {
      var _n266=e[e.length-1]; var _r218=_n266.flatCoordinates; var _s164=_n266.layoutOptions; ov(_r218, _s164, t, i);
    }
  }}); var Ux=yd(Dx, {ele: dd(px), time: dd(fx)}); var Xx=yd(Dx, {name: dd(xx), cmt: dd(xx), desc: dd(xx), src: dd(xx), link: lv, number: dd(_x), type: dd(xx), extensions: hv, trkseg: function trkseg(t, e) {
    var i=e[e.length-1]; xd(Vx, t, e); var n=i.flatCoordinates; i.ends.push(n.length);
  }}); var Vx=yd(Dx, {trkpt: function trkpt(t, e) {
    var i=vd({}, Wx, t, e); if (i) {
      var _n267=e[e.length-1]; var _r219=_n267.flatCoordinates; var _s165=_n267.layoutOptions; ov(_r219, _s165, t, i);
    }
  }}); var Wx=yd(Dx, {ele: dd(px), time: dd(fx)}); var Zx=yd(Dx, {ele: dd(px), time: dd(fx), magvar: dd(px), geoidheight: dd(px), name: dd(xx), cmt: dd(xx), desc: dd(xx), src: dd(xx), link: lv, sym: dd(xx), type: dd(xx), fix: dd(xx), sat: dd(_x), hdop: dd(px), vdop: dd(px), pdop: dd(px), ageofdgpsdata: dd(px), dgpsid: dd(_x), extensions: hv}); var Yx=['text', 'type']; var Kx=yd(Dx, {text: gd(Cx), type: gd(Cx)}); var qx=yd(Dx, ['name', 'cmt', 'desc', 'src', 'link', 'number', 'type', 'rtept']); var Hx=yd(Dx, {name: gd(Cx), cmt: gd(Cx), desc: gd(Cx), src: gd(Cx), link: gd(gv), number: gd(Ex), type: gd(Cx), rtept: fd(gd(fv))}); var $x=yd(Dx, ['ele', 'time']); var Jx=yd(Dx, ['name', 'cmt', 'desc', 'src', 'link', 'number', 'type', 'trkseg']); var Qx=yd(Dx, {name: gd(Cx), cmt: gd(Cx), desc: gd(Cx), src: gd(Cx), link: gd(gv), number: gd(Ex), type: gd(Cx), trkseg: fd(gd(function(t, e, i) {
    var n={node: t}; n.geometryLayout=e.getLayout(), n.properties={}, wd(n, ev, tv, e.getCoordinates(), i);
  }))}); var tv=pd('trkpt'); var ev=yd(Dx, {trkpt: gd(fv)}); var iv=yd(Dx, ['ele', 'time', 'magvar', 'geoidheight', 'name', 'cmt', 'desc', 'src', 'link', 'sym', 'type', 'fix', 'sat', 'hdop', 'vdop', 'pdop', 'ageofdgpsdata', 'dgpsid']); var nv=yd(Dx, {ele: gd(Tx), time: gd(wx), magvar: gd(Tx), geoidheight: gd(Tx), name: gd(Cx), cmt: gd(Cx), desc: gd(Cx), src: gd(Cx), link: gd(gv), sym: gd(Cx), type: gd(Cx), fix: gd(Cx), sat: gd(Ex), hdop: gd(Tx), vdop: gd(Tx), pdop: gd(Tx), ageofdgpsdata: gd(Tx), dgpsid: gd(Ex)}); var rv={Point: 'wpt', LineString: 'rte', MultiLineString: 'trk'}; function sv(t, e, i) {
    var n=t.getGeometry(); if (n) {
      var _t357=rv[n.getType()]; if (_t357) {
        return id(e[e.length-1].node.namespaceURI, _t357);
      }
    }
  } function ov(t, e, i, n) {
    return t.push(parseFloat(i.getAttribute('lon')), parseFloat(i.getAttribute('lat'))), 'ele'in n?(t.push(n.ele), delete n.ele, e.hasZ=!0):t.push(0), 'time'in n?(t.push(n.time), delete n.time, e.hasM=!0):t.push(0), t;
  } function av(t, e, i) {
    var n='XY'; var r=2; if (t.hasZ&&t.hasM?(n='XYZM', r=4):t.hasZ?(n='XYZ', r=3):t.hasM&&(n='XYM', r=3), 4!==r) {
      for (var _i292=0, _n268=e.length/4; _i292<_n268; _i292++)e[_i292*r]=e[4*_i292], e[_i292*r+1]=e[4*_i292+1], t.hasZ&&(e[_i292*r+2]=e[4*_i292+2]), t.hasM&&(e[_i292*r+2]=e[4*_i292+3]); if (e.length=e.length/4*r, i) for (var _t358=0, _e382=i.length; _t358<_e382; _t358++)i[_t358]=i[_t358]/4*r;
    } return n;
  } function lv(t, e) {
    var i=e[e.length-1]; var n=t.getAttribute('href'); null!==n&&(i.link=n), xd(jx, t, e);
  } function hv(t, e) {
    e[e.length-1].extensionsNode_=t;
  } function cv(t, e) {
    var i=e[0]; var n=vd({flatCoordinates: [], layoutOptions: {}}, zx, t, e); if (!n) return; var r=n.flatCoordinates; delete n.flatCoordinates; var s=n.layoutOptions; delete n.layoutOptions; var o=av(s, r); var a=new zm(r, o); p_(a, !1, i); var l=new Ot(a); return l.setProperties(n, !0), l;
  } function uv(t, e) {
    var i=e[0]; var n=vd({flatCoordinates: [], ends: [], layoutOptions: {}}, Xx, t, e); if (!n) return; var r=n.flatCoordinates; delete n.flatCoordinates; var s=n.ends; delete n.ends; var o=n.layoutOptions; delete n.layoutOptions; var a=av(o, r, s); var l=new Xm(r, a, s); p_(l, !1, i); var h=new Ot(l); return h.setProperties(n, !0), h;
  } function dv(t, e) {
    var i=e[0]; var n=vd({}, Zx, t, e); if (!n) return; var r={}; var s=ov([], r, t, n); var o=av(r, s); var a=new dr(s, o); p_(a, !1, i); var l=new Ot(a); return l.setProperties(n, !0), l;
  } function gv(t, e, i) {
    t.setAttribute('href', e); var n=i[i.length-1].properties; var r=[n.linkText, n.linkType]; wd({node: t}, Kx, md, r, i, Yx);
  } function fv(t, e, i) {
    var n=i[i.length-1]; var r=n.node.namespaceURI; var s=n.properties; t.setAttributeNS(null, 'lat', String(e[1])), t.setAttributeNS(null, 'lon', String(e[0])); switch (n.geometryLayout) {
      case 'XYZM': 0!==e[3]&&(s.time=e[3]); case 'XYZ': 0!==e[2]&&(s.ele=e[2]); break; case 'XYM': 0!==e[2]&&(s.time=e[2]);
    } var o='rtept'==t.nodeName?$x[r]:iv[r]; var a=_d(s, o); wd({node: t, properties: s}, nv, md, a, i, o);
  } var pv=/* #__PURE__*/function(_ax2) {
    _inherits(pv, _ax2); var _super172=_createSuper(pv); function pv(t) {
      var _this201; _classCallCheck(this, pv); _this201=_super172.call(this), t=t||{}, _this201.dataProjection=an('EPSG:4326'), _this201.readExtensions_=t.readExtensions; return _this201;
    }_createClass(pv, [{key: 'handleReadExtensions_', value: function handleReadExtensions_(t) {
      t||(t=[]); for (var _e383=0, _i293=t.length; _e383<_i293; ++_e383) {
        var _i294=t[_e383]; if (this.readExtensions_) {
          var _t359=_i294.get('extensionsNode_')||null; this.readExtensions_(_i294, _t359);
        }_i294.set('extensionsNode_', void 0);
      }
    }}, {key: 'readFeatureFromNode', value: function readFeatureFromNode(t, e) {
      if (!Dx.includes(t.namespaceURI)) return null; var i=Gx[t.localName]; if (!i) return null; var n=i(t, [this.getReadOptions(t, e)]); return n?(this.handleReadExtensions_([n]), n):null;
    }}, {key: 'readFeaturesFromNode', value: function readFeaturesFromNode(t, e) {
      if (!Dx.includes(t.namespaceURI)) return []; if ('gpx'==t.localName) {
        var _i295=vd([], kx, t, [this.getReadOptions(t, e)]); return _i295?(this.handleReadExtensions_(_i295), _i295):[];
      } return [];
    }}, {key: 'writeFeaturesNode', value: function writeFeaturesNode(t, e) {
      e=this.adaptOptions(e); var i=id('http://www.topografix.com/GPX/1/1', 'gpx'); return i.setAttributeNS('http://www.w3.org/2000/xmlns/', 'xmlns:xsi', ed), i.setAttributeNS(ed, 'xsi:schemaLocation', 'http://www.topografix.com/GPX/1/1 http://www.topografix.com/GPX/1/1/gpx.xsd'), i.setAttribute('version', '1.1'), i.setAttribute('creator', 'OpenLayers'), wd({node: i}, Bx, sv, t, [e]), i;
    }}]); return pv;
  }(ax); function mv(t, e) {
    if (!t) return null; var i; switch (t.type) {
      case 'Point': i=function(t) {
        return new dr(t.coordinates);
      }(t); break; case 'LineString': i=function(t) {
        return new zm(t.coordinates);
      }(t); break; case 'Polygon': i=function(t) {
        return new Ar(t.coordinates);
      }(t); break; case 'MultiPoint': i=function(t) {
        return new Wm(t.coordinates);
      }(t); break; case 'MultiLineString': i=function(t) {
        return new Xm(t.coordinates);
      }(t); break; case 'MultiPolygon': i=function(t) {
        return new Km(t.coordinates);
      }(t); break; case 'GeometryCollection': i=function(t, e) {
        var i=t.geometries.map(function(t) {
          return mv(t, e);
        }); return new Dm(i);
      }(t); break; default: throw new Error('Unsupported GeoJSON type: '+t.type);
    } return p_(i, !1, e);
  } function _v(t, e) {
    var i=(t=p_(t, !0, e)).getType(); var n; switch (i) {
      case 'Point': n=function(t, e) {
        return {type: 'Point', coordinates: t.getCoordinates()};
      }(t); break; case 'LineString': n=function(t, e) {
        return {type: 'LineString', coordinates: t.getCoordinates()};
      }(t); break; case 'Polygon': n=function(t, e) {
        var i; e&&(i=e.rightHanded); return {type: 'Polygon', coordinates: t.getCoordinates(i)};
      }(t, e); break; case 'MultiPoint': n=function(t, e) {
        return {type: 'MultiPoint', coordinates: t.getCoordinates()};
      }(t); break; case 'MultiLineString': n=function(t, e) {
        return {type: 'MultiLineString', coordinates: t.getCoordinates()};
      }(t); break; case 'MultiPolygon': n=function(t, e) {
        var i; e&&(i=e.rightHanded); return {type: 'MultiPolygon', coordinates: t.getCoordinates(i)};
      }(t, e); break; case 'GeometryCollection': n=function(t, e) {
        delete(e=Object.assign({}, e)).featureProjection; return {type: 'GeometryCollection', geometries: t.getGeometriesArray().map(function(t) {
          return _v(t, e);
        })};
      }(t, e); break; case 'Circle': n={type: 'GeometryCollection', geometries: []}; break; default: throw new Error('Unsupported geometry type: '+i);
    } return n;
  } var yv=/* #__PURE__*/function(_Qy2) {
    _inherits(yv, _Qy2); var _super173=_createSuper(yv); function yv(t) {
      var _this202; _classCallCheck(this, yv); t=t||{}, _this202=_super173.call(this), _this202.dataProjection=an(t.dataProjection?t.dataProjection:'EPSG:4326'), t.featureProjection&&(_this202.defaultFeatureProjection=an(t.featureProjection)), _this202.geometryName_=t.geometryName, _this202.extractGeometryName_=t.extractGeometryName, _this202.supportedMediaTypes=['application/geo+json', 'application/vnd.geo+json']; return _this202;
    }_createClass(yv, [{key: 'readFeatureFromObject', value: function readFeatureFromObject(t, e) {
      var i=null; i='Feature'===t.type?t:{type: 'Feature', geometry: t, properties: null}; var n=mv(i.geometry, e); var r=new Ot(); return this.geometryName_?r.setGeometryName(this.geometryName_):this.extractGeometryName_&&'geometry_name'in i!==void 0&&r.setGeometryName(i.geometry_name), r.setGeometry(n), 'id'in i&&r.setId(i.id), i.properties&&r.setProperties(i.properties, !0), r;
    }}, {key: 'readFeaturesFromObject', value: function readFeaturesFromObject(t, e) {
      var i=null; if ('FeatureCollection'===t.type) {
        i=[]; var _n269=t.features; for (var _t360=0, _r220=_n269.length; _t360<_r220; ++_t360)i.push(this.readFeatureFromObject(_n269[_t360], e));
      } else i=[this.readFeatureFromObject(t, e)]; return i;
    }}, {key: 'readGeometryFromObject', value: function readGeometryFromObject(t, e) {
      return mv(t, e);
    }}, {key: 'readProjectionFromObject', value: function readProjectionFromObject(t) {
      var e=t.crs; var i; return e?'name'==e.type?i=an(e.properties.name):'EPSG'===e.type?i=an('EPSG:'+e.properties.code):Ft(!1, 36):i=this.dataProjection, i;
    }}, {key: 'writeFeatureObject', value: function writeFeatureObject(t, e) {
      e=this.adaptOptions(e); var i={type: 'Feature', geometry: null, properties: null}; var n=t.getId(); if (void 0!==n&&(i.id=n), !t.hasProperties()) return i; var r=t.getProperties(); var s=t.getGeometry(); return s&&(i.geometry=_v(s, e), delete r[t.getGeometryName()]), v(r)||(i.properties=r), i;
    }}, {key: 'writeFeaturesObject', value: function writeFeaturesObject(t, e) {
      e=this.adaptOptions(e); var i=[]; for (var _n270=0, _r221=t.length; _n270<_r221; ++_n270)i.push(this.writeFeatureObject(t[_n270], e)); return {type: 'FeatureCollection', features: i};
    }}, {key: 'writeGeometryObject', value: function writeGeometryObject(t, e) {
      return _v(t, this.adaptOptions(e));
    }}]); return yv;
  }(Qy); function xv(t) {
    return 'string'==typeof t?t:'';
  } var vv=/* #__PURE__*/function(_f_4) {
    _inherits(vv, _f_4); var _super174=_createSuper(vv); function vv() {
      _classCallCheck(this, vv); return _super174.call(this);
    }_createClass(vv, [{key: 'getType', value: function getType() {
      return 'text';
    }}, {key: 'readFeature', value: function readFeature(t, e) {
      return this.readFeatureFromText(xv(t), this.adaptOptions(e));
    }}, {key: 'readFeatureFromText', value: function readFeatureFromText(t, e) {
      return z();
    }}, {key: 'readFeatures', value: function readFeatures(t, e) {
      return this.readFeaturesFromText(xv(t), this.adaptOptions(e));
    }}, {key: 'readFeaturesFromText', value: function readFeaturesFromText(t, e) {
      return z();
    }}, {key: 'readGeometry', value: function readGeometry(t, e) {
      return this.readGeometryFromText(xv(t), this.adaptOptions(e));
    }}, {key: 'readGeometryFromText', value: function readGeometryFromText(t, e) {
      return z();
    }}, {key: 'readProjection', value: function readProjection(t) {
      return this.readProjectionFromText(xv(t));
    }}, {key: 'readProjectionFromText', value: function readProjectionFromText(t) {
      return this.dataProjection;
    }}, {key: 'writeFeature', value: function writeFeature(t, e) {
      return this.writeFeatureText(t, this.adaptOptions(e));
    }}, {key: 'writeFeatureText', value: function writeFeatureText(t, e) {
      return z();
    }}, {key: 'writeFeatures', value: function writeFeatures(t, e) {
      return this.writeFeaturesText(t, this.adaptOptions(e));
    }}, {key: 'writeFeaturesText', value: function writeFeaturesText(t, e) {
      return z();
    }}, {key: 'writeGeometry', value: function writeGeometry(t, e) {
      return this.writeGeometryText(t, this.adaptOptions(e));
    }}, {key: 'writeGeometryText', value: function writeGeometryText(t, e) {
      return z();
    }}]); return vv;
  }(f_); var Sv=/^B(\d{2})(\d{2})(\d{2})(\d{2})(\d{5})([NS])(\d{3})(\d{5})([EW])([AV])(\d{5})(\d{5})/; var wv=/^H.([A-Z]{3}).*?:(.*)/; var Tv=/^HFDTE(\d{2})(\d{2})(\d{2})/; var Ev=/\r\n|\r|\n/; var Cv=/* #__PURE__*/function(_vv) {
    _inherits(Cv, _vv); var _super175=_createSuper(Cv); function Cv(t) {
      var _this203; _classCallCheck(this, Cv); _this203=_super175.call(this), t=t||{}, _this203.dataProjection=an('EPSG:4326'), _this203.altitudeMode_=t.altitudeMode?t.altitudeMode:'none'; return _this203;
    }_createClass(Cv, [{key: 'readFeatureFromText', value: function readFeatureFromText(t, e) {
      var i=this.altitudeMode_; var n=t.split(Ev); var r={}; var s=[]; var o; var a; var l=2e3; var h=0; var c=1; var u=-1; for (o=0, a=n.length; o<a; ++o) {
        var _t361=n[o]; var _e384=void 0; if ('B'==_t361.charAt(0)) {
          if (_e384=Sv.exec(_t361), _e384) {
            var _t362=parseInt(_e384[1], 10); var _n271=parseInt(_e384[2], 10); var _r222=parseInt(_e384[3], 10); var _o140=parseInt(_e384[4], 10)+parseInt(_e384[5], 10)/6e4; 'S'==_e384[6]&&(_o140=-_o140); var _a93=parseInt(_e384[7], 10)+parseInt(_e384[8], 10)/6e4; if ('W'==_e384[9]&&(_a93=-_a93), s.push(_a93, _o140), 'none'!=i) {
              var _t363=void 0; _t363='gps'==i?parseInt(_e384[11], 10):'barometric'==i?parseInt(_e384[12], 10):0, s.push(_t363);
            } var _d28=Date.UTC(l, h, c, _t362, _n271, _r222); _d28<u&&(_d28=Date.UTC(l, h, c+1, _t362, _n271, _r222)), s.push(_d28/1e3), u=_d28;
          }
        } else 'H'==_t361.charAt(0)&&(_e384=Tv.exec(_t361), _e384?(c=parseInt(_e384[1], 10), h=parseInt(_e384[2], 10)-1, l=2e3+parseInt(_e384[3], 10)):(_e384=wv.exec(_t361), _e384&&(r[_e384[1]]=_e384[2].trim())));
      } if (0===s.length) return null; var d=new zm(s, 'none'==i?'XYM':'XYZM'); var g=new Ot(p_(d, !1, e)); return g.setProperties(r, !0), g;
    }}, {key: 'readFeaturesFromText', value: function readFeaturesFromText(t, e) {
      var i=this.readFeatureFromText(t, e); return i?[i]:[];
    }}]); return Cv;
  }(vv); var Rv=['http://www.google.com/kml/ext/2.2']; var bv=[null, 'http://earth.google.com/kml/2.0', 'http://earth.google.com/kml/2.1', 'http://earth.google.com/kml/2.2', 'http://www.opengis.net/kml/2.2']; var Pv={fraction: 'fraction', pixels: 'pixels', insetPixels: 'pixels'}; var Iv=yd(bv, {ExtendedData: FS, Region: MS, MultiGeometry: dd(wS, 'geometry'), LineString: dd(xS, 'geometry'), LinearRing: dd(vS, 'geometry'), Point: dd(TS, 'geometry'), Polygon: dd(CS, 'geometry'), Style: dd(bS), StyleMap: function StyleMap(t, e) {
    var i=sS.call(this, t, e); if (!i) return; var n=e[e.length-1]; Array.isArray(i)?n.Style=i:'string'==typeof i?n.styleUrl=i:Ft(!1, 38);
  }, address: dd(xx), description: dd(xx), name: dd(xx), open: dd(dx), phoneNumber: dd(xx), styleUrl: dd(iS), visibility: dd(dx)}, yd(Rv, {MultiTrack: dd(function(t, e) {
    var i=vd([], dS, t, e); if (!i) return; return new Xm(i);
  }, 'geometry'), Track: dd(fS, 'geometry')})); var Lv=yd(bv, {ExtendedData: FS, Region: MS, Link: function Link(t, e) {
    xd(Fv, t, e);
  }, address: dd(xx), description: dd(xx), name: dd(xx), open: dd(dx), phoneNumber: dd(xx), visibility: dd(dx)}); var Fv=yd(bv, {href: dd(eS)}); var Mv=yd(bv, {LatLonAltBox: function LatLonAltBox(t, e) {
    var i=vd({}, NS, t, e); if (!i) return; var n=e[e.length-1]; var r=[parseFloat(i.west), parseFloat(i.south), parseFloat(i.east), parseFloat(i.north)]; n.extent=r, n.altitudeMode=i.altitudeMode, n.minAltitude=parseFloat(i.minAltitude), n.maxAltitude=parseFloat(i.maxAltitude);
  }, Lod: function Lod(t, e) {
    var i=vd({}, DS, t, e); if (!i) return; var n=e[e.length-1]; n.minLodPixels=parseFloat(i.minLodPixels), n.maxLodPixels=parseFloat(i.maxLodPixels), n.minFadeExtent=parseFloat(i.minFadeExtent), n.maxFadeExtent=parseFloat(i.maxFadeExtent);
  }}); var Av=yd(bv, ['Document', 'Placemark']); var Ov=yd(bv, {Document: gd(function(t, e, i) {
    wd({node: t}, zS, US, e, i, void 0, this);
  }), Placemark: gd(dw)}); var Nv; var Dv; var Gv; var kv; var jv; var Bv; var zv=null; var Uv; var Xv=null; var Vv; var Wv=null; var Zv=null; var Yv=null; var Kv; var qv=null; function Hv(t) {
    return 32/Math.min(t[0], t[1]);
  } function $v(t) {
    return t;
  } function Jv(t, e, i) {
    return Array.isArray(t)?t:'string'==typeof t?Jv(i[t], e, i):e;
  } function Qv(t) {
    var e=nd(t, !1); var i=/^\s*#?\s*([0-9A-Fa-f]{8})\s*$/.exec(e); if (i) {
      var _t364=i[1]; return [parseInt(_t364.substr(6, 2), 16), parseInt(_t364.substr(4, 2), 16), parseInt(_t364.substr(2, 2), 16), parseInt(_t364.substr(0, 2), 16)/255];
    }
  } function tS(t) {
    var e=nd(t, !1); var i=[]; e=e.replace(/\s*,\s*/g, ','); var n=/^\s*([+\-]?\d*\.?\d+(?:e[+\-]?\d+)?),([+\-]?\d*\.?\d+(?:e[+\-]?\d+)?)(?:\s+|,|$)(?:([+\-]?\d*\.?\d+(?:e[+\-]?\d+)?)(?:\s+|$))?\s*/i; var r; for (;r=n.exec(e);) {
      var _t365=parseFloat(r[1]); var _n272=parseFloat(r[2]); var _s166=r[3]?parseFloat(r[3]):0; i.push(_t365, _n272, _s166), e=e.substr(r[0].length);
    } if (''===e) return i;
  } function eS(t) {
    var e=nd(t, !1).trim(); var i=t.baseURI; if (i&&'about:blank'!=i||(i=window.location.href), i) {
      return new URL(e, i).href;
    } return e;
  } function iS(t) {
    var e=nd(t, !1).trim().replace(/^(?!.*#)/, '#'); var i=t.baseURI; if (i&&'about:blank'!=i||(i=window.location.href), i) {
      return new URL(e, i).href;
    } return e;
  } function nS(t) {
    return px(t);
  } var rS=yd(bv, {Pair: function Pair(t, e) {
    var i=vd({}, AS, t, e, this); if (!i) return; var n=i.key; if (n&&'normal'==n) {
      var _t366=i.styleUrl; _t366&&(e[e.length-1]=_t366); var _n273=i.Style; _n273&&(e[e.length-1]=_n273);
    }
  }}); function sS(t, e) {
    return vd(void 0, rS, t, e, this);
  } var oS=yd(bv, {Icon: dd(function(t, e) {
    var i=vd({}, pS, t, e); if (i) return i; return null;
  }), color: dd(Qv), heading: dd(px), hotSpot: dd(function(t) {
    var e=t.getAttribute('xunits'); var i=t.getAttribute('yunits'); var n; return n='insetPixels'!==e?'insetPixels'!==i?'bottom-left':'top-left':'insetPixels'!==i?'bottom-right':'top-right', {x: parseFloat(t.getAttribute('x')), xunits: Pv[e], y: parseFloat(t.getAttribute('y')), yunits: Pv[i], origin: n};
  }), scale: dd(nS)}); var aS=yd(bv, {color: dd(Qv), scale: dd(nS)}); var lS=yd(bv, {color: dd(Qv), width: dd(px)}); var hS=yd(bv, {color: dd(Qv), fill: dd(dx), outline: dd(dx)}); var cS=yd(bv, {coordinates: cd(tS)}); function uS(t, e) {
    return vd(null, cS, t, e);
  } var dS=yd(Rv, {Track: hd(fS)}); var gS=yd(bv, {when: function when(t, e) {
    var i=e[e.length-1].whens; var n=nd(t, !1); var r=Date.parse(n); i.push(isNaN(r)?0:r);
  }}, yd(Rv, {coord: function coord(t, e) {
    var i=e[e.length-1].coordinates; var n=nd(t, !1); var r=/^\s*([+\-]?\d+(?:\.\d*)?(?:e[+\-]?\d*)?)\s+([+\-]?\d+(?:\.\d*)?(?:e[+\-]?\d*)?)\s+([+\-]?\d+(?:\.\d*)?(?:e[+\-]?\d*)?)\s*$/i.exec(n); if (r) {
      var _t367=parseFloat(r[1]); var _e385=parseFloat(r[2]); var _n274=parseFloat(r[3]); i.push([_t367, _e385, _n274]);
    } else i.push([]);
  }})); function fS(t, e) {
    var i=vd({coordinates: [], whens: []}, gS, t, e); if (!i) return; var n=[]; var r=i.coordinates; var s=i.whens; for (var _t368=0, _e386=Math.min(r.length, s.length); _t368<_e386; ++_t368)3==r[_t368].length&&n.push(r[_t368][0], r[_t368][1], r[_t368][2], s[_t368]); return new zm(n, 'XYZM');
  } var pS=yd(bv, {href: dd(eS)}, yd(Rv, {x: dd(px), y: dd(px), w: dd(px), h: dd(px)})); var mS=yd(bv, {coordinates: cd(tS)}); function _S(t, e) {
    return vd(null, mS, t, e);
  } var yS=yd(bv, {extrude: dd(dx), tessellate: dd(dx), altitudeMode: dd(xx)}); function xS(t, e) {
    var i=vd({}, yS, t, e); var n=_S(t, e); if (n) {
      var _t369=new zm(n, 'XYZ'); return _t369.setProperties(i, !0), _t369;
    }
  } function vS(t, e) {
    var i=vd({}, yS, t, e); var n=_S(t, e); if (n) {
      var _t370=new Ar(n, 'XYZ', [n.length]); return _t370.setProperties(i, !0), _t370;
    }
  } var SS=yd(bv, {LineString: hd(xS), LinearRing: hd(vS), MultiGeometry: hd(wS), Point: hd(TS), Polygon: hd(CS)}); function wS(t, e) {
    var i=vd([], SS, t, e); if (!i) return null; if (0===i.length) return new Dm(i); var n; var r=!0; var s=i[0].getType(); var o; for (var _t371=1, _e387=i.length; _t371<_e387; ++_t371) {
      if (o=i[_t371], o.getType()!=s) {
        r=!1; break;
      }
    } if (r) {
      var _t372; var _e388; if ('Point'==s) {
        var _r223=i[0]; _t372=_r223.getLayout(), _e388=_r223.getFlatCoordinates(); for (var _t373=1, _n275=i.length; _t373<_n275; ++_t373)o=i[_t373], u(_e388, o.getFlatCoordinates()); n=new Wm(_e388, _t372), PS(n, i);
      } else 'LineString'==s?(n=new Xm(i), PS(n, i)):'Polygon'==s?(n=new Km(i), PS(n, i)):'GeometryCollection'==s?n=new Dm(i):Ft(!1, 37);
    } else n=new Dm(i); return n;
  } function TS(t, e) {
    var i=vd({}, yS, t, e); var n=_S(t, e); if (n) {
      var _t374=new dr(n, 'XYZ'); return _t374.setProperties(i, !0), _t374;
    }
  } var ES=yd(bv, {innerBoundaryIs: function innerBoundaryIs(t, e) {
    var i=vd([], GS, t, e); if (i.length>0) {
      var _e389; (_e389=e[e.length-1]).push.apply(_e389, _toConsumableArray(i));
    }
  }, outerBoundaryIs: function outerBoundaryIs(t, e) {
    var i=vd(void 0, kS, t, e); if (i) {
      e[e.length-1][0]=i;
    }
  }}); function CS(t, e) {
    var i=vd({}, yS, t, e); var n=vd([null], ES, t, e); if (n&&n[0]) {
      var _t375=n[0]; var _e390=[_t375.length]; for (var _i296=1, _r224=n.length; _i296<_r224; ++_i296)u(_t375, n[_i296]), _e390.push(_t375.length); var _r225=new Ar(_t375, 'XYZ', _e390); return _r225.setProperties(i, !0), _r225;
    }
  } var RS=yd(bv, {IconStyle: function IconStyle(t, e) {
    var i=vd({}, oS, t, e); if (!i) return; var n=e[e.length-1]; var r='Icon'in i?i.Icon:{}; var s=!('Icon'in i)||Object.keys(r).length>0; var o; var a=r.href; var l; var h; var c; a?o=a:s&&(o=Bv); var u='bottom-left'; var d=i.hotSpot; var g; d?(l=[d.x, d.y], h=d.xunits, c=d.yunits, u=d.origin):/^https?:\/\/maps\.(?:google|gstatic)\.com\//.test(o)&&(o.includes('pushpin')?(l=Dv, h=Gv, c=kv):o.includes('arrow-reverse')?(l=[54, 42], h=Gv, c=kv):o.includes('paddle')&&(l=[32, 1], h=Gv, c=kv)); var f=r.x; var p=r.y; var m; void 0!==f&&void 0!==p&&(g=[f, p]); var _=r.w; var y=r.h; var x; void 0!==_&&void 0!==y&&(m=[_, y]); var v=i.heading; void 0!==v&&(x=wi(v)); var S=i.scale; var w=i.color; if (s) {
      o==Bv&&(m=jv); var _t376=new of({anchor: l, anchorOrigin: u, anchorXUnits: h, anchorYUnits: c, crossOrigin: this.crossOrigin_, offset: g, offsetOrigin: 'bottom-left', rotation: x, scale: S, size: m, src: this.iconUrlFunction_(o), color: w}); var _e391=_t376.getScaleArray()[0]; var _i297=_t376.getSize(); if (null===_i297) {
        var _i298=_t376.getImageState(); if (_i298===Jr||_i298===Qr) {
          var _n276=function _n276() {
            var i=_t376.getImageState(); if (i!==Jr&&i!==Qr) {
              var _i299=_t376.getSize(); if (_i299&&2==_i299.length) {
                var _n277=Hv(_i299); _t376.setScale(_e391*_n277);
              }_t376.unlistenImageChange(_n276);
            }
          }; _t376.listenImageChange(_n276), _i298===Jr&&_t376.load();
        }
      } else if (2==_i297.length) {
        var _n278=Hv(_i297); _t376.setScale(_e391*_n278);
      }n.imageStyle=_t376;
    } else n.imageStyle=Uv;
  }, LabelStyle: function LabelStyle(t, e) {
    var i=vd({}, aS, t, e); if (!i) return; var n=e[e.length-1]; var r=new _f({fill: new Qg({color: 'color'in i?i.color:Nv}), scale: i.scale}); n.textStyle=r;
  }, LineStyle: function LineStyle(t, e) {
    var i=vd({}, lS, t, e); if (!i) return; var n=e[e.length-1]; var r=new lf({color: 'color'in i?i.color:Nv, width: 'width'in i?i.width:1}); n.strokeStyle=r;
  }, PolyStyle: function PolyStyle(t, e) {
    var i=vd({}, hS, t, e); if (!i) return; var n=e[e.length-1]; var r=new Qg({color: 'color'in i?i.color:Nv}); n.fillStyle=r; var s=i.fill; void 0!==s&&(n.fill=s); var o=i.outline; void 0!==o&&(n.outline=o);
  }}); function bS(t, e) {
    var i=vd({}, RS, t, e, this); if (!i) return null; var n='fillStyle'in i?i.fillStyle:zv; var r=i.fill; var s; void 0===r||r||(n=null), 'imageStyle'in i?i.imageStyle!=Uv&&(s=i.imageStyle):s=Xv; var o='textStyle'in i?i.textStyle:Zv; var a='strokeStyle'in i?i.strokeStyle:Wv; var l=i.outline; return void 0===l||l?[new pf({fill: n, image: s, stroke: a, text: o, zIndex: void 0})]:[new pf({geometry: function geometry(t) {
      var e=t.getGeometry(); var i=e.getType(); if ('GeometryCollection'===i) {
        return new Dm(e.getGeometriesArrayRecursive().filter(function(t) {
          var e=t.getType(); return 'Polygon'!==e&&'MultiPolygon'!==e;
        }));
      } if ('Polygon'!==i&&'MultiPolygon'!==i) return e;
    }, fill: n, image: s, stroke: a, text: o, zIndex: void 0}), new pf({geometry: function geometry(t) {
      var e=t.getGeometry(); var i=e.getType(); if ('GeometryCollection'===i) {
        return new Dm(e.getGeometriesArrayRecursive().filter(function(t) {
          var e=t.getType(); return 'Polygon'===e||'MultiPolygon'===e;
        }));
      } if ('Polygon'===i||'MultiPolygon'===i) return e;
    }, fill: n, stroke: null, zIndex: void 0})];
  } function PS(t, e) {
    var i=e.length; var n=new Array(e.length); var r=new Array(e.length); var s=new Array(e.length); var o; var a; var l; o=!1, a=!1, l=!1; for (var _t377=0; _t377<i; ++_t377) {
      var _i300=e[_t377]; n[_t377]=_i300.get('extrude'), r[_t377]=_i300.get('tessellate'), s[_t377]=_i300.get('altitudeMode'), o=o||void 0!==n[_t377], a=a||void 0!==r[_t377], l=l||s[_t377];
    }o&&t.set('extrude', n), a&&t.set('tessellate', r), l&&t.set('altitudeMode', s);
  } var IS=yd(bv, {displayName: dd(xx), value: dd(xx)}); var LS=yd(bv, {Data: function Data(t, e) {
    var i=t.getAttribute('name'); xd(IS, t, e); var n=e[e.length-1]; i&&n.displayName?n[i]={value: n.value, displayName: n.displayName, toString: function toString() {
      return n.value;
    }}:null!==i?n[i]=n.value:null!==n.displayName&&(n[n.displayName]=n.value), delete n.value;
  }, SchemaData: function SchemaData(t, e) {
    xd(OS, t, e);
  }}); function FS(t, e) {
    xd(LS, t, e);
  } function MS(t, e) {
    xd(Mv, t, e);
  } var AS=yd(bv, {Style: dd(bS), key: dd(xx), styleUrl: dd(iS)}); var OS=yd(bv, {SimpleData: function SimpleData(t, e) {
    var i=t.getAttribute('name'); if (null!==i) {
      var _n279=xx(t); e[e.length-1][i]=_n279;
    }
  }}); var NS=yd(bv, {altitudeMode: dd(xx), minAltitude: dd(px), maxAltitude: dd(px), north: dd(px), south: dd(px), east: dd(px), west: dd(px)}); var DS=yd(bv, {minLodPixels: dd(px), maxLodPixels: dd(px), minFadeExtent: dd(px), maxFadeExtent: dd(px)}); var GS=yd(bv, {LinearRing: hd(uS)}); var kS=yd(bv, {LinearRing: cd(uS)}); function jS(t, e) {
    var i=gs(e); var n=[255*(4==i.length?i[3]:1), i[2], i[1], i[0]]; for (var _t378=0; _t378<4; ++_t378) {
      var _e392=Math.floor(n[_t378]).toString(16); n[_t378]=1==_e392.length?'0'+_e392:_e392;
    }Cx(t, n.join(''));
  } var BS=yd(bv, {Data: gd(function(t, e, i) {
    t.setAttribute('name', e.name); var n={node: t}; var r=e.value; 'object'==_typeof(r)?(null!==r&&r.displayName&&wd(n, BS, md, [r.displayName], i, ['displayName']), null!==r&&r.value&&wd(n, BS, md, [r.value], i, ['value'])):wd(n, BS, md, [r], i, ['value']);
  }), value: gd(function(t, e) {
    Cx(t, e);
  }), displayName: gd(function(t, e) {
    Sx(t, e);
  })}); var zS=yd(bv, {Placemark: gd(dw)}); var US=function US(t, e, i) {
    return id(e[e.length-1].node.namespaceURI, 'Placemark');
  }; var XS=pd('Data'); var VS=yd(bv, ['href'], yd(Rv, ['x', 'y', 'w', 'h'])); var WS=yd(bv, {href: gd(Cx)}, yd(Rv, {x: gd(Tx), y: gd(Tx), w: gd(Tx), h: gd(Tx)})); var ZS=function ZS(t, e, i) {
    return id(Rv[0], 'gx:'+i);
  }; var YS=yd(bv, ['scale', 'heading', 'Icon', 'color', 'hotSpot']); var KS=yd(bv, {Icon: gd(function(t, e, i) {
    var n={node: t}; var r=i[i.length-1].node; var s=VS[r.namespaceURI]; var o=_d(e, s); wd(n, WS, md, o, i, s), s=VS[Rv[0]], o=_d(e, s), wd(n, WS, ZS, o, i, s);
  }), color: gd(jS), heading: gd(Tx), hotSpot: gd(function(t, e) {
    t.setAttribute('x', String(e.x)), t.setAttribute('y', String(e.y)), t.setAttribute('xunits', e.xunits), t.setAttribute('yunits', e.yunits);
  }), scale: gd(ww)}); var qS=yd(bv, ['color', 'scale']); var HS=yd(bv, {color: gd(jS), scale: gd(ww)}); var $S=yd(bv, ['color', 'width']); var JS=yd(bv, {color: gd(jS), width: gd(Tx)}); var QS={Point: 'Point', LineString: 'LineString', LinearRing: 'LinearRing', Polygon: 'Polygon', MultiPoint: 'MultiGeometry', MultiLineString: 'MultiGeometry', MultiPolygon: 'MultiGeometry', GeometryCollection: 'MultiGeometry'}; var tw=function tw(t, e, i) {
    if (t) {
      return id(e[e.length-1].node.namespaceURI, QS[t.getType()]);
    }
  }; var ew=pd('Point'); var iw=pd('LineString'); var nw=pd('LinearRing'); var rw=pd('Polygon'); var sw=yd(bv, {LineString: gd(pw), Point: gd(pw), Polygon: gd(vw), GeometryCollection: gd(ow)}); function ow(t, e, i) {
    var n={node: t}; var r=e.getType(); var s; var o=[]; 'GeometryCollection'===r?(e.getGeometriesArrayRecursive().forEach(function(t) {
      var e=t.getType(); 'MultiPoint'===e?o=o.concat(t.getPoints()):'MultiLineString'===e?o=o.concat(t.getLineStrings()):'MultiPolygon'===e?o=o.concat(t.getPolygons()):'Point'===e||'LineString'===e||'Polygon'===e?o.push(t):Ft(!1, 39);
    }), s=tw):'MultiPoint'===r?(o=e.getPoints(), s=ew):'MultiLineString'===r?(o=e.getLineStrings(), s=iw):'MultiPolygon'===r?(o=e.getPolygons(), s=rw):Ft(!1, 39), wd(n, sw, s, o, i);
  } var aw=yd(bv, {LinearRing: gd(pw)}); function lw(t, e, i) {
    wd({node: t}, aw, nw, [e], i);
  } var hw=yd(bv, {ExtendedData: gd(function(t, e, i) {
    var n={node: t}; var r=e.names; var s=e.values; var o=r.length; for (var _t379=0; _t379<o; _t379++)wd(n, BS, XS, [{name: r[_t379], value: s[_t379]}], i);
  }), MultiGeometry: gd(ow), LineString: gd(pw), LinearRing: gd(pw), Point: gd(pw), Polygon: gd(vw), Style: gd(function(t, e, i) {
    var n={node: t}; var r={}; if (e.pointStyles.length) {
      var _t380=e.pointStyles[0].getText(); _t380&&(r.LabelStyle=_t380); var _i301=e.pointStyles[0].getImage(); _i301&&'function'==typeof _i301.getSrc&&(r.IconStyle=_i301);
    } if (e.lineStyles.length) {
      var _t381=e.lineStyles[0].getStroke(); _t381&&(r.LineStyle=_t381);
    } if (e.polyStyles.length) {
      var _t382=e.polyStyles[0].getStroke(); _t382&&!r.LineStyle&&(r.LineStyle=_t382), r.PolyStyle=e.polyStyles[0];
    } var s=i[i.length-1].node; var o=Tw[s.namespaceURI]; var a=_d(r, o); wd(n, Ew, md, a, i, o);
  }), address: gd(Cx), description: gd(Cx), name: gd(Cx), open: gd(vx), phoneNumber: gd(Cx), styleUrl: gd(Cx), visibility: gd(vx)}); var cw=yd(bv, ['name', 'open', 'visibility', 'address', 'phoneNumber', 'description', 'styleUrl', 'Style']); var uw=pd('ExtendedData'); function dw(t, e, i) {
    var n={node: t}; e.getId()&&t.setAttribute('id', e.getId()); var r=e.getProperties(); var s={address: 1, description: 1, name: 1, open: 1, phoneNumber: 1, styleUrl: 1, visibility: 1}; s[e.getGeometryName()]=1; var o=Object.keys(r||{}).sort().filter(function(t) {
      return !s[t];
    }); var a=e.getStyleFunction(); if (a) {
      var _t383=a(e, 0); if (_t383) {
        var _i302=Array.isArray(_t383)?_t383:[_t383]; var _n280=_i302; if (e.getGeometry()&&(_n280=_i302.filter(function(t) {
          var i=t.getGeometryFunction()(e); if (i) {
            var _t384=i.getType(); return 'GeometryCollection'===_t384?i.getGeometriesArrayRecursive().filter(function(t) {
              var e=t.getType(); return 'Point'===e||'MultiPoint'===e;
            }).length:'Point'===_t384||'MultiPoint'===_t384;
          }
        })), this.writeStyles_) {
          var _t385=_i302; var _s167=_i302; e.getGeometry()&&(_t385=_i302.filter(function(t) {
            var i=t.getGeometryFunction()(e); if (i) {
              var _t386=i.getType(); return 'GeometryCollection'===_t386?i.getGeometriesArrayRecursive().filter(function(t) {
                var e=t.getType(); return 'LineString'===e||'MultiLineString'===e;
              }).length:'LineString'===_t386||'MultiLineString'===_t386;
            }
          }), _s167=_i302.filter(function(t) {
            var i=t.getGeometryFunction()(e); if (i) {
              var _t387=i.getType(); return 'GeometryCollection'===_t387?i.getGeometriesArrayRecursive().filter(function(t) {
                var e=t.getType(); return 'Polygon'===e||'MultiPolygon'===e;
              }).length:'Polygon'===_t387||'MultiPolygon'===_t387;
            }
          })), r.Style={pointStyles: _n280, lineStyles: _t385, polyStyles: _s167};
        } if (_n280.length&&void 0===r.name) {
          var _t388=_n280[0].getText(); _t388&&(r.name=_t388.getText());
        }
      }
    } var l=i[i.length-1].node; var h=cw[l.namespaceURI]; var c=_d(r, h); if (wd(n, hw, md, c, i, h), o.length>0) {
      var _t389=_d(r, o); wd(n, hw, uw, [{names: o, values: _t389}], i);
    } var u=i[0]; var d=e.getGeometry(); d&&(d=p_(d, !0, u)), wd(n, hw, tw, [d], i);
  } var gw=yd(bv, ['extrude', 'tessellate', 'altitudeMode', 'coordinates']); var fw=yd(bv, {extrude: gd(vx), tessellate: gd(vx), altitudeMode: gd(Cx), coordinates: gd(function(t, e, i) {
    var n=i[i.length-1]; var r=n.layout; var s=n.stride; var o; 'XY'==r||'XYM'==r?o=2:'XYZ'==r||'XYZM'==r?o=3:Ft(!1, 34); var a=e.length; var l=''; if (a>0) {
      l+=e[0]; for (var _t390=1; _t390<o; ++_t390)l+=','+e[_t390]; for (var _t391=s; _t391<a; _t391+=s) {
        l+=' '+e[_t391]; for (var _i303=1; _i303<o; ++_i303)l+=','+e[_t391+_i303];
      }
    }Cx(t, l);
  })}); function pw(t, e, i) {
    var n=e.getFlatCoordinates(); var r={node: t}; r.layout=e.getLayout(), r.stride=e.getStride(); var s=e.getProperties(); s.coordinates=n; var o=i[i.length-1].node; var a=gw[o.namespaceURI]; var l=_d(s, a); wd(r, fw, md, l, i, a);
  } var mw=yd(bv, ['color', 'fill', 'outline']); var _w=yd(bv, {outerBoundaryIs: gd(lw), innerBoundaryIs: gd(lw)}); var yw=pd('innerBoundaryIs'); var xw=pd('outerBoundaryIs'); function vw(t, e, i) {
    var n=e.getLinearRings(); var r=n.shift(); var s={node: t}; wd(s, _w, yw, n, i), wd(s, _w, xw, [r], i);
  } var Sw=yd(bv, {color: gd(jS), fill: gd(vx), outline: gd(vx)}); function ww(t, e) {
    Tx(t, Math.round(1e6*e)/1e6);
  } var Tw=yd(bv, ['IconStyle', 'LabelStyle', 'LineStyle', 'PolyStyle']); var Ew=yd(bv, {IconStyle: gd(function(t, e, i) {
    var n={node: t}; var r={}; var s=e.getSrc(); var o=e.getSize(); var a=e.getImageSize(); var l={href: s}; if (o) {
      l.w=o[0], l.h=o[1]; var _t392=e.getAnchor(); var _i304=e.getOrigin(); if (_i304&&a&&0!==_i304[0]&&_i304[1]!==o[1]&&(l.x=_i304[0], l.y=a[1]-(_i304[1]+o[1])), _t392&&(_t392[0]!==o[0]/2||_t392[1]!==o[1]/2)) {
        var _e393={x: _t392[0], xunits: 'pixels', y: o[1]-_t392[1], yunits: 'pixels'}; r.hotSpot=_e393;
      }
    }r.Icon=l; var h=e.getScaleArray()[0]; var c=o; if (null===c&&(c=jv), 2==c.length) {
      h/=Hv(c);
    }1!==h&&(r.scale=h); var u=e.getRotation(); 0!==u&&(r.heading=u); var d=e.getColor(); d&&(r.color=d); var g=i[i.length-1].node; var f=YS[g.namespaceURI]; var p=_d(r, f); wd(n, KS, md, p, i, f);
  }), LabelStyle: gd(function(t, e, i) {
    var n={node: t}; var r={}; var s=e.getFill(); s&&(r.color=s.getColor()); var o=e.getScale(); o&&1!==o&&(r.scale=o); var a=i[i.length-1].node; var l=qS[a.namespaceURI]; var h=_d(r, l); wd(n, HS, md, h, i, l);
  }), LineStyle: gd(function(t, e, i) {
    var n={node: t}; var r={color: e.getColor(), width: Number(e.getWidth())||1}; var s=i[i.length-1].node; var o=$S[s.namespaceURI]; var a=_d(r, o); wd(n, JS, md, a, i, o);
  }), PolyStyle: gd(function(t, e, i) {
    var n={node: t}; var r=e.getFill(); var s=e.getStroke(); var o={color: r?r.getColor():void 0, fill: !!r&&void 0, outline: !!s&&void 0}; var a=i[i.length-1].node; var l=mw[a.namespaceURI]; var h=_d(o, l); wd(n, Sw, md, h, i, l);
  })}); var Cw=/* #__PURE__*/function(_ax3) {
    _inherits(Cw, _ax3); var _super176=_createSuper(Cw); function Cw(t) {
      var _this204; _classCallCheck(this, Cw); _this204=_super176.call(this), t=t||{}, qv||(Nv=[255, 255, 255, 1], zv=new Qg({color: Nv}), Dv=[20, 2], Gv='pixels', kv='pixels', jv=[64, 64], Bv='https://maps.google.com/mapfiles/kml/pushpin/ylw-pushpin.png', Xv=new of({anchor: Dv, anchorOrigin: 'bottom-left', anchorXUnits: Gv, anchorYUnits: kv, crossOrigin: 'anonymous', rotation: 0, scale: Hv(jv), size: jv, src: Bv}), Uv='NO_IMAGE', Wv=new lf({color: Nv, width: 1}), Vv=new lf({color: [51, 51, 51, 1], width: 2}), Zv=new _f({font: 'bold 16px Helvetica', fill: zv, stroke: Vv, scale: .8}), Yv=new pf({fill: zv, image: Xv, text: Zv, stroke: Wv, zIndex: 0}), qv=[Yv]), _this204.dataProjection=an('EPSG:4326'), _this204.defaultStyle_=t.defaultStyle?t.defaultStyle:qv, _this204.extractStyles_=void 0===t.extractStyles||t.extractStyles, _this204.writeStyles_=void 0===t.writeStyles||t.writeStyles, _this204.sharedStyles_={}, _this204.showPointNames_=void 0===t.showPointNames||t.showPointNames, _this204.crossOrigin_=void 0!==t.crossOrigin?t.crossOrigin:'anonymous', _this204.iconUrlFunction_=t.iconUrlFunction?t.iconUrlFunction:$v, _this204.supportedMediaTypes=['application/vnd.google-earth.kml+xml']; return _this204;
    }_createClass(Cw, [{key: 'readDocumentOrFolder_', value: function readDocumentOrFolder_(t, e) {
      var i=vd([], yd(bv, {Document: ld(this.readDocumentOrFolder_, this), Folder: ld(this.readDocumentOrFolder_, this), Placemark: hd(this.readPlacemark_, this), Style: this.readSharedStyle_.bind(this), StyleMap: this.readSharedStyleMap_.bind(this)}), t, e, this); if (i) return i;
    }}, {key: 'readPlacemark_', value: function readPlacemark_(t, e) {
      var i=vd({geometry: null}, Iv, t, e, this); if (!i) return; var n=new Ot(); var r=t.getAttribute('id'); null!==r&&n.setId(r); var s=e[0]; var o=i.geometry; if (o&&p_(o, !1, s), n.setGeometry(o), delete i.geometry, this.extractStyles_) {
        var _t393=function(t, e, i, n, r) {
          return function(s, o) {
            var a=r; var l=''; var h=[]; if (a) {
              var _t394=s.getGeometry(); if (_t394) {
                if (_t394 instanceof Dm) {
                  h=_t394.getGeometriesArrayRecursive().filter(function(t) {
                    var e=t.getType(); return 'Point'===e||'MultiPoint'===e;
                  }), a=h.length>0;
                } else {
                  var _e394=_t394.getType(); a='Point'===_e394||'MultiPoint'===_e394;
                }
              }
            }a&&(l=s.get('name'), a=a&&!!l, a&&/&[^&]+;/.test(l)&&(Kv||(Kv=document.createElement('textarea')), Kv.innerHTML=l, l=Kv.value)); var c=i; if (t?c=t:e&&(c=Jv(e, i, n)), a) {
              var _t395=function(t, e) {
                var i=[0, 0]; var n='start'; var r=t.getImage(); if (r) {
                  var _t396=r.getSize(); if (_t396&&2==_t396.length) {
                    var _e395=r.getScaleArray(); var _s168=r.getAnchor(); i[0]=_e395[0]*(_t396[0]-_s168[0]), i[1]=_e395[1]*(_t396[1]/2-_s168[1]), n='left';
                  }
                } var s=t.getText(); s?(s=s.clone(), s.setFont(s.getFont()||Zv.getFont()), s.setScale(s.getScale()||Zv.getScale()), s.setFill(s.getFill()||Zv.getFill()), s.setStroke(s.getStroke()||Vv)):s=Zv.clone(); s.setText(e), s.setOffsetX(i[0]), s.setOffsetY(i[1]), s.setTextAlign(n); return new pf({image: r, text: s});
              }(c[0], l); if (h.length>0) {
                _t395.setGeometry(new Dm(h)); return [_t395, new pf({geometry: c[0].getGeometry(), image: null, fill: c[0].getFill(), stroke: c[0].getStroke(), text: null})].concat(c.slice(1));
              } return _t395;
            } return c;
          };
        }(i.Style, i.styleUrl, this.defaultStyle_, this.sharedStyles_, this.showPointNames_); n.setStyle(_t393);
      } return delete i.Style, n.setProperties(i, !0), n;
    }}, {key: 'readSharedStyle_', value: function readSharedStyle_(t, e) {
      var i=t.getAttribute('id'); if (null!==i) {
        var _n281=bS.call(this, t, e); if (_n281) {
          var _e396; var _r226=t.baseURI; if (_r226&&'about:blank'!=_r226||(_r226=window.location.href), _r226) {
            _e396=new URL('#'+i, _r226).href;
          } else _e396='#'+i; this.sharedStyles_[_e396]=_n281;
        }
      }
    }}, {key: 'readSharedStyleMap_', value: function readSharedStyleMap_(t, e) {
      var i=t.getAttribute('id'); if (null===i) return; var n=sS.call(this, t, e); if (!n) return; var r; var s=t.baseURI; if (s&&'about:blank'!=s||(s=window.location.href), s) {
        r=new URL('#'+i, s).href;
      } else r='#'+i; this.sharedStyles_[r]=n;
    }}, {key: 'readFeatureFromNode', value: function readFeatureFromNode(t, e) {
      if (!bv.includes(t.namespaceURI)) return null; var i=this.readPlacemark_(t, [this.getReadOptions(t, e)]); return i||null;
    }}, {key: 'readFeaturesFromNode', value: function readFeaturesFromNode(t, e) {
      if (!bv.includes(t.namespaceURI)) return []; var i; var n=t.localName; if ('Document'==n||'Folder'==n) return i=this.readDocumentOrFolder_(t, [this.getReadOptions(t, e)]), i||[]; if ('Placemark'==n) {
        var _i305=this.readPlacemark_(t, [this.getReadOptions(t, e)]); return _i305?[_i305]:[];
      } if ('kml'==n) {
        i=[]; for (var _n282=t.firstElementChild; _n282; _n282=_n282.nextElementSibling) {
          var _t397=this.readFeaturesFromNode(_n282, e); _t397&&u(i, _t397);
        } return i;
      } return [];
    }}, {key: 'readName', value: function readName(t) {
      if (t) {
        if ('string'==typeof t) {
          var _e397=ad(t); return this.readNameFromDocument(_e397);
        } return sd(t)?this.readNameFromDocument(t):this.readNameFromNode(t);
      }
    }}, {key: 'readNameFromDocument', value: function readNameFromDocument(t) {
      for (var _e398=t.firstChild; _e398; _e398=_e398.nextSibling) {
        if (_e398.nodeType==Node.ELEMENT_NODE) {
          var _t398=this.readNameFromNode(_e398); if (_t398) return _t398;
        }
      }
    }}, {key: 'readNameFromNode', value: function readNameFromNode(t) {
      for (var _e399=t.firstElementChild; _e399; _e399=_e399.nextElementSibling) if (bv.includes(_e399.namespaceURI)&&'name'==_e399.localName) return xx(_e399); for (var _e400=t.firstElementChild; _e400; _e400=_e400.nextElementSibling) {
        var _t399=_e400.localName; if (bv.includes(_e400.namespaceURI)&&('Document'==_t399||'Folder'==_t399||'Placemark'==_t399||'kml'==_t399)) {
          var _t400=this.readNameFromNode(_e400); if (_t400) return _t400;
        }
      }
    }}, {key: 'readNetworkLinks', value: function readNetworkLinks(t) {
      var e=[]; if ('string'==typeof t) {
        var _i306=ad(t); u(e, this.readNetworkLinksFromDocument(_i306));
      } else sd(t)?u(e, this.readNetworkLinksFromDocument(t)):u(e, this.readNetworkLinksFromNode(t)); return e;
    }}, {key: 'readNetworkLinksFromDocument', value: function readNetworkLinksFromDocument(t) {
      var e=[]; for (var _i307=t.firstChild; _i307; _i307=_i307.nextSibling)_i307.nodeType==Node.ELEMENT_NODE&&u(e, this.readNetworkLinksFromNode(_i307)); return e;
    }}, {key: 'readNetworkLinksFromNode', value: function readNetworkLinksFromNode(t) {
      var e=[]; for (var _i308=t.firstElementChild; _i308; _i308=_i308.nextElementSibling) {
        if (bv.includes(_i308.namespaceURI)&&'NetworkLink'==_i308.localName) {
          var _t401=vd({}, Lv, _i308, []); e.push(_t401);
        }
      } for (var _i309=t.firstElementChild; _i309; _i309=_i309.nextElementSibling) {
        var _t402=_i309.localName; !bv.includes(_i309.namespaceURI)||'Document'!=_t402&&'Folder'!=_t402&&'kml'!=_t402||u(e, this.readNetworkLinksFromNode(_i309));
      } return e;
    }}, {key: 'readRegion', value: function readRegion(t) {
      var e=[]; if ('string'==typeof t) {
        var _i310=ad(t); u(e, this.readRegionFromDocument(_i310));
      } else sd(t)?u(e, this.readRegionFromDocument(t)):u(e, this.readRegionFromNode(t)); return e;
    }}, {key: 'readRegionFromDocument', value: function readRegionFromDocument(t) {
      var e=[]; for (var _i311=t.firstChild; _i311; _i311=_i311.nextSibling)_i311.nodeType==Node.ELEMENT_NODE&&u(e, this.readRegionFromNode(_i311)); return e;
    }}, {key: 'readRegionFromNode', value: function readRegionFromNode(t) {
      var e=[]; for (var _i312=t.firstElementChild; _i312; _i312=_i312.nextElementSibling) {
        if (bv.includes(_i312.namespaceURI)&&'Region'==_i312.localName) {
          var _t403=vd({}, Mv, _i312, []); e.push(_t403);
        }
      } for (var _i313=t.firstElementChild; _i313; _i313=_i313.nextElementSibling) {
        var _t404=_i313.localName; !bv.includes(_i313.namespaceURI)||'Document'!=_t404&&'Folder'!=_t404&&'kml'!=_t404||u(e, this.readRegionFromNode(_i313));
      } return e;
    }}, {key: 'writeFeaturesNode', value: function writeFeaturesNode(t, e) {
      e=this.adaptOptions(e); var i=id(bv[4], 'kml'); var n='http://www.w3.org/2000/xmlns/'; i.setAttributeNS(n, 'xmlns:gx', Rv[0]), i.setAttributeNS(n, 'xmlns:xsi', ed), i.setAttributeNS(ed, 'xsi:schemaLocation', 'http://www.opengis.net/kml/2.2 https://developers.google.com/kml/schema/kml22gx.xsd'); var r={node: i}; var s={}; t.length>1?s.Document=t:1==t.length&&(s.Placemark=t[0]); var o=Av[i.namespaceURI]; var a=_d(s, o); return wd(r, Ov, md, a, [e], o, this), i;
    }}]); return Cw;
  }(ax); var Rw=[null]; var bw=yd(Rw, {nd: function nd(t, e) {
    e[e.length-1].ndrefs.push(t.getAttribute('ref'));
  }, tag: Lw}); var Pw=yd(Rw, {node: function node(t, e) {
    var i=e[0]; var n=e[e.length-1]; var r=t.getAttribute('id'); var s=[parseFloat(t.getAttribute('lon')), parseFloat(t.getAttribute('lat'))]; n.nodes[r]=s; var o=vd({tags: {}}, Iw, t, e); if (!v(o.tags)) {
      var _t405=new dr(s); p_(_t405, !1, i); var _e401=new Ot(_t405); void 0!==r&&_e401.setId(r), _e401.setProperties(o.tags, !0), n.features.push(_e401);
    }
  }, way: function way(t, e) {
    var i=vd({id: t.getAttribute('id'), ndrefs: [], tags: {}}, bw, t, e); e[e.length-1].ways.push(i);
  }}); var Iw=yd(Rw, {tag: Lw}); function Lw(t, e) {
    e[e.length-1].tags[t.getAttribute('k')]=t.getAttribute('v');
  } var Fw=/* #__PURE__*/function(_ax4) {
    _inherits(Fw, _ax4); var _super177=_createSuper(Fw); function Fw() {
      var _this205; _classCallCheck(this, Fw); _this205=_super177.call(this), _this205.dataProjection=an('EPSG:4326'); return _this205;
    }_createClass(Fw, [{key: 'readFeaturesFromNode', value: function readFeaturesFromNode(t, e) {
      if (e=this.getReadOptions(t, e), 'osm'==t.localName) {
        var _i314=vd({nodes: {}, ways: [], features: []}, Pw, t, [e]); for (var _t406=0; _t406<_i314.ways.length; _t406++) {
          var _n283=_i314.ways[_t406]; var _r227=[]; for (var _t407=0, _e402=_n283.ndrefs.length; _t407<_e402; _t407++) {
            u(_r227, _i314.nodes[_n283.ndrefs[_t407]]);
          } var _s169=void 0; _s169=_n283.ndrefs[0]==_n283.ndrefs[_n283.ndrefs.length-1]?new Ar(_r227, 'XY', [_r227.length]):new zm(_r227, 'XY'), p_(_s169, !1, e); var _o141=new Ot(_s169); void 0!==_n283.id&&_o141.setId(_n283.id), _o141.setProperties(_n283.tags, !0), _i314.features.push(_o141);
        } if (_i314.features) return _i314.features;
      } return [];
    }}]); return Fw;
  }(ax); var Mw=/* #__PURE__*/function() {
    function Mw() {
      _classCallCheck(this, Mw);
    }_createClass(Mw, [{key: 'read', value: function read(t) {
      if (!t) return null; if ('string'==typeof t) {
        var _e403=ad(t); return this.readFromDocument(_e403);
      } return sd(t)?this.readFromDocument(t):this.readFromNode(t);
    }}, {key: 'readFromDocument', value: function readFromDocument(t) {
      for (var _e404=t.firstChild; _e404; _e404=_e404.nextSibling) if (_e404.nodeType==Node.ELEMENT_NODE) return this.readFromNode(_e404); return null;
    }}, {key: 'readFromNode', value: function readFromNode(t) {}}]); return Mw;
  }(); function Aw(t) {
    return t.getAttributeNS('http://www.w3.org/1999/xlink', 'href');
  } var Ow=[null, 'http://www.opengis.net/ows/1.1']; var Nw=yd(Ow, {ServiceIdentification: dd(function(t, e) {
    return vd({}, Yw, t, e);
  }), ServiceProvider: dd(function(t, e) {
    return vd({}, Kw, t, e);
  }), OperationsMetadata: dd(function(t, e) {
    return vd({}, Xw, t, e);
  })}); var Dw=yd(Ow, {DeliveryPoint: dd(xx), City: dd(xx), AdministrativeArea: dd(xx), PostalCode: dd(xx), Country: dd(xx), ElectronicMailAddress: dd(xx)}); var Gw=yd(Ow, {Value: ud(function(t, e) {
    return xx(t);
  })}); var kw=yd(Ow, {AllowedValues: dd(function(t, e) {
    return vd({}, Gw, t, e);
  })}); var jw=yd(Ow, {Phone: dd(function(t, e) {
    return vd({}, Vw, t, e);
  }), Address: dd(function(t, e) {
    return vd({}, Dw, t, e);
  })}); var Bw=yd(Ow, {HTTP: dd(function(t, e) {
    return vd({}, zw, t, e);
  })}); var zw=yd(Ow, {Get: ud(function(t, e) {
    var i=Aw(t); if (!i) return; return vd({href: i}, Ww, t, e);
  }), Post: void 0}); var Uw=yd(Ow, {DCP: dd(function(t, e) {
    return vd({}, Bw, t, e);
  })}); var Xw=yd(Ow, {Operation: function Operation(t, e) {
    var i=t.getAttribute('name'); var n=vd({}, Uw, t, e); if (!n) return; e[e.length-1][i]=n;
  }}); var Vw=yd(Ow, {Voice: dd(xx), Facsimile: dd(xx)}); var Ww=yd(Ow, {Constraint: ud(function(t, e) {
    var i=t.getAttribute('name'); if (!i) return; return vd({name: i}, kw, t, e);
  })}); var Zw=yd(Ow, {IndividualName: dd(xx), PositionName: dd(xx), ContactInfo: dd(function(t, e) {
    return vd({}, jw, t, e);
  })}); var Yw=yd(Ow, {Abstract: dd(xx), AccessConstraints: dd(xx), Fees: dd(xx), Title: dd(xx), ServiceTypeVersion: dd(xx), ServiceType: dd(xx)}); var Kw=yd(Ow, {ProviderName: dd(xx), ProviderSite: dd(Aw), ServiceContact: dd(function(t, e) {
    return vd({}, Zw, t, e);
  })}); var qw=/* #__PURE__*/function(_Mw) {
    _inherits(qw, _Mw); var _super178=_createSuper(qw); function qw() {
      _classCallCheck(this, qw); return _super178.call(this);
    }_createClass(qw, [{key: 'readFromNode', value: function readFromNode(t) {
      var e=vd({}, Nw, t, []); return e||null;
    }}]); return qw;
  }(Mw); function Hw(t, e, i) {
    var n; i=i||1e5; var r=new Array(e); for (n=0; n<e; ++n)r[n]=0; for (var _i315=0, _s170=t.length; _i315<_s170;) {
      for (n=0; n<e; ++n, ++_i315) {
        var _e405=t[_i315]; var _s171=_e405-r[n]; r[n]=_e405, t[_i315]=_s171;
      }
    } return Jw(t, i);
  } function $w(t, e, i) {
    var n; i=i||1e5; var r=new Array(e); for (n=0; n<e; ++n)r[n]=0; var s=Qw(t, i); for (var _t408=0, _i316=s.length; _t408<_i316;) for (n=0; n<e; ++n, ++_t408)r[n]+=s[_t408], s[_t408]=r[n]; return s;
  } function Jw(t, e) {
    e=e||1e5; for (var _i317=0, _n284=t.length; _i317<_n284; ++_i317)t[_i317]=Math.round(t[_i317]*e); return tT(t);
  } function Qw(t, e) {
    e=e||1e5; var i=eT(t); for (var _t409=0, _n285=i.length; _t409<_n285; ++_t409)i[_t409]/=e; return i;
  } function tT(t) {
    for (var _e406=0, _i318=t.length; _e406<_i318; ++_e406) {
      var _i319=t[_e406]; t[_e406]=_i319<0?~(_i319<<1):_i319<<1;
    } return iT(t);
  } function eT(t) {
    var e=nT(t); for (var _t410=0, _i320=e.length; _t410<_i320; ++_t410) {
      var _i321=e[_t410]; e[_t410]=1&_i321?~(_i321>>1):_i321>>1;
    } return e;
  } function iT(t) {
    var e=''; for (var _i322=0, _n286=t.length; _i322<_n286; ++_i322)e+=rT(t[_i322]); return e;
  } function nT(t) {
    var e=[]; var i=0; var n=0; for (var _r228=0, _s172=t.length; _r228<_s172; ++_r228) {
      var _s173=t.charCodeAt(_r228)-63; i|=(31&_s173)<<n, _s173<32?(e.push(i), i=0, n=0):n+=5;
    } return e;
  } function rT(t) {
    var e; var i=''; for (;t>=32;)e=63+(32|31&t), i+=String.fromCharCode(e), t>>=5; return e=t+63, i+=String.fromCharCode(e), i;
  } var sT=/* #__PURE__*/function(_vv2) {
    _inherits(sT, _vv2); var _super179=_createSuper(sT); function sT(t) {
      var _this206; _classCallCheck(this, sT); _this206=_super179.call(this), t=t||{}, _this206.dataProjection=an('EPSG:4326'), _this206.factor_=t.factor?t.factor:1e5, _this206.geometryLayout_=t.geometryLayout?t.geometryLayout:'XY'; return _this206;
    }_createClass(sT, [{key: 'readFeatureFromText', value: function readFeatureFromText(t, e) {
      var i=this.readGeometryFromText(t, e); return new Ot(i);
    }}, {key: 'readFeaturesFromText', value: function readFeaturesFromText(t, e) {
      return [this.readFeatureFromText(t, e)];
    }}, {key: 'readGeometryFromText', value: function readGeometryFromText(t, e) {
      var i=Dn(this.geometryLayout_); var n=$w(t, i, this.factor_); $y(n, 0, n.length, i, n); var r=nr(n, 0, n.length, i); return p_(new zm(r, this.geometryLayout_), !1, this.adaptOptions(e));
    }}, {key: 'writeFeatureText', value: function writeFeatureText(t, e) {
      var i=t.getGeometry(); return i?this.writeGeometryText(i, e):(Ft(!1, 40), '');
    }}, {key: 'writeFeaturesText', value: function writeFeaturesText(t, e) {
      return this.writeFeatureText(t[0], e);
    }}, {key: 'writeGeometryText', value: function writeGeometryText(t, e) {
      var i=(t=p_(t, !0, this.adaptOptions(e))).getFlatCoordinates(); var n=t.getStride(); return $y(i, 0, i.length, n, i), Hw(i, n, this.factor_);
    }}]); return sT;
  }(vv); var oT={Point: function Point(t, e, i) {
    var n=t.coordinates; e&&i&&uT(n, e, i); return new dr(n);
  }, LineString: function LineString(t, e) {
    var i=aT(t.arcs, e); return new zm(i);
  }, Polygon: function Polygon(t, e) {
    var i=[]; for (var _n287=0, _r229=t.arcs.length; _n287<_r229; ++_n287)i[_n287]=aT(t.arcs[_n287], e); return new Ar(i);
  }, MultiPoint: function MultiPoint(t, e, i) {
    var n=t.coordinates; if (e&&i) for (var _t411=0, _r230=n.length; _t411<_r230; ++_t411)uT(n[_t411], e, i); return new Wm(n);
  }, MultiLineString: function MultiLineString(t, e) {
    var i=[]; for (var _n288=0, _r231=t.arcs.length; _n288<_r231; ++_n288)i[_n288]=aT(t.arcs[_n288], e); return new Xm(i);
  }, MultiPolygon: function MultiPolygon(t, e) {
    var i=[]; for (var _n289=0, _r232=t.arcs.length; _n289<_r232; ++_n289) {
      var _r233=t.arcs[_n289]; var _s174=[]; for (var _t412=0, _i323=_r233.length; _t412<_i323; ++_t412)_s174[_t412]=aT(_r233[_t412], e); i[_n289]=_s174;
    } return new Km(i);
  }}; function aT(t, e) {
    var i=[]; var n; for (var _r234=0, _s175=t.length; _r234<_s175; ++_r234) {
      if (n=t[_r234], _r234>0&&i.pop(), n>=0) {
        var _t413=e[n]; for (var _e407=0, _n290=_t413.length; _e407<_n290; ++_e407)i.push(_t413[_e407].slice(0));
      } else {
        var _t414=e[~n]; for (var _e408=_t414.length-1; _e408>=0; --_e408)i.push(_t414[_e408].slice(0));
      }
    } return i;
  } function lT(t, e, i, n, r, s, o) {
    var a=t.geometries; var l=[]; for (var _t415=0, _h51=a.length; _t415<_h51; ++_t415)l[_t415]=hT(a[_t415], e, i, n, r, s, o); return l;
  } function hT(t, e, i, n, r, s, o) {
    var a=null; var l=t.type; if (l) {
      var _r235=oT[l]; a='Point'===l||'MultiPoint'===l?_r235(t, i, n):_r235(t, e), a=p_(a, !1, o);
    } var h=new Ot({geometry: a}); void 0!==t.id&&h.setId(t.id); var c=t.properties; return r&&(c||(c={}), c[r]=s), c&&h.setProperties(c, !0), h;
  } function cT(t, e, i) {
    var n=0; var r=0; for (var _s176=0, _o142=t.length; _s176<_o142; ++_s176) {
      var _o143=t[_s176]; n+=_o143[0], r+=_o143[1], _o143[0]=n, _o143[1]=r, uT(_o143, e, i);
    }
  } function uT(t, e, i) {
    t[0]=t[0]*e[0]+i[0], t[1]=t[1]*e[1]+i[1];
  } var dT=/* #__PURE__*/function(_Qy3) {
    _inherits(dT, _Qy3); var _super180=_createSuper(dT); function dT(t) {
      var _this207; _classCallCheck(this, dT); _this207=_super180.call(this), t=t||{}, _this207.layerName_=t.layerName, _this207.layers_=t.layers?t.layers:null, _this207.dataProjection=an(t.dataProjection?t.dataProjection:'EPSG:4326'); return _this207;
    }_createClass(dT, [{key: 'readFeaturesFromObject', value: function readFeaturesFromObject(t, e) {
      if ('Topology'==t.type) {
        var _i324=t; var _n291; var _r236=null; var _s177=null; _i324.transform&&(_n291=_i324.transform, _r236=_n291.scale, _s177=_n291.translate); var _o144=_i324.arcs; _n291&&function(t, e, i) {
          for (var _n292=0, _r237=t.length; _n292<_r237; ++_n292)cT(t[_n292], e, i);
        }(_o144, _r236, _s177); var _a94=[]; var _l59=_i324.objects; var _h52=this.layerName_; var _c35; for (var _t416 in _l59) this.layers_&&!this.layers_.includes(_t416)||('GeometryCollection'===_l59[_t416].type?(_c35=_l59[_t416], _a94.push.apply(_a94, lT(_c35, _o144, _r236, _s177, _h52, _t416, e))):(_c35=_l59[_t416], _a94.push(hT(_c35, _o144, _r236, _s177, _h52, _t416, e)))); return _a94;
      } return [];
    }}, {key: 'readProjectionFromObject', value: function readProjectionFromObject(t) {
      return this.dataProjection;
    }}]); return dT;
  }(Qy); var gT=/* #__PURE__*/function() {
    function gT(t) {
      _classCallCheck(this, gT); this.tagName_=t;
    }_createClass(gT, [{key: 'getTagName', value: function getTagName() {
      return this.tagName_;
    }}]); return gT;
  }(); var fT=/* #__PURE__*/function(_gT) {
    _inherits(fT, _gT); var _super181=_createSuper(fT); function fT(t, e) {
      var _this208; _classCallCheck(this, fT); _this208=_super181.call(this, t), _this208.conditions=e, Ft(_this208.conditions.length>=2, 57); return _this208;
    } return _createClass(fT);
  }(gT); var pT=/* #__PURE__*/function(_fT) {
    _inherits(pT, _fT); var _super182=_createSuper(pT); function pT(t) {
      _classCallCheck(this, pT); return _super182.call(this, 'And', Array.prototype.slice.call(arguments));
    } return _createClass(pT);
  }(fT); var mT=/* #__PURE__*/function(_gT2) {
    _inherits(mT, _gT2); var _super183=_createSuper(mT); function mT(t, e, i) {
      var _this209; _classCallCheck(this, mT); if (_this209=_super183.call(this, 'BBOX'), _this209.geometryName=t, _this209.extent=e, 4!==e.length) throw new Error('Expected an extent with four values ([minX, minY, maxX, maxY])'); _this209.srsName=i; return _possibleConstructorReturn(_this209);
    } return _createClass(mT);
  }(gT); var _T=/* #__PURE__*/function(_gT3) {
    _inherits(_T, _gT3); var _super184=_createSuper(_T); function _T(t, e, i, n) {
      var _this210; _classCallCheck(this, _T); _this210=_super184.call(this, t), _this210.geometryName=e||'the_geom', _this210.geometry=i, _this210.srsName=n; return _this210;
    } return _createClass(_T);
  }(gT); var yT=/* #__PURE__*/function(_T5) {
    _inherits(yT, _T5); var _super185=_createSuper(yT); function yT(t, e, i) {
      _classCallCheck(this, yT); return _super185.call(this, 'Contains', t, e, i);
    } return _createClass(yT);
  }(_T); var xT=/* #__PURE__*/function(_T6) {
    _inherits(xT, _T6); var _super186=_createSuper(xT); function xT(t, e, i, n, r) {
      var _this211; _classCallCheck(this, xT); _this211=_super186.call(this, 'DWithin', t, e, r), _this211.distance=i, _this211.unit=n; return _this211;
    } return _createClass(xT);
  }(_T); var vT=/* #__PURE__*/function(_T7) {
    _inherits(vT, _T7); var _super187=_createSuper(vT); function vT(t, e, i) {
      _classCallCheck(this, vT); return _super187.call(this, 'Disjoint', t, e, i);
    } return _createClass(vT);
  }(_T); var ST=/* #__PURE__*/function(_gT4) {
    _inherits(ST, _gT4); var _super188=_createSuper(ST); function ST(t, e) {
      var _this212; _classCallCheck(this, ST); _this212=_super188.call(this, t), _this212.propertyName=e; return _this212;
    } return _createClass(ST);
  }(gT); var wT=/* #__PURE__*/function(_ST) {
    _inherits(wT, _ST); var _super189=_createSuper(wT); function wT(t, e, i) {
      var _this213; _classCallCheck(this, wT); _this213=_super189.call(this, 'During', t), _this213.begin=e, _this213.end=i; return _this213;
    } return _createClass(wT);
  }(ST); var TT=/* #__PURE__*/function(_ST2) {
    _inherits(TT, _ST2); var _super190=_createSuper(TT); function TT(t, e, i, n) {
      var _this214; _classCallCheck(this, TT); _this214=_super190.call(this, t, e), _this214.expression=i, _this214.matchCase=n; return _this214;
    } return _createClass(TT);
  }(ST); var ET=/* #__PURE__*/function(_TT) {
    _inherits(ET, _TT); var _super191=_createSuper(ET); function ET(t, e, i) {
      _classCallCheck(this, ET); return _super191.call(this, 'PropertyIsEqualTo', t, e, i);
    } return _createClass(ET);
  }(TT); var CT=/* #__PURE__*/function(_TT2) {
    _inherits(CT, _TT2); var _super192=_createSuper(CT); function CT(t, e) {
      _classCallCheck(this, CT); return _super192.call(this, 'PropertyIsGreaterThan', t, e);
    } return _createClass(CT);
  }(TT); var RT=/* #__PURE__*/function(_TT3) {
    _inherits(RT, _TT3); var _super193=_createSuper(RT); function RT(t, e) {
      _classCallCheck(this, RT); return _super193.call(this, 'PropertyIsGreaterThanOrEqualTo', t, e);
    } return _createClass(RT);
  }(TT); var bT=/* #__PURE__*/function(_T8) {
    _inherits(bT, _T8); var _super194=_createSuper(bT); function bT(t, e, i) {
      _classCallCheck(this, bT); return _super194.call(this, 'Intersects', t, e, i);
    } return _createClass(bT);
  }(_T); var PT=/* #__PURE__*/function(_ST3) {
    _inherits(PT, _ST3); var _super195=_createSuper(PT); function PT(t, e, i) {
      var _this215; _classCallCheck(this, PT); _this215=_super195.call(this, 'PropertyIsBetween', t), _this215.lowerBoundary=e, _this215.upperBoundary=i; return _this215;
    } return _createClass(PT);
  }(ST); var IT=/* #__PURE__*/function(_ST4) {
    _inherits(IT, _ST4); var _super196=_createSuper(IT); function IT(t, e, i, n, r, s) {
      var _this216; _classCallCheck(this, IT); _this216=_super196.call(this, 'PropertyIsLike', t), _this216.pattern=e, _this216.wildCard=void 0!==i?i:'*', _this216.singleChar=void 0!==n?n:'.', _this216.escapeChar=void 0!==r?r:'!', _this216.matchCase=s; return _this216;
    } return _createClass(IT);
  }(ST); var LT=/* #__PURE__*/function(_ST5) {
    _inherits(LT, _ST5); var _super197=_createSuper(LT); function LT(t) {
      _classCallCheck(this, LT); return _super197.call(this, 'PropertyIsNull', t);
    } return _createClass(LT);
  }(ST); var FT=/* #__PURE__*/function(_TT4) {
    _inherits(FT, _TT4); var _super198=_createSuper(FT); function FT(t, e) {
      _classCallCheck(this, FT); return _super198.call(this, 'PropertyIsLessThan', t, e);
    } return _createClass(FT);
  }(TT); var MT=/* #__PURE__*/function(_TT5) {
    _inherits(MT, _TT5); var _super199=_createSuper(MT); function MT(t, e) {
      _classCallCheck(this, MT); return _super199.call(this, 'PropertyIsLessThanOrEqualTo', t, e);
    } return _createClass(MT);
  }(TT); var AT=/* #__PURE__*/function(_gT5) {
    _inherits(AT, _gT5); var _super200=_createSuper(AT); function AT(t) {
      var _this217; _classCallCheck(this, AT); _this217=_super200.call(this, 'Not'), _this217.condition=t; return _this217;
    } return _createClass(AT);
  }(gT); var OT=/* #__PURE__*/function(_TT6) {
    _inherits(OT, _TT6); var _super201=_createSuper(OT); function OT(t, e, i) {
      _classCallCheck(this, OT); return _super201.call(this, 'PropertyIsNotEqualTo', t, e, i);
    } return _createClass(OT);
  }(TT); var NT=/* #__PURE__*/function(_fT2) {
    _inherits(NT, _fT2); var _super202=_createSuper(NT); function NT(t) {
      _classCallCheck(this, NT); return _super202.call(this, 'Or', Array.prototype.slice.call(arguments));
    } return _createClass(NT);
  }(fT); var DT=/* #__PURE__*/function(_gT6) {
    _inherits(DT, _gT6); var _super203=_createSuper(DT); function DT(t) {
      var _this218; _classCallCheck(this, DT); _this218=_super203.call(this, 'ResourceId'), _this218.rid=t; return _this218;
    } return _createClass(DT);
  }(gT); var GT=/* #__PURE__*/function(_T9) {
    _inherits(GT, _T9); var _super204=_createSuper(GT); function GT(t, e, i) {
      _classCallCheck(this, GT); return _super204.call(this, 'Within', t, e, i);
    } return _createClass(GT);
  }(_T); function kT(t) {
    var e=[null].concat(Array.prototype.slice.call(arguments)); return new(Function.prototype.bind.apply(pT, e))();
  } function jT(t, e, i) {
    return new mT(t, e, i);
  } var BT={'http://www.opengis.net/gml': {boundedBy: dd(ux.prototype.readExtentElement, 'bounds')}, 'http://www.opengis.net/wfs/2.0': {member: hd(ux.prototype.readFeaturesInternal)}}; var zT={'http://www.opengis.net/wfs': {totalInserted: dd(_x), totalUpdated: dd(_x), totalDeleted: dd(_x)}, 'http://www.opengis.net/wfs/2.0': {totalInserted: dd(_x), totalUpdated: dd(_x), totalDeleted: dd(_x)}}; var UT={'http://www.opengis.net/wfs': {TransactionSummary: dd(QT, 'transactionSummary'), InsertResults: dd(nE, 'insertIds')}, 'http://www.opengis.net/wfs/2.0': {TransactionSummary: dd(QT, 'transactionSummary'), InsertResults: dd(nE, 'insertIds')}}; var XT={'http://www.opengis.net/wfs': {PropertyName: gd(Cx)}, 'http://www.opengis.net/wfs/2.0': {PropertyName: gd(Cx)}}; var VT={'http://www.opengis.net/wfs': {Insert: gd(rE), Update: gd(lE), Delete: gd(aE), Property: gd(hE), Native: gd(cE)}, 'http://www.opengis.net/wfs/2.0': {Insert: gd(rE), Update: gd(lE), Delete: gd(aE), Property: gd(hE), Native: gd(cE)}}; var WT='feature'; var ZT='http://www.w3.org/2000/xmlns/'; var YT={'2.0.0': 'http://www.opengis.net/ogc/1.1', '1.1.0': 'http://www.opengis.net/ogc', '1.0.0': 'http://www.opengis.net/ogc'}; var KT={'2.0.0': 'http://www.opengis.net/wfs/2.0', '1.1.0': 'http://www.opengis.net/wfs', '1.0.0': 'http://www.opengis.net/wfs'}; var qT={'2.0.0': 'http://www.opengis.net/fes/2.0', '1.1.0': 'http://www.opengis.net/fes', '1.0.0': 'http://www.opengis.net/fes'}; var HT={'2.0.0': 'http://www.opengis.net/wfs/2.0 http://schemas.opengis.net/wfs/2.0/wfs.xsd', '1.1.0': 'http://www.opengis.net/wfs http://schemas.opengis.net/wfs/1.1.0/wfs.xsd', '1.0.0': 'http://www.opengis.net/wfs http://schemas.opengis.net/wfs/1.0.0/wfs.xsd'}; var $T={'2.0.0': Nx, '1.1.0': Fx, '1.0.0': Px}; function JT(t, e, i, n) {
    wd(n, VT, pd(t), e, i);
  } function QT(t, e) {
    return vd({}, zT, t, e);
  } var tE={'http://www.opengis.net/ogc': {FeatureId: hd(function(t, e) {
    return t.getAttribute('fid');
  })}, 'http://www.opengis.net/ogc/1.1': {FeatureId: hd(function(t, e) {
    return t.getAttribute('fid');
  })}}; function eE(t, e) {
    xd(tE, t, e);
  } var iE={'http://www.opengis.net/wfs': {Feature: eE}, 'http://www.opengis.net/wfs/2.0': {Feature: eE}}; function nE(t, e) {
    return vd([], iE, t, e);
  } function rE(t, e, i) {
    var n=i[i.length-1]; var r=n.featureType; var s=n.featureNS; var o=n.gmlVersion; var a=id(s, r); t.appendChild(a), 2===o?Px.prototype.writeFeatureElement(a, e, i):3===o?Fx.prototype.writeFeatureElement(a, e, i):Nx.prototype.writeFeatureElement(a, e, i);
  } function sE(t, e, i) {
    var n=i[i.length-1].version; var r=YT[n]; var s=id(r, 'Filter'); var o=id(r, 'FeatureId'); s.appendChild(o), o.setAttribute('fid', e), t.appendChild(s);
  } function oE(t, e) {
    var i=(t=t||WT)+':'; return e.startsWith(i)?e:i+e;
  } function aE(t, e, i) {
    var n=i[i.length-1]; Ft(void 0!==e.getId(), 26); var r=n.featureType; var s=n.featurePrefix; var o=n.featureNS; var a=oE(s, r); t.setAttribute('typeName', a), t.setAttributeNS(ZT, 'xmlns:'+s, o); var l=e.getId(); void 0!==l&&sE(t, l, i);
  } function lE(t, e, i) {
    var n=i[i.length-1]; Ft(void 0!==e.getId(), 27); var r=n.version; var s=n.featureType; var o=n.featurePrefix; var a=n.featureNS; var l=oE(o, s); var h=e.getGeometryName(); t.setAttribute('typeName', l), t.setAttributeNS(ZT, 'xmlns:'+o, a); var c=e.getId(); if (void 0!==c) {
      var _s178=e.getKeys(); var _o145=[]; for (var _t417=0, _i325=_s178.length; _t417<_i325; _t417++) {
        var _i326=e.get(_s178[_t417]); if (void 0!==_i326) {
          var _e409=_s178[_t417]; _i326&&'function'==typeof _i326.getSimplifiedGeometry&&(_e409=h), _o145.push({name: _e409, value: _i326});
        }
      }wd({version: r, gmlVersion: n.gmlVersion, node: t, hasZ: n.hasZ, srsName: n.srsName}, VT, pd('Property'), _o145, i), sE(t, c, i);
    }
  } function hE(t, e, i) {
    var n=i[i.length-1]; var r=n.version; var s=KT[r]; var o=id(s, 'Name'); var a=n.gmlVersion; if (t.appendChild(o), Cx(o, e.name), void 0!==e.value&&null!==e.value) {
      var _n293=id(s, 'Value'); t.appendChild(_n293), e.value&&'function'==typeof e.value.getSimplifiedGeometry?2===a?Px.prototype.writeGeometryElement(_n293, e.value, i):3===a?Fx.prototype.writeGeometryElement(_n293, e.value, i):Nx.prototype.writeGeometryElement(_n293, e.value, i):Cx(_n293, e.value);
    }
  } function cE(t, e, i) {
    e.vendorId&&t.setAttribute('vendorId', e.vendorId), void 0!==e.safeToIgnore&&t.setAttribute('safeToIgnore', String(e.safeToIgnore)), void 0!==e.value&&Cx(t, e.value);
  } var uE={'http://www.opengis.net/wfs': {Query: gd(dE)}, 'http://www.opengis.net/wfs/2.0': {Query: gd(dE)}, 'http://www.opengis.net/ogc': {During: gd(_E), And: gd(yE), Or: gd(yE), Not: gd(xE), BBOX: gd(fE), Contains: gd(pE), Intersects: gd(pE), Within: gd(pE), DWithin: gd(mE), PropertyIsEqualTo: gd(vE), PropertyIsNotEqualTo: gd(vE), PropertyIsLessThan: gd(vE), PropertyIsLessThanOrEqualTo: gd(vE), PropertyIsGreaterThan: gd(vE), PropertyIsGreaterThanOrEqualTo: gd(vE), PropertyIsNull: gd(SE), PropertyIsBetween: gd(wE), PropertyIsLike: gd(TE)}, 'http://www.opengis.net/fes/2.0': {During: gd(_E), And: gd(yE), Or: gd(yE), Not: gd(xE), BBOX: gd(fE), Contains: gd(pE), Disjoint: gd(pE), Intersects: gd(pE), ResourceId: gd(function(t, e, i) {
    t.setAttribute('rid', e.rid);
  }), Within: gd(pE), DWithin: gd(mE), PropertyIsEqualTo: gd(vE), PropertyIsNotEqualTo: gd(vE), PropertyIsLessThan: gd(vE), PropertyIsLessThanOrEqualTo: gd(vE), PropertyIsGreaterThan: gd(vE), PropertyIsGreaterThanOrEqualTo: gd(vE), PropertyIsNull: gd(SE), PropertyIsBetween: gd(wE), PropertyIsLike: gd(TE)}}; function dE(t, e, i) {
    var n=i[i.length-1]; var r=n.version; var s=n.featurePrefix; var o=n.featureNS; var a=n.propertyNames; var l=n.srsName; var h; var c; h=s?oE(s, e):e, c='2.0.0'===r?'typeNames':'typeName', t.setAttribute(c, h), l&&t.setAttribute('srsName', l), o&&t.setAttributeNS(ZT, 'xmlns:'+s, o); var u=Object.assign({}, n); u.node=t, wd(u, XT, pd('PropertyName'), a, i); var d=n.filter; if (d) {
      var _e410=id(IE(r), 'Filter'); t.appendChild(_e410), gE(_e410, d, i);
    }
  } function gE(t, e, i) {
    var n=i[i.length-1]; var r={node: t}; Object.assign(r, {context: n}), wd(r, uE, pd(e.getTagName()), [e], i);
  } function fE(t, e, i) {
    var n=i[i.length-1]; var r=n.context.version; n.srsName=e.srsName; var s=$T[r]; RE(r, t, e.geometryName), s.prototype.writeGeometryElement(t, e.extent, i);
  } function pE(t, e, i) {
    var n=i[i.length-1]; var r=n.context.version; n.srsName=e.srsName; var s=$T[r]; RE(r, t, e.geometryName), s.prototype.writeGeometryElement(t, e.geometry, i);
  } function mE(t, e, i) {
    var n=i[i.length-1].context.version; pE(t, e, i); var r=id(IE(n), 'Distance'); Cx(r, e.distance.toString()), '2.0.0'===n?r.setAttribute('uom', e.unit):r.setAttribute('units', e.unit), t.appendChild(r);
  } function _E(t, e, i) {
    var n=i[i.length-1].context.version; EE(qT[n], 'ValueReference', t, e.propertyName); var r=id(lx, 'TimePeriod'); t.appendChild(r); var s=id(lx, 'begin'); r.appendChild(s), bE(s, e.begin); var o=id(lx, 'end'); r.appendChild(o), bE(o, e.end);
  } function yE(t, e, i) {
    var n=i[i.length-1].context; var r={node: t}; Object.assign(r, {context: n}); var s=e.conditions; for (var _t418=0, _e411=s.length; _t418<_e411; ++_t418) {
      var _e412=s[_t418]; wd(r, uE, pd(_e412.getTagName()), [_e412], i);
    }
  } function xE(t, e, i) {
    var n=i[i.length-1].context; var r={node: t}; Object.assign(r, {context: n}); var s=e.condition; wd(r, uE, pd(s.getTagName()), [s], i);
  } function vE(t, e, i) {
    var n=i[i.length-1].context.version; void 0!==e.matchCase&&t.setAttribute('matchCase', e.matchCase.toString()), RE(n, t, e.propertyName), CE(n, t, ''+e.expression);
  } function SE(t, e, i) {
    RE(i[i.length-1].context.version, t, e.propertyName);
  } function wE(t, e, i) {
    var n=i[i.length-1].context.version; var r=IE(n); RE(n, t, e.propertyName); var s=id(r, 'LowerBoundary'); t.appendChild(s), CE(n, s, ''+e.lowerBoundary); var o=id(r, 'UpperBoundary'); t.appendChild(o), CE(n, o, ''+e.upperBoundary);
  } function TE(t, e, i) {
    var n=i[i.length-1].context.version; t.setAttribute('wildCard', e.wildCard), t.setAttribute('singleChar', e.singleChar), t.setAttribute('escapeChar', e.escapeChar), void 0!==e.matchCase&&t.setAttribute('matchCase', e.matchCase.toString()), RE(n, t, e.propertyName), CE(n, t, ''+e.pattern);
  } function EE(t, e, i, n) {
    var r=id(t, e); Cx(r, n), i.appendChild(r);
  } function CE(t, e, i) {
    EE(IE(t), 'Literal', e, i);
  } function RE(t, e, i) {
'2.0.0'===t?EE(qT[t], 'ValueReference', e, i):EE(YT[t], 'PropertyName', e, i);
  } function bE(t, e) {
    var i=id(lx, 'TimeInstant'); t.appendChild(i); var n=id(lx, 'timePosition'); i.appendChild(n), Cx(n, e);
  } function PE(t, e, i) {
    var n=i[i.length-1]; var r=Object.assign({}, n); r.node=t, wd(r, uE, pd('Query'), e, i);
  } function IE(t) {
    var e; return e='2.0.0'===t?qT[t]:YT[t], e;
  } var LE=/* #__PURE__*/function(_ax5) {
    _inherits(LE, _ax5); var _super205=_createSuper(LE); function LE(t) {
      var _this219; _classCallCheck(this, LE); _this219=_super205.call(this), t=t||{}, _this219.version_=t.version?t.version:'1.1.0', _this219.featureType_=t.featureType, _this219.featureNS_=t.featureNS, _this219.gmlFormat_=t.gmlFormat?t.gmlFormat:new $T[_this219.version_](), _this219.schemaLocation_=t.schemaLocation?t.schemaLocation:HT[_this219.version_]; return _this219;
    }_createClass(LE, [{key: 'getFeatureType', value: function getFeatureType() {
      return this.featureType_;
    }}, {key: 'setFeatureType', value: function setFeatureType(t) {
      this.featureType_=t;
    }}, {key: 'readFeaturesFromNode', value: function readFeaturesFromNode(t, e) {
      var i={node: t}; Object.assign(i, {featureType: this.featureType_, featureNS: this.featureNS_}), Object.assign(i, this.getReadOptions(t, e||{})); var n=[i]; var r; r='2.0.0'===this.version_?BT:this.gmlFormat_.FEATURE_COLLECTION_PARSERS; var s=vd([], r, t, n, this.gmlFormat_); return s||(s=[]), s;
    }}, {key: 'readTransactionResponse', value: function readTransactionResponse(t) {
      if (t) {
        if ('string'==typeof t) {
          var _e413=ad(t); return this.readTransactionResponseFromDocument(_e413);
        } return sd(t)?this.readTransactionResponseFromDocument(t):this.readTransactionResponseFromNode(t);
      }
    }}, {key: 'readFeatureCollectionMetadata', value: function readFeatureCollectionMetadata(t) {
      if (t) {
        if ('string'==typeof t) {
          var _e414=ad(t); return this.readFeatureCollectionMetadataFromDocument(_e414);
        } return sd(t)?this.readFeatureCollectionMetadataFromDocument(t):this.readFeatureCollectionMetadataFromNode(t);
      }
    }}, {key: 'readFeatureCollectionMetadataFromDocument', value: function readFeatureCollectionMetadataFromDocument(t) {
      for (var _e415=t.firstChild; _e415; _e415=_e415.nextSibling) if (_e415.nodeType==Node.ELEMENT_NODE) return this.readFeatureCollectionMetadataFromNode(_e415);
    }}, {key: 'readFeatureCollectionMetadataFromNode', value: function readFeatureCollectionMetadataFromNode(t) {
      var e={}; var i=yx(t.getAttribute('numberOfFeatures')); return e.numberOfFeatures=i, vd(e, BT, t, [], this.gmlFormat_);
    }}, {key: 'readTransactionResponseFromDocument', value: function readTransactionResponseFromDocument(t) {
      for (var _e416=t.firstChild; _e416; _e416=_e416.nextSibling) if (_e416.nodeType==Node.ELEMENT_NODE) return this.readTransactionResponseFromNode(_e416);
    }}, {key: 'readTransactionResponseFromNode', value: function readTransactionResponseFromNode(t) {
      return vd({}, UT, t, []);
    }}, {key: 'writeGetFeature', value: function writeGetFeature(t) {
      var _this220=this; var e=id(KT[this.version_], 'GetFeature'); e.setAttribute('service', 'WFS'), e.setAttribute('version', this.version_), t.handle&&e.setAttribute('handle', t.handle), t.outputFormat&&e.setAttribute('outputFormat', t.outputFormat), void 0!==t.maxFeatures&&e.setAttribute('maxFeatures', String(t.maxFeatures)), t.resultType&&e.setAttribute('resultType', t.resultType), void 0!==t.startIndex&&e.setAttribute('startIndex', String(t.startIndex)), void 0!==t.count&&e.setAttribute('count', String(t.count)), void 0!==t.viewParams&&e.setAttribute('viewParams', t.viewParams), e.setAttributeNS(ed, 'xsi:schemaLocation', this.schemaLocation_); var i={node: e}; if (Object.assign(i, {version: this.version_, srsName: t.srsName, featureNS: t.featureNS?t.featureNS:this.featureNS_, featurePrefix: t.featurePrefix, propertyNames: t.propertyNames?t.propertyNames:[]}), Ft(Array.isArray(t.featureTypes), 11), 'string'==typeof t.featureTypes[0]) {
        var _n294=t.filter; t.bbox&&(Ft(t.geometryName, 12), _n294=this.combineBboxAndFilter(t.geometryName, t.bbox, t.srsName, _n294)), Object.assign(i, {geometryName: t.geometryName, filter: _n294}), PE(e, t.featureTypes, [i]);
      } else {
        t.featureTypes.forEach(function(n) {
          var r=_this220.combineBboxAndFilter(n.geometryName, n.bbox, t.srsName, t.filter); Object.assign(i, {geometryName: n.geometryName, filter: r}), PE(e, [n.name], [i]);
        });
      } return e;
    }}, {key: 'combineBboxAndFilter', value: function combineBboxAndFilter(t, e, i, n) {
      var r=jT(t, e, i); return n?kT(n, r):r;
    }}, {key: 'writeTransaction', value: function writeTransaction(t, e, i, n) {
      var r=[]; var s=n.version?n.version:this.version_; var o=id(KT[s], 'Transaction'); var a; o.setAttribute('service', 'WFS'), o.setAttribute('version', s), n&&(a=n.gmlOptions?n.gmlOptions:{}, n.handle&&o.setAttribute('handle', n.handle)), o.setAttributeNS(ed, 'xsi:schemaLocation', HT[s]); var l=function(t, e, i, n) {
        var r=n.featurePrefix?n.featurePrefix:WT; var s; '1.0.0'===i?s=2:'1.1.0'===i?s=3:'2.0.0'===i&&(s=3.2); return Object.assign({node: t}, {version: i, featureNS: n.featureNS, featureType: n.featureType, featurePrefix: r, gmlVersion: s, hasZ: n.hasZ, srsName: n.srsName}, e);
      }(o, a, s, n); return t&&JT('Insert', t, r, l), e&&JT('Update', e, r, l), i&&JT('Delete', i, r, l), n.nativeElements&&JT('Native', n.nativeElements, r, l), o;
    }}, {key: 'readProjectionFromDocument', value: function readProjectionFromDocument(t) {
      for (var _e417=t.firstChild; _e417; _e417=_e417.nextSibling) if (_e417.nodeType==Node.ELEMENT_NODE) return this.readProjectionFromNode(_e417); return null;
    }}, {key: 'readProjectionFromNode', value: function readProjectionFromNode(t) {
      if (t.firstElementChild&&t.firstElementChild.firstElementChild) {
        for (var _e418=(t=t.firstElementChild.firstElementChild).firstElementChild; _e418; _e418=_e418.nextElementSibling) {
          if (0!==_e418.childNodes.length&&(1!==_e418.childNodes.length||3!==_e418.firstChild.nodeType)) {
            var _t419=[{}]; return this.gmlFormat_.readGeometryElement(_e418, _t419), an(_t419.pop().srsName);
          }
        }
      } return null;
    }}]); return LE;
  }(ax); var FE=1; var ME=2; var AE=3; var OE=4; var NE=5; var DE=6; var GE=7; var kE=15; var jE=16; var BE=17; var zE=/* #__PURE__*/function() {
    function zE(t) {
      _classCallCheck(this, zE); this.view_=t, this.pos_=0, this.initialized_=!1, this.isLittleEndian_=!1, this.hasZ_=!1, this.hasM_=!1, this.srid_=null, this.layout_='XY';
    }_createClass(zE, [{key: 'readUint8', value: function readUint8() {
      return this.view_.getUint8(this.pos_++);
    }}, {key: 'readUint32', value: function readUint32(t) {
      return this.view_.getUint32((this.pos_+=4)-4, void 0!==t?t:this.isLittleEndian_);
    }}, {key: 'readDouble', value: function readDouble(t) {
      return this.view_.getFloat64((this.pos_+=8)-8, void 0!==t?t:this.isLittleEndian_);
    }}, {key: 'readPoint', value: function readPoint() {
      var t=[]; return t.push(this.readDouble()), t.push(this.readDouble()), this.hasZ_&&t.push(this.readDouble()), this.hasM_&&t.push(this.readDouble()), t;
    }}, {key: 'readLineString', value: function readLineString() {
      var t=this.readUint32(); var e=[]; for (var _i327=0; _i327<t; _i327++)e.push(this.readPoint()); return e;
    }}, {key: 'readPolygon', value: function readPolygon() {
      var t=this.readUint32(); var e=[]; for (var _i328=0; _i328<t; _i328++)e.push(this.readLineString()); return e;
    }}, {key: 'readWkbHeader', value: function readWkbHeader(t) {
      var e=this.readUint8()>0; var i=this.readUint32(e); var n=Math.floor((268435455&i)/1e3); var r=Boolean(2147483648&i)||1===n||3===n; var s=Boolean(1073741824&i)||2===n||3===n; var o=Boolean(536870912&i); var a=(268435455&i)%1e3; var l=['XY', r?'Z':'', s?'M':''].join(''); var h=o?this.readUint32(e):null; if (void 0!==t&&t!==a) throw new Error('Unexpected WKB geometry type '+a); if (this.initialized_) {
        if (this.isLittleEndian_!==e) throw new Error('Inconsistent endian'); if (this.layout_!==l) throw new Error('Inconsistent geometry layout'); if (h&&this.srid_!==h) throw new Error('Inconsistent coordinate system (SRID)');
      } else this.isLittleEndian_=e, this.hasZ_=r, this.hasM_=s, this.layout_=l, this.srid_=h, this.initialized_=!0; return a;
    }}, {key: 'readWkbPayload', value: function readWkbPayload(t) {
      switch (t) {
        case FE: return this.readPoint(); case ME: return this.readLineString(); case AE: case BE: return this.readPolygon(); case OE: return this.readMultiPoint(); case NE: return this.readMultiLineString(); case DE: case kE: case jE: return this.readMultiPolygon(); case GE: return this.readGeometryCollection(); default: throw new Error('Unsupported WKB geometry type '+t+' is found');
      }
    }}, {key: 'readWkbBlock', value: function readWkbBlock(t) {
      return this.readWkbPayload(this.readWkbHeader(t));
    }}, {key: 'readWkbCollection', value: function readWkbCollection(t, e) {
      var i=this.readUint32(); var n=[]; for (var _r238=0; _r238<i; _r238++) {
        var _i329=t.call(this, e); _i329&&n.push(_i329);
      } return n;
    }}, {key: 'readMultiPoint', value: function readMultiPoint() {
      return this.readWkbCollection(this.readWkbBlock, FE);
    }}, {key: 'readMultiLineString', value: function readMultiLineString() {
      return this.readWkbCollection(this.readWkbBlock, ME);
    }}, {key: 'readMultiPolygon', value: function readMultiPolygon() {
      return this.readWkbCollection(this.readWkbBlock, AE);
    }}, {key: 'readGeometryCollection', value: function readGeometryCollection() {
      return this.readWkbCollection(this.readGeometry);
    }}, {key: 'readGeometry', value: function readGeometry() {
      var t=this.readWkbHeader(); var e=this.readWkbPayload(t); switch (t) {
        case FE: return new dr(e, this.layout_); case ME: return new zm(e, this.layout_); case AE: case BE: return new Ar(e, this.layout_); case OE: return new Wm(e, this.layout_); case NE: return new Xm(e, this.layout_); case DE: case kE: case jE: return new Km(e, this.layout_); case GE: return new Dm(e); default: return null;
      }
    }}, {key: 'getSrid', value: function getSrid() {
      return this.srid_;
    }}]); return zE;
  }(); var UE=/* #__PURE__*/function() {
    function UE(t) {
      _classCallCheck(this, UE); t=t||{}, this.layout_=t.layout, this.isLittleEndian_=!1!==t.littleEndian, this.isEWKB_=!1!==t.ewkb, this.writeQueue_=[], this.nodata_=Object.assign({X: 0, Y: 0, Z: 0, M: 0}, t.nodata);
    }_createClass(UE, [{key: 'writeUint8', value: function writeUint8(t) {
      this.writeQueue_.push([1, t]);
    }}, {key: 'writeUint32', value: function writeUint32(t) {
      this.writeQueue_.push([4, t]);
    }}, {key: 'writeDouble', value: function writeDouble(t) {
      this.writeQueue_.push([8, t]);
    }}, {key: 'writePoint', value: function writePoint(t, e) {
      var i=Object.assign.apply(null, e.split('').map(function(e, i) {
        return _defineProperty({}, e, t[i]);
      })); var _iterator=_createForOfIteratorHelper(this.layout_); var _step; try {
        for (_iterator.s(); !(_step=_iterator.n()).done;) {
          var _t420=_step.value; this.writeDouble(_t420 in i?i[_t420]:this.nodata_[_t420]);
        }
      } catch (err) {
        _iterator.e(err);
      } finally {
        _iterator.f();
      }
    }}, {key: 'writeLineString', value: function writeLineString(t, e) {
      this.writeUint32(t.length); for (var _i330=0; _i330<t.length; _i330++) this.writePoint(t[_i330], e);
    }}, {key: 'writePolygon', value: function writePolygon(t, e) {
      this.writeUint32(t.length); for (var _i331=0; _i331<t.length; _i331++) this.writeLineString(t[_i331], e);
    }}, {key: 'writeWkbHeader', value: function writeWkbHeader(t, e) {
      t%=1e3, this.layout_.includes('Z')&&(t+=this.isEWKB_?2147483648:1e3), this.layout_.includes('M')&&(t+=this.isEWKB_?1073741824:2e3), this.isEWKB_&&Number.isInteger(e)&&(t|=536870912), this.writeUint8(this.isLittleEndian_?1:0), this.writeUint32(t), this.isEWKB_&&Number.isInteger(e)&&this.writeUint32(e);
    }}, {key: 'writeMultiPoint', value: function writeMultiPoint(t, e) {
      this.writeUint32(t.length); for (var _i332=0; _i332<t.length; _i332++) this.writeWkbHeader(1), this.writePoint(t[_i332], e);
    }}, {key: 'writeMultiLineString', value: function writeMultiLineString(t, e) {
      this.writeUint32(t.length); for (var _i333=0; _i333<t.length; _i333++) this.writeWkbHeader(2), this.writeLineString(t[_i333], e);
    }}, {key: 'writeMultiPolygon', value: function writeMultiPolygon(t, e) {
      this.writeUint32(t.length); for (var _i334=0; _i334<t.length; _i334++) this.writeWkbHeader(3), this.writePolygon(t[_i334], e);
    }}, {key: 'writeGeometryCollection', value: function writeGeometryCollection(t) {
      this.writeUint32(t.length); for (var _e419=0; _e419<t.length; _e419++) this.writeGeometry(t[_e419]);
    }}, {key: 'findMinimumLayout', value: function findMinimumLayout(t) {
      var e=arguments.length>1&&arguments[1]!==undefined?arguments[1]:'XYZM'; if (t instanceof kn) return (i=t.getLayout())===(n=e)?i:'XYZM'===i?n:'XYZM'===n?i:'XY'; var i; var n; if (t instanceof Dm) {
        var _i335=t.getGeometriesArray(); for (var _t421=0; _t421<_i335.length&&'XY'!==e; _t421++)e=this.findMinimumLayout(_i335[_t421], e);
      } return e;
    }}, {key: 'writeGeometry', value: function writeGeometry(t, e) {
      var i={Point: FE, LineString: ME, Polygon: AE, MultiPoint: OE, MultiLineString: NE, MultiPolygon: DE, GeometryCollection: GE}; var n=t.getType(); var r=i[n]; if (!r) throw new Error('GeometryType '+n+' is not supported'); if (this.layout_||(this.layout_=this.findMinimumLayout(t)), this.writeWkbHeader(r, e), t instanceof kn) {
        ({Point: this.writePoint, LineString: this.writeLineString, Polygon: this.writePolygon, MultiPoint: this.writeMultiPoint, MultiLineString: this.writeMultiLineString, MultiPolygon: this.writeMultiPolygon})[n].call(this, t.getCoordinates(), t.getLayout());
      } else t instanceof Dm&&this.writeGeometryCollection(t.getGeometriesArray());
    }}, {key: 'getBuffer', value: function getBuffer() {
      var _this221=this; var t=this.writeQueue_.reduce(function(t, e) {
        return t+e[0];
      }, 0); var e=new ArrayBuffer(t); var i=new DataView(e); var n=0; return this.writeQueue_.forEach(function(t) {
        switch (t[0]) {
          case 1: i.setUint8(n, t[1]); break; case 4: i.setUint32(n, t[1], _this221.isLittleEndian_); break; case 8: i.setFloat64(n, t[1], _this221.isLittleEndian_);
        }n+=t[0];
      }), e;
    }}]); return UE;
  }(); function XE(t) {
    return 'string'==typeof t?function(t) {
      var e=new Uint8Array(t.length/2); for (var _i336=0; _i336<t.length/2; _i336++)e[_i336]=parseInt(t.substr(2*_i336, 2), 16); return new DataView(e.buffer);
    }(t):ArrayBuffer.isView(t)?t instanceof DataView?t:new DataView(t.buffer, t.byteOffset, t.byteLength):t instanceof ArrayBuffer?new DataView(t):null;
  } var VE=/* #__PURE__*/function(_f_5) {
    _inherits(VE, _f_5); var _super206=_createSuper(VE); function VE(t) {
      var _this222; _classCallCheck(this, VE); _this222=_super206.call(this), t=t||{}, _this222.splitCollection=Boolean(t.splitCollection), _this222.viewCache_=null, _this222.hex_=!1!==t.hex, _this222.littleEndian_=!1!==t.littleEndian, _this222.ewkb_=!1!==t.ewkb, _this222.layout_=t.geometryLayout, _this222.nodataZ_=t.nodataZ||0, _this222.nodataM_=t.nodataM||0, _this222.srid_=t.srid; return _this222;
    }_createClass(VE, [{key: 'getType', value: function getType() {
      return this.hex_?'text':'arraybuffer';
    }}, {key: 'readFeature', value: function readFeature(t, e) {
      return new Ot({geometry: this.readGeometry(t, e)});
    }}, {key: 'readFeatures', value: function readFeatures(t, e) {
      var i=[]; var n=this.readGeometry(t, e); return i=this.splitCollection&&n instanceof Dm?n.getGeometriesArray():[n], i.map(function(t) {
        return new Ot({geometry: t});
      });
    }}, {key: 'readGeometry', value: function readGeometry(t, e) {
      var i=XE(t); if (!i) return null; var n=new zE(i).readGeometry(); return this.viewCache_=i, e=this.getReadOptions(t, e), this.viewCache_=null, p_(n, !1, e);
    }}, {key: 'readProjection', value: function readProjection(t) {
      var e=this.viewCache_||XE(t); if (!e) return; var i=new zE(e); return i.readWkbHeader(), i.getSrid()&&an('EPSG:'+i.getSrid())||void 0;
    }}, {key: 'writeFeature', value: function writeFeature(t, e) {
      return this.writeGeometry(t.getGeometry(), e);
    }}, {key: 'writeFeatures', value: function writeFeatures(t, e) {
      return this.writeGeometry(new Dm(t.map(function(t) {
        return t.getGeometry();
      })), e);
    }}, {key: 'writeGeometry', value: function writeGeometry(t, e) {
      e=this.adaptOptions(e); var i=new UE({layout: this.layout_, littleEndian: this.littleEndian_, ewkb: this.ewkb_, nodata: {Z: this.nodataZ_, M: this.nodataM_}}); var n=Number.isInteger(this.srid_)?Number(this.srid_):null; if (!1!==this.srid_&&!Number.isInteger(this.srid_)) {
        var _t422=e.dataProjection&&an(e.dataProjection); if (_t422) {
          var _e420=_t422.getCode(); _e420.startsWith('EPSG:')&&(n=Number(_e420.substring(5)));
        }
      }i.writeGeometry(p_(t, !0, e), n); var r=i.getBuffer(); return this.hex_?function(t) {
        var e=new Uint8Array(t); return Array.from(e.values()).map(function(t) {
          return (t<16?'0':'')+Number(t).toString(16).toUpperCase();
        }).join('');
      }(r):r;
    }}]); return VE;
  }(f_); var WE={POINT: dr, LINESTRING: zm, POLYGON: Ar, MULTIPOINT: Wm, MULTILINESTRING: Xm, MULTIPOLYGON: Km}; var ZE='EMPTY'; var YE=0; var KE=1; var qE=2; var HE=3; var $E=4; var JE=5; var QE=6; var tC={Point: 'POINT', LineString: 'LINESTRING', Polygon: 'POLYGON', MultiPoint: 'MULTIPOINT', MultiLineString: 'MULTILINESTRING', MultiPolygon: 'MULTIPOLYGON', GeometryCollection: 'GEOMETRYCOLLECTION', Circle: 'CIRCLE'}; var eC=/* #__PURE__*/function() {
    function eC(t) {
      _classCallCheck(this, eC); this.wkt=t, this.index_=-1;
    }_createClass(eC, [{key: 'isAlpha_', value: function isAlpha_(t) {
      return t>='a'&&t<='z'||t>='A'&&t<='Z';
    }}, {key: 'isNumeric_', value: function isNumeric_(t, e) {
      return e=void 0!==e&&e, t>='0'&&t<='9'||'.'==t&&!e;
    }}, {key: 'isWhiteSpace_', value: function isWhiteSpace_(t) {
      return ' '==t||'\t'==t||'\r'==t||'\n'==t;
    }}, {key: 'nextChar_', value: function nextChar_() {
      return this.wkt.charAt(++this.index_);
    }}, {key: 'nextToken', value: function nextToken() {
      var t=this.nextChar_(); var e=this.index_; var i; var n=t; if ('('==t)i=qE; else if (','==t)i=JE; else if (')'==t)i=HE; else if (this.isNumeric_(t)||'-'==t)i=$E, n=this.readNumber_(); else if (this.isAlpha_(t))i=KE, n=this.readText_(); else {
        if (this.isWhiteSpace_(t)) return this.nextToken(); if (''!==t) throw new Error('Unexpected character: '+t); i=QE;
      } return {position: e, value: n, type: i};
    }}, {key: 'readNumber_', value: function readNumber_() {
      var t; var e=this.index_; var i=!1; var n=!1; do {
'.'==t?i=!0:'e'!=t&&'E'!=t||(n=!0), t=this.nextChar_();
      } while (this.isNumeric_(t, i)||!n&&('e'==t||'E'==t)||n&&('-'==t||'+'==t)); return parseFloat(this.wkt.substring(e, this.index_--));
    }}, {key: 'readText_', value: function readText_() {
      var t; var e=this.index_; do {
        t=this.nextChar_();
      } while (this.isAlpha_(t)); return this.wkt.substring(e, this.index_--).toUpperCase();
    }}]); return eC;
  }(); var iC=/* #__PURE__*/function() {
    function iC(t) {
      _classCallCheck(this, iC); this.lexer_=t, this.token_={position: 0, type: YE}, this.layout_='XY';
    }_createClass(iC, [{key: 'consume_', value: function consume_() {
      this.token_=this.lexer_.nextToken();
    }}, {key: 'isTokenType', value: function isTokenType(t) {
      return this.token_.type==t;
    }}, {key: 'match', value: function match(t) {
      var e=this.isTokenType(t); return e&&this.consume_(), e;
    }}, {key: 'parse', value: function parse() {
      return this.consume_(), this.parseGeometry_();
    }}, {key: 'parseGeometryLayout_', value: function parseGeometryLayout_() {
      var t='XY'; var e=this.token_; if (this.isTokenType(KE)) {
        var _i337=e.value; 'Z'===_i337?t='XYZ':'M'===_i337?t='XYM':'ZM'===_i337&&(t='XYZM'), 'XY'!==t&&this.consume_();
      } return t;
    }}, {key: 'parseGeometryCollectionText_', value: function parseGeometryCollectionText_() {
      if (this.match(qE)) {
        var _t423=[]; do {
          _t423.push(this.parseGeometry_());
        } while (this.match(JE)); if (this.match(HE)) return _t423;
      } throw new Error(this.formatErrorMessage_());
    }}, {key: 'parsePointText_', value: function parsePointText_() {
      if (this.match(qE)) {
        var _t424=this.parsePoint_(); if (this.match(HE)) return _t424;
      } throw new Error(this.formatErrorMessage_());
    }}, {key: 'parseLineStringText_', value: function parseLineStringText_() {
      if (this.match(qE)) {
        var _t425=this.parsePointList_(); if (this.match(HE)) return _t425;
      } throw new Error(this.formatErrorMessage_());
    }}, {key: 'parsePolygonText_', value: function parsePolygonText_() {
      if (this.match(qE)) {
        var _t426=this.parseLineStringTextList_(); if (this.match(HE)) return _t426;
      } throw new Error(this.formatErrorMessage_());
    }}, {key: 'parseMultiPointText_', value: function parseMultiPointText_() {
      if (this.match(qE)) {
        var _t427; if (_t427=this.token_.type==qE?this.parsePointTextList_():this.parsePointList_(), this.match(HE)) return _t427;
      } throw new Error(this.formatErrorMessage_());
    }}, {key: 'parseMultiLineStringText_', value: function parseMultiLineStringText_() {
      if (this.match(qE)) {
        var _t428=this.parseLineStringTextList_(); if (this.match(HE)) return _t428;
      } throw new Error(this.formatErrorMessage_());
    }}, {key: 'parseMultiPolygonText_', value: function parseMultiPolygonText_() {
      if (this.match(qE)) {
        var _t429=this.parsePolygonTextList_(); if (this.match(HE)) return _t429;
      } throw new Error(this.formatErrorMessage_());
    }}, {key: 'parsePoint_', value: function parsePoint_() {
      var t=[]; var e=this.layout_.length; for (var _i338=0; _i338<e; ++_i338) {
        var _e421=this.token_; if (!this.match($E)) break; t.push(_e421.value);
      } if (t.length==e) return t; throw new Error(this.formatErrorMessage_());
    }}, {key: 'parsePointList_', value: function parsePointList_() {
      var t=[this.parsePoint_()]; for (;this.match(JE);)t.push(this.parsePoint_()); return t;
    }}, {key: 'parsePointTextList_', value: function parsePointTextList_() {
      var t=[this.parsePointText_()]; for (;this.match(JE);)t.push(this.parsePointText_()); return t;
    }}, {key: 'parseLineStringTextList_', value: function parseLineStringTextList_() {
      var t=[this.parseLineStringText_()]; for (;this.match(JE);)t.push(this.parseLineStringText_()); return t;
    }}, {key: 'parsePolygonTextList_', value: function parsePolygonTextList_() {
      var t=[this.parsePolygonText_()]; for (;this.match(JE);)t.push(this.parsePolygonText_()); return t;
    }}, {key: 'isEmptyGeometry_', value: function isEmptyGeometry_() {
      var t=this.isTokenType(KE)&&this.token_.value==ZE; return t&&this.consume_(), t;
    }}, {key: 'formatErrorMessage_', value: function formatErrorMessage_() {
      return 'Unexpected `'+this.token_.value+'` at position '+this.token_.position+' in `'+this.lexer_.wkt+'`';
    }}, {key: 'parseGeometry_', value: function parseGeometry_() {
      var t=this.token_; if (this.match(KE)) {
        var _e422=t.value; this.layout_=this.parseGeometryLayout_(); var _i339=this.isEmptyGeometry_(); if ('GEOMETRYCOLLECTION'==_e422) {
          if (_i339) return new Dm([]); var _t430=this.parseGeometryCollectionText_(); return new Dm(_t430);
        } var _n295=WE[_e422]; if (!_n295) throw new Error('Invalid geometry type: '+_e422); var _r239; if (_i339)_r239='POINT'==_e422?[NaN, NaN]:[]; else {
          switch (_e422) {
            case 'POINT': _r239=this.parsePointText_(); break; case 'LINESTRING': _r239=this.parseLineStringText_(); break; case 'POLYGON': _r239=this.parsePolygonText_(); break; case 'MULTIPOINT': _r239=this.parseMultiPointText_(); break; case 'MULTILINESTRING': _r239=this.parseMultiLineStringText_(); break; case 'MULTIPOLYGON': _r239=this.parseMultiPolygonText_();
          }
        } return new _n295(_r239, this.layout_);
      } throw new Error(this.formatErrorMessage_());
    }}]); return iC;
  }(); function nC(t) {
    var e=t.getCoordinates(); return 0===e.length?'':e.join(' ');
  } function rC(t) {
    var e=t.getCoordinates(); var i=[]; for (var _t431=0, _n296=e.length; _t431<_n296; ++_t431)i.push(e[_t431].join(' ')); return i.join(',');
  } function sC(t) {
    var e=[]; var i=t.getLinearRings(); for (var _t432=0, _n297=i.length; _t432<_n297; ++_t432)e.push('('+rC(i[_t432])+')'); return e.join(',');
  } var oC={Point: nC, LineString: rC, Polygon: sC, MultiPoint: function MultiPoint(t) {
    var e=[]; var i=t.getPoints(); for (var _t433=0, _n298=i.length; _t433<_n298; ++_t433)e.push('('+nC(i[_t433])+')'); return e.join(',');
  }, MultiLineString: function MultiLineString(t) {
    var e=[]; var i=t.getLineStrings(); for (var _t434=0, _n299=i.length; _t434<_n299; ++_t434)e.push('('+rC(i[_t434])+')'); return e.join(',');
  }, MultiPolygon: function MultiPolygon(t) {
    var e=[]; var i=t.getPolygons(); for (var _t435=0, _n300=i.length; _t435<_n300; ++_t435)e.push('('+sC(i[_t435])+')'); return e.join(',');
  }, GeometryCollection: function GeometryCollection(t) {
    var e=[]; var i=t.getGeometries(); for (var _t436=0, _n301=i.length; _t436<_n301; ++_t436)e.push(aC(i[_t436])); return e.join(',');
  }}; function aC(t) {
    var e=t.getType(); var i=(0, oC[e])(t); var n=tC[e]; if ('function'==typeof t.getFlatCoordinates) {
      var _e423=function(t) {
        var e=t.getLayout(); var i=''; return 'XYZ'!==e&&'XYZM'!==e||(i+='Z'), 'XYM'!==e&&'XYZM'!==e||(i+='M'), i;
      }(t); _e423.length>0&&(n+=' '+_e423);
    } return 0===i.length?n+' '+ZE:n+'('+i+')';
  } var lC=/* #__PURE__*/function(_vv3) {
    _inherits(lC, _vv3); var _super207=_createSuper(lC); function lC(t) {
      var _this223; _classCallCheck(this, lC); _this223=_super207.call(this), t=t||{}, _this223.splitCollection_=void 0!==t.splitCollection&&t.splitCollection; return _this223;
    }_createClass(lC, [{key: 'parse_', value: function parse_(t) {
      var e=new eC(t); return new iC(e).parse();
    }}, {key: 'readFeatureFromText', value: function readFeatureFromText(t, e) {
      var i=this.readGeometryFromText(t, e); var n=new Ot(); return n.setGeometry(i), n;
    }}, {key: 'readFeaturesFromText', value: function readFeaturesFromText(t, e) {
      var i=[]; var n=this.readGeometryFromText(t, e); i=this.splitCollection_&&'GeometryCollection'==n.getType()?n.getGeometriesArray():[n]; var r=[]; for (var _t437=0, _e424=i.length; _t437<_e424; ++_t437) {
        var _e425=new Ot(); _e425.setGeometry(i[_t437]), r.push(_e425);
      } return r;
    }}, {key: 'readGeometryFromText', value: function readGeometryFromText(t, e) {
      return p_(this.parse_(t), !1, e);
    }}, {key: 'writeFeatureText', value: function writeFeatureText(t, e) {
      var i=t.getGeometry(); return i?this.writeGeometryText(i, e):'';
    }}, {key: 'writeFeaturesText', value: function writeFeaturesText(t, e) {
      if (1==t.length) return this.writeFeatureText(t[0], e); var i=[]; for (var _e426=0, _n302=t.length; _e426<_n302; ++_e426)i.push(t[_e426].getGeometry()); var n=new Dm(i); return this.writeGeometryText(n, e);
    }}, {key: 'writeGeometryText', value: function writeGeometryText(t, e) {
      return aC(p_(t, !0, e));
    }}]); return lC;
  }(vv); var hC=[null, 'http://www.opengis.net/wms']; var cC=yd(hC, {Service: dd(function(t, e) {
    return vd({}, dC, t, e);
  }), Capability: dd(function(t, e) {
    return vd({}, uC, t, e);
  })}); var uC=yd(hC, {Request: dd(function(t, e) {
    return vd({}, vC, t, e);
  }), Exception: dd(function(t, e) {
    return vd([], mC, t, e);
  }), Layer: dd(function(t, e) {
    var i=vd({}, _C, t, e); if (void 0===i.Layer) return Object.assign(i, bC(t, e)); return i;
  })}); var dC=yd(hC, {Name: dd(xx), Title: dd(xx), Abstract: dd(xx), KeywordList: dd(FC), OnlineResource: dd(Aw), ContactInformation: dd(function(t, e) {
    return vd({}, gC, t, e);
  }), Fees: dd(xx), AccessConstraints: dd(xx), LayerLimit: dd(_x), MaxWidth: dd(_x), MaxHeight: dd(_x)}); var gC=yd(hC, {ContactPersonPrimary: dd(function(t, e) {
    return vd({}, fC, t, e);
  }), ContactPosition: dd(xx), ContactAddress: dd(function(t, e) {
    return vd({}, pC, t, e);
  }), ContactVoiceTelephone: dd(xx), ContactFacsimileTelephone: dd(xx), ContactElectronicMailAddress: dd(xx)}); var fC=yd(hC, {ContactPerson: dd(xx), ContactOrganization: dd(xx)}); var pC=yd(hC, {AddressType: dd(xx), Address: dd(xx), City: dd(xx), StateOrProvince: dd(xx), PostCode: dd(xx), Country: dd(xx)}); var mC=yd(hC, {Format: hd(xx)}); var _C=yd(hC, {Name: dd(xx), Title: dd(xx), Abstract: dd(xx), KeywordList: dd(FC), CRS: ud(xx), EX_GeographicBoundingBox: dd(function(t, e) {
    var i=vd({}, xC, t, e); if (!i) return; var n=i.westBoundLongitude; var r=i.southBoundLatitude; var s=i.eastBoundLongitude; var o=i.northBoundLatitude; if (void 0===n||void 0===r||void 0===s||void 0===o) return; return [n, r, s, o];
  }), BoundingBox: ud(function(t, e) {
    var i=[mx(t.getAttribute('minx')), mx(t.getAttribute('miny')), mx(t.getAttribute('maxx')), mx(t.getAttribute('maxy'))]; var n=[mx(t.getAttribute('resx')), mx(t.getAttribute('resy'))]; return {crs: t.getAttribute('CRS'), extent: i, res: n};
  }), Dimension: ud(function(t, e) {
    return {'name': t.getAttribute('name'), 'units': t.getAttribute('units'), 'unitSymbol': t.getAttribute('unitSymbol'), 'default': t.getAttribute('default'), 'multipleValues': gx(t.getAttribute('multipleValues')), 'nearestValue': gx(t.getAttribute('nearestValue')), 'current': gx(t.getAttribute('current')), 'values': xx(t)};
  }), Attribution: dd(function(t, e) {
    return vd({}, yC, t, e);
  }), AuthorityURL: ud(function(t, e) {
    var i=PC(t, e); if (i) return i.name=t.getAttribute('name'), i; return;
  }), Identifier: ud(xx), MetadataURL: ud(function(t, e) {
    var i=PC(t, e); if (i) return i.type=t.getAttribute('type'), i; return;
  }), DataURL: ud(PC), FeatureListURL: ud(PC), Style: ud(function(t, e) {
    return vd({}, EC, t, e);
  }), MinScaleDenominator: dd(px), MaxScaleDenominator: dd(px), Layer: ud(bC)}); var yC=yd(hC, {Title: dd(xx), OnlineResource: dd(Aw), LogoURL: dd(LC)}); var xC=yd(hC, {westBoundLongitude: dd(px), eastBoundLongitude: dd(px), southBoundLatitude: dd(px), northBoundLatitude: dd(px)}); var vC=yd(hC, {GetCapabilities: dd(IC), GetMap: dd(IC), GetFeatureInfo: dd(IC)}); var SC=yd(hC, {Format: ud(xx), DCPType: ud(function(t, e) {
    return vd({}, wC, t, e);
  })}); var wC=yd(hC, {HTTP: dd(function(t, e) {
    return vd({}, TC, t, e);
  })}); var TC=yd(hC, {Get: dd(PC), Post: dd(PC)}); var EC=yd(hC, {Name: dd(xx), Title: dd(xx), Abstract: dd(xx), LegendURL: ud(LC), StyleSheetURL: dd(PC), StyleURL: dd(PC)}); var CC=yd(hC, {Format: dd(xx), OnlineResource: dd(Aw)}); var RC=yd(hC, {Keyword: hd(xx)}); function bC(t, e) {
    var i=e[e.length-1]; var n=vd({}, _C, t, e); if (!n) return; var r=gx(t.getAttribute('queryable')); void 0===r&&(r=i.queryable), n.queryable=void 0!==r&&r; var s=yx(t.getAttribute('cascaded')); void 0===s&&(s=i.cascaded), n.cascaded=s; var o=gx(t.getAttribute('opaque')); void 0===o&&(o=i.opaque), n.opaque=void 0!==o&&o; var a=gx(t.getAttribute('noSubsets')); void 0===a&&(a=i.noSubsets), n.noSubsets=void 0!==a&&a; var l=mx(t.getAttribute('fixedWidth')); l||(l=i.fixedWidth), n.fixedWidth=l; var h=mx(t.getAttribute('fixedHeight')); h||(h=i.fixedHeight), n.fixedHeight=h; ['Style', 'CRS', 'AuthorityURL'].forEach(function(t) {
      if (t in i) {
        var _e427=n[t]||[]; n[t]=_e427.concat(i[t]);
      }
    }); return ['EX_GeographicBoundingBox', 'BoundingBox', 'Dimension', 'Attribution', 'MinScaleDenominator', 'MaxScaleDenominator'].forEach(function(t) {
      if (!(t in n)) {
        var _e428=i[t]; n[t]=_e428;
      }
    }), n;
  } function PC(t, e) {
    return vd({}, CC, t, e);
  } function IC(t, e) {
    return vd({}, SC, t, e);
  } function LC(t, e) {
    var i=PC(t, e); if (i) {
      var _e429=[yx(t.getAttribute('width')), yx(t.getAttribute('height'))]; return i.size=_e429, i;
    }
  } function FC(t, e) {
    return vd([], RC, t, e);
  } var MC=/* #__PURE__*/function(_Mw2) {
    _inherits(MC, _Mw2); var _super208=_createSuper(MC); function MC() {
      var _this224; _classCallCheck(this, MC); _this224=_super208.call(this), _this224.version=void 0; return _this224;
    }_createClass(MC, [{key: 'readFromNode', value: function readFromNode(t) {
      this.version=t.getAttribute('version').trim(); var e=vd({version: this.version}, cC, t, []); return e||null;
    }}]); return MC;
  }(Mw); var AC=/* #__PURE__*/function(_ax6) {
    _inherits(AC, _ax6); var _super209=_createSuper(AC); function AC(t) {
      var _this225; _classCallCheck(this, AC); _this225=_super209.call(this), t=t||{}, _this225.featureNS_='http://mapserver.gis.umn.edu/mapserver', _this225.gmlFormat_=new Px(), _this225.layers_=t.layers?t.layers:null; return _this225;
    }_createClass(AC, [{key: 'getLayers', value: function getLayers() {
      return this.layers_;
    }}, {key: 'setLayers', value: function setLayers(t) {
      this.layers_=t;
    }}, {key: 'readFeatures_', value: function readFeatures_(t, e) {
      t.setAttribute('namespaceURI', this.featureNS_); var i=t.localName; var n=[]; if (0===t.childNodes.length) return n; if ('msGMLOutput'==i) {
        for (var _i340=0, _r240=t.childNodes.length; _i340<_r240; _i340++) {
          var _r241=t.childNodes[_i340]; if (_r241.nodeType!==Node.ELEMENT_NODE) continue; var _s179=_r241; var _o146=e[0]; var _a95='_layer'; var _l60=_s179.localName.replace(_a95, ''); if (this.layers_&&!this.layers_.includes(_l60)) continue; var _h53=_l60+'_feature'; _o146.featureType=_h53, _o146.featureNS=this.featureNS_; var _c36={}; _c36[_h53]=hd(this.gmlFormat_.readFeatureElement, this.gmlFormat_); var _d29=yd([_o146.featureNS, null], _c36); _s179.setAttribute('namespaceURI', this.featureNS_); var _g18=vd([], _d29, _s179, e, this.gmlFormat_); _g18&&u(n, _g18);
        }
      } if ('FeatureCollection'==i) {
        var _e430=vd([], this.gmlFormat_.FEATURE_COLLECTION_PARSERS, t, [{}], this.gmlFormat_); _e430&&(n=_e430);
      } return n;
    }}, {key: 'readFeaturesFromNode', value: function readFeaturesFromNode(t, e) {
      var i={}; return e&&Object.assign(i, this.getReadOptions(t, e)), this.readFeatures_(t, [i]);
    }}]); return AC;
  }(ax); var OC=[null, 'http://www.opengis.net/wmts/1.0']; var NC=[null, 'http://www.opengis.net/ows/1.1']; var DC=yd(OC, {Contents: dd(function(t, e) {
    return vd({}, GC, t, e);
  })}); var GC=yd(OC, {Layer: ud(function(t, e) {
    return vd({}, kC, t, e);
  }), TileMatrixSet: ud(function(t, e) {
    return vd({}, WC, t, e);
  })}); var kC=yd(OC, {Style: ud(function(t, e) {
    var i=vd({}, jC, t, e); if (!i) return; var n='true'===t.getAttribute('isDefault'); return i.isDefault=n, i;
  }), Format: ud(xx), TileMatrixSetLink: ud(function(t, e) {
    return vd({}, BC, t, e);
  }), Dimension: ud(function(t, e) {
    return vd({}, XC, t, e);
  }), ResourceURL: ud(function(t, e) {
    var i=t.getAttribute('format'); var n=t.getAttribute('template'); var r=t.getAttribute('resourceType'); var s={}; i&&(s.format=i); n&&(s.template=n); r&&(s.resourceType=r); return s;
  })}, yd(NC, {Title: dd(xx), Abstract: dd(xx), WGS84BoundingBox: dd(YC), Identifier: dd(xx)})); var jC=yd(OC, {LegendURL: ud(function(t, e) {
    var i={}; return i.format=t.getAttribute('format'), i.href=Aw(t), i;
  })}, yd(NC, {Title: dd(xx), Identifier: dd(xx)})); var BC=yd(OC, {TileMatrixSet: dd(xx), TileMatrixSetLimits: dd(function(t, e) {
    return vd([], zC, t, e);
  })}); var zC=yd(OC, {TileMatrixLimits: hd(function(t, e) {
    return vd({}, UC, t, e);
  })}); var UC=yd(OC, {TileMatrix: dd(xx), MinTileRow: dd(_x), MaxTileRow: dd(_x), MinTileCol: dd(_x), MaxTileCol: dd(_x)}); var XC=yd(OC, {Default: dd(xx), Value: ud(xx)}, yd(NC, {Identifier: dd(xx)})); var VC=yd(NC, {LowerCorner: hd(KC), UpperCorner: hd(KC)}); var WC=yd(OC, {WellKnownScaleSet: dd(xx), TileMatrix: ud(function(t, e) {
    return vd({}, ZC, t, e);
  })}, yd(NC, {SupportedCRS: dd(xx), Identifier: dd(xx), BoundingBox: dd(YC)})); var ZC=yd(OC, {TopLeftCorner: dd(KC), ScaleDenominator: dd(px), TileWidth: dd(_x), TileHeight: dd(_x), MatrixWidth: dd(_x), MatrixHeight: dd(_x)}, yd(NC, {Identifier: dd(xx)})); function YC(t, e) {
    var i=vd([], VC, t, e); if (2==i.length) return ne(i);
  } function KC(t, e) {
    var i=xx(t).split(/\s+/); if (!i||2!=i.length) return; var n=+i[0]; var r=+i[1]; return isNaN(n)||isNaN(r)?void 0:[n, r];
  } var qC=/* #__PURE__*/function(_Mw3) {
    _inherits(qC, _Mw3); var _super210=_createSuper(qC); function qC() {
      var _this226; _classCallCheck(this, qC); _this226=_super210.call(this), _this226.owsParser_=new qw(); return _this226;
    }_createClass(qC, [{key: 'readFromNode', value: function readFromNode(t) {
      var e=t.getAttribute('version'); e&&(e=e.trim()); var i=this.owsParser_.readFromNode(t); return i?(i.version=e, i=vd(i, DC, t, []), i||null):null;
    }}]); return qC;
  }(Mw); var HC=['fullscreenchange', 'webkitfullscreenchange', 'MSFullscreenChange']; var $C='enterfullscreen'; var JC='leavefullscreen'; function QC(t) {
    var e=t.body; return !!(e.webkitRequestFullscreen||e.requestFullscreen&&t.fullscreenEnabled);
  } function tR(t) {
    return !(!t.webkitIsFullScreen&&!t.fullscreenElement);
  } function eR(t) {
t.requestFullscreen?t.requestFullscreen():t.webkitRequestFullscreen&&t.webkitRequestFullscreen();
  } var iR=/* #__PURE__*/function(_ga4) {
    _inherits(iR, _ga4); var _super211=_createSuper(iR); function iR(t) {
      var _this227; _classCallCheck(this, iR); t=t||{}, _this227=_super211.call(this, {element: document.createElement('div'), target: t.target}), _this227.on, _this227.once, _this227.un, _this227.keys_=void 0!==t.keys&&t.keys, _this227.source_=t.source, _this227.isInFullscreen_=!1, _this227.boundHandleMapTargetChange_=_this227.handleMapTargetChange_.bind(_assertThisInitialized(_this227)), _this227.cssClassName_=void 0!==t.className?t.className:'ol-full-screen', _this227.documentListeners_=[], _this227.activeClassName_=void 0!==t.activeClassName?t.activeClassName.split(' '):[_this227.cssClassName_+'-true'], _this227.inactiveClassName_=void 0!==t.inactiveClassName?t.inactiveClassName.split(' '):[_this227.cssClassName_+'-false']; var e=void 0!==t.label?t.label:''; _this227.labelNode_='string'==typeof e?document.createTextNode(e):e; var i=void 0!==t.labelActive?t.labelActive:''; _this227.labelActiveNode_='string'==typeof i?document.createTextNode(i):i; var n=t.tipLabel?t.tipLabel:'Toggle full-screen'; _this227.button_=document.createElement('button'), _this227.button_.title=n, _this227.button_.setAttribute('type', 'button'), _this227.button_.appendChild(_this227.labelNode_), _this227.button_.addEventListener(C, _this227.handleClick_.bind(_assertThisInitialized(_this227)), !1), _this227.setClassName_(_this227.button_, _this227.isInFullscreen_), _this227.element.className=''.concat(_this227.cssClassName_, ' ol-unselectable ol-control'), _this227.element.appendChild(_this227.button_); return _this227;
    }_createClass(iR, [{key: 'handleClick_', value: function handleClick_(t) {
      t.preventDefault(), this.handleFullScreen_();
    }}, {key: 'handleFullScreen_', value: function handleFullScreen_() {
      var t=this.getMap(); if (!t) return; var e=t.getOwnerDocument(); if (QC(e)) {
        if (tR(e)) {
          !function(t) {
t.exitFullscreen?t.exitFullscreen():t.webkitExitFullscreen&&t.webkitExitFullscreen();
          }(e);
        } else {
          var _i341; _i341=this.source_?'string'==typeof this.source_?e.getElementById(this.source_):this.source_:t.getTargetElement(), this.keys_?function(t) {
t.webkitRequestFullscreen?t.webkitRequestFullscreen():eR(t);
          }(_i341):eR(_i341);
        }
      }
    }}, {key: 'handleFullScreenChange_', value: function handleFullScreenChange_() {
      var t=this.getMap(); if (!t) return; var e=this.isInFullscreen_; this.isInFullscreen_=tR(t.getOwnerDocument()), e!==this.isInFullscreen_&&(this.setClassName_(this.button_, this.isInFullscreen_), this.isInFullscreen_?(St(this.labelActiveNode_, this.labelNode_), this.dispatchEvent($C)):(St(this.labelNode_, this.labelActiveNode_), this.dispatchEvent(JC)), t.updateSize());
    }}, {key: 'setClassName_', value: function setClassName_(t, e) {
      var _t$classList; var _t$classList2; var _t$classList3; var _t$classList4; e?((_t$classList=t.classList).remove.apply(_t$classList, _toConsumableArray(this.inactiveClassName_)), (_t$classList2=t.classList).add.apply(_t$classList2, _toConsumableArray(this.activeClassName_))):((_t$classList3=t.classList).remove.apply(_t$classList3, _toConsumableArray(this.activeClassName_)), (_t$classList4=t.classList).add.apply(_t$classList4, _toConsumableArray(this.inactiveClassName_)));
    }}, {key: 'setMap', value: function setMap(t) {
      var e=this.getMap(); e&&e.removeChangeListener(jo, this.boundHandleMapTargetChange_), _get(_getPrototypeOf(iR.prototype), 'setMap', this).call(this, t), this.handleMapTargetChange_(), t&&t.addChangeListener(jo, this.boundHandleMapTargetChange_);
    }}, {key: 'handleMapTargetChange_', value: function handleMapTargetChange_() {
      var t=this.documentListeners_; for (var _e431=0, _i342=t.length; _e431<_i342; ++_e431)G(t[_e431]); t.length=0; var e=this.getMap(); if (e) {
        var _i343=e.getOwnerDocument(); QC(_i343)?this.element.classList.remove(Ws):this.element.classList.add(Ws); for (var _e432=0, _n303=HC.length; _e432<_n303; ++_e432)t.push(N(_i343, HC[_e432], this.handleFullScreenChange_, this)); this.handleFullScreenChange_();
      }
    }}]); return iR;
  }(ga); var nR='projection'; var rR='coordinateFormat'; var sR=/* #__PURE__*/function(_ga5) {
    _inherits(sR, _ga5); var _super212=_createSuper(sR); function sR(t) {
      var _this228; _classCallCheck(this, sR); t=t||{}; var e=document.createElement('div'); e.className=void 0!==t.className?t.className:'ol-mouse-position', _this228=_super212.call(this, {element: e, render: t.render, target: t.target}), _this228.on, _this228.once, _this228.un, _this228.addChangeListener(nR, _this228.handleProjectionChanged_), t.coordinateFormat&&_this228.setCoordinateFormat(t.coordinateFormat), t.projection&&_this228.setProjection(t.projection), _this228.renderOnMouseOut_=void 0!==t.placeholder, _this228.placeholder_=_this228.renderOnMouseOut_?t.placeholder:'&#160;', _this228.renderedHTML_=e.innerHTML, _this228.mapProjection_=null, _this228.transform_=null, _this228.wrapX_=!1!==t.wrapX; return _this228;
    }_createClass(sR, [{key: 'handleProjectionChanged_', value: function handleProjectionChanged_() {
      this.transform_=null;
    }}, {key: 'getCoordinateFormat', value: function getCoordinateFormat() {
      return this.get(rR);
    }}, {key: 'getProjection', value: function getProjection() {
      return this.get(nR);
    }}, {key: 'handleMouseMove', value: function handleMouseMove(t) {
      var e=this.getMap(); this.updateHTML_(e.getEventPixel(t));
    }}, {key: 'handleMouseOut', value: function handleMouseOut(t) {
      this.updateHTML_(null);
    }}, {key: 'setMap', value: function setMap(t) {
      if (_get(_getPrototypeOf(sR.prototype), 'setMap', this).call(this, t), t) {
        var _e433=t.getViewport(); this.listenerKeys.push(N(_e433, bo, this.handleMouseMove, this)), this.renderOnMouseOut_&&this.listenerKeys.push(N(_e433, Lo, this.handleMouseOut, this)), this.updateHTML_(null);
      }
    }}, {key: 'setCoordinateFormat', value: function setCoordinateFormat(t) {
      this.set(rR, t);
    }}, {key: 'setProjection', value: function setProjection(t) {
      this.set(nR, an(t));
    }}, {key: 'updateHTML_', value: function updateHTML_(t) {
      var e=this.placeholder_; if (t&&this.mapProjection_) {
        if (!this.transform_) {
          var _t438=this.getProjection(); this.transform_=_t438?pn(this.mapProjection_, _t438):rn;
        } var _i344=this.getMap().getCoordinateFromPixelInternal(t); if (_i344) {
          var _t439=Sn(); if (_t439&&(this.transform_=pn(this.mapProjection_, _t439)), this.transform_(_i344, _i344), this.wrapX_) {
            Xi(_i344, _t439||this.getProjection()||this.mapProjection_);
          } var _n304=this.getCoordinateFormat(); e=_n304?_n304(_i344):_i344.toString();
        }
      } this.renderedHTML_&&e===this.renderedHTML_||(this.element.innerHTML=e, this.renderedHTML_=e);
    }}, {key: 'render', value: function render(t) {
      var e=t.frameState; e?this.mapProjection_!=e.viewState.projection&&(this.mapProjection_=e.viewState.projection, this.transform_=null):this.mapProjection_=null;
    }}]); return sR;
  }(ga); var oR=.75; var aR=.1; var lR=/* #__PURE__*/function(_ga6) {
    _inherits(lR, _ga6); var _super213=_createSuper(lR); function lR(t) {
      var _this229; _classCallCheck(this, lR); t=t||{}, _this229=_super213.call(this, {element: document.createElement('div'), render: t.render, target: t.target}), _this229.boundHandleRotationChanged_=_this229.handleRotationChanged_.bind(_assertThisInitialized(_this229)), _this229.collapsed_=void 0===t.collapsed||t.collapsed, _this229.collapsible_=void 0===t.collapsible||t.collapsible, _this229.collapsible_||(_this229.collapsed_=!1), _this229.rotateWithView_=void 0!==t.rotateWithView&&t.rotateWithView, _this229.viewExtent_=void 0; var e=void 0!==t.className?t.className:'ol-overviewmap'; var i=void 0!==t.tipLabel?t.tipLabel:'Overview map'; var n=void 0!==t.collapseLabel?t.collapseLabel:''; 'string'==typeof n?(_this229.collapseLabel_=document.createElement('span'), _this229.collapseLabel_.textContent=n):_this229.collapseLabel_=n; var r=void 0!==t.label?t.label:''; 'string'==typeof r?(_this229.label_=document.createElement('span'), _this229.label_.textContent=r):_this229.label_=r; var s=_this229.collapsible_&&!_this229.collapsed_?_this229.collapseLabel_:_this229.label_; var o=document.createElement('button'); o.setAttribute('type', 'button'), o.title=i, o.appendChild(s), o.addEventListener(C, _this229.handleClick_.bind(_assertThisInitialized(_this229)), !1), _this229.ovmapDiv_=document.createElement('div'), _this229.ovmapDiv_.className='ol-overviewmap-map', _this229.view_=t.view; var a=new ul({view: t.view, controls: new H(), interactions: new H()}); _this229.ovmap_=a, t.layers&&t.layers.forEach(function(t) {
        a.addLayer(t);
      }); var l=document.createElement('div'); l.className='ol-overviewmap-box', l.style.boxSizing='border-box', _this229.boxOverlay_=new _l({position: [0, 0], positioning: 'center-center', element: l}), _this229.ovmap_.addOverlay(_this229.boxOverlay_); var h=e+' '+'ol-unselectable '+Zs+(_this229.collapsed_&&_this229.collapsible_?' ol-collapsed':'')+(_this229.collapsible_?'':' ol-uncollapsible'); var c=_this229.element; c.className=h, c.appendChild(_this229.ovmapDiv_), c.appendChild(o); var u=_assertThisInitialized(_this229); var d=_this229.boxOverlay_; var g=_this229.boxOverlay_.getElement(); var f=function f(t) {
        var e={clientX: (i=t).clientX, clientY: i.clientY}; var i; var n=a.getEventCoordinateInternal(e); d.setPosition(n);
      }; var p=function p(t) {
        var e=a.getEventCoordinateInternal(t); u.getMap().getView().setCenterInternal(e), window.removeEventListener('mousemove', f), window.removeEventListener('mouseup', p);
      }; g.addEventListener('mousedown', function() {
        window.addEventListener('mousemove', f), window.addEventListener('mouseup', p);
      }); return _this229;
    }_createClass(lR, [{key: 'setMap', value: function setMap(t) {
      var e=this.getMap(); if (t!==e) {
        if (e) {
          var _t440=e.getView(); _t440&&this.unbindView_(_t440), this.ovmap_.setTarget(null);
        } if (_get(_getPrototypeOf(lR.prototype), 'setMap', this).call(this, t), t) {
          this.ovmap_.setTarget(this.ovmapDiv_), this.listenerKeys.push(N(t, s, this.handleMapPropertyChange_, this)); var _e434=t.getView(); _e434&&(this.bindView_(_e434), _e434.isDef()&&(this.ovmap_.updateSize(), this.resetExtent_())), this.ovmap_.isRendered()||this.updateBoxAfterOvmapIsRendered_();
        }
      }
    }}, {key: 'handleMapPropertyChange_', value: function handleMapPropertyChange_(t) {
      if (t.key===Bo) {
        var _e435=t.oldValue; _e435&&this.unbindView_(_e435); var _i345=this.getMap().getView(); this.bindView_(_i345);
      } else this.ovmap_.isRendered()||t.key!==jo&&t.key!==ko||this.ovmap_.updateSize();
    }}, {key: 'bindView_', value: function bindView_(t) {
      if (!this.view_) {
        var _e436=new da({projection: t.getProjection()}); this.ovmap_.setView(_e436);
      }t.addChangeListener(Yo.ROTATION, this.boundHandleRotationChanged_), this.handleRotationChanged_();
    }}, {key: 'unbindView_', value: function unbindView_(t) {
      t.removeChangeListener(Yo.ROTATION, this.boundHandleRotationChanged_);
    }}, {key: 'handleRotationChanged_', value: function handleRotationChanged_() {
      this.rotateWithView_&&this.ovmap_.getView().setRotation(this.getMap().getView().getRotation());
    }}, {key: 'validateExtent_', value: function validateExtent_() {
      var t=this.getMap(); var e=this.ovmap_; if (!t.isRendered()||!e.isRendered()) return; var i=t.getSize(); var n=t.getView().calculateExtentInternal(i); if (this.viewExtent_&&me(n, this.viewExtent_)) return; this.viewExtent_=n; var r=e.getSize(); var s=e.getView().calculateExtentInternal(r); var o=e.getPixelFromCoordinateInternal(Oe(n)); var a=e.getPixelFromCoordinateInternal(be(n)); var l=Math.abs(o[0]-a[0]); var h=Math.abs(o[1]-a[1]); var c=r[0]; var u=r[1]; l<c*aR||h<u*aR||l>c*oR||h>u*oR?this.resetExtent_():le(s, n)||this.recenter_();
    }}, {key: 'resetExtent_', value: function resetExtent_() {
      var t=this.getMap(); var e=this.ovmap_; var i=t.getSize(); var n=t.getView().calculateExtentInternal(i); var r=e.getView(); var s=Math.log(7.5)/Math.LN2; Be(n, 1/(Math.pow(2, s/2)*aR)), r.fitInternal(Nr(n));
    }}, {key: 'recenter_', value: function recenter_() {
      var t=this.getMap(); var e=this.ovmap_; var i=t.getView(); e.getView().setCenterInternal(i.getCenterInternal());
    }}, {key: 'updateBox_', value: function updateBox_() {
      var t=this.getMap(); var e=this.ovmap_; if (!t.isRendered()||!e.isRendered()) return; var i=t.getSize(); var n=t.getView(); var r=e.getView(); var s=this.rotateWithView_?0:-n.getRotation(); var o=this.boxOverlay_; var a=this.boxOverlay_.getElement(); var l=n.getCenterInternal(); var h=n.getResolution(); var c=r.getResolution(); var u=i[0]*h/c; var d=i[1]*h/c; if (o.setPosition(l), a) {
        a.style.width=u+'px', a.style.height=d+'px'; var _t441='rotate('+s+'rad)'; a.style.transform=_t441;
      }
    }}, {key: 'updateBoxAfterOvmapIsRendered_', value: function updateBoxAfterOvmapIsRendered_() {
      this.ovmapPostrenderKey_||(this.ovmapPostrenderKey_=D(this.ovmap_, Mo, function(t) {
        delete this.ovmapPostrenderKey_, this.updateBox_();
      }, this));
    }}, {key: 'handleClick_', value: function handleClick_(t) {
      t.preventDefault(), this.handleToggle_();
    }}, {key: 'handleToggle_', value: function handleToggle_() {
      this.element.classList.toggle(Ys), this.collapsed_?St(this.collapseLabel_, this.label_):St(this.label_, this.collapseLabel_), this.collapsed_=!this.collapsed_; var t=this.ovmap_; if (!this.collapsed_) {
        if (t.isRendered()) return this.viewExtent_=void 0, void t.render(); t.updateSize(), this.resetExtent_(), this.updateBoxAfterOvmapIsRendered_();
      }
    }}, {key: 'getCollapsible', value: function getCollapsible() {
      return this.collapsible_;
    }}, {key: 'setCollapsible', value: function setCollapsible(t) {
      this.collapsible_!==t&&(this.collapsible_=t, this.element.classList.toggle('ol-uncollapsible'), !t&&this.collapsed_&&this.handleToggle_());
    }}, {key: 'setCollapsed', value: function setCollapsed(t) {
      this.collapsible_&&this.collapsed_!==t&&this.handleToggle_();
    }}, {key: 'getCollapsed', value: function getCollapsed() {
      return this.collapsed_;
    }}, {key: 'getRotateWithView', value: function getRotateWithView() {
      return this.rotateWithView_;
    }}, {key: 'setRotateWithView', value: function setRotateWithView(t) {
      this.rotateWithView_!==t&&(this.rotateWithView_=t, 0!==this.getMap().getView().getRotation()&&(this.rotateWithView_?this.handleRotationChanged_():this.ovmap_.getView().setRotation(0), this.viewExtent_=void 0, this.validateExtent_(), this.updateBox_()));
    }}, {key: 'getOverviewMap', value: function getOverviewMap() {
      return this.ovmap_;
    }}, {key: 'render', value: function render(t) {
      this.validateExtent_(), this.updateBox_();
    }}]); return lR;
  }(ga); var hR='units'; var cR=[1, 2, 5]; var uR=25.4/.28; var dR=/* #__PURE__*/function(_ga7) {
    _inherits(dR, _ga7); var _super214=_createSuper(dR); function dR(t) {
      var _this230; _classCallCheck(this, dR); t=t||{}; var e=document.createElement('div'); e.style.pointerEvents='none', _this230=_super214.call(this, {element: e, render: t.render, target: t.target}), _this230.on, _this230.once, _this230.un; var i=void 0!==t.className?t.className:t.bar?'ol-scale-bar':'ol-scale-line'; _this230.innerElement_=document.createElement('div'), _this230.innerElement_.className=i+'-inner', _this230.element.className=i+' '+Vs, _this230.element.appendChild(_this230.innerElement_), _this230.viewState_=null, _this230.minWidth_=void 0!==t.minWidth?t.minWidth:64, _this230.maxWidth_=t.maxWidth, _this230.renderedVisible_=!1, _this230.renderedWidth_=void 0, _this230.renderedHTML_='', _this230.addChangeListener(hR, _this230.handleUnitsChanged_), _this230.setUnits(t.units||'metric'), _this230.scaleBar_=t.bar||!1, _this230.scaleBarSteps_=t.steps||4, _this230.scaleBarText_=t.text||!1, _this230.dpi_=t.dpi||void 0; return _this230;
    }_createClass(dR, [{key: 'getUnits', value: function getUnits() {
      return this.get(hR);
    }}, {key: 'handleUnitsChanged_', value: function handleUnitsChanged_() {
      this.updateElement_();
    }}, {key: 'setUnits', value: function setUnits(t) {
      this.set(hR, t);
    }}, {key: 'setDpi', value: function setDpi(t) {
      this.dpi_=t;
    }}, {key: 'updateElement_', value: function updateElement_() {
      var t=this.viewState_; if (!t) return void(this.renderedVisible_&&(this.element.style.display='none', this.renderedVisible_=!1)); var e=t.center; var i=t.projection; var n=this.getUnits(); var r='degrees'==n?'degrees':'m'; var s=ln(i, t.resolution, e, r); var o=this.minWidth_*(this.dpi_||uR)/uR; var a=void 0!==this.maxWidth_?this.maxWidth_*(this.dpi_||uR)/uR:void 0; var l=o*s; var h=''; if ('degrees'==n) {
        var _t442=Ye.degrees; l*=_t442, l<_t442/60?(h='', s*=3600):l<_t442?(h='', s*=60):h='';
      } else 'imperial'==n?l<.9144?(h='in', s/=.0254):l<1609.344?(h='ft', s/=.3048):(h='mi', s/=1609.344):'nautical'==n?(s/=1852, h='NM'):'metric'==n?l<.001?(h='m', s*=1e6):l<1?(h='mm', s*=1e3):l<1e3?h='m':(h='km', s/=1e3):'us'==n?l<.9144?(h='in', s*=39.37):l<1609.344?(h='ft', s/=.30480061):(h='mi', s/=1609.3472):Ft(!1, 33); var c; var u; var d; var g; var f; var p; var m=3*Math.floor(Math.log(o*s)/Math.log(10)); for (;;) {
        d=Math.floor(m/3); var _t443=Math.pow(10, d); if (c=cR[(m%3+3)%3]*_t443, u=Math.round(c/s), isNaN(u)) return this.element.style.display='none', void(this.renderedVisible_=!1); if (void 0!==a&&u>=a) {
          c=g, u=f, d=p; break;
        } if (u>=o) break; g=c, f=u, p=d, ++m;
      } var _=this.scaleBar_?this.createScaleBar(u, c, h):c.toFixed(d<0?-d:0)+' '+h; this.renderedHTML_!=_&&(this.innerElement_.innerHTML=_, this.renderedHTML_=_), this.renderedWidth_!=u&&(this.innerElement_.style.width=u+'px', this.renderedWidth_=u), this.renderedVisible_||(this.element.style.display='', this.renderedVisible_=!0);
    }}, {key: 'createScaleBar', value: function createScaleBar(t, e, i) {
      var n=this.getScaleForResolution(); var r=n<1?Math.round(1/n).toLocaleString()+' : 1':'1 : '+Math.round(n).toLocaleString(); var s=this.scaleBarSteps_; var o=t/s; var a=[this.createMarker('absolute')]; for (var _n305=0; _n305<s; ++_n305) {
        var _r242=_n305%2==0?'ol-scale-singlebar-odd':'ol-scale-singlebar-even'; a.push('<div><div class="ol-scale-singlebar '.concat(_r242, '" style="width: ').concat(o, 'px;"></div>')+this.createMarker('relative')+(_n305%2==0||2===s?this.createStepText(_n305, t, !1, e, i):'')+'</div>');
      }a.push(this.createStepText(s, t, !0, e, i)); return (this.scaleBarText_?'<div class="ol-scale-text" style="width: '.concat(t, 'px;">')+r+'</div>':'')+a.join('');
    }}, {key: 'createMarker', value: function createMarker(t) {
      return '<div class="ol-scale-step-marker" style="position: '.concat(t, '; top: ').concat('absolute'===t?3:-10, 'px;"></div>');
    }}, {key: 'createStepText', value: function createStepText(t, e, i, n, r) {
      var s=(0===t?0:Math.round(n/this.scaleBarSteps_*t*100)/100)+(0===t?'':' '+r); return '<div class="ol-scale-step-text" style="margin-left: '.concat(0===t?-3:e/this.scaleBarSteps_*-1, 'px;text-align: ').concat(0===t?'left':'center', ';min-width: ').concat(0===t?0:e/this.scaleBarSteps_*2, 'px;left: ').concat(i?e+'px':'unset', ';">')+s+'</div>';
    }}, {key: 'getScaleForResolution', value: function getScaleForResolution() {
      return ln(this.viewState_.projection, this.viewState_.resolution, this.viewState_.center, 'm')*(1e3/25.4)*(this.dpi_||uR);
    }}, {key: 'render', value: function render(t) {
      var e=t.frameState; this.viewState_=e?e.viewState:null, this.updateElement_();
    }}]); return dR;
  }(ga); var gR=0; var fR=1; var pR=/* #__PURE__*/function(_ga8) {
    _inherits(pR, _ga8); var _super215=_createSuper(pR); function pR(t) {
      var _this231; _classCallCheck(this, pR); t=t||{}, _this231=_super215.call(this, {element: document.createElement('div'), render: t.render}), _this231.dragListenerKeys_=[], _this231.currentResolution_=void 0, _this231.direction_=gR, _this231.dragging_, _this231.heightLimit_=0, _this231.widthLimit_=0, _this231.startX_, _this231.startY_, _this231.thumbSize_=null, _this231.sliderInitialized_=!1, _this231.duration_=void 0!==t.duration?t.duration:200; var e=void 0!==t.className?t.className:'ol-zoomslider'; var i=document.createElement('button'); i.setAttribute('type', 'button'), i.className=e+'-thumb '+Vs; var r=_this231.element; r.className=e+' '+'ol-unselectable '+Zs, r.appendChild(i), r.addEventListener(Po, _this231.handleDraggerStart_.bind(_assertThisInitialized(_this231)), !1), r.addEventListener(bo, _this231.handleDraggerDrag_.bind(_assertThisInitialized(_this231)), !1), r.addEventListener(Io, _this231.handleDraggerEnd_.bind(_assertThisInitialized(_this231)), !1), r.addEventListener(C, _this231.handleContainerClick_.bind(_assertThisInitialized(_this231)), !1), i.addEventListener(C, n, !1); return _this231;
    }_createClass(pR, [{key: 'setMap', value: function setMap(t) {
      _get(_getPrototypeOf(pR.prototype), 'setMap', this).call(this, t), t&&t.render();
    }}, {key: 'initSlider_', value: function initSlider_() {
      var t=this.element; var e=t.offsetWidth; var i=t.offsetHeight; if (0===e&&0===i) return this.sliderInitialized_=!1; var n=getComputedStyle(t); e-=parseFloat(n.paddingRight)+parseFloat(n.paddingLeft), i-=parseFloat(n.paddingTop)+parseFloat(n.paddingBottom); var r=t.firstElementChild; var s=getComputedStyle(r); var o=r.offsetWidth+parseFloat(s.marginRight)+parseFloat(s.marginLeft); var a=r.offsetHeight+parseFloat(s.marginTop)+parseFloat(s.marginBottom); return this.thumbSize_=[o, a], e>i?(this.direction_=fR, this.widthLimit_=e-o):(this.direction_=gR, this.heightLimit_=i-a), this.sliderInitialized_=!0;
    }}, {key: 'handleContainerClick_', value: function handleContainerClick_(t) {
      var e=this.getMap().getView(); var i=this.getRelativePosition_(t.offsetX-this.thumbSize_[0]/2, t.offsetY-this.thumbSize_[1]/2); var n=this.getResolutionForPosition_(i); var r=e.getConstrainedZoom(e.getZoomForResolution(n)); e.animateInternal({zoom: r, duration: this.duration_, easing: nt});
    }}, {key: 'handleDraggerStart_', value: function handleDraggerStart_(t) {
      if (!this.dragging_&&t.target===this.element.firstElementChild) {
        var _e437=this.element.firstElementChild; if (this.getMap().getView().beginInteraction(), this.startX_=t.clientX-parseFloat(_e437.style.left), this.startY_=t.clientY-parseFloat(_e437.style.top), this.dragging_=!0, 0===this.dragListenerKeys_.length) {
          var _t444=this.handleDraggerDrag_; var _e438=this.handleDraggerEnd_; var _i346=this.getMap().getOwnerDocument(); this.dragListenerKeys_.push(N(_i346, bo, _t444, this), N(_i346, Io, _e438, this));
        }
      }
    }}, {key: 'handleDraggerDrag_', value: function handleDraggerDrag_(t) {
      if (this.dragging_) {
        var _e439=t.clientX-this.startX_; var _i347=t.clientY-this.startY_; var _n306=this.getRelativePosition_(_e439, _i347); this.currentResolution_=this.getResolutionForPosition_(_n306), this.getMap().getView().setResolution(this.currentResolution_);
      }
    }}, {key: 'handleDraggerEnd_', value: function handleDraggerEnd_(t) {
      if (this.dragging_) {
        this.getMap().getView().endInteraction(), this.dragging_=!1, this.startX_=void 0, this.startY_=void 0, this.dragListenerKeys_.forEach(G), this.dragListenerKeys_.length=0;
      }
    }}, {key: 'setThumbPosition_', value: function setThumbPosition_(t) {
      var e=this.getPositionForResolution_(t); var i=this.element.firstElementChild; this.direction_==fR?i.style.left=this.widthLimit_*e+'px':i.style.top=this.heightLimit_*e+'px';
    }}, {key: 'getRelativePosition_', value: function getRelativePosition_(t, e) {
      var i; return i=this.direction_===fR?t/this.widthLimit_:e/this.heightLimit_, _i(i, 0, 1);
    }}, {key: 'getResolutionForPosition_', value: function getResolutionForPosition_(t) {
      return this.getMap().getView().getResolutionForValueFunction()(1-t);
    }}, {key: 'getPositionForResolution_', value: function getPositionForResolution_(t) {
      return _i(1-this.getMap().getView().getValueForResolutionFunction()(t), 0, 1);
    }}, {key: 'render', value: function render(t) {
      if (!t.frameState) return; if (!this.sliderInitialized_&&!this.initSlider_()) return; var e=t.frameState.viewState.resolution; this.currentResolution_=e, this.setThumbPosition_(e);
    }}]); return pR;
  }(ga); var mR=/* #__PURE__*/function(_ga9) {
    _inherits(mR, _ga9); var _super216=_createSuper(mR); function mR(t) {
      var _this232; _classCallCheck(this, mR); t=t||{}, _this232=_super216.call(this, {element: document.createElement('div'), target: t.target}), _this232.extent=t.extent?t.extent:null; var e=void 0!==t.className?t.className:'ol-zoom-extent'; var i=void 0!==t.label?t.label:'E'; var n=void 0!==t.tipLabel?t.tipLabel:'Fit to extent'; var r=document.createElement('button'); r.setAttribute('type', 'button'), r.title=n, r.appendChild('string'==typeof i?document.createTextNode(i):i), r.addEventListener(C, _this232.handleClick_.bind(_assertThisInitialized(_this232)), !1); var s=e+' '+'ol-unselectable '+Zs; var o=_this232.element; o.className=s, o.appendChild(r); return _this232;
    }_createClass(mR, [{key: 'handleClick_', value: function handleClick_(t) {
      t.preventDefault(), this.handleZoomToExtent();
    }}, {key: 'handleZoomToExtent', value: function handleZoomToExtent() {
      var t=this.getMap().getView(); var e=this.extent?this.extent:t.getProjection().getExtent(); t.fitInternal(Nr(e));
    }}]); return mR;
  }(ga); var _R={}; return _R.AssertionError=i, _R.Collection=H, _R.Collection.CollectionEvent=q, _R.DataTile=Lt, _R.DataTile.asArrayLike=Rt, _R.DataTile.asImageLike=Ct, _R.DataTile.toArray=Pt, _R.Disposable=o, _R.Feature=Ot, _R.Feature.createStyleFunction=At, _R.Geolocation=Hr, _R.Geolocation.GeolocationError=qr, _R.Image=rs, _R.Image.listenImage=ns, _R.ImageBase=$r, _R.ImageCanvas=ss, _R.ImageTile=os, _R.Kinetic=as, _R.Map=ul, _R.MapBrowserEvent=Co, _R.MapBrowserEventHandler=Fo, _R.MapEvent=Eo, _R.Object=W, _R.Object.ObjectEvent=V, _R.Observable=B, _R.Observable.unByKey=j, _R.Overlay=_l, _R.Tile=ot, _R.TileCache=Rl, _R.TileQueue=Xo, _R.TileQueue.getTilePriority=Vo, _R.TileRange=Il, _R.TileRange.createOrUpdate=Pl, _R.VectorRenderTile=Fl, _R.VectorTile=Ml, _R.View=da, _R.View.createCenterConstraint=aa, _R.View.createResolutionConstraint=la, _R.View.createRotationConstraint=ha, _R.View.isNoopAnimation=ca, _R.array={}, _R.array.ascending=l, _R.array.binarySearch=a, _R.array.equals=d, _R.array.extend=u, _R.array.isSorted=g, _R.array.linearFindNearest=h, _R.array.remove=function(t, e) {
    var i=t.indexOf(e); var n=i>-1; return n&&t.splice(i, 1), n;
  }, _R.array.reverseSubArray=c, _R.array.stableSort=function(t, e) {
    var i=t.length; var n=Array(t.length); var r; for (r=0; r<i; r++)n[r]={index: r, value: t[r]}; for (n.sort(function(t, i) {
      return e(t.value, i.value)||t.index-i.index;
    }), r=0; r<t.length; r++)t[r]=n[r].value;
  }, _R.asserts={}, _R.asserts.assert=Ft, _R.centerconstraint={}, _R.centerconstraint.createExtent=qo, _R.centerconstraint.none=Ho, _R.color={}, _R.color.asArray=gs, _R.color.asString=cs, _R.color.fromString=ds, _R.color.isStringColor=ms, _R.color.normalize=fs, _R.color.toString=ps, _R.colorlike={}, _R.colorlike.asColorLike=Al, _R.console={}, _R.console.error=Qi, _R.console.log=function() {
    var _console3; $i>Hi.info||(_console3=console).log.apply(_console3, arguments);
  }, _R.console.setLevel=function(t) {
    $i=Hi[t];
  }, _R.console.warn=Ji, _R.control={}, _R.control.Attribution=fa, _R.control.Control=ga, _R.control.FullScreen=iR, _R.control.MousePosition=sR, _R.control.OverviewMap=lR, _R.control.Rotate=pa, _R.control.ScaleLine=dR, _R.control.Zoom=ma, _R.control.ZoomSlider=pR, _R.control.ZoomToExtent=mR, _R.control.defaults={}, _R.control.defaults.defaults=_a, _R.coordinate={}, _R.coordinate.add=Fi, _R.coordinate.closestOnCircle=Mi, _R.coordinate.closestOnSegment=Ai, _R.coordinate.createStringXY=function(t) {
    return function(e) {
      return Ui(e, t);
    };
  }, _R.coordinate.degreesToStringHDMS=Oi, _R.coordinate.distance=Bi, _R.coordinate.equals=Di, _R.coordinate.format=Ni, _R.coordinate.getWorldsAway=Vi, _R.coordinate.rotate=Gi, _R.coordinate.scale=ki, _R.coordinate.squaredDistance=ji, _R.coordinate.squaredDistanceToSegment=zi, _R.coordinate.toStringHDMS=function(t, e) {
    return t?Oi('NS', t[1], e)+' '+Oi('EW', t[0], e):'';
  }, _R.coordinate.toStringXY=Ui, _R.coordinate.wrapX=Xi, _R.css={}, _R.css.CLASS_COLLAPSED=Ys, _R.css.CLASS_CONTROL=Zs, _R.css.CLASS_HIDDEN=Us, _R.css.CLASS_SELECTABLE=Xs, _R.css.CLASS_UNSELECTABLE=Vs, _R.css.CLASS_UNSUPPORTED=Ws, _R.css.getFontParameters=Hs, _R.dom={}, _R.dom.createCanvasContext2D=_t, _R.dom.outerHeight=vt, _R.dom.outerWidth=xt, _R.dom.releaseCanvas=yt, _R.dom.removeChildren=Tt, _R.dom.removeNode=wt, _R.dom.replaceChildren=Et, _R.dom.replaceNode=St, _R.easing={}, _R.easing.easeIn=it, _R.easing.easeOut=nt, _R.easing.inAndOut=rt, _R.easing.linear=st, _R.easing.upAndDown=function(t) {
    return t<.5?rt(2*t):1-rt(2*(t-.5));
  }, _R.events={}, _R.events.Event=r, _R.events.Event.preventDefault=function(t) {
    t.preventDefault();
  }, _R.events.Event.stopPropagation=n, _R.events.Target=S, _R.events.condition={}, _R.events.condition.all=Ca, _R.events.condition.altKeyOnly=Ra, _R.events.condition.altShiftKeysOnly=ba, _R.events.condition.always=La, _R.events.condition.click=function(t) {
    return t.type==Ro.CLICK;
  }, _R.events.condition.doubleClick=function(t) {
    return t.type==Ro.DBLCLICK;
  }, _R.events.condition.focus=Pa, _R.events.condition.focusWithTabindex=Ia, _R.events.condition.mouseActionButton=Fa, _R.events.condition.mouseOnly=Ga, _R.events.condition.never=Ma, _R.events.condition.noModifierKeys=Oa, _R.events.condition.penOnly=function(t) {
    var e=t.originalEvent; return Ft(void 0!==e, 56), 'pen'===e.pointerType;
  }, _R.events.condition.platformModifierKeyOnly=function(t) {
    var e=t.originalEvent; return !e.altKey&&(dt?e.metaKey:e.ctrlKey)&&!e.shiftKey;
  }, _R.events.condition.pointerMove=function(t) {
    return 'pointermove'==t.type;
  }, _R.events.condition.primaryAction=ka, _R.events.condition.shiftKeyOnly=Na, _R.events.condition.singleClick=Aa, _R.events.condition.targetNotEditable=Da, _R.events.condition.touchOnly=function(t) {
    var e=t.originalEvent; return Ft(void 0!==e, 56), 'touch'===e.pointerType;
  }, _R.events.listen=N, _R.events.listenOnce=D, _R.events.unlistenByKey=G, _R.extent={}, _R.extent.applyTransform=Ue, _R.extent.approximatelyEquals=_e, _R.extent.boundingExtent=ne, _R.extent.buffer=re, _R.extent.clone=se, _R.extent.closestSquaredDistanceXY=oe, _R.extent.containsCoordinate=ae, _R.extent.containsExtent=le, _R.extent.containsXY=he, _R.extent.coordinateRelationship=ce, _R.extent.createEmpty=ue, _R.extent.createOrUpdate=de, _R.extent.createOrUpdateEmpty=ge, _R.extent.createOrUpdateFromCoordinate=fe, _R.extent.createOrUpdateFromCoordinates=function(t, e) {
    return ve(ge(e), t);
  }, _R.extent.createOrUpdateFromFlatCoordinates=pe, _R.extent.createOrUpdateFromRings=function(t, e) {
    return we(ge(e), t);
  }, _R.extent.equals=me, _R.extent.extend=ye, _R.extent.extendCoordinate=xe, _R.extent.extendCoordinates=ve, _R.extent.extendFlatCoordinates=Se, _R.extent.extendRings=we, _R.extent.extendXY=Te, _R.extent.forEachCorner=Ee, _R.extent.getArea=Ce, _R.extent.getBottomLeft=Re, _R.extent.getBottomRight=be, _R.extent.getCenter=Pe, _R.extent.getCorner=Ie, _R.extent.getEnlargedArea=function(t, e) {
    var i=Math.min(t[0], e[0]); var n=Math.min(t[1], e[1]); return (Math.max(t[2], e[2])-i)*(Math.max(t[3], e[3])-n);
  }, _R.extent.getForViewAndSize=Le, _R.extent.getHeight=Me, _R.extent.getIntersection=Ae, _R.extent.getIntersectionArea=function(t, e) {
    return Ce(Ae(t, e));
  }, _R.extent.getMargin=function(t) {
    return De(t)+Me(t);
  }, _R.extent.getRotatedViewport=Fe, _R.extent.getSize=function(t) {
    return [t[2]-t[0], t[3]-t[1]];
  }, _R.extent.getTopLeft=Oe, _R.extent.getTopRight=Ne, _R.extent.getWidth=De, _R.extent.intersects=Ge, _R.extent.intersectsSegment=ze, _R.extent.isEmpty=ke, _R.extent.returnOrUpdate=je, _R.extent.scaleFromCenter=Be, _R.extent.wrapAndSliceX=Ve, _R.extent.wrapX=Xe, _R.featureloader={}, _R.featureloader.loadFeaturesXhr=Dl, _R.featureloader.setWithCredentials=function(t) {
    Nl=t;
  }, _R.featureloader.xhr=Gl, _R.format={}, _R.format.EsriJSON=ox, _R.format.Feature=f_, _R.format.Feature.transformExtentWithOptions=m_, _R.format.Feature.transformGeometryWithOptions=p_, _R.format.GML=Ax, _R.format.GML2=Px, _R.format.GML3=Fx, _R.format.GML32=Nx, _R.format.GMLBase=ux, _R.format.GMLBase.GMLNS=lx, _R.format.GPX=pv, _R.format.GeoJSON=yv, _R.format.IGC=Cv, _R.format.IIIFInfo=jc, _R.format.JSONFeature=Qy, _R.format.KML=Cw, _R.format.KML.getDefaultFillStyle=function() {
    return zv;
  }, _R.format.KML.getDefaultImageStyle=function() {
    return Xv;
  }, _R.format.KML.getDefaultStrokeStyle=function() {
    return Wv;
  }, _R.format.KML.getDefaultStyle=function() {
    return Yv;
  }, _R.format.KML.getDefaultStyleArray=function() {
    return qv;
  }, _R.format.KML.getDefaultTextStyle=function() {
    return Zv;
  }, _R.format.KML.readFlatCoordinates=tS, _R.format.MVT=X_, _R.format.OSMXML=Fw, _R.format.OWS=qw, _R.format.Polyline=sT, _R.format.Polyline.decodeDeltas=$w, _R.format.Polyline.decodeFloats=Qw, _R.format.Polyline.decodeSignedIntegers=eT, _R.format.Polyline.decodeUnsignedIntegers=nT, _R.format.Polyline.encodeDeltas=Hw, _R.format.Polyline.encodeFloats=Jw, _R.format.Polyline.encodeSignedIntegers=tT, _R.format.Polyline.encodeUnsignedInteger=rT, _R.format.Polyline.encodeUnsignedIntegers=iT, _R.format.TextFeature=vv, _R.format.TopoJSON=dT, _R.format.WFS=LE, _R.format.WFS.writeFilter=function(t, e) {
    var i=id(IE(e=e||'1.1.0'), 'Filter'); var n={node: i}; return Object.assign(n, {version: e, filter: t}), gE(i, t, [n]), i;
  }, _R.format.WKB=VE, _R.format.WKT=lC, _R.format.WMSCapabilities=MC, _R.format.WMSGetFeatureInfo=AC, _R.format.WMTSCapabilities=qC, _R.format.XML=Mw, _R.format.XMLFeature=ax, _R.format.filter={}, _R.format.filter.And=pT, _R.format.filter.Bbox=mT, _R.format.filter.Comparison=ST, _R.format.filter.ComparisonBinary=TT, _R.format.filter.Contains=yT, _R.format.filter.DWithin=xT, _R.format.filter.Disjoint=vT, _R.format.filter.During=wT, _R.format.filter.EqualTo=ET, _R.format.filter.Filter=gT, _R.format.filter.GreaterThan=CT, _R.format.filter.GreaterThanOrEqualTo=RT, _R.format.filter.Intersects=bT, _R.format.filter.IsBetween=PT, _R.format.filter.IsLike=IT, _R.format.filter.IsNull=LT, _R.format.filter.LessThan=FT, _R.format.filter.LessThanOrEqualTo=MT, _R.format.filter.LogicalNary=fT, _R.format.filter.Not=AT, _R.format.filter.NotEqualTo=OT, _R.format.filter.Or=NT, _R.format.filter.ResourceId=DT, _R.format.filter.Spatial=_T, _R.format.filter.Within=GT, _R.format.filter.and=kT, _R.format.filter.bbox=jT, _R.format.filter.between=function(t, e, i) {
    return new PT(t, e, i);
  }, _R.format.filter.contains=function(t, e, i) {
    return new yT(t, e, i);
  }, _R.format.filter.disjoint=function(t, e, i) {
    return new vT(t, e, i);
  }, _R.format.filter.during=function(t, e, i) {
    return new wT(t, e, i);
  }, _R.format.filter.dwithin=function(t, e, i, n, r) {
    return new xT(t, e, i, n, r);
  }, _R.format.filter.equalTo=function(t, e, i) {
    return new ET(t, e, i);
  }, _R.format.filter.greaterThan=function(t, e) {
    return new CT(t, e);
  }, _R.format.filter.greaterThanOrEqualTo=function(t, e) {
    return new RT(t, e);
  }, _R.format.filter.intersects=function(t, e, i) {
    return new bT(t, e, i);
  }, _R.format.filter.isNull=function(t) {
    return new LT(t);
  }, _R.format.filter.lessThan=function(t, e) {
    return new FT(t, e);
  }, _R.format.filter.lessThanOrEqualTo=function(t, e) {
    return new MT(t, e);
  }, _R.format.filter.like=function(t, e, i, n, r, s) {
    return new IT(t, e, i, n, r, s);
  }, _R.format.filter.not=function(t) {
    return new AT(t);
  }, _R.format.filter.notEqualTo=function(t, e, i) {
    return new OT(t, e, i);
  }, _R.format.filter.or=function(t) {
    var e=[null].concat(Array.prototype.slice.call(arguments)); return new(Function.prototype.bind.apply(NT, e))();
  }, _R.format.filter.resourceId=function(t) {
    return new DT(t);
  }, _R.format.filter.within=function(t, e, i) {
    return new GT(t, e, i);
  }, _R.format.xlink={}, _R.format.xlink.readHref=Aw, _R.format.xsd={}, _R.format.xsd.readBoolean=dx, _R.format.xsd.readBooleanString=gx, _R.format.xsd.readDateTime=fx, _R.format.xsd.readDecimal=px, _R.format.xsd.readDecimalString=mx, _R.format.xsd.readNonNegativeIntegerString=yx, _R.format.xsd.readPositiveInteger=_x, _R.format.xsd.readString=xx, _R.format.xsd.writeBooleanTextNode=vx, _R.format.xsd.writeCDATASection=Sx, _R.format.xsd.writeDateTimeTextNode=wx, _R.format.xsd.writeDecimalTextNode=Tx, _R.format.xsd.writeNonNegativeIntegerTextNode=Ex, _R.format.xsd.writeStringTextNode=Cx, _R.functions={}, _R.functions.FALSE=p, _R.functions.TRUE=f, _R.functions.VOID=m, _R.functions.memoizeOne=_, _R.functions.toPromise=y, _R.geom={}, _R.geom.Circle=Am, _R.geom.Geometry=Nn, _R.geom.GeometryCollection=Dm, _R.geom.LineString=zm, _R.geom.LinearRing=cr, _R.geom.MultiLineString=Xm, _R.geom.MultiPoint=Wm, _R.geom.MultiPolygon=Km, _R.geom.Point=dr, _R.geom.Polygon=Ar, _R.geom.Polygon.circular=Or, _R.geom.Polygon.fromCircle=Dr, _R.geom.Polygon.fromExtent=Nr, _R.geom.Polygon.makeRegular=Gr, _R.geom.SimpleGeometry=kn, _R.geom.SimpleGeometry.getStrideForLayout=Dn, _R.geom.SimpleGeometry.transformGeom2D=Gn, _R.geom.flat={}, _R.geom.flat.area={}, _R.geom.flat.area.linearRing=or, _R.geom.flat.area.linearRings=ar, _R.geom.flat.area.linearRingss=lr, _R.geom.flat.center={}, _R.geom.flat.center.linearRingss=Zm, _R.geom.flat.closest={}, _R.geom.flat.closest.arrayMaxSquaredDelta=zn, _R.geom.flat.closest.assignClosestArrayPoint=Vn, _R.geom.flat.closest.assignClosestMultiArrayPoint=Wn, _R.geom.flat.closest.assignClosestPoint=Xn, _R.geom.flat.closest.maxSquaredDelta=Bn, _R.geom.flat.closest.multiArrayMaxSquaredDelta=Un, _R.geom.flat.contains={}, _R.geom.flat.contains.linearRingContainsExtent=gr, _R.geom.flat.contains.linearRingContainsXY=fr, _R.geom.flat.contains.linearRingsContainsXY=pr, _R.geom.flat.contains.linearRingssContainsXY=mr, _R.geom.flat.deflate={}, _R.geom.flat.deflate.deflateCoordinate=Zn, _R.geom.flat.deflate.deflateCoordinates=Yn, _R.geom.flat.deflate.deflateCoordinatesArray=Kn, _R.geom.flat.deflate.deflateMultiCoordinatesArray=qn, _R.geom.flat.flip={}, _R.geom.flat.flip.flipXY=$y, _R.geom.flat.geodesic={}, _R.geom.flat.geodesic.greatCircleArc=function(t, e, i, n, r, s) {
    var o=an('EPSG:4326'); var a=Math.cos(wi(e)); var l=Math.sin(wi(e)); var h=Math.cos(wi(n)); var c=Math.sin(wi(n)); var u=Math.cos(wi(i-t)); var d=Math.sin(wi(i-t)); var g=l*c+a*h*u; return n_(function(e) {
      if (1<=g) return [i, n]; var r=e*Math.acos(g); var s=Math.cos(r); var o=Math.sin(r); var f=d*h; var p=a*c-l*h*u; var m=Math.atan2(f, p); var _=Math.asin(l*s+a*o*Math.cos(m)); return [Si(wi(t)+Math.atan2(Math.sin(m)*o*a, s-l*Math.sin(_))), Si(_)];
    }, mn(o, r), s);
  }, _R.geom.flat.geodesic.meridian=r_, _R.geom.flat.geodesic.parallel=s_, _R.geom.flat.inflate={}, _R.geom.flat.inflate.inflateCoordinates=nr, _R.geom.flat.inflate.inflateCoordinatesArray=rr, _R.geom.flat.inflate.inflateMultiCoordinatesArray=sr, _R.geom.flat.interiorpoint={}, _R.geom.flat.interiorpoint.getInteriorPointOfArray=_r, _R.geom.flat.interiorpoint.getInteriorPointsOfMultiArray=yr, _R.geom.flat.interpolate={}, _R.geom.flat.interpolate.interpolatePoint=Gm, _R.geom.flat.interpolate.lineStringCoordinateAtM=km, _R.geom.flat.interpolate.lineStringsCoordinateAtM=jm, _R.geom.flat.intersectsextent={}, _R.geom.flat.intersectsextent.intersectsLineString=vr, _R.geom.flat.intersectsextent.intersectsLineStringArray=Sr, _R.geom.flat.intersectsextent.intersectsLinearRing=wr, _R.geom.flat.intersectsextent.intersectsLinearRingArray=Tr, _R.geom.flat.intersectsextent.intersectsLinearRingMultiArray=Er, _R.geom.flat.length={}, _R.geom.flat.length.lineStringLength=hm, _R.geom.flat.length.linearRingLength=function(t, e, i, n) {
    var r=hm(t, e, i, n); var s=t[i-n]-t[e]; var o=t[i-n+1]-t[e+1]; return r+=Math.sqrt(s*s+o*o), r;
  }, _R.geom.flat.orient={}, _R.geom.flat.orient.inflateEnds=Fr, _R.geom.flat.orient.linearRingIsClockwise=Rr, _R.geom.flat.orient.linearRingsAreOriented=br, _R.geom.flat.orient.linearRingssAreOriented=Pr, _R.geom.flat.orient.orientLinearRings=Ir, _R.geom.flat.orient.orientLinearRingsArray=Lr, _R.geom.flat.reverse={}, _R.geom.flat.reverse.coordinates=Cr, _R.geom.flat.segments={}, _R.geom.flat.segments.forEach=xr, _R.geom.flat.simplify={}, _R.geom.flat.simplify.douglasPeucker=Hn, _R.geom.flat.simplify.douglasPeuckerArray=$n, _R.geom.flat.simplify.douglasPeuckerMultiArray=function(t, e, i, n, r, s, o, a) {
    for (var _l61=0, _h54=i.length; _l61<_h54; ++_l61) {
      var _h55=i[_l61]; var _c37=[]; o=$n(t, e, _h55, n, r, s, o, _c37), a.push(_c37), e=_h55[_h55.length-1];
    } return o;
  }, _R.geom.flat.simplify.quantize=tr, _R.geom.flat.simplify.quantizeArray=er, _R.geom.flat.simplify.quantizeMultiArray=ir, _R.geom.flat.simplify.radialDistance=Jn, _R.geom.flat.simplify.simplifyLineString=function(t, e, i, n, r, s, o) {
    return o=void 0!==o?o:[], s||(i=Jn(t, e, i, n, r, o, 0), t=o, e=0, n=2), o.length=Hn(t, e, i, n, r, o, 0), o;
  }, _R.geom.flat.simplify.snap=Qn, _R.geom.flat.straightchunk={}, _R.geom.flat.straightchunk.matchingChunk=nm, _R.geom.flat.textpath={}, _R.geom.flat.textpath.drawTextOnPath=lm, _R.geom.flat.topology={}, _R.geom.flat.topology.lineStringIsClosed=function(t, e, i, n) {
    var r=i-n; return t[e]===t[r]&&t[e+1]===t[r+1]&&(i-e)/n>3&&!!or(t, e, i, n);
  }, _R.geom.flat.transform={}, _R.geom.flat.transform.rotate=Fn, _R.geom.flat.transform.scale=Mn, _R.geom.flat.transform.transform2D=Ln, _R.geom.flat.transform.translate=An, _R.has={}, _R.has.DEVICE_PIXEL_RATIO=gt, _R.has.FIREFOX=lt, _R.has.IMAGE_DECODE=pt, _R.has.MAC=dt, _R.has.PASSIVE_EVENT_LISTENERS=mt, _R.has.SAFARI=ht, _R.has.SAFARI_BUG_237906=ct, _R.has.WEBKIT=ut, _R.has.WORKER_OFFSCREEN_CANVAS=ft, _R.interaction={}, _R.interaction.DoubleClickZoom=wa, _R.interaction.DragAndDrop=ty, _R.interaction.DragAndDrop.DragAndDropEvent=Q_, _R.interaction.DragBox=Ya, _R.interaction.DragBox.DragBoxEvent=Za, _R.interaction.DragPan=ja, _R.interaction.DragRotate=Ba, _R.interaction.DragRotateAndZoom=ey, _R.interaction.DragZoom=Ka, _R.interaction.Draw=my, _R.interaction.Draw.DrawEvent=sy, _R.interaction.Draw.createBox=function() {
    return function(t, e, i) {
      var n=ne([t[0], t[t.length-1]].map(function(t) {
        return Tn(t, i);
      })); var r=[[Re(n), be(n), Ne(n), Oe(n), Re(n)]]; e?e.setCoordinates(r):e=new Ar(r); var s=Sn(); return s&&e.transform(i, s), e;
    };
  }, _R.interaction.Draw.createRegularPolygon=function(t, e) {
    return function(i, n, r) {
      var s=Tn(i[0], r); var o=Tn(i[i.length-1], r); var a=Math.sqrt(ji(s, o)); n=n||Dr(new Am(s), t); var l=e; if (!e&&0!==e) {
        var _t445=o[0]-s[0]; var _e440=o[1]-s[1]; l=Math.atan2(_e440, _t445);
      }Gr(n, s, a, l); var h=Sn(); return h&&n.transform(r, h), n;
    };
  }, _R.interaction.Extent=Ty, _R.interaction.Extent.ExtentEvent=yy, _R.interaction.Interaction=Sa, _R.interaction.Interaction.pan=xa, _R.interaction.Interaction.zoomByDelta=va, _R.interaction.KeyboardPan=Qa, _R.interaction.KeyboardZoom=tl, _R.interaction.Link=by, _R.interaction.Modify=Gy, _R.interaction.Modify.ModifyEvent=My, _R.interaction.MouseWheelZoom=el, _R.interaction.PinchRotate=il, _R.interaction.PinchZoom=nl, _R.interaction.Pointer=Ea, _R.interaction.Pointer.centroid=Ta, _R.interaction.Select=Uy, _R.interaction.Select.SelectEvent=jy, _R.interaction.Snap=Wy, _R.interaction.Translate=Hy, _R.interaction.Translate.TranslateEvent=qy, _R.interaction.defaults={}, _R.interaction.defaults.defaults=rl, _R.layer={}, _R.layer.Base=Fs, _R.layer.BaseImage=su, _R.layer.BaseTile=fu, _R.layer.BaseVector=Af, _R.layer.Graticule=l_, _R.layer.Group=To, _R.layer.Group.GroupEvent=vo, _R.layer.Heatmap=g_, _R.layer.Image=uu, _R.layer.Layer=ks, _R.layer.Layer.inView=Gs, _R.layer.MapboxVector=Z_, _R.layer.Tile=mu, _R.layer.Vector=i_, _R.layer.VectorImage=Y_, _R.layer.VectorTile=V_, _R.layer.WebGLPoints=K_, _R.layer.WebGLTile=$_, _R.loadingstrategy={}, _R.loadingstrategy.all=kl, _R.loadingstrategy.bbox=function(t, e) {
    return [t];
  }, _R.loadingstrategy.tile=function(t) {
    return function(e, i, n) {
      var r=t.getZForResolution(bn(i, n)); var s=t.getTileRangeForExtentAndZ(Cn(e, n), r); var o=[]; var a=[r, 0, 0]; for (a[1]=s.minX; a[1]<=s.maxX; ++a[1]) for (a[2]=s.minY; a[2]<=s.maxY; ++a[2])o.push(En(t.getTileCoordExtent(a), n)); return o;
    };
  }, _R.math={}, _R.math.ceil=Pi, _R.math.clamp=_i, _R.math.floor=bi, _R.math.lerp=Ei, _R.math.modulo=Ti, _R.math.round=Ri, _R.math.solveLinearSystem=vi, _R.math.squaredDistance=xi, _R.math.squaredSegmentDistance=yi, _R.math.toDegrees=Si, _R.math.toFixed=Ci, _R.math.toRadians=wi, _R.net={}, _R.net.ClientError=zl, _R.net.ResponseError=Bl, _R.net.getJSON=Ul, _R.net.jsonp=jl, _R.net.overrideXHR=function(t) {
    'undefined'!=typeof XMLHttpRequest&&(Ol=XMLHttpRequest), global.XMLHttpRequest=t;
  }, _R.net.resolveUrl=Xl, _R.net.restoreXHR=function() {
    global.XMLHttpRequest=Ol;
  }, _R.obj={}, _R.obj.clear=x, _R.obj.isEmpty=v, _R.proj={}, _R.proj.Projection=Ke, _R.proj.Units={}, _R.proj.Units.METERS_PER_UNIT=Ye, _R.proj.Units.fromCode=Ze, _R.proj.addCommon=In, _R.proj.addCoordinateTransforms=gn, _R.proj.addEquivalentProjections=hn, _R.proj.addEquivalentTransforms=cn, _R.proj.addProjection=sn, _R.proj.addProjections=on, _R.proj.clearAllProjections=function() {
    ci(), fi();
  }, _R.proj.clearUserProjection=function() {
    xn=null;
  }, _R.proj.cloneTransform=nn, _R.proj.createProjection=un, _R.proj.createSafeCoordinateTransform=Pn, _R.proj.createTransformFromCoordinateTransform=dn, _R.proj.disableCoordinateWarning=en, _R.proj.epsg3857={}, _R.proj.epsg3857.EXTENT=$e, _R.proj.epsg3857.HALF_SIZE=He, _R.proj.epsg3857.MAX_SAFE_Y=Qe, _R.proj.epsg3857.PROJECTIONS=ei, _R.proj.epsg3857.RADIUS=qe, _R.proj.epsg3857.WORLD_EXTENT=Je, _R.proj.epsg3857.fromEPSG4326=ii, _R.proj.epsg3857.toEPSG4326=ni, _R.proj.epsg4326={}, _R.proj.epsg4326.EXTENT=si, _R.proj.epsg4326.METERS_PER_UNIT=oi, _R.proj.epsg4326.PROJECTIONS=li, _R.proj.epsg4326.RADIUS=ri, _R.proj.equivalent=fn, _R.proj.fromLonLat=function(t, e) {
    return en(), _n(t, 'EPSG:4326', void 0!==e?e:'EPSG:3857');
  }, _R.proj.fromUserCoordinate=Tn, _R.proj.fromUserExtent=Cn, _R.proj.fromUserResolution=bn, _R.proj.get=an, _R.proj.getPointResolution=ln, _R.proj.getTransform=mn, _R.proj.getTransformFromProjections=pn, _R.proj.getUserProjection=Sn, _R.proj.identityTransform=rn, _R.proj.proj4={}, _R.proj.proj4.fromEPSGCode=/* #__PURE__*/function() {
    var _ref4=_asyncToGenerator(/* #__PURE__*/_regeneratorRuntime().mark(function _callee2(t) {
      var e; var i; return _regeneratorRuntime().wrap(function _callee2$(_context2) {
        while (1) {
          switch (_context2.prev=_context2.next) {
            case 0: 'string'==typeof t&&(t=parseInt(t.split(':').pop(), 10)); e=Qm; if (e) {
              _context2.next=4; break;
            } throw new Error('Proj4 must be registered first with register(proj4)'); case 4: i='EPSG:'+t; _context2.t0=e.defs(i); if (_context2.t0) {
              _context2.next=14; break;
            }_context2.t1=e; _context2.t2=i; _context2.next=11; return e_(t); case 11: _context2.t3=_context2.sent; _context2.t1.defs.call(_context2.t1, _context2.t2, _context2.t3); t_(e); case 14: return _context2.abrupt('return', an(i)); case 15: case 'end': return _context2.stop();
          }
        }
      }, _callee2);
    })); return function(_x5) {
      return _ref4.apply(this, arguments);
    };
  }(), _R.proj.proj4.getEPSGLookup=function() {
    return e_;
  }, _R.proj.proj4.isRegistered=function() {
    return !!Qm;
  }, _R.proj.proj4.register=t_, _R.proj.proj4.setEPSGLookup=function(t) {
    e_=t;
  }, _R.proj.proj4.unregister=function() {
    Qm=null;
  }, _R.proj.projections={}, _R.proj.projections.add=di, _R.proj.projections.clear=ci, _R.proj.projections.get=ui, _R.proj.setUserProjection=vn, _R.proj.toLonLat=function(t, e) {
    var i=_n(t, void 0!==e?e:'EPSG:3857', 'EPSG:4326'); var n=i[0]; return (n<-180||n>180)&&(i[0]=Ti(n+180, 360)-180), i;
  }, _R.proj.toUserCoordinate=wn, _R.proj.toUserExtent=En, _R.proj.toUserResolution=Rn, _R.proj.transform=_n, _R.proj.transformExtent=yn, _R.proj.transformWithProjections=function(t, e, i) {
    return pn(e, i)(t);
  }, _R.proj.transforms={}, _R.proj.transforms.add=pi, _R.proj.transforms.clear=fi, _R.proj.transforms.get=mi, _R.proj.transforms.remove=function(t, e) {
    var i=t.getCode(); var n=e.getCode(); var r=gi[i][n]; return delete gi[i][n], v(gi[i])&&delete gi[i], r;
  }, _R.proj.useGeographic=function() {
    vn('EPSG:4326');
  }, _R.render={}, _R.render.Box=za, _R.render.Event=zs, _R.render.Feature=Jm, _R.render.Feature.toFeature=function(t, e) {
    var i=t.getId(); var n=$m(t); var r=t.getProperties(); var s=new Ot(); return void 0!==e&&s.setGeometryName(e), s.setGeometry(n), void 0!==i&&s.setId(i), s.setProperties(r, !0), s;
  }, _R.render.Feature.toGeometry=$m, _R.render.VectorContext=Vl, _R.render.canvas={}, _R.render.canvas.Builder=Qp, _R.render.canvas.BuilderGroup=am, _R.render.canvas.Executor=xm, _R.render.canvas.ExecutorGroup=Tm, _R.render.canvas.ExecutorGroup.getPixelIndexArray=wm, _R.render.canvas.ImageBuilder=tm, _R.render.canvas.Immediate=Wl, _R.render.canvas.Instruction={}, _R.render.canvas.Instruction.beginPathInstruction=$p, _R.render.canvas.Instruction.closePathInstruction=Jp, _R.render.canvas.Instruction.fillInstruction=qp, _R.render.canvas.Instruction.strokeInstruction=Hp, _R.render.canvas.LineStringBuilder=em, _R.render.canvas.PolygonBuilder=im, _R.render.canvas.TextBuilder=sm, _R.render.canvas.checkedFonts=ao, _R.render.canvas.defaultFillStyle=Js, _R.render.canvas.defaultFont=$s, _R.render.canvas.defaultLineCap=Qs, _R.render.canvas.defaultLineDash=to, _R.render.canvas.defaultLineDashOffset=0, _R.render.canvas.defaultLineJoin=eo, _R.render.canvas.defaultLineWidth=1, _R.render.canvas.defaultMiterLimit=io, _R.render.canvas.defaultPadding=oo, _R.render.canvas.defaultStrokeStyle=no, _R.render.canvas.defaultTextAlign=ro, _R.render.canvas.defaultTextBaseline=so, _R.render.canvas.drawImageOrLabel=yo, _R.render.canvas.getTextDimensions=_o, _R.render.canvas.hitdetect={}, _R.render.canvas.hitdetect.HIT_DETECT_RESOLUTION=Em, _R.render.canvas.hitdetect.createHitDetectionImageData=Cm, _R.render.canvas.hitdetect.hitDetect=Rm, _R.render.canvas.measureAndCacheTextWidth=mo, _R.render.canvas.measureTextHeight=go, _R.render.canvas.measureTextWidth=po, _R.render.canvas.registerFont=uo, _R.render.canvas.rotateAtOffset=function(t, e, i, n) {
    0!==e&&(t.translate(i, n), t.rotate(e), t.translate(-i, -n));
  }, _R.render.canvas.textHeights=co, _R.render.getRenderPixel=function(t, e) {
    return zt(t.inversePixelTransform, e.slice(0));
  }, _R.render.getVectorContext=Jl, _R.render.toContext=function(t, e) {
    var i=t.canvas; var n=(e=e||{}).pixelRatio||gt; var r=e.size; r&&(i.width=r[0]*n, i.height=r[1]*n, i.style.width=r[0]+'px', i.style.height=r[1]+'px'); var s=[0, 0, i.width, i.height]; var o=Xt([1, 0, 0, 1, 0, 0], n, n); return new Wl(t, n, s, o, 0);
  }, _R.render.webgl={}, _R.render.webgl.BatchRenderer=yp, _R.render.webgl.LineStringBatchRenderer=vp, _R.render.webgl.MixedGeometryBatch=Sp, _R.render.webgl.PointBatchRenderer=Tp, _R.render.webgl.PolygonBatchRenderer=Cp, _R.render.webgl.utils={}, _R.render.webgl.utils.colorDecodeId=fp, _R.render.webgl.utils.colorEncodeId=gp, _R.render.webgl.utils.getBlankImageData=function() {
    var t=document.createElement('canvas').getContext('2d').createImageData(1, 1); return t.data[0]=255, t.data[1]=255, t.data[2]=255, t.data[3]=255, t;
  }, _R.render.webgl.utils.writeLineSegmentToBuffers=function(t, e, i, n, r, s, o, a, l, h) {
    var c=5+a.length; var u=s.length/c; var d=[t[e+0], t[e+1]]; var g=[t[i], t[i+1]]; var f=zt(h, [].concat(d)); var p=zt(h, [].concat(g)); function m(t, e, i) {
      var n=1e4; return Math.round(1500*e)+Math.round(1500*i)*n+t*n*n;
    } function _(t, e, i) {
      var n=Math.sqrt((e[0]-t[0])*(e[0]-t[0])+(e[1]-t[1])*(e[1]-t[1])); var r=[(e[0]-t[0])/n, (e[1]-t[1])/n]; var s=[-r[1], r[0]]; var o=Math.sqrt((i[0]-t[0])*(i[0]-t[0])+(i[1]-t[1])*(i[1]-t[1])); var a=[(i[0]-t[0])/o, (i[1]-t[1])/o]; var l=0===n||0===o?0:Math.acos(_i(a[0]*r[0]+a[1]*r[1], -1, 1)); return a[0]*s[0]+a[1]*s[1]>0?l:2*Math.PI-l;
    } var y=null!==r; var x=0; var v=0; if (null!==n) {
      x=_(f, p, zt(h, [t[n], t[n+1]].concat()));
    } if (y) {
      v=_(p, f, zt(h, [t[r], t[r+1]].concat()));
    }s.push(d[0], d[1], g[0], g[1], m(0, x, v)), s.push.apply(s, _toConsumableArray(a)), s.push(d[0], d[1], g[0], g[1], m(1, x, v)), s.push.apply(s, _toConsumableArray(a)), s.push(d[0], d[1], g[0], g[1], m(2, x, v)), s.push.apply(s, _toConsumableArray(a)), s.push(d[0], d[1], g[0], g[1], m(3, x, v)), s.push.apply(s, _toConsumableArray(a)), o.push(u, u+1, u+2, u+1, u+3, u+2);
  }, _R.render.webgl.utils.writePointFeatureToBuffers=function(t, e, i, n, r, s) {
    var o=3+r; var a=t[e+0]; var l=t[e+1]; var h=cp; h.length=r; for (var _i348=0; _i348<h.length; _i348++)h[_i348]=t[e+2+_i348]; var c=s?s.vertexPosition:0; var u=s?s.indexPosition:0; var d=c/o; return dp(i, c, a, l, 0), h.length&&i.set(h, c+3), c+=o, dp(i, c, a, l, 1), h.length&&i.set(h, c+3), c+=o, dp(i, c, a, l, 2), h.length&&i.set(h, c+3), c+=o, dp(i, c, a, l, 3), h.length&&i.set(h, c+3), c+=o, n[u++]=d, n[u++]=d+1, n[u++]=d+3, n[u++]=d+1, n[u++]=d+2, n[u++]=d+3, up.vertexPosition=c, up.indexPosition=u, up;
  }, _R.render.webgl.utils.writePolygonTrianglesToBuffers=function(t, e, i, n, r) {
    var s=2+r; var o=e; var a=t.slice(o, o+r); o+=r; var l=t[o++]; var h=0; var c=new Array(l-1); for (var _e441=0; _e441<l; _e441++)h+=t[o++], _e441<l-1&&(c[_e441]=h); var u=t.slice(o, o+2*h); var d=Gf(u, c, 2); for (var _t446=0; _t446<d.length; _t446++)n.push(d[_t446]+i.length/s); for (var _t447=0; _t447<u.length; _t447+=2)i.push.apply(i, [u[_t447], u[_t447+1]].concat(_toConsumableArray(a))); return o+2*h;
  }, _R.renderer={}, _R.renderer.Composite=xo, _R.renderer.Layer=ou, _R.renderer.Map=Bs, _R.renderer.canvas={}, _R.renderer.canvas.ImageLayer=cu, _R.renderer.canvas.Layer=hu, _R.renderer.canvas.Layer.canvasPool=au, _R.renderer.canvas.TileLayer=pu, _R.renderer.canvas.VectorImageLayer=Pm, _R.renderer.canvas.VectorLayer=bm, _R.renderer.canvas.VectorTileLayer=Fm, _R.renderer.vector={}, _R.renderer.vector.defaultOrder=Yl, _R.renderer.vector.getSquaredTolerance=Kl, _R.renderer.vector.getTolerance=ql, _R.renderer.vector.renderFeature=Hl, _R.renderer.webgl={}, _R.renderer.webgl.Layer=rg, _R.renderer.webgl.PointsLayer=mp, _R.renderer.webgl.TileLayer=gg, _R.renderer.webgl.TileLayer.Attributes=og, _R.renderer.webgl.TileLayer.Uniforms=sg, _R.renderer.webgl.VectorLayer=Np, _R.renderer.webgl.shaders={}, _R.renderer.webgl.shaders.FILL_FRAGMENT_SHADER=Ip, _R.renderer.webgl.shaders.FILL_VERTEX_SHADER=Pp, _R.renderer.webgl.shaders.POINT_FRAGMENT_SHADER=Ap, _R.renderer.webgl.shaders.POINT_VERTEX_SHADER=Mp, _R.renderer.webgl.shaders.STROKE_FRAGMENT_SHADER=Fp, _R.renderer.webgl.shaders.STROKE_VERTEX_SHADER=Lp, _R.renderer.webgl.shaders.packColor=Rp, _R.reproj={}, _R.reproj.DataTile=gc, _R.reproj.Image=Uc, _R.reproj.Tile=lh, _R.reproj.Triangulation=ah, _R.reproj.calculateSourceExtentResolution=rh, _R.reproj.calculateSourceResolution=nh, _R.reproj.canvasPool=th, _R.reproj.common={}, _R.reproj.common.ERROR_THRESHOLD=oh, _R.reproj.render=sh, _R.resolutionconstraint={}, _R.resolutionconstraint.createMinMaxResolution=ea, _R.resolutionconstraint.createSnapToPower=ta, _R.resolutionconstraint.createSnapToResolutions=Qo, _R.rotationconstraint={}, _R.rotationconstraint.createSnapToN=ra, _R.rotationconstraint.createSnapToZero=sa, _R.rotationconstraint.disable=ia, _R.rotationconstraint.none=na, _R.size={}, _R.size.buffer=sl, _R.size.hasArea=ol, _R.size.scale=al, _R.size.toSize=ll, _R.source={}, _R.source.BingMaps=Nh, _R.source.BingMaps.quadKey=Oh, _R.source.CartoDB=Gh, _R.source.Cluster=dc, _R.source.DataTile=fc, _R.source.GeoTIFF=Pc, _R.source.IIIF=zc, _R.source.Image=Kc, _R.source.Image.ImageSourceEvent=Zc, _R.source.Image.defaultImageLoadFunction=Yc, _R.source.ImageArcGISRest=Hc, _R.source.ImageCanvas=$c, _R.source.ImageMapGuide=Jc, _R.source.ImageStatic=Qc, _R.source.ImageWMS=iu, _R.source.OGCMapTile=Lf, _R.source.OGCVectorTile=Ff, _R.source.OSM=ru, _R.source.OSM.ATTRIBUTION=nu, _R.source.Raster=Lu, _R.source.Raster.Processor=wu, _R.source.Raster.RasterSourceEvent=Cu, _R.source.Raster.newImageData=xu, _R.source.Source=gh, _R.source.Stamen=Ou, _R.source.Tile=Eh, _R.source.Tile.TileSourceEvent=Th, _R.source.TileArcGISRest=Nu, _R.source.TileDebug=Du, _R.source.TileImage=Ah, _R.source.TileJSON=Gu, _R.source.TileWMS=ku, _R.source.UTFGrid=Bu, _R.source.UTFGrid.CustomTile=ju, _R.source.UrlTile=Fh, _R.source.Vector=uc, _R.source.Vector.VectorSourceEvent=cc, _R.source.VectorTile=zu, _R.source.VectorTile.defaultLoadFunction=Uu, _R.source.WMTS=Zu, _R.source.WMTS.optionsFromCapabilities=function(t, e) {
    var i=t.Contents.Layer.find(function(t) {
      return t.Identifier==e.layer;
    }); if (!i) return null; var n=t.Contents.TileMatrixSet; var r; r=i.TileMatrixSetLink.length>1?'projection'in e?i.TileMatrixSetLink.findIndex(function(t) {
      var i=n.find(function(e) {
        return e.Identifier==t.TileMatrixSet;
      }).SupportedCRS; var r=an(i); var s=an(e.projection); return r&&s?fn(r, s):i==e.projection;
    }):i.TileMatrixSetLink.findIndex(function(t) {
      return t.TileMatrixSet==e.matrixSet;
    }):0, r<0&&(r=0); var s=i.TileMatrixSetLink[r].TileMatrixSet; var o=i.TileMatrixSetLink[r].TileMatrixSetLimits; var a=i.Format[0]; 'format'in e&&(a=e.format), r=i.Style.findIndex(function(t) {
      return 'style'in e?t.Title==e.style:t.isDefault;
    }), r<0&&(r=0); var l=i.Style[r].Identifier; var h={}; 'Dimension'in i&&i.Dimension.forEach(function(t, e, i) {
      var n=t.Identifier; var r=t.Default; void 0===r&&(r=t.Value[0]), h[n]=r;
    }); var c=t.Contents.TileMatrixSet.find(function(t) {
      return t.Identifier==s;
    }); var u; var d=c.SupportedCRS; if (d&&(u=an(d)), 'projection'in e) {
      var _t448=an(e.projection); _t448&&(u&&!fn(_t448, u)||(u=_t448));
    } var g=!1; var f='ne'==u.getAxisOrientation().substr(0, 2); var p=c.TileMatrix[0]; var m={MinTileCol: 0, MinTileRow: 0, MaxTileCol: p.MatrixWidth-1, MaxTileRow: p.MatrixHeight-1}; if (o) {
      m=o[o.length-1]; var _t449=c.TileMatrix.find(function(t) {
        return t.Identifier===m.TileMatrix||c.Identifier+':'+t.Identifier===m.TileMatrix;
      }); _t449&&(p=_t449);
    } var _=28e-5*p.ScaleDenominator/u.getMetersPerUnit(); var y=f?[p.TopLeftCorner[1], p.TopLeftCorner[0]]:p.TopLeftCorner; var x=p.TileWidth*_; var v=p.TileHeight*_; var S=c.BoundingBox; S&&f&&(S=[S[1], S[0], S[3], S[2]]); var w=[y[0]+x*m.MinTileCol, y[1]-v*(1+m.MaxTileRow), y[0]+x*(1+m.MaxTileCol), y[1]-v*m.MinTileRow]; if (void 0!==S&&!le(S, w)) {
      var _t450=i.WGS84BoundingBox; var _e442=an('EPSG:4326').getExtent(); if (w=S, _t450)g=_t450[0]===_e442[0]&&_t450[2]===_e442[2]; else {
        var _t451=yn(S, c.SupportedCRS, 'EPSG:4326'); g=_t451[0]-1e-10<=_e442[0]&&_t451[2]+1e-10>=_e442[2];
      }
    } var T=Wu(c, w, o); var E=[]; var C=e.requestEncoding; if (C=void 0!==C?C:'', 'OperationsMetadata'in t&&'GetTile'in t.OperationsMetadata) {
      var _e443=t.OperationsMetadata.GetTile.DCP.HTTP.Get; for (var _t452=0, _i349=_e443.length; _t452<_i349; ++_t452) {
        if (_e443[_t452].Constraint) {
          var _i350=_e443[_t452].Constraint.find(function(t) {
            return 'GetEncoding'==t.name;
          }).AllowedValues.Value; if (''===C&&(C=_i350[0]), 'KVP'!==C) break; _i350.includes('KVP')&&E.push(_e443[_t452].href);
        } else _e443[_t452].href&&(C='KVP', E.push(_e443[_t452].href));
      }
    } return 0===E.length&&(C='REST', i.ResourceURL.forEach(function(t) {
      'tile'===t.resourceType&&(a=t.format, E.push(t.template));
    })), {urls: E, layer: e.layer, matrixSet: s, format: a, projection: u, requestEncoding: C, tileGrid: T, style: l, dimensions: h, wrapX: g, crossOrigin: e.crossOrigin};
  }, _R.source.XYZ=Dh, _R.source.Zoomify=Lc, _R.source.Zoomify.CustomTile=Ic, _R.source.common={}, _R.source.common.DEFAULT_WMS_VERSION='1.3.0', _R.source.ogcTileUtil={}, _R.source.ogcTileUtil.getMapTileUrlTemplate=Rf, _R.source.ogcTileUtil.getTileSetInfo=If, _R.source.ogcTileUtil.getVectorTileUrlTemplate=bf, _R.source.sourcesFromTileGrid=function(t, e) {
    var i=new yl(32); var n=t.getExtent(); return function(r, s) {
      i.expireCache(), n&&(r=Ae(n, r)); var o=t.getZForResolution(s); var a=[]; return t.forEachTileCoord(r, o, function(t) {
        var n=t.toString(); if (!i.containsKey(n)) {
          var _r243=e(t); i.set(n, _r243);
        }a.push(i.get(n));
      }), a;
    };
  }, _R.source.wms={}, _R.source.wms.DEFAULT_VERSION=tu, _R.sphere={}, _R.sphere.DEFAULT_RADIUS=Wi, _R.sphere.getArea=function t(e, i) {
    var n=(i=i||{}).radius||Wi; var r=i.projection||'EPSG:3857'; var s=e.getType(); 'GeometryCollection'!==s&&(e=e.clone().transform(r, 'EPSG:4326')); var o; var a; var l; var h; var c; var u; var d=0; switch (s) {
      case 'Point': case 'MultiPoint': case 'LineString': case 'MultiLineString': case 'LinearRing': break; case 'Polygon': for (o=e.getCoordinates(), d=Math.abs(Ki(o[0], n)), l=1, h=o.length; l<h; ++l)d-=Math.abs(Ki(o[l], n)); break; case 'MultiPolygon': for (o=e.getCoordinates(), l=0, h=o.length; l<h; ++l) for (a=o[l], d+=Math.abs(Ki(a[0], n)), c=1, u=a.length; c<u; ++c)d-=Math.abs(Ki(a[c], n)); break; case 'GeometryCollection': {var _n307=e.getGeometries(); for (l=0, h=_n307.length; l<h; ++l)d+=t(_n307[l], i); break;} default: throw new Error('Unsupported geometry type: '+s);
    } return d;
  }, _R.sphere.getDistance=Zi, _R.sphere.getLength=function t(e, i) {
    var n=(i=i||{}).radius||Wi; var r=i.projection||'EPSG:3857'; var s=e.getType(); 'GeometryCollection'!==s&&(e=e.clone().transform(r, 'EPSG:4326')); var o; var a; var l; var h; var c; var u; var d=0; switch (s) {
      case 'Point': case 'MultiPoint': break; case 'LineString': case 'LinearRing': o=e.getCoordinates(), d=Yi(o, n); break; case 'MultiLineString': case 'Polygon': for (o=e.getCoordinates(), l=0, h=o.length; l<h; ++l)d+=Yi(o[l], n); break; case 'MultiPolygon': for (o=e.getCoordinates(), l=0, h=o.length; l<h; ++l) for (a=o[l], c=0, u=a.length; c<u; ++c)d+=Yi(a[c], n); break; case 'GeometryCollection': {var _n308=e.getGeometries(); for (l=0, h=_n308.length; l<h; ++l)d+=t(_n308[l], i); break;} default: throw new Error('Unsupported geometry type: '+s);
    } return d;
  }, _R.sphere.offset=qi, _R.string={}, _R.string.compareVersions=Li, _R.string.padNumber=Ii, _R.structs={}, _R.structs.LRUCache=yl, _R.structs.LinkedList=Tf, _R.structs.PriorityQueue=Uo, _R.structs.PriorityQueue.DROP=zo, _R.structs.RBush=ic, _R.style={}, _R.style.Circle=$g, _R.style.Fill=Qg, _R.style.Icon=of, _R.style.IconImage=rf, _R.style.IconImage.get=nf, _R.style.IconImageCache=xs, _R.style.IconImageCache.shared=vs, _R.style.Image=Yg, _R.style.RegularShape=qg, _R.style.Stroke=lf, _R.style.Style=pf, _R.style.Style.createDefaultStyle=df, _R.style.Style.createEditingStyle=gf, _R.style.Style.toFunction=cf, _R.style.Text=_f, _R.style.expressions={}, _R.style.expressions.Operators=Sg, _R.style.expressions.PALETTE_TEXTURE_ARRAY=Bg, _R.style.expressions.arrayToGlsl=Cg, _R.style.expressions.colorToGlsl=Rg, _R.style.expressions.expressionToGlsl=Ig, _R.style.expressions.getStringNumberEquivalent=bg, _R.style.expressions.getValueType=wg, _R.style.expressions.isTypeUnique=Tg, _R.style.expressions.numberToGlsl=Eg, _R.style.expressions.stringToGlsl=Pg, _R.style.expressions.uniformNameForVariable=jg, _R.style.flat={}, _R.style.flat.toStyle=yf, _R.tilecoord={}, _R.tilecoord.createOrUpdate=xl, _R.tilecoord.fromKey=Tl, _R.tilecoord.getCacheKeyForTileKey=wl, _R.tilecoord.getKey=Sl, _R.tilecoord.getKeyZXY=vl, _R.tilecoord.hash=El, _R.tilecoord.withinExtentAndZ=Cl, _R.tilegrid={}, _R.tilegrid.TileGrid=ph, _R.tilegrid.WMTS=Vu, _R.tilegrid.WMTS.createFromCapabilitiesMatrixSet=Wu, _R.tilegrid.common={}, _R.tilegrid.common.DEFAULT_MAX_ZOOM=42, _R.tilegrid.common.DEFAULT_TILE_SIZE=Ko, _R.tilegrid.createForExtent=yh, _R.tilegrid.createForProjection=Sh, _R.tilegrid.createXYZ=xh, _R.tilegrid.extentFromProjection=wh, _R.tilegrid.getForProjection=mh, _R.tilegrid.wrapX=_h, _R.tileurlfunction={}, _R.tileurlfunction.createFromTemplate=Ch, _R.tileurlfunction.createFromTemplates=Rh, _R.tileurlfunction.createFromTileUrlFunctions=bh, _R.tileurlfunction.expandUrl=Ih, _R.tileurlfunction.nullTileUrlFunction=Ph, _R.transform={}, _R.transform.apply=zt, _R.transform.compose=Zt, _R.transform.composeCssTransform=function(t, e, i, n, r, s, o) {
    return Ht(Zt([1, 0, 0, 1, 0, 0], t, e, i, n, r, s, o));
  }, _R.transform.create=Dt, _R.transform.determinant=Kt, _R.transform.invert=function(t) {
    return Yt(t, t);
  }, _R.transform.makeInverse=Yt, _R.transform.makeScale=Vt, _R.transform.multiply=kt, _R.transform.reset=Gt, _R.transform.rotate=Ut, _R.transform.scale=Xt, _R.transform.set=jt, _R.transform.setFromArray=Bt, _R.transform.toString=Ht, _R.transform.translate=Wt, _R.uri={}, _R.uri.appendParams=qc, _R.util={}, _R.util.VERSION='7.2.2', _R.util['abstract']=z, _R.util.getUid=X, _R.vec={}, _R.vec.mat4={}, _R.vec.mat4.create=Ad, _R.vec.mat4.fromTransform=Od, _R.webgl={}, _R.webgl.ARRAY_BUFFER=Yu, _R.webgl.Buffer=Id, _R.webgl.Buffer.getArrayClassForType=Pd, _R.webgl.DYNAMIC_DRAW=Hu, _R.webgl.ELEMENT_ARRAY_BUFFER=Ku, _R.webgl.FLOAT=$u, _R.webgl.Helper=qd, _R.webgl.Helper.computeAttributesStride=Yd, _R.webgl.PaletteTexture=Hd, _R.webgl.PostProcessingPass=Md, _R.webgl.RenderTarget=Jd, _R.webgl.STATIC_DRAW=qu, _R.webgl.STREAM_DRAW=35040, _R.webgl.ShaderBuilder={}, _R.webgl.ShaderBuilder.ShaderBuilder=Vg, _R.webgl.ShaderBuilder.parseLiteralStyle=Wg, _R.webgl.TileTexture=ig, _R.webgl.UNSIGNED_BYTE=5121, _R.webgl.UNSIGNED_INT=5125, _R.webgl.UNSIGNED_SHORT=5123, _R.webgl.getContext=Qu, _R.webgl.getSupportedExtensions=function() {
    if (!td) {
      var _t453=Qu(document.createElement('canvas')); _t453&&(td=_t453.getSupportedExtensions());
    } return td;
  }, _R.xml={}, _R.xml.OBJECT_PROPERTY_NODE_FACTORY=md, _R.xml.XML_SCHEMA_INSTANCE_URI=ed, _R.xml.createElementNS=id, _R.xml.getAllTextContent=nd, _R.xml.getAllTextContent_=rd, _R.xml.getAttributeNS=od, _R.xml.getDocument=Rd, _R.xml.getXMLSerializer=Cd, _R.xml.isDocument=sd, _R.xml.makeArrayExtender=ld, _R.xml.makeArrayPusher=hd, _R.xml.makeArraySerializer=fd, _R.xml.makeChildAppender=gd, _R.xml.makeObjectPropertyPusher=ud, _R.xml.makeObjectPropertySetter=dd, _R.xml.makeReplacer=cd, _R.xml.makeSequence=_d, _R.xml.makeSimpleNodeFactory=pd, _R.xml.makeStructureNS=yd, _R.xml.parse=ad, _R.xml.parseNode=xd, _R.xml.pushParseAndPop=vd, _R.xml.pushSerializeAndPop=wd, _R.xml.registerDocument=function(t) {
    Ed=t;
  }, _R.xml.registerXMLSerializer=function(t) {
    Td=t;
  }, _R.xml.serialize=Sd, _R;
}();
